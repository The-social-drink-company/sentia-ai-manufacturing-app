import{r as y,ab as e}from"./vendor-C1LNgw1J.js";import{B as h,C as n,a as i,b as l,c,d as o}from"./index-N-0KO8U4.js";import{S as N,a as b,b as k,c as S,d as x}from"./select-pDxtZwnf.js";import{R as m,L as C,C as u,X as p,Y as j,T as g,a as v,A as R,B as $,b as E}from"./charts-1s3mMhcR.js";import"./data-layer-rESbPKUZ.js";import"./radix-CSh4aNe1.js";import"./router-BEPb3H3e.js";const M={"30d":{revenue:"$2.4M",pipeline:"$1.8M",grossMargin:"42%",churn:"3.1%"},"90d":{revenue:"$6.9M",pipeline:"$5.2M",grossMargin:"40%",churn:"4.2%"},"365d":{revenue:"$24.7M",pipeline:"$18.4M",grossMargin:"38%",churn:"5.6%"}},L={"30d":[{month:"Week 1",recurring:52e4,services:18e4,expansion:95e3},{month:"Week 2",recurring:545e3,services:192e3,expansion:102e3},{month:"Week 3",recurring:571e3,services:185e3,expansion:11e4},{month:"Week 4",recurring:592e3,services:194e3,expansion:123e3}],"90d":[{month:"Mar",recurring:148e4,services:52e4,expansion:26e4},{month:"Apr",recurring:153e4,services:548e3,expansion:282e3},{month:"May",recurring:1585e3,services:572e3,expansion:305e3}],"365d":[{month:"Q1",recurring:43e5,services:161e4,expansion:785e3},{month:"Q2",recurring:456e4,services:1695e3,expansion:84e4},{month:"Q3",recurring:472e4,services:175e4,expansion:905e3},{month:"Q4",recurring:488e4,services:182e4,expansion:98e4}]},K=[{stage:"Qualification",value:142e4},{stage:"Discovery",value:98e4},{stage:"Proposal",value:76e4},{stage:"Negotiation",value:42e4},{stage:"Closed Won",value:31e4}],W=[{cohort:"2024-Q3",customers:420,revenueRetained:"92%",expansion:"$185K",health:"Stable"},{cohort:"2024-Q4",customers:508,revenueRetained:"89%",expansion:"$241K",health:"Watch"},{cohort:"2025-Q1",customers:562,revenueRetained:"94%",expansion:"$318K",health:"Strong"}],G=()=>{const[r,t]=y.useState("30d"),a=M[r],f=L[r];return e.jsxs("section",{className:"space-y-6",children:[e.jsxs("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold tracking-tight",children:"Analytics overview"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Combined commercial, financial, and retention metrics to guide the weekly business review."})]}),e.jsxs(h,{variant:"outline",children:["Updated ",new Date().toLocaleDateString()]})]}),e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsx(l,{children:"Headline KPIs"}),e.jsx(c,{children:"Select a timeframe to compare revenue and retention performance."})]}),e.jsxs(o,{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(A,{label:"Time horizon",children:e.jsxs(N,{value:r,onValueChange:t,children:[e.jsx(b,{children:e.jsx(k,{})}),e.jsxs(S,{children:[e.jsx(x,{value:"30d",children:"Last 30 days"}),e.jsx(x,{value:"90d",children:"Last 90 days"}),e.jsx(x,{value:"365d",children:"Trailing 12 months"})]})]})}),e.jsx(d,{label:"Recognised revenue",value:a.revenue,helper:"GAAP compliant"}),e.jsx(d,{label:"Pipeline coverage",value:a.pipeline,helper:"Weighted probability"}),e.jsx(d,{label:"Gross margin",value:a.grossMargin,helper:"Contribution after COGS"}),e.jsx(d,{label:"Logo churn",value:a.churn,helper:"Monthly blended"})]})]}),e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsx(l,{children:"Revenue mix"}),e.jsx(c,{children:"Recurring vs. services revenue with expansion uplift."})]}),e.jsx(o,{className:"h-80",children:e.jsx(m,{width:"100%",height:"100%",children:e.jsxs(C,{data:f,children:[e.jsx(u,{strokeDasharray:"3 3"}),e.jsx(p,{dataKey:"month",tickLine:!1,axisLine:!1}),e.jsx(j,{tickFormatter:s=>`$${Math.round(s/1e3)}k`}),e.jsx(g,{formatter:s=>`$${s.toLocaleString()}`}),e.jsx(v,{type:"monotone",dataKey:"recurring",stroke:"#2563eb",strokeWidth:3,dot:!0}),e.jsx(v,{type:"monotone",dataKey:"services",stroke:"#16a34a",strokeWidth:3,dot:!0}),e.jsx(R,{type:"monotone",dataKey:"expansion",stroke:"#f59e0b",fill:"#f59e0b22",strokeWidth:2})]})})})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsx(l,{children:"Pipeline velocity"}),e.jsx(c,{children:"Current quarter pipeline value by stage."})]}),e.jsx(o,{className:"h-72",children:e.jsx(m,{width:"100%",height:"100%",children:e.jsxs($,{data:K,children:[e.jsx(u,{strokeDasharray:"3 3",vertical:!1}),e.jsx(p,{dataKey:"stage",tickLine:!1,axisLine:!1}),e.jsx(j,{tickFormatter:s=>`$${Math.round(s/1e3)}k`}),e.jsx(g,{formatter:s=>`$${s.toLocaleString()}`}),e.jsx(E,{dataKey:"value",fill:"#9333ea",radius:[6,6,0,0]})]})})})]}),e.jsxs(n,{children:[e.jsxs(i,{children:[e.jsx(l,{children:"Cohort retention"}),e.jsx(c,{children:"Revenue retained and expansion per customer cohort."})]}),e.jsx(o,{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-border text-sm",children:[e.jsx("thead",{className:"bg-muted/40 text-left text-xs uppercase tracking-wide text-muted-foreground",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 font-medium",children:"Cohort"}),e.jsx("th",{className:"px-4 py-2 font-medium",children:"Customers"}),e.jsx("th",{className:"px-4 py-2 font-medium",children:"Revenue retained"}),e.jsx("th",{className:"px-4 py-2 font-medium",children:"Expansion"}),e.jsx("th",{className:"px-4 py-2 font-medium",children:"Health"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:W.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 font-medium text-foreground",children:s.cohort}),e.jsx("td",{className:"px-4 py-3",children:s.customers.toLocaleString()}),e.jsx("td",{className:"px-4 py-3",children:s.revenueRetained}),e.jsx("td",{className:"px-4 py-3",children:s.expansion}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(h,{variant:s.health==="Strong"?"secondary":s.health==="Stable"?"outline":"destructive",children:s.health})})]},s.cohort))})]})})]})]})]})},A=({label:r,children:t})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:r}),t]}),d=({label:r,value:t,helper:a})=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:r}),e.jsx("p",{className:"text-lg font-semibold text-foreground",children:t}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a})]});export{G as default};
