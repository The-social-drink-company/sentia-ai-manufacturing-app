import{j as e,r as t}from"./chunk-B9uBa7JB.js";import{d as r}from"./index-D8-FZsAg.js";import"./chunk-q-XdqQu1.js";import"./chunk-DiTG-A4l.js";import"./chunk-zfoVI_BJ.js";import"./chunk-D1RFofiz.js";import"./chunk-Wtzm-LW2.js";import"./chunk-B0LCvgW6.js";import"./chunk-Doi-WXVS.js";import"./chunk-Dozjk7Op.js";class i extends t.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){r.error(`Widget error in ${this.props.widgetName}:`,e,t)}render(){return this.state.hasError?e.jsxs("div",{style:{padding:"2rem",backgroundColor:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb",minHeight:"200px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsxs("div",{style:{fontSize:"1.125rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[this.props.widgetName||"Widget"," Loading..."]}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#6b7280",textAlign:"center"},children:"Connecting to real-time data sources"}),e.jsx("div",{style:{marginTop:"1rem",width:"40px",height:"40px",border:"3px solid #e5e7eb",borderTopColor:"#3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),e.jsx("style",{children:"\n            @keyframes spin {\n              0% { transform: rotate(0deg); }\n              100% { transform: rotate(360deg); }\n            }\n          "})]}):this.props.children}}const s=({name:t})=>e.jsxs("div",{style:{padding:"2rem",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",minHeight:"200px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx("div",{style:{width:"40px",height:"40px",border:"3px solid #e5e7eb",borderTopColor:"#3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"1rem"}}),e.jsxs("div",{style:{color:"#6b7280",fontSize:"0.875rem"},children:["Loading ",t,"..."]})]}),n=({name:t,message:r})=>e.jsxs("div",{style:{padding:"2rem",backgroundColor:"#fafafa",borderRadius:"8px",border:"1px dashed #d1d5db",minHeight:"200px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx("svg",{style:{width:"48px",height:"48px",marginBottom:"1rem",color:"#9ca3af"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsxs("div",{style:{fontSize:"1rem",fontWeight:"500",color:"#6b7280",marginBottom:"0.5rem"},children:[t," - No Data Available"]}),e.jsx("div",{style:{fontSize:"0.875rem",color:"#9ca3af",textAlign:"center",maxWidth:"300px"},children:r||"Waiting for real-time data from external sources"})]}),a=({children:t,widgetName:r,loading:a=!1,hasData:o=!0,error:l=null,noDataMessage:d=null})=>a?e.jsx(s,{name:r}):o||l?l?e.jsx(n,{name:r,message:"Unable to connect to data source"}):e.jsx(i,{widgetName:r,children:t}):e.jsx(n,{name:r,message:d}),o=()=>{const[i,s]=t.useState(null),[n,o]=t.useState(!0);t.useEffect(()=>{(async()=>{try{const e=await fetch("/api/working-capital/current");if(e.ok){const t=await e.json();s(t)}}catch(e){r.log("Working capital data unavailable")}finally{o(!1)}})()},[]);const l=i||{arDays:0,apDays:0,cashCycle:0,workingCapital:0};return e.jsx(a,{widgetName:"Working Capital",loading:n,hasData:!n,children:e.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"white",borderRadius:"8px"},children:[e.jsx("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem"},children:"Working Capital Metrics"}),e.jsxs("div",{style:{display:"grid",gap:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#6b7280"},children:"AR Days:"}),e.jsx("span",{style:{fontWeight:"600"},children:l.arDays||0})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#6b7280"},children:"AP Days:"}),e.jsx("span",{style:{fontWeight:"600"},children:l.apDays||0})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#6b7280"},children:"Cash Cycle:"}),e.jsxs("span",{style:{fontWeight:"600"},children:[l.cashCycle||0," days"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"0.75rem",borderTop:"1px solid #e5e7eb"},children:[e.jsx("span",{style:{color:"#6b7280"},children:"Working Capital:"}),e.jsxs("span",{style:{fontWeight:"bold",fontSize:"1.125rem"},children:["$",l.workingCapital||0]})]})]})]})})};export{o as default};
