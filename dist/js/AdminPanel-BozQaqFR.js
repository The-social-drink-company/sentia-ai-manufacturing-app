import{Y as e,u as s,r as t,j as a,F as r,ao as i,aB as n,ai as l,W as d,aC as c,ak as o,aD as m,aE as x,a2 as u,aF as p,an as h,t as g,aG as y,aH as b}from"./chunk-CXAPUP0Z.js";import{l as f,d as N}from"./index-VRpNwfdG.js";import{bn as j}from"./chunk--CRELh3m.js";import"./chunk-CwR8AQSU.js";import"./chunk-DJCy_cXY.js";import"./chunk-VeJKilaK.js";import"./chunk-DELSdgG9.js";import"./chunk-Dozjk7Op.js";import"./chunk-Kk1dlRB6.js";import"./chunk-l5C0fGLm.js";const v={SUPER_ADMIN:"super_admin",SYSTEM_ADMIN:"system_admin",USER_ADMIN:"user_admin",MANAGER:"manager",OPERATOR:"operator",VIEWER:"viewer",USER:"user"},S={SYSTEM_CONFIG:"system:config",API_KEYS_MANAGE:"system:api_keys",SYSTEM_LOGS:"system:logs",SYSTEM_MONITORING:"system:monitoring",SYSTEM_BACKUP:"system:backup",SYSTEM_SECURITY:"system:security",SYSTEM_INTEGRATIONS:"system:integrations",USERS_VIEW:"users:view",USERS_CREATE:"users:create",USERS_EDIT:"users:edit",USERS_DELETE:"users:delete",USERS_INVITE:"users:invite",USERS_APPROVE:"users:approve",USERS_ROLES:"users:roles",DATA_IMPORT:"data:import",DATA_EXPORT:"data:export",REPORTS_VIEW:"reports:view",REPORTS_CREATE:"reports:create",ANALYTICS_VIEW:"analytics:view",ANALYTICS_ADVANCED:"analytics:advanced",DASHBOARD_VIEW:"dashboard:view",DASHBOARD_EDIT:"dashboard:edit",DASHBOARD_ADMIN:"dashboard:admin",PRODUCTION_VIEW:"production:view",PRODUCTION_MANAGE:"production:manage",INVENTORY_VIEW:"inventory:view",INVENTORY_MANAGE:"inventory:manage",QUALITY_VIEW:"quality:view",QUALITY_MANAGE:"quality:manage"},E={[v.SUPER_ADMIN]:[...Object.values(S)],[v.SYSTEM_ADMIN]:[S.SYSTEM_CONFIG,S.API_KEYS_MANAGE,S.SYSTEM_LOGS,S.SYSTEM_MONITORING,S.SYSTEM_BACKUP,S.SYSTEM_SECURITY,S.SYSTEM_INTEGRATIONS,S.DASHBOARD_VIEW,S.REPORTS_VIEW,S.ANALYTICS_VIEW],[v.USER_ADMIN]:[S.USERS_VIEW,S.USERS_CREATE,S.USERS_EDIT,S.USERS_DELETE,S.USERS_INVITE,S.USERS_APPROVE,S.USERS_ROLES,S.DASHBOARD_VIEW,S.REPORTS_VIEW,S.ANALYTICS_VIEW],[v.MANAGER]:[S.DATA_IMPORT,S.DATA_EXPORT,S.REPORTS_VIEW,S.REPORTS_CREATE,S.ANALYTICS_VIEW,S.ANALYTICS_ADVANCED,S.DASHBOARD_VIEW,S.DASHBOARD_EDIT,S.PRODUCTION_VIEW,S.PRODUCTION_MANAGE,S.INVENTORY_VIEW,S.INVENTORY_MANAGE,S.QUALITY_VIEW,S.QUALITY_MANAGE,S.USERS_VIEW],[v.OPERATOR]:[S.PRODUCTION_VIEW,S.INVENTORY_VIEW,S.QUALITY_VIEW,S.DASHBOARD_VIEW,S.REPORTS_VIEW,S.ANALYTICS_VIEW],[v.VIEWER]:[S.DASHBOARD_VIEW,S.REPORTS_VIEW,S.ANALYTICS_VIEW,S.PRODUCTION_VIEW,S.INVENTORY_VIEW,S.QUALITY_VIEW],[v.USER]:[S.DASHBOARD_VIEW]};function A(e,s){if(!e||!s)return!1;return(E[e]||[]).includes(s)}const w=()=>{const{getToken:c,isLoaded:o}=e(),{user:m,isLoaded:x}=s(),[u,p]=t.useState("users"),[h,g]=t.useState([]),[y,b]=t.useState([]),[f,N]=t.useState(!0),[j,E]=t.useState(null),[w,I]=t.useState(""),[_,R]=t.useState("user"),[T,O]=t.useState(!1),k=m?.publicMetadata?.role,M=[{id:"users",name:"Users",icon:i,permission:S.USERS_VIEW},{id:"invitations",name:"Invitations",icon:n,permission:S.USERS_INVITE},{id:"roles",name:"Roles & Permissions",icon:l,permission:S.USERS_ROLES}];t.useEffect(()=>{o&&x&&m&&(P(),D())},[o,x,m]);const P=async()=>{try{N(!0);const e=await c(),s=await fetch("/api/admin/users",{headers:{Authorization:`Bearer ${e}`}});if(s.ok){const e=await s.json();g(e.users||[])}}catch(e){E("Failed to fetch users")}finally{N(!1)}},D=async()=>{try{const e=await c(),s=await fetch("/api/admin/invitations",{headers:{Authorization:`Bearer ${e}`}});if(s.ok){const e=await s.json();b(e.invitations||[])}}catch(e){}},C=async e=>{if(e.preventDefault(),A(k,S.USERS_INVITE))try{O(!0);const e=await c(),s=await fetch("/api/admin/invite",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({email:w,role:_})});if(s.ok)I(""),R("user"),D(),E(null);else{const e=await s.json();E(e.message||"Failed to send invitation")}}catch(s){E("Failed to send invitation")}finally{O(!1)}else E("You do not have permission to send invitations")},U=()=>a.jsxs("div",{className:"space-y-6",children:[A(k,S.USERS_INVITE)&&a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Send User Invitation"}),a.jsxs("form",{onSubmit:C,className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),a.jsx("input",{type:"email",value:w,onChange:e=>I(e.target.value),placeholder:"user@company.com",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),a.jsxs("select",{value:_,onChange:e=>R(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"user",children:"User"}),a.jsx("option",{value:"operator",children:"Operator"}),a.jsx("option",{value:"manager",children:"Manager"}),k===v.SUPER_ADMIN&&a.jsxs(a.Fragment,{children:[a.jsx("option",{value:"user_admin",children:"User Admin"}),a.jsx("option",{value:"system_admin",children:"System Admin"})]})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsx("button",{type:"submit",disabled:T,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:T?"Sending...":"Send Invitation"})})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["All Users (",h.length,")"]})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Last Login"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:h.map(e=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:a.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[e.firstName?.[0],e.lastName?.[0]]})}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[e.firstName," ",e.lastName]}),a.jsx("div",{className:"text-sm text-gray-500",children:e.emailAddresses?.[0]?.emailAddress})]})]})}),a.jsx("td",{className:"px-6 py-4",children:A(k,S.USERS_ROLES)?a.jsxs("select",{value:e.publicMetadata?.role||"user",onChange:s=>(async(e,s)=>{if(A(k,S.USERS_ROLES))try{const t=await c(),a=await fetch(`/api/admin/users/${e}/role`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({role:s})});if(a.ok)P(),E(null);else{const e=await a.json();E(e.message||"Failed to update user role")}}catch(t){E("Failed to update user role")}else E("You do not have permission to modify user roles")})(e.id,s.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[a.jsx("option",{value:"user",children:"User"}),a.jsx("option",{value:"operator",children:"Operator"}),a.jsx("option",{value:"manager",children:"Manager"}),k===v.SUPER_ADMIN&&a.jsxs(a.Fragment,{children:[a.jsx("option",{value:"user_admin",children:"User Admin"}),a.jsx("option",{value:"system_admin",children:"System Admin"})]})]}):a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.publicMetadata?.role||"user"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(e.publicMetadata?.approved?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.publicMetadata?.approved?"Active":"Pending"})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.lastSignInAt?new Date(e.lastSignInAt).toLocaleDateString():"Never"}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"flex space-x-2",children:!e.publicMetadata?.approved&&A(k,S.USERS_APPROVE)&&a.jsx("button",{onClick:()=>(async e=>{if(A(k,S.USERS_APPROVE))try{const s=await c();(await fetch(`/api/admin/users/${e}/approve`,{method:"POST",headers:{Authorization:`Bearer ${s}`}})).ok&&(P(),E(null))}catch(s){E("Failed to approve user")}else E("You do not have permission to approve users")})(e.id),className:"text-green-600 hover:text-green-800",title:"Approve User",children:a.jsx(d,{className:"h-5 w-5"})})})})]},e.id))})]})})]})]});return f?a.jsx("div",{className:"flex items-center justify-center p-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"User Administration"}),a.jsx("p",{className:"text-gray-600",children:"Manage users, invitations, and role permissions"})]}),j&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx(r,{className:"h-5 w-5 text-red-400"}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-700",children:j})})]})}),a.jsx("div",{className:"mb-6",children:a.jsx("nav",{className:"flex space-x-8 border-b border-gray-200",children:M.filter(e=>A(k,e.permission)).map(e=>{const s=e.icon;return a.jsxs("button",{onClick:()=>p(e.id),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm "+(u===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[a.jsx(s,{className:"h-5 w-5"}),a.jsx("span",{children:e.name})]},e.id)})})}),(()=>{switch(u){case"users":default:return U();case"invitations":return a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Pending Invitations (",y.length,")"]})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sent"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:y.map(e=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:e.email}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.role})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Pending"})})]},e.id))})]})})]});case"roles":return a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Role Definitions"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries(v).map(([e,s])=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:s.replace("_"," ").toUpperCase()}),a.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["super_admin"===s&&"Full system access and control","system_admin"===s&&"System configuration and API management","user_admin"===s&&"User management and permissions","manager"===s&&"Business operations and reporting","operator"===s&&"Manufacturing operations access","viewer"===s&&"Read-only dashboard access","user"===s&&"Basic dashboard access"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Users with this role: ",h.filter(e=>e.publicMetadata?.role===s).length]})]},s))})]})})}})()]})},I=()=>{const[e,s]=t.useState({}),[i,n]=t.useState({}),[l,x]=t.useState({}),[u,p]=t.useState(!0),[h,g]=t.useState({});t.useEffect(()=>{y(),b()},[]);const y=async()=>{try{p(!0);const e=await fetch("/api/admin/api-keys");if(e.ok){const t=await e.json();s(t)}}catch(e){f("Failed to load API keys",{component:"ApiKeyManagement"},e)}finally{p(!1)}},b=async()=>{try{const e=await fetch("/api/admin/api-keys/status");if(e.ok){const s=await e.json();x(s)}}catch(e){f("Failed to check connection status",{component:"ApiKeyManagement"},e)}},N=async(e,t,a)=>{try{g({...h,[`${e}_${t}`]:!0});(await fetch("/api/admin/api-keys",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:e,key:t,value:a})})).ok&&(s(s=>({...s,[e]:{...s[e],[t]:a}})),setTimeout(b,1e3))}catch(r){f("Failed to save API key",{component:"ApiKeyManagement",serviceId:e,fieldKey:t},r)}finally{g(s=>({...s,[`${e}_${t}`]:!1}))}},j=e=>{switch(l[e]){case"connected":return a.jsx(d,{className:"h-5 w-5 text-green-500"});case"error":return a.jsx(m,{className:"h-5 w-5 text-red-500"});case"warning":return a.jsx(r,{className:"h-5 w-5 text-yellow-500"});default:return a.jsx("div",{className:"h-5 w-5 rounded-full bg-gray-300"})}},v=(s,t)=>{const r=e[s]||{};return a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-2xl",children:t.icon}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t.name}),a.jsx("p",{className:"text-sm text-gray-500",children:t.description})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[j(s),a.jsx("span",{className:"text-sm text-gray-600 capitalize",children:l[s]||"Not configured"})]})]}),a.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:t.capabilities.map(e=>a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e},e))})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"space-y-4",children:t.fields.map(e=>{const t=r[e.key]||"",l=i[`${s}_${e.key}`],d=h[`${s}_${e.key}`];return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.label,e.required&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),a.jsxs("div",{className:"relative",children:["select"===e.type?a.jsxs("select",{value:t,onChange:t=>N(s,e.key,t.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",disabled:d,children:[a.jsxs("option",{value:"",children:["Select ",e.label]}),e.options?.map(e=>a.jsx("option",{value:e,children:e},e))]}):a.jsx("input",{type:"password"!==e.type||l?"text":"password",value:t,onChange:t=>N(s,e.key,t.target.value),placeholder:e.default||`Enter ${e.label}`,className:"block w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",disabled:d}),"password"===e.type&&a.jsx("button",{type:"button",onClick:()=>((e,s)=>{const t=`${e}_${s}`;n(e=>({...e,[t]:!e[t]}))})(s,e.key),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:l?a.jsx(c,{className:"h-4 w-4 text-gray-400"}):a.jsx(o,{className:"h-4 w-4 text-gray-400"})}),d&&a.jsx("div",{className:"absolute inset-y-0 right-8 flex items-center",children:a.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-500 border-t-transparent rounded-full"})})]})]},e.key)})}),a.jsxs("div",{className:"mt-6 flex justify-between",children:[a.jsxs("a",{href:t.documentation,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:["View Documentation",a.jsx("svg",{className:"ml-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-2M7 7l10 10M17 7v10"})})]}),a.jsx("button",{onClick:()=>(async e=>{try{g({...h,[`${e}_test`]:!0});const s=await fetch(`/api/admin/api-keys/test/${e}`,{method:"POST"}),t=await s.json();x(s=>({...s,[e]:"success"===t.status?"connected":"error"}))}catch(s){x(s=>({...s,[e]:"error"}))}finally{g(s=>({...s,[`${e}_test`]:!1}))}})(s),disabled:h[`${s}_test`],className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:h[`${s}_test`]?"Testing...":"Test Connection"})]})]})]},s)},S=Object.entries({xero:{name:"Xero Accounting",category:"Financial",description:"Complete accounting and financial management",fields:[{key:"XERO_CLIENT_ID",label:"Client ID",type:"text",required:!0},{key:"XERO_CLIENT_SECRET",label:"Client Secret",type:"password",required:!0},{key:"XERO_REDIRECT_URI",label:"Redirect URI",type:"url",required:!0},{key:"XERO_TENANT_ID",label:"Tenant ID",type:"text",required:!1}],capabilities:["invoicing","payments","reporting","tax-calculations","bank-reconciliation"],icon:"💰",documentation:"https://developer.xero.com/documentation/"},shopify:{name:"Shopify Multi-Store",category:"E-commerce",description:"Multi-store Shopify integration for order and inventory management",fields:[{key:"SHOPIFY_API_KEY",label:"API Key",type:"password",required:!0},{key:"SHOPIFY_SECRET_KEY",label:"Secret Key",type:"password",required:!0},{key:"SHOPIFY_SHOP_DOMAIN",label:"Shop Domain",type:"text",required:!0},{key:"SHOPIFY_ACCESS_TOKEN",label:"Access Token",type:"password",required:!0}],capabilities:["product-management","order-processing","inventory-sync","customer-data"],icon:"🛒",documentation:"https://shopify.dev/docs/api"},amazon:{name:"Amazon Selling Partner API",category:"E-commerce",description:"Amazon marketplace integration for all regions",fields:[{key:"AMAZON_SP_API_ACCESS_KEY",label:"Access Key",type:"password",required:!0},{key:"AMAZON_SP_API_SECRET_KEY",label:"Secret Key",type:"password",required:!0},{key:"AMAZON_SP_API_ROLE_ARN",label:"Role ARN",type:"text",required:!0},{key:"AMAZON_SP_API_CLIENT_ID",label:"Client ID",type:"text",required:!0},{key:"AMAZON_SP_API_CLIENT_SECRET",label:"Client Secret",type:"password",required:!0},{key:"AMAZON_SP_API_REFRESH_TOKEN",label:"Refresh Token",type:"password",required:!0},{key:"AMAZON_MARKETPLACE_IDS",label:"Marketplace IDs (comma-separated)",type:"text",required:!0}],capabilities:["inventory-management","order-processing","fba-operations","advertising","analytics"],icon:"📦",documentation:"https://developer-docs.amazon.com/sp-api/"},unleashed:{name:"Unleashed Inventory",category:"Inventory",description:"Advanced inventory and warehouse management",fields:[{key:"UNLEASHED_API_ID",label:"API ID",type:"text",required:!0},{key:"UNLEASHED_API_KEY",label:"API Key",type:"password",required:!0},{key:"UNLEASHED_BASE_URL",label:"Base URL",type:"url",required:!0}],capabilities:["inventory-tracking","warehouse-management","purchase-orders","stock-levels"],icon:"📊",documentation:"https://apidocs.unleashedsoftware.com/"},microsoft:{name:"Microsoft Graph API",category:"Productivity",description:"Excel, SharePoint, and Office 365 integration",fields:[{key:"MICROSOFT_CLIENT_ID",label:"Client ID",type:"text",required:!0},{key:"MICROSOFT_CLIENT_SECRET",label:"Client Secret",type:"password",required:!0},{key:"MICROSOFT_TENANT_ID",label:"Tenant ID",type:"text",required:!0},{key:"MICROSOFT_SCOPE",label:"Scope",type:"text",required:!1,default:"Files.ReadWrite.All Sites.ReadWrite.All"}],capabilities:["excel-integration","sharepoint-sync","teams-notifications","file-management"],icon:"📋",documentation:"https://docs.microsoft.com/en-us/graph/"},openai:{name:"OpenAI GPT-4",category:"AI & ML",description:"Advanced AI capabilities for analysis and automation",fields:[{key:"OPENAI_API_KEY",label:"API Key",type:"password",required:!0},{key:"OPENAI_ORGANIZATION",label:"Organization ID",type:"text",required:!1},{key:"OPENAI_MODEL",label:"Default Model",type:"select",options:["gpt-4","gpt-4-turbo","gpt-3.5-turbo"],default:"gpt-4"}],capabilities:["text-generation","code-generation","analysis","function-calling"],icon:"🤖",documentation:"https://platform.openai.com/docs"},anthropic:{name:"Anthropic Claude",category:"AI & ML",description:"Advanced reasoning and manufacturing intelligence",fields:[{key:"ANTHROPIC_API_KEY",label:"API Key",type:"password",required:!0},{key:"ANTHROPIC_MODEL",label:"Default Model",type:"select",options:["claude-3-opus","claude-3-sonnet","claude-3-haiku"],default:"claude-3-sonnet"}],capabilities:["reasoning","analysis","coding","manufacturing-intelligence"],icon:"🧠",documentation:"https://docs.anthropic.com/"}}).reduce((e,[s,t])=>(e[t.category]||(e[t.category]=[]),e[t.category].push([s,t]),e),{});return u?a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),a.jsx("div",{className:"space-y-4",children:[1,2,3].map(e=>a.jsx("div",{className:"h-32 bg-gray-200 rounded"},e))})]})}):a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"API Integration Management"}),a.jsx("p",{className:"text-gray-600",children:"Configure and manage all external service integrations. All keys are securely stored and automatically synchronized with the MCP server."})]}),Object.entries(S).map(([e,s])=>a.jsxs("div",{className:"mb-8",children:[a.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:[e," Services"]}),a.jsx("div",{className:"grid gap-6 lg:grid-cols-2",children:s.map(([e,s])=>v(e,s))})]},e))]})},_=()=>{const{getToken:i}=e(),{user:n}=s(),[l,c]=t.useState("api-keys"),[o,f]=t.useState(null),[N,j]=t.useState([]);t.useState(!1);const[v,E]=t.useState(null),w=n?.publicMetadata?.role,_=[{id:"api-keys",name:"API Integrations",icon:x,permission:S.API_KEYS_MANAGE},{id:"system-config",name:"System Settings",icon:u,permission:S.SYSTEM_CONFIG},{id:"security",name:"Security",icon:p,permission:S.SYSTEM_SECURITY},{id:"logs",name:"System Logs",icon:h,permission:S.SYSTEM_LOGS},{id:"monitoring",name:"Monitoring",icon:g,permission:S.SYSTEM_MONITORING}];t.useEffect(()=>{n&&(R(),A(w,S.SYSTEM_LOGS)&&T())},[n,w]);const R=async()=>{try{const e=await fetch("/health");if(e.ok){const s=await e.json();f(s)}}catch(e){}},T=async()=>{try{const e=await i(),s=await fetch("/api/admin/logs",{headers:{Authorization:`Bearer ${e}`}});if(s.ok){const e=await s.json();j(e.slice(0,100))}}catch(e){}};return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"System Administration"}),a.jsx("p",{className:"text-gray-600",children:"System configuration, security, and monitoring"})]}),v&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx(r,{className:"h-5 w-5 text-red-400"}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-700",children:v})})]})}),a.jsx("div",{className:"mb-6",children:a.jsx("nav",{className:"flex space-x-8 border-b border-gray-200",children:_.filter(e=>A(w,e.permission)).map(e=>{const s=e.icon;return a.jsxs("button",{onClick:()=>c(e.id),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm "+(l===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[a.jsx(s,{className:"h-5 w-5"}),a.jsx("span",{children:e.name})]},e.id)})})}),(()=>{switch(l){case"api-keys":default:return a.jsx(I,{});case"system-config":return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Health Overview"}),o?a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(d,{className:"h-8 w-8 text-green-500"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium text-green-800",children:"Status"}),a.jsx("p",{className:"text-lg font-semibold text-green-900",children:o.status})]})]})}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(y,{className:"h-8 w-8 text-blue-500"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Uptime"}),a.jsxs("p",{className:"text-lg font-semibold text-blue-900",children:[Math.floor(o.uptime/3600),"h ",Math.floor(o.uptime%3600/60),"m"]})]})]})}),a.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(b,{className:"h-8 w-8 text-purple-500"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium text-purple-800",children:"Environment"}),a.jsx("p",{className:"text-lg font-semibold text-purple-900",children:o.environment})]})]})}),a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(g,{className:"h-8 w-8 text-gray-500"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Version"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.version})]})]})})]}):a.jsxs("div",{className:"flex items-center justify-center p-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),a.jsx("span",{className:"ml-2 text-gray-600",children:"Loading system health..."})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Configuration"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default User Role"}),a.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"user",children:"User"}),a.jsx("option",{value:"viewer",children:"Viewer"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout (minutes)"}),a.jsx("input",{type:"number",defaultValue:480,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Upload Size (MB)"}),a.jsx("input",{type:"number",defaultValue:10,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Rate Limit (requests/minute)"}),a.jsx("input",{type:"number",defaultValue:100,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsx("div",{className:"mt-6",children:a.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Save Configuration"})})]})]});case"security":return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Security Settings"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Two-Factor Authentication"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Require 2FA for all admin accounts"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"IP Whitelist"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Restrict admin access by IP address"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Audit Logging"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Log all administrative actions"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Security Events"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center p-3 bg-green-50 border border-green-200 rounded-lg",children:[a.jsx(d,{className:"h-5 w-5 text-green-500"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium text-green-800",children:"System scan completed"}),a.jsx("p",{className:"text-xs text-green-600",children:"No vulnerabilities detected - 2 hours ago"})]})]}),a.jsxs("div",{className:"flex items-center p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[a.jsx(r,{className:"h-5 w-5 text-yellow-500"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Failed login attempt"}),a.jsx("p",{className:"text-xs text-yellow-600",children:"IP: 192.168.1.100 - 4 hours ago"})]})]})]})]})]});case"logs":return a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"System Logs"}),a.jsx("button",{onClick:T,className:"bg-blue-600 text-white px-3 py-1.5 rounded text-sm hover:bg-blue-700",children:"Refresh"})]}),a.jsx("div",{className:"max-h-96 overflow-y-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Time"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Level"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Message"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Service"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:N.map((e,s)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-3 text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()}),a.jsx("td",{className:"px-6 py-3",children:a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+("error"===e.level?"bg-red-100 text-red-800":"warn"===e.level?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:e.level})}),a.jsx("td",{className:"px-6 py-3 text-sm text-gray-900",children:e.message}),a.jsx("td",{className:"px-6 py-3 text-sm text-gray-500",children:e.service})]},s))})]})})]})});case"monitoring":return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"CPU Usage"}),a.jsx("div",{className:"mt-2 flex items-baseline",children:a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"32%"})}),a.jsx("div",{className:"mt-4 w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"32%"}})})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Memory Usage"}),a.jsx("div",{className:"mt-2 flex items-baseline",children:a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"256MB"})}),a.jsx("div",{className:"mt-4 w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"45%"}})})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Active Users"}),a.jsx("div",{className:"mt-2 flex items-baseline",children:a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"12"})})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"API Requests/min"}),a.jsx("div",{className:"mt-2 flex items-baseline",children:a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"847"})})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Service Status"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(d,{className:"h-5 w-5 text-green-500"}),a.jsx("span",{className:"ml-2 font-medium text-green-800",children:"Database"})]}),a.jsx("span",{className:"text-green-600 text-sm",children:"Connected"})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(d,{className:"h-5 w-5 text-green-500"}),a.jsx("span",{className:"ml-2 font-medium text-green-800",children:"API Server"})]}),a.jsx("span",{className:"text-green-600 text-sm",children:"Running"})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(r,{className:"h-5 w-5 text-yellow-500"}),a.jsx("span",{className:"ml-2 font-medium text-yellow-800",children:"MCP Server"})]}),a.jsx("span",{className:"text-yellow-600 text-sm",children:"Connecting"})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 border border-red-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(m,{className:"h-5 w-5 text-red-500"}),a.jsx("span",{className:"ml-2 font-medium text-red-800",children:"Email Service"})]}),a.jsx("span",{className:"text-red-600 text-sm",children:"Disconnected"})]})]})]})]})}})()]})};function R(){const{getToken:n,isLoaded:d}=e(),{user:c,isLoaded:o}=s(),[m,p]=t.useState([]),[h,g]=t.useState([]),[y,b]=t.useState(!0),[f,S]=t.useState(null);t.useState(""),t.useState("user"),t.useState(!1);const E=c?.publicMetadata?.role,A=function(e){switch(e){case v.SUPER_ADMIN:return"full";case v.SYSTEM_ADMIN:return"system";case v.USER_ADMIN:return"users";default:return"none"}}(E),[R,T]=t.useState("users"===A?"user-admin":"system"===A?"system-admin":"user-admin"),O=(()=>{const e=[];return"users"!==A&&"full"!==A||e.push({id:"user-admin",name:"User Administration",icon:i,description:"Manage users, roles, and permissions"}),"system"!==A&&"full"!==A||e.push({id:"system-admin",name:"System Administration",icon:u,description:"System settings, APIs, and security"}),"system"!==A&&"full"!==A||e.push({id:"api-keys",name:"API Management",icon:x,description:"Manage external API keys and integrations"}),e})();t.useEffect(()=>{d&&o&&c&&(k(),M())},[d,o,c]);const k=async()=>{try{const e=await n();if(!e)return void S("Authentication token not available");const s="https://your-production-domain.up.railway.app/api",t=await j.get(`${s}/admin/users`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});p(t.data.users||[]),S(null)}catch(e){N.error("Error fetching users:",e),S(e.response?.data?.message||"Failed to fetch users")}},M=async()=>{try{const e=await n();if(!e)return void N.warn("No token available for fetching invitations");const s="https://your-production-domain.up.railway.app/api",t=await j.get(`${s}/admin/invitations`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});g(t.data.invitations||[])}catch(e){N.error("Error fetching invitations:",e),404!==e.response?.status&&S(e.response?.data?.message||"Failed to fetch invitations")}finally{b(!1)}};if(!d||!o)return a.jsx("div",{className:"admin-loading",children:a.jsx("div",{className:"spinner",children:"Loading authentication..."})});if(!c)return a.jsxs("div",{className:"admin-error",children:[a.jsx("h2",{children:"Authentication Required"}),a.jsx("p",{children:"Please sign in to access the admin panel."})]});if(!function(e){return[v.SUPER_ADMIN,v.SYSTEM_ADMIN,v.USER_ADMIN].includes(e)}(E))return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx(r,{className:"h-8 w-8 text-red-500"}),a.jsx("h2",{className:"ml-3 text-lg font-semibold text-gray-900",children:"Access Denied"})]}),a.jsx("p",{className:"text-gray-600 mb-4",children:"You do not have administrator privileges to access this panel."}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Current Role:"})," ",E||"Not assigned",a.jsx("br",{}),a.jsx("strong",{children:"Required:"})," User Admin, System Admin, or Super Admin"]})})]})});if(0===O.length)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx(r,{className:"h-8 w-8 text-yellow-500"}),a.jsx("h2",{className:"ml-3 text-lg font-semibold text-gray-900",children:"No Admin Access"})]}),a.jsx("p",{className:"text-gray-600",children:"Your administrator role does not have access to any admin sections. Please contact a Super Admin for assistance."})]})});if(y)return a.jsx("div",{className:"admin-loading",children:a.jsx("div",{className:"spinner",children:"Loading admin panel..."})});return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"py-6",children:a.jsx("div",{className:"md:flex md:items-center md:justify-between",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h1",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:"Enterprise Admin Portal"}),a.jsxs("div",{className:"mt-1 flex flex-col sm:flex-row sm:flex-wrap sm:mt-0 sm:space-x-6",children:[a.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[a.jsx(l,{className:"flex-shrink-0 mr-1.5 h-4 w-4"}),"full"===A&&"Super Administrator","system"===A&&"System Administrator","users"===A&&"User Administrator"]}),a.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[a.jsx(i,{className:"flex-shrink-0 mr-1.5 h-4 w-4"}),c?.firstName," ",c?.lastName]})]})]})})})})}),O.length>1&&a.jsx("div",{className:"bg-white border-b border-gray-200",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("nav",{className:"flex space-x-8",children:O.map(e=>{const s=e.icon;return a.jsxs("button",{onClick:()=>T(e.id),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap "+(R===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[a.jsx(s,{className:"h-5 w-5"}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{children:e.name}),a.jsx("div",{className:"text-xs text-gray-400",children:e.description})]})]},e.id)})})})}),a.jsx("div",{className:"max-w-7xl mx-auto",children:(()=>{switch(R){case"user-admin":default:return a.jsx(w,{});case"system-admin":return a.jsx(_,{});case"api-keys":return a.jsx(I,{})}})()})]})}export{R as default};
