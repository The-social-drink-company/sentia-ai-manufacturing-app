const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AIAnalyticsDashboard-BwP-1WfE.js","assets/query-8efXarIy.js","assets/vendor----Fri83.js","assets/index-CG3gOOdL.js","assets/auth-S8fk5vmA.js","assets/utils-BeLtu-UY.js","assets/index-SUahzJKD.css","assets/refresh-cw-B5gqVjm8.js","assets/trending-up-C6P1EZlW.js","assets/target-C9fB8Q0W.js","assets/bar-chart-3-3RD1JMAY.js","assets/charts-PgP-NoYd.js","assets/index-BmfS11sv.js","assets/PredictiveAnalyticsDashboard-bvWesuGH.js","assets/ArrowTrendingUpIcon-CPoj76Qt.js","assets/MCPConnectionStatus-DaLB6Az8.js","assets/CheckCircleIcon-BCI428Y4.js","assets/XCircleIcon-ywfnDLXf.js","assets/AIForecastingWidget-CI8PKfUf.js","assets/MCPStatusWidget-CUz7vq3F.js","assets/WorkingCapitalWidget-Djdo4mg8.js","assets/SupplyChainWidget-C1nTpnA0.js"])))=>i.map(i=>d[i]);
import{c as e,d as t,l as n,u as r,a as o,b as i,e as a,_ as s}from"./index-CG3gOOdL.js";import{u as l,b as c,c as u,j as d}from"./query-8efXarIy.js";import{a as p,r as f,d as h,j as g,R as m}from"./vendor----Fri83.js";import{u as y}from"./auth-S8fk5vmA.js";import{r as b}from"./charts-PgP-NoYd.js";import{B as v,L as x,C as w,a as S,b as j,P as O,c as D,d as P,p as C,e as _,f as R,i as E}from"./index-BmfS11sv.js";import{B as z}from"./bar-chart-3-3RD1JMAY.js";import{T as M}from"./target-C9fB8Q0W.js";const k=e("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),N=e("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),T=e("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]),L=e("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),H=e("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),A=e("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]);var I={};const W=I.MCP_SERVER_URL||"https://sentia-mcp-server.railway.app",q=I.MCP_HEALTH_URL||"https://sentia-mcp-server.railway.app/health";const $=new class{constructor(){this.baseUrl=W,this.healthUrl=q}async checkHealth(){try{const e=await fetch(this.healthUrl);return await e.json()}catch(e){return n("MCP Server health check failed",e,{service:"mcp",operation:"health_check"}),{status:"error",message:e.message}}}async getProviders(){try{const e=await fetch(`${this.baseUrl}/api/providers`);return await e.json()}catch(e){return n("Failed to fetch MCP providers",e,{service:"mcp",operation:"get_providers"}),{error:e.message}}}async xeroGetContacts(e={}){try{const t=new URLSearchParams(e).toString(),n=await fetch(`${this.baseUrl}/api/xero/contacts?${t}`);return await n.json()}catch(t){return n("Failed to fetch Xero contacts via MCP",t,{service:"mcp",provider:"xero",operation:"get_contacts"}),{error:t.message}}}async xeroGetInvoices(e={}){try{const t=new URLSearchParams(e).toString(),n=await fetch(`${this.baseUrl}/api/xero/invoices?${t}`);return await n.json()}catch(t){return n("Failed to fetch Xero invoices via MCP",t,{service:"mcp",provider:"xero",operation:"get_invoices"}),{error:t.message}}}async xeroGetItems(){try{const e=await fetch(`${this.baseUrl}/api/xero/items`);return await e.json()}catch(e){return n("Failed to fetch Xero items via MCP",e,{service:"mcp",provider:"xero",operation:"get_items"}),{error:e.message}}}async xeroCreateInvoice(e){try{const t=await fetch(`${this.baseUrl}/api/xero/invoices`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await t.json()}catch(t){return n("Failed to create Xero invoice via MCP",t,{service:"mcp",provider:"xero",operation:"create_invoice"}),{error:t.message}}}async openaiGenerateText(e,t={}){try{const n=await fetch(`${this.baseUrl}/api/openai/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,...t})});return await n.json()}catch(r){return n("Failed to generate OpenAI text via MCP",r,{service:"mcp",provider:"openai",operation:"generate_text"}),{error:r.message}}}async openaiAnalyzeData(e,t){try{const n=await fetch(`${this.baseUrl}/api/openai/analyze`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e,analysisType:t})});return await n.json()}catch(r){return n("Failed to analyze data with OpenAI via MCP",r,{service:"mcp",provider:"openai",operation:"analyze_data"}),{error:r.message}}}async openaiCreateEmbedding(e){try{const t=await fetch(`${this.baseUrl}/api/openai/embedding`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e})});return await t.json()}catch(t){return n("Failed to create OpenAI embedding via MCP",t,{service:"mcp",provider:"openai",operation:"create_embedding"}),{error:t.message}}}async anthropicAnalyzeManufacturing(e,t){try{const n=await fetch(`${this.baseUrl}/api/anthropic/manufacturing/analyze`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e,analysisType:t})});return await n.json()}catch(r){return n("Failed to analyze manufacturing with Anthropic via MCP",r,{service:"mcp",provider:"anthropic",operation:"analyze_manufacturing"}),{error:r.message}}}async anthropicOptimizeProcess(e){try{const t=await fetch(`${this.baseUrl}/api/anthropic/process/optimize`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await t.json()}catch(t){return n("Failed to optimize process with Anthropic via MCP",t,{service:"mcp",provider:"anthropic",operation:"optimize_process"}),{error:t.message}}}async anthropicGenerateInsights(e){try{const t=await fetch(`${this.baseUrl}/api/anthropic/insights`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({context:e})});return await t.json()}catch(t){return n("Failed to generate insights with Anthropic via MCP",t,{service:"mcp",provider:"anthropic",operation:"generate_insights"}),{error:t.message}}}},B=()=>{const e=l();return{useHealthCheck:()=>u({queryKey:["mcp","health"],queryFn:()=>$.checkHealth(),refetchInterval:3e4,retry:1}),useProviders:()=>u({queryKey:["mcp","providers"],queryFn:()=>$.getProviders(),staleTime:6e4}),useXeroContacts:(e={})=>u({queryKey:["mcp","xero","contacts",e],queryFn:()=>$.xeroGetContacts(e),enabled:!!e}),useXeroInvoices:(e={})=>u({queryKey:["mcp","xero","invoices",e],queryFn:()=>$.xeroGetInvoices(e),enabled:!!e}),useXeroItems:()=>u({queryKey:["mcp","xero","items"],queryFn:()=>$.xeroGetItems()}),useCreateXeroInvoice:()=>c({mutationFn:e=>$.xeroCreateInvoice(e),onSuccess:()=>{e.invalidateQueries({queryKey:["mcp","xero","invoices"]})}}),useOpenAIGenerate:()=>c({mutationFn:({prompt:e,options:t})=>$.openaiGenerateText(e,t)}),useOpenAIAnalyze:()=>c({mutationFn:({data:e,analysisType:t})=>$.openaiAnalyzeData(e,t)}),useOpenAIEmbedding:()=>c({mutationFn:e=>$.openaiCreateEmbedding(e)}),useAnthropicManufacturing:()=>c({mutationFn:({data:e,analysisType:t})=>$.anthropicAnalyzeManufacturing(e,t)}),useAnthropicOptimize:()=>c({mutationFn:e=>$.anthropicOptimizeProcess(e)}),useAnthropicInsights:()=>c({mutationFn:e=>$.anthropicGenerateInsights(e)})}};var F,G={exports:{}},U={},X={exports:{}};function Y(){return F||(F=1,function(e){function t(e){return function(t,n,r,o,i,a,s){return e(t,n,s)}}function n(e){return function(t,n,r,o){if(!t||!n||"object"!=typeof t||"object"!=typeof n)return e(t,n,r,o);var i=o.get(t),a=o.get(n);if(i&&a)return i===n&&a===t;o.set(t,n),o.set(n,t);var s=e(t,n,r,o);return o.delete(t),o.delete(n),s}}function r(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function o(e){return e.constructor===Object||null==e.constructor}function i(e){return"function"==typeof e.then}function a(e,t){return e===t||e!=e&&t!=t}var s="[object Arguments]",l="[object Boolean]",c="[object Date]",u="[object RegExp]",d="[object Map]",p="[object Number]",f="[object Object]",h="[object Set]",g="[object String]",m=Object.prototype.toString;function y(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areMapsEqual,y=e.areObjectsEqual,b=e.areRegExpsEqual,v=e.areSetsEqual,x=(0,e.createIsNestedEqual)(w);function w(e,w,S){if(e===w)return!0;if(!e||!w||"object"!=typeof e||"object"!=typeof w)return e!=e&&w!=w;if(o(e)&&o(w))return y(e,w,x,S);var j=Array.isArray(e),O=Array.isArray(w);if(j||O)return j===O&&t(e,w,x,S);var D=m.call(e);return D===m.call(w)&&(D===c?n(e,w,x,S):D===u?b(e,w,x,S):D===d?r(e,w,x,S):D===h?v(e,w,x,S):D===f||D===s?!i(e)&&!i(w)&&y(e,w,x,S):(D===l||D===p||D===g)&&a(e.valueOf(),w.valueOf()))}return w}function b(e,t,n,r){var o=e.length;if(t.length!==o)return!1;for(;o-- >0;)if(!n(e[o],t[o],o,o,e,t,r))return!1;return!0}var v=n(b);function x(e,t){return a(e.valueOf(),t.valueOf())}function w(e,t,n,r){var o=e.size===t.size;if(!o)return!1;if(!e.size)return!0;var i={},a=0;return e.forEach(function(s,l){if(o){var c=!1,u=0;t.forEach(function(o,d){c||i[u]||!(c=n(l,d,a,u,e,t,r)&&n(s,o,l,d,e,t,r))||(i[u]=!0),u++}),a++,o=c}}),o}var S=n(w),j="_owner",O=Object.prototype.hasOwnProperty;function D(e,t,n,r){var o,i=Object.keys(e),a=i.length;if(Object.keys(t).length!==a)return!1;for(;a-- >0;){if((o=i[a])===j){var s=!!e.$$typeof,l=!!t.$$typeof;if((s||l)&&s!==l)return!1}if(!O.call(t,o)||!n(e[o],t[o],o,o,e,t,r))return!1}return!0}var P=n(D);function C(e,t){return e.source===t.source&&e.flags===t.flags}function _(e,t,n,r){var o=e.size===t.size;if(!o)return!1;if(!e.size)return!0;var i={};return e.forEach(function(a,s){if(o){var l=!1,c=0;t.forEach(function(o,u){l||i[c]||!(l=n(a,o,s,u,e,t,r))||(i[c]=!0),c++}),o=l}}),o}var R=n(_),E=Object.freeze({areArraysEqual:b,areDatesEqual:x,areMapsEqual:w,areObjectsEqual:D,areRegExpsEqual:C,areSetsEqual:_,createIsNestedEqual:t}),z=Object.freeze({areArraysEqual:v,areDatesEqual:x,areMapsEqual:S,areObjectsEqual:P,areRegExpsEqual:C,areSetsEqual:R,createIsNestedEqual:t}),M=y(E);function k(e,t){return M(e,t,void 0)}var N=y(r(E,{createIsNestedEqual:function(){return a}}));function T(e,t){return N(e,t,void 0)}var L=y(z);function H(e,t){return L(e,t,new WeakMap)}var A=y(r(z,{createIsNestedEqual:function(){return a}}));function I(e,t){return A(e,t,new WeakMap)}function W(e){return y(r(E,e(E)))}function q(e){var t=y(r(z,e(z)));return function(e,n,r){return void 0===r&&(r=new WeakMap),t(e,n,r)}}e.circularDeepEqual=H,e.circularShallowEqual=I,e.createCustomCircularEqual=q,e.createCustomEqual=W,e.deepEqual=k,e.sameValueZeroEqual=a,e.shallowEqual=T,Object.defineProperty(e,"__esModule",{value:!0})}(X.exports)),X.exports}var V,J={exports:{}};function K(){if(V)return J.exports;function e(t){var n,r,o="";if("string"==typeof t||"number"==typeof t)o+=t;else if("object"==typeof t)if(Array.isArray(t)){var i=t.length;for(n=0;n<i;n++)t[n]&&(r=e(t[n]))&&(o&&(o+=" "),o+=r)}else for(r in t)t[r]&&(o&&(o+=" "),o+=r);return o}function t(){for(var t,n,r=0,o="",i=arguments.length;r<i;r++)(t=arguments[r])&&(n=e(t))&&(o&&(o+=" "),o+=n);return o}return V=1,J.exports=t,J.exports.clsx=t,J.exports}var Q,Z,ee,te={};function ne(){if(ee)return te;ee=1,Object.defineProperty(te,"__esModule",{value:!0}),te.bottom=r,te.childrenEqual=function(e,r){return(0,t.deepEqual)(n.default.Children.map(e,e=>e?.key),n.default.Children.map(r,e=>e?.key))&&(0,t.deepEqual)(n.default.Children.map(e,e=>e?.props["data-grid"]),n.default.Children.map(r,e=>e?.props["data-grid"]))},te.cloneLayout=o,te.cloneLayoutItem=a,te.collides=s,te.compact=l,te.compactItem=d,te.compactType=function(e){const{verticalCompact:t,compactType:n}=e||{};return!1===t?null:n},te.correctBounds=p,te.fastPositionEqual=function(e,t){return e.left===t.left&&e.top===t.top&&e.width===t.width&&e.height===t.height},te.fastRGLPropsEqual=void 0,te.getAllCollisions=m,te.getFirstCollision=g,te.getLayoutItem=h,te.getStatics=y,te.modifyLayout=i,te.moveElement=b,te.moveElementAwayFromCollision=v,te.noop=void 0,te.perc=function(e){return 100*e+"%"},te.resizeItemInDirection=function(e,t,n,r){const o=_[e];return o?o(t,{...t,...n},r):n},te.setTopLeft=function(e){let{top:t,left:n,width:r,height:o}=e;return{top:`${t}px`,left:`${n}px`,width:`${r}px`,height:`${o}px`,position:"absolute"}},te.setTransform=function(e){let{top:t,left:n,width:r,height:o}=e;const i=`translate(${n}px,${t}px)`;return{transform:i,WebkitTransform:i,MozTransform:i,msTransform:i,OTransform:i,width:`${r}px`,height:`${o}px`,position:"absolute"}},te.sortLayoutItems=R,te.sortLayoutItemsByColRow=z,te.sortLayoutItemsByRowCol=E,te.synchronizeLayoutWithChildren=function(e,t,o,i,s){e=e||[];const c=[];n.default.Children.forEach(t,t=>{if(null==t?.key)return;const n=h(e,String(t.key)),o=t.props["data-grid"];n&&null==o?c.push(a(n)):o?c.push(a({...o,i:t.key})):c.push(a({w:1,h:1,x:0,y:r(c),i:String(t.key)}))});const u=p(c,{cols:o});return s?u:l(u,i,o)},te.validateLayout=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Layout";const n=["x","y","w","h"];if(!Array.isArray(e))throw new Error(t+" must be an array!");for(let r=0,o=e.length;r<o;r++){const o=e[r];for(let e=0;e<n.length;e++){const i=n[e],a=o[i];if("number"!=typeof a||Number.isNaN(a))throw new Error(`ReactGridLayout: ${t}[${r}].${i} must be a number! Received: ${a} (${typeof a})`)}if(void 0!==o.i&&"string"!=typeof o.i)throw new Error(`ReactGridLayout: ${t}[${r}].i must be a string! Received: ${o.i} (${typeof o.i})`)}},te.withLayoutItem=function(e,t,n){let r=h(e,t);return r?(r=n(a(r)),[e=i(e,r),r]):[e,null]};var e,t=Y(),n=(e=f())&&e.__esModule?e:{default:e};function r(e){let t,n=0;for(let r=0,o=e.length;r<o;r++)t=e[r].y+e[r].h,t>n&&(n=t);return n}function o(e){const t=Array(e.length);for(let n=0,r=e.length;n<r;n++)t[n]=a(e[n]);return t}function i(e,t){const n=Array(e.length);for(let r=0,o=e.length;r<o;r++)t.i===e[r].i?n[r]=t:n[r]=e[r];return n}function a(e){return{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,minW:e.minW,maxW:e.maxW,minH:e.minH,maxH:e.maxH,moved:Boolean(e.moved),static:Boolean(e.static),isDraggable:e.isDraggable,isResizable:e.isResizable,resizeHandles:e.resizeHandles,isBounded:e.isBounded}}function s(e,t){return e.i!==t.i&&(!(e.x+e.w<=t.x)&&(!(e.x>=t.x+t.w)&&(!(e.y+e.h<=t.y)&&!(e.y>=t.y+t.h))))}function l(e,t,n,r){const o=y(e),i=R(e,t),s=Array(e.length);for(let l=0,c=i.length;l<c;l++){let c=a(i[l]);c.static||(c=d(o,c,t,n,i,r),o.push(c)),s[e.indexOf(i[l])]=c,c.moved=!1}return s}te.fastRGLPropsEqual=Z?Q:(Z=1,Q=function(e,t,n){return e===t||e.className===t.className&&n(e.style,t.style)&&e.width===t.width&&e.autoSize===t.autoSize&&e.cols===t.cols&&e.draggableCancel===t.draggableCancel&&e.draggableHandle===t.draggableHandle&&n(e.verticalCompact,t.verticalCompact)&&n(e.compactType,t.compactType)&&n(e.layout,t.layout)&&n(e.margin,t.margin)&&n(e.containerPadding,t.containerPadding)&&e.rowHeight===t.rowHeight&&e.maxRows===t.maxRows&&e.isBounded===t.isBounded&&e.isDraggable===t.isDraggable&&e.isResizable===t.isResizable&&e.allowOverlap===t.allowOverlap&&e.preventCollision===t.preventCollision&&e.useCSSTransforms===t.useCSSTransforms&&e.transformScale===t.transformScale&&e.isDroppable===t.isDroppable&&n(e.resizeHandles,t.resizeHandles)&&n(e.resizeHandle,t.resizeHandle)&&e.onLayoutChange===t.onLayoutChange&&e.onDragStart===t.onDragStart&&e.onDrag===t.onDrag&&e.onDragStop===t.onDragStop&&e.onResizeStart===t.onResizeStart&&e.onResize===t.onResize&&e.onResizeStop===t.onResizeStop&&e.onDrop===t.onDrop&&n(e.droppingItem,t.droppingItem)&&n(e.innerRef,t.innerRef)});const c={x:"w",y:"h"};function u(e,t,n,r){const o=c[r];t[r]+=1;for(let i=e.map(e=>e.i).indexOf(t.i)+1;i<e.length;i++){const a=e[i];if(!a.static){if(a.y>t.y+t.h)break;s(t,a)&&u(e,a,n+t[o],r)}}t[r]=n}function d(e,t,n,o,i,a){const s="horizontal"===n;if("vertical"===n)for(t.y=Math.min(r(e),t.y);t.y>0&&!g(e,t);)t.y--;else if(s)for(;t.x>0&&!g(e,t);)t.x--;let l;for(;(l=g(e,t))&&(null!==n||!a);)if(s?u(i,t,l.x+l.w,"x"):u(i,t,l.y+l.h,"y"),s&&t.x+t.w>o)for(t.x=o-t.w,t.y++;t.x>0&&!g(e,t);)t.x--;return t.y=Math.max(t.y,0),t.x=Math.max(t.x,0),t}function p(e,t){const n=y(e);for(let r=0,o=e.length;r<o;r++){const o=e[r];if(o.x+o.w>t.cols&&(o.x=t.cols-o.w),o.x<0&&(o.x=0,o.w=t.cols),o.static)for(;g(n,o);)o.y++;else n.push(o)}return e}function h(e,t){for(let n=0,r=e.length;n<r;n++)if(e[n].i===t)return e[n]}function g(e,t){for(let n=0,r=e.length;n<r;n++)if(s(e[n],t))return e[n]}function m(e,t){return e.filter(e=>s(e,t))}function y(e){return e.filter(e=>e.static)}function b(e,t,n,r,i,a,s,l,c){if(t.static&&!0!==t.isDraggable)return e;if(t.y===r&&t.x===n)return e;const u=t.x,d=t.y;"number"==typeof n&&(t.x=n),"number"==typeof r&&(t.y=r),t.moved=!0;let p=R(e,s);("vertical"===s&&"number"==typeof r?d>=r:"horizontal"===s&&"number"==typeof n&&u>=n)&&(p=p.reverse());const f=m(p,t),h=f.length>0;if(h&&c)return o(e);if(h&&a)return t.x=u,t.y=d,t.moved=!1,e;for(let o=0,g=f.length;o<g;o++){const n=f[o];n.moved||(e=n.static?v(e,n,t,i,s):v(e,t,n,i,s))}return e}function v(e,t,n,r,o,i){const a="horizontal"===o,s="vertical"===o,l=t.static;if(r){r=!1;const i={x:a?Math.max(t.x-n.w,0):n.x,y:s?Math.max(t.y-n.h,0):n.y,w:n.w,h:n.h,i:"-1"},c=g(e,i),u=c&&c.y+c.h>t.y,d=c&&t.x+t.w>c.x;if(!c)return b(e,n,a?i.x:void 0,s?i.y:void 0,r,l,o);if(u&&s)return b(e,n,void 0,t.y+1,r,l,o);if(u&&null==o)return t.y=n.y,n.y=n.y+n.h,e;if(d&&a)return b(e,t,n.x,void 0,r,l,o)}const c=a?n.x+1:void 0,u=s?n.y+1:void 0;return null==c&&null==u?e:b(e,n,a?n.x+1:void 0,s?n.y+1:void 0,r,l,o)}const x=(e,t,n,r)=>e+n>r?t:n,w=(e,t,n)=>e<0?t:n,S=e=>Math.max(0,e),j=e=>Math.max(0,e),O=(e,t,n)=>{let{left:r,height:o,width:i}=t;const a=e.top-(o-e.height);return{left:r,width:i,height:w(a,e.height,o),top:j(a)}},D=(e,t,n)=>{let{top:r,left:o,height:i,width:a}=t;return{top:r,height:i,width:x(e.left,e.width,a,n),left:S(o)}},P=(e,t,n)=>{let{top:r,height:o,width:i}=t;const a=e.left-(i-e.width);return{height:o,width:a<0?e.width:x(e.left,e.width,i,n),top:j(r),left:S(a)}},C=(e,t,n)=>{let{top:r,left:o,height:i,width:a}=t;return{width:a,left:o,height:w(r,e.height,i),top:j(r)}},_={n:O,ne:function(){return O(arguments.length<=0?void 0:arguments[0],D(...arguments))},e:D,se:function(){return C(arguments.length<=0?void 0:arguments[0],D(...arguments))},s:C,sw:function(){return C(arguments.length<=0?void 0:arguments[0],P(...arguments))},w:P,nw:function(){return O(arguments.length<=0?void 0:arguments[0],P(...arguments))}};function R(e,t){return"horizontal"===t?z(e):"vertical"===t?E(e):e}function E(e){return e.slice(0).sort(function(e,t){return e.y>t.y||e.y===t.y&&e.x>t.x?1:e.y===t.y&&e.x===t.x?0:-1})}function z(e){return e.slice(0).sort(function(e,t){return e.x>t.x||e.x===t.x&&e.y>t.y?1:-1})}return te.noop=()=>{},te}var re,oe={};function ie(){if(re)return oe;function e(e){const{margin:t,containerPadding:n,containerWidth:r,cols:o}=e;return(r-t[0]*(o-1)-2*n[0])/o}function t(e,t,n){return Number.isFinite(e)?Math.round(t*e+Math.max(0,e-1)*n):e}function n(e,t,n){return Math.max(Math.min(e,n),t)}return re=1,Object.defineProperty(oe,"__esModule",{value:!0}),oe.calcGridColWidth=e,oe.calcGridItemPosition=function(n,r,o,i,a,s){const{margin:l,containerPadding:c,rowHeight:u}=n,d=e(n),p={};s&&s.resizing?(p.width=Math.round(s.resizing.width),p.height=Math.round(s.resizing.height)):(p.width=t(i,d,l[0]),p.height=t(a,u,l[1]));s&&s.dragging?(p.top=Math.round(s.dragging.top),p.left=Math.round(s.dragging.left)):s&&s.resizing&&"number"==typeof s.resizing.top&&"number"==typeof s.resizing.left?(p.top=Math.round(s.resizing.top),p.left=Math.round(s.resizing.left)):(p.top=Math.round((u+l[1])*o+c[1]),p.left=Math.round((d+l[0])*r+c[0]));return p},oe.calcGridItemWHPx=t,oe.calcWH=function(t,r,o,i,a,s){const{margin:l,maxRows:c,cols:u,rowHeight:d}=t,p=e(t);let f=Math.round((r+l[0])/(p+l[0])),h=Math.round((o+l[1])/(d+l[1])),g=n(f,0,u-i),m=n(h,0,c-a);-1!==["sw","w","nw"].indexOf(s)&&(g=n(f,0,u));-1!==["nw","n","ne"].indexOf(s)&&(m=n(h,0,c));return{w:g,h:m}},oe.calcXY=function(t,r,o,i,a){const{margin:s,containerPadding:l,cols:c,rowHeight:u,maxRows:d}=t,p=e(t);let f=Math.round((o-l[0])/(p+s[0])),h=Math.round((r-l[1])/(u+s[1]));return f=n(f,0,c-i),h=n(h,0,d-a),{x:f,y:h}},oe.clamp=n,oe}var ae,se={},le={exports:{}},ce={},ue={},de={};function pe(){if(ae)return de;return ae=1,Object.defineProperty(de,"__esModule",{value:!0}),de.dontSetMe=function(e,t,n){if(e[t])return new Error(`Invalid prop ${t} passed to ${n} - do not set this, set it on the child.`)},de.findInArray=function(e,t){for(let n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]},de.int=function(e){return parseInt(e,10)},de.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},de.isNum=function(e){return"number"==typeof e&&!isNaN(e)},de}var fe,he,ge={};function me(){if(he)return ue;he=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.addClassName=a,ue.addEvent=function(e,t,n,r){if(!e)return;const o={capture:!0,...r};e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},ue.addUserSelectStyles=function(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t));e.body&&a(e.body,"react-draggable-transparent-selection")},ue.createCSSTransform=function(e,n){const r=o(e,n,"px");return{[(0,t.browserPrefixToKey)("transform",t.default)]:r}},ue.createSVGTransform=function(e,t){return o(e,t,"")},ue.getTouch=function(t,n){return t.targetTouches&&(0,e.findInArray)(t.targetTouches,e=>n===e.identifier)||t.changedTouches&&(0,e.findInArray)(t.changedTouches,e=>n===e.identifier)},ue.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},ue.getTranslation=o,ue.innerHeight=function(t){let n=t.clientHeight;const r=t.ownerDocument.defaultView.getComputedStyle(t);return n-=(0,e.int)(r.paddingTop),n-=(0,e.int)(r.paddingBottom),n},ue.innerWidth=function(t){let n=t.clientWidth;const r=t.ownerDocument.defaultView.getComputedStyle(t);return n-=(0,e.int)(r.paddingLeft),n-=(0,e.int)(r.paddingRight),n},ue.matchesSelector=r,ue.matchesSelectorAndParentsTo=function(e,t,n){let o=e;do{if(r(o,t))return!0;if(o===n)return!1;o=o.parentNode}while(o);return!1},ue.offsetXYFromParent=function(e,t,n){const r=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),o=(e.clientX+t.scrollLeft-r.left)/n,i=(e.clientY+t.scrollTop-r.top)/n;return{x:o,y:i}},ue.outerHeight=function(t){let n=t.clientHeight;const r=t.ownerDocument.defaultView.getComputedStyle(t);return n+=(0,e.int)(r.borderTopWidth),n+=(0,e.int)(r.borderBottomWidth),n},ue.outerWidth=function(t){let n=t.clientWidth;const r=t.ownerDocument.defaultView.getComputedStyle(t);return n+=(0,e.int)(r.borderLeftWidth),n+=(0,e.int)(r.borderRightWidth),n},ue.removeClassName=s,ue.removeEvent=function(e,t,n,r){if(!e)return;const o={capture:!0,...r};e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},ue.scheduleRemoveUserSelectStyles=function(e){window.requestAnimationFrame?window.requestAnimationFrame(()=>{i(e)}):i(e)};var e=pe(),t=function(e,t){if("function"==typeof WeakMap)var n=new WeakMap,r=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var o,i,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(o=t?r:n){if(o.has(e))return o.get(e);o.set(e,a)}for(const n in e)"default"!==n&&{}.hasOwnProperty.call(e,n)&&((i=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,n))&&(i.get||i.set)?o(a,n,i):a[n]=e[n]);return a}(e,t)}(function(){if(fe)return ge;fe=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.browserPrefixToKey=n,ge.browserPrefixToStyle=function(e,t){return t?`-${t.toLowerCase()}-${e}`:e},ge.default=void 0,ge.getPrefix=t;const e=["Moz","Webkit","O","ms"];function t(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";const r=window.document?.documentElement?.style;if(!r)return"";if(t in r)return"";for(let o=0;o<e.length;o++)if(n(t,e[o])in r)return e[o];return""}function n(e,t){return t?`${t}${function(e){let t="",n=!0;for(let r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):"-"===e[r]?n=!0:t+=e[r];return t}(e)}`:e}return ge.default=t(),ge}());let n="";function r(t,r){return n||(n=(0,e.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,e.isFunction)(t[n])})),!!(0,e.isFunction)(t[n])&&t[n](r)}function o(e,t,n){let{x:r,y:o}=e,i=`translate(${r}${n},${o}${n})`;if(t){i=`translate(${`${"string"==typeof t.x?t.x:t.x+n}`}, ${`${"string"==typeof t.y?t.y:t.y+n}`})`+i}return i}function i(e){if(e)try{if(e.body&&s(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(t){}}function a(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp(`(?:^|\\s)${t}(?!\\S)`))||(e.className+=` ${t}`)}function s(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp(`(?:^|\\s)${t}(?!\\S)`,"g"),"")}return ue}var ye,be={};function ve(){if(ye)return be;ye=1,Object.defineProperty(be,"__esModule",{value:!0}),be.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},be.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},be.createCoreData=function(t,r,o){const i=!(0,e.isNum)(t.lastX),a=n(t);return i?{node:a,deltaX:0,deltaY:0,lastX:r,lastY:o,x:r,y:o}:{node:a,deltaX:r-t.lastX,deltaY:o-t.lastY,lastX:t.lastX,lastY:t.lastY,x:r,y:o}},be.createDraggableData=function(e,t){const n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}},be.getBoundPosition=function(r,o,i){if(!r.props.bounds)return[o,i];let{bounds:a}=r.props;a="string"==typeof a?a:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(a);const s=n(r);if("string"==typeof a){const{ownerDocument:n}=s,r=n.defaultView;let o;if("parent"===a)o=s.parentNode;else{o=s.getRootNode().querySelector(a)}if(!(o instanceof r.HTMLElement))throw new Error('Bounds selector "'+a+'" could not find an element.');const i=o,l=r.getComputedStyle(s),c=r.getComputedStyle(i);a={left:-s.offsetLeft+(0,e.int)(c.paddingLeft)+(0,e.int)(l.marginLeft),top:-s.offsetTop+(0,e.int)(c.paddingTop)+(0,e.int)(l.marginTop),right:(0,t.innerWidth)(i)-(0,t.outerWidth)(s)-s.offsetLeft+(0,e.int)(c.paddingRight)-(0,e.int)(l.marginRight),bottom:(0,t.innerHeight)(i)-(0,t.outerHeight)(s)-s.offsetTop+(0,e.int)(c.paddingBottom)-(0,e.int)(l.marginBottom)}}(0,e.isNum)(a.right)&&(o=Math.min(o,a.right));(0,e.isNum)(a.bottom)&&(i=Math.min(i,a.bottom));(0,e.isNum)(a.left)&&(o=Math.max(o,a.left));(0,e.isNum)(a.top)&&(i=Math.max(i,a.top));return[o,i]},be.getControlPosition=function(e,r,o){const i="number"==typeof r?(0,t.getTouch)(e,r):null;if("number"==typeof r&&!i)return null;const a=n(o),s=o.props.offsetParent||a.offsetParent||a.ownerDocument.body;return(0,t.offsetXYFromParent)(i||e,s,o.props.scale)},be.snapToGrid=function(e,t,n){const r=Math.round(t/e[0])*e[0],o=Math.round(n/e[1])*e[1];return[r,o]};var e=pe(),t=me();function n(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}return be}var xe,we,Se,je,Oe={},De={};function Pe(){if(xe)return De;return xe=1,Object.defineProperty(De,"__esModule",{value:!0}),De.default=function(){},De}function Ce(){if(we)return Oe;we=1,Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.default=void 0;var e=function(e,t){if("function"==typeof WeakMap)var n=new WeakMap,r=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var o,i,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(o=t?r:n){if(o.has(e))return o.get(e);o.set(e,a)}for(const n in e)"default"!==n&&{}.hasOwnProperty.call(e,n)&&((i=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,n))&&(i.get||i.set)?o(a,n,i):a[n]=e[n]);return a}(e,t)}(f()),t=s(b()),n=s(h()),r=me(),o=ve(),i=pe(),a=s(Pe());function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c={start:"touchstart",move:"touchmove",stop:"touchend"},u={start:"mousedown",move:"mousemove",stop:"mouseup"};let d=u,p=class extends e.Component{constructor(){super(...arguments),l(this,"dragging",!1),l(this,"lastX",NaN),l(this,"lastY",NaN),l(this,"touchIdentifier",null),l(this,"mounted",!1),l(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&"number"==typeof e.button&&0!==e.button)return!1;const t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:n}=t;if(this.props.disabled||!(e.target instanceof n.defaultView.Node)||this.props.handle&&!(0,r.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,r.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;"touchstart"!==e.type||this.props.allowMobileScroll||e.preventDefault();const i=(0,r.getTouchIdentifier)(e);this.touchIdentifier=i;const s=(0,o.getControlPosition)(e,i,this);if(null==s)return;const{x:l,y:c}=s,u=(0,o.createCoreData)(this,l,c);(0,a.default)("DraggableCore: handleDragStart: %j",u),(0,a.default)("calling",this.props.onStart);!1!==this.props.onStart(e,u)&&!1!==this.mounted&&(this.props.enableUserSelectHack&&(0,r.addUserSelectStyles)(n),this.dragging=!0,this.lastX=l,this.lastY=c,(0,r.addEvent)(n,d.move,this.handleDrag),(0,r.addEvent)(n,d.stop,this.handleDragStop))}),l(this,"handleDrag",e=>{const t=(0,o.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:n,y:r}=t;if(Array.isArray(this.props.grid)){let e=n-this.lastX,t=r-this.lastY;if([e,t]=(0,o.snapToGrid)(this.props.grid,e,t),!e&&!t)return;n=this.lastX+e,r=this.lastY+t}const i=(0,o.createCoreData)(this,n,r);(0,a.default)("DraggableCore: handleDrag: %j",i);if(!1!==this.props.onDrag(e,i)&&!1!==this.mounted)this.lastX=n,this.lastY=r;else try{this.handleDragStop(new MouseEvent("mouseup"))}catch(s){const e=document.createEvent("MouseEvents");e.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(e)}}),l(this,"handleDragStop",e=>{if(!this.dragging)return;const t=(0,o.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:n,y:i}=t;if(Array.isArray(this.props.grid)){let e=n-this.lastX||0,t=i-this.lastY||0;[e,t]=(0,o.snapToGrid)(this.props.grid,e,t),n=this.lastX+e,i=this.lastY+t}const s=(0,o.createCoreData)(this,n,i);if(!1===this.props.onStop(e,s)||!1===this.mounted)return!1;const l=this.findDOMNode();l&&this.props.enableUserSelectHack&&(0,r.scheduleRemoveUserSelectStyles)(l.ownerDocument),(0,a.default)("DraggableCore: handleDragStop: %j",s),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,l&&((0,a.default)("DraggableCore: Removing handlers"),(0,r.removeEvent)(l.ownerDocument,d.move,this.handleDrag),(0,r.removeEvent)(l.ownerDocument,d.stop,this.handleDragStop))}),l(this,"onMouseDown",e=>(d=u,this.handleDragStart(e))),l(this,"onMouseUp",e=>(d=u,this.handleDragStop(e))),l(this,"onTouchStart",e=>(d=c,this.handleDragStart(e))),l(this,"onTouchEnd",e=>(d=c,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,r.addEvent)(e,c.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:t}=e;(0,r.removeEvent)(t,u.move,this.handleDrag),(0,r.removeEvent)(t,c.move,this.handleDrag),(0,r.removeEvent)(t,u.stop,this.handleDragStop),(0,r.removeEvent)(t,c.stop,this.handleDragStop),(0,r.removeEvent)(e,c.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,r.scheduleRemoveUserSelectStyles)(t)}}findDOMNode(){return this.props?.nodeRef?this.props?.nodeRef?.current:n.default.findDOMNode(this)}render(){return e.cloneElement(e.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return Oe.default=p,l(p,"displayName","DraggableCore"),l(p,"propTypes",{allowAnyClick:t.default.bool,allowMobileScroll:t.default.bool,children:t.default.node.isRequired,disabled:t.default.bool,enableUserSelectHack:t.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:t.default.arrayOf(t.default.number),handle:t.default.string,cancel:t.default.string,nodeRef:t.default.object,onStart:t.default.func,onDrag:t.default.func,onStop:t.default.func,onMouseDown:t.default.func,scale:t.default.number,className:i.dontSetMe,style:i.dontSetMe,transform:i.dontSetMe}),l(p,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),Oe}function _e(){return Se||(Se=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),e.default=void 0;var t=function(e,t){if("function"==typeof WeakMap)var n=new WeakMap,r=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var o,i,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(o=t?r:n){if(o.has(e))return o.get(e);o.set(e,a)}for(const n in e)"default"!==n&&{}.hasOwnProperty.call(e,n)&&((i=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,n))&&(i.get||i.set)?o(a,n,i):a[n]=e[n]);return a}(e,t)}(f()),n=u(b()),r=u(h()),o=K(),i=me(),a=ve(),s=pe(),l=u(Ce()),c=u(Pe());function u(e){return e&&e.__esModule?e:{default:e}}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(null,arguments)}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g extends t.Component{static getDerivedStateFromProps(e,t){let{position:n}=e,{prevPropsPosition:r}=t;return!n||r&&n.x===r.x&&n.y===r.y?null:((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:r}),{x:n.x,y:n.y,prevPropsPosition:{...n}})}constructor(e){super(e),p(this,"onDragStart",(e,t)=>{(0,c.default)("Draggable: onDragStart: %j",t);if(!1===this.props.onStart(e,(0,a.createDraggableData)(this,t)))return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(e,t)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",t);const n=(0,a.createDraggableData)(this,t),r={x:n.x,y:n.y,slackX:0,slackY:0};if(this.props.bounds){const{x:e,y:t}=r;r.x+=this.state.slackX,r.y+=this.state.slackY;const[o,i]=(0,a.getBoundPosition)(this,r.x,r.y);r.x=o,r.y=i,r.slackX=this.state.slackX+(e-r.x),r.slackY=this.state.slackY+(t-r.y),n.x=r.x,n.y=r.y,n.deltaX=r.x-this.state.x,n.deltaY=r.y-this.state.y}if(!1===this.props.onDrag(e,n))return!1;this.setState(r)}),p(this,"onDragStop",(e,t)=>{if(!this.state.dragging)return!1;if(!1===this.props.onStop(e,(0,a.createDraggableData)(this,t)))return!1;(0,c.default)("Draggable: onDragStop: %j",t);const n={dragging:!1,slackX:0,slackY:0};if(Boolean(this.props.position)){const{x:e,y:t}=this.props.position;n.x=e,n.y=t}this.setState(n)}),this.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:{...e.position},slackX:0,slackY:0,isElementSVG:!1},e.position&&!e.onDrag&&e.onStop}componentDidMount(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){return this.props?.nodeRef?.current??r.default.findDOMNode(this)}render(){const{axis:e,bounds:n,children:r,defaultPosition:s,defaultClassName:c,defaultClassNameDragging:u,defaultClassNameDragged:p,position:f,positionOffset:h,scale:g,...m}=this.props;let y={},b=null;const v=!Boolean(f)||this.state.dragging,x=f||s,w={x:(0,a.canDragX)(this)&&v?this.state.x:x.x,y:(0,a.canDragY)(this)&&v?this.state.y:x.y};this.state.isElementSVG?b=(0,i.createSVGTransform)(w,h):y=(0,i.createCSSTransform)(w,h);const S=(0,o.clsx)(r.props.className||"",c,{[u]:this.state.dragging,[p]:this.state.dragged});return t.createElement(l.default,d({},m,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(r),{className:S,style:{...r.props.style,...y},transform:b}))}}e.default=g,p(g,"displayName","Draggable"),p(g,"propTypes",{...l.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:s.dontSetMe,style:s.dontSetMe,transform:s.dontSetMe}),p(g,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})}(ce)),ce}function Re(){if(je)return le.exports;je=1;const{default:e,DraggableCore:t}=_e();return le.exports=e,le.exports.default=e,le.exports.DraggableCore=t,le.exports}var Ee,ze={exports:{}},Me={},ke={};function Ne(){if(Ee)return ke;Ee=1,ke.__esModule=!0,ke.cloneElement=function(e,n){n.style&&e.props.style&&(n.style=r(r({},e.props.style),n.style));n.className&&e.props.className&&(n.className=e.props.className+" "+n.className);return t.default.cloneElement(e,n)};var e,t=(e=f())&&e.__esModule?e:{default:e};function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}return ke}var Te,Le,He={};function Ae(){if(Te)return He;Te=1,He.__esModule=!0,He.resizableProps=void 0;var e,t=(e=b())&&e.__esModule?e:{default:e};Re();var n={axis:t.default.oneOf(["both","x","y","none"]),className:t.default.string,children:t.default.element.isRequired,draggableOpts:t.default.shape({allowAnyClick:t.default.bool,cancel:t.default.string,children:t.default.node,disabled:t.default.bool,enableUserSelectHack:t.default.bool,offsetParent:t.default.node,grid:t.default.arrayOf(t.default.number),handle:t.default.string,nodeRef:t.default.object,onStart:t.default.func,onDrag:t.default.func,onStop:t.default.func,onMouseDown:t.default.func,scale:t.default.number}),height:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o,i=n[0];return"both"===i.axis||"y"===i.axis?(o=t.default.number).isRequired.apply(o,n):t.default.number.apply(t.default,n)},handle:t.default.oneOfType([t.default.node,t.default.func]),handleSize:t.default.arrayOf(t.default.number),lockAspectRatio:t.default.bool,maxConstraints:t.default.arrayOf(t.default.number),minConstraints:t.default.arrayOf(t.default.number),onResizeStop:t.default.func,onResizeStart:t.default.func,onResize:t.default.func,resizeHandles:t.default.arrayOf(t.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:t.default.number,width:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o,i=n[0];return"both"===i.axis||"x"===i.axis?(o=t.default.number).isRequired.apply(o,n):t.default.number.apply(t.default,n)}};return He.resizableProps=n,He}function Ie(){if(Le)return Me;Le=1,Me.__esModule=!0,Me.default=void 0;var e=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(f()),t=Re(),n=Ne(),r=Ae(),o=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var d=function(r){var i,s;function c(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))||this).handleRefs={},e.lastHandleRect=null,e.slack=null,e}s=r,(i=c).prototype=Object.create(s.prototype),i.prototype.constructor=i,u(i,s);var d=c.prototype;return d.componentWillUnmount=function(){this.resetData()},d.resetData=function(){this.lastHandleRect=this.slack=null},d.runConstraints=function(e,t){var n=this.props,r=n.minConstraints,o=n.maxConstraints,i=n.lockAspectRatio;if(!r&&!o&&!i)return[e,t];if(i){var a=this.props.width/this.props.height,s=e-this.props.width,l=t-this.props.height;Math.abs(s)>Math.abs(l*a)?t=e/a:e=t*a}var c=e,u=t,d=this.slack||[0,0],p=d[0],f=d[1];return e+=p,t+=f,r&&(e=Math.max(r[0],e),t=Math.max(r[1],t)),o&&(e=Math.min(o[0],e),t=Math.min(o[1],t)),this.slack=[p+(c-e),f+(u-t)],[e,t]},d.resizeHandler=function(e,t){var n=this;return function(r,o){var i=o.node,a=o.deltaX,s=o.deltaY;"onResizeStart"===e&&n.resetData();var l=("both"===n.props.axis||"x"===n.props.axis)&&"n"!==t&&"s"!==t,c=("both"===n.props.axis||"y"===n.props.axis)&&"e"!==t&&"w"!==t;if(l||c){var u=t[0],d=t[t.length-1],p=i.getBoundingClientRect();if(null!=n.lastHandleRect){if("w"===d)a+=p.left-n.lastHandleRect.left;if("n"===u)s+=p.top-n.lastHandleRect.top}n.lastHandleRect=p,"w"===d&&(a=-a),"n"===u&&(s=-s);var f=n.props.width+(l?a/n.props.transformScale:0),h=n.props.height+(c?s/n.props.transformScale:0),g=n.runConstraints(f,h);f=g[0],h=g[1];var m=f!==n.props.width||h!==n.props.height,y="function"==typeof n.props[e]?n.props[e]:null;y&&!("onResize"===e&&!m)&&(null==r.persist||r.persist(),y(r,{node:i,size:{width:f,height:h},handle:t})),"onResizeStop"===e&&n.resetData()}}},d.renderResizeHandle=function(t,n){var r=this.props.handle;if(!r)return e.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+t,ref:n});if("function"==typeof r)return r(t,n);var o=l({ref:n},"string"==typeof r.type?{}:{handleAxis:t});return e.cloneElement(r,o)},d.render=function(){var r=this,i=this.props,s=i.children,c=i.className,u=i.draggableOpts,d=i.resizeHandles,p=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(i,o);return(0,n.cloneElement)(s,l(l({},p),{},{className:(c?c+" ":"")+"react-resizable",children:[].concat(s.props.children,d.map(function(n){var o,i=null!=(o=r.handleRefs[n])?o:r.handleRefs[n]=e.createRef();return e.createElement(t.DraggableCore,a({},u,{nodeRef:i,key:"resizableHandle-"+n,onStop:r.resizeHandler("onResizeStop",n),onStart:r.resizeHandler("onResizeStart",n),onDrag:r.resizeHandler("onResize",n)}),r.renderResizeHandle(n,i))}))}))},c}(e.Component);return Me.default=d,d.propTypes=r.resizableProps,d.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1},Me}var We,qe,$e={};function Be(){if(We)return $e;We=1,$e.__esModule=!0,$e.default=void 0;var e=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(r,i,s):r[i]=e[i]}r.default=e,n&&n.set(e,r);return r}(f()),t=i(b()),n=i(Ie()),r=Ae(),o=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){u(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var p=function(t){var r,i;function a(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).state={width:e.props.width,height:e.props.height,propsWidth:e.props.width,propsHeight:e.props.height},e.onResize=function(t,n){var r=n.size;e.props.onResize?(null==t.persist||t.persist(),e.setState(r,function(){return e.props.onResize&&e.props.onResize(t,n)})):e.setState(r)},e}return i=t,(r=a).prototype=Object.create(i.prototype),r.prototype.constructor=r,d(r,i),a.getDerivedStateFromProps=function(e,t){return t.propsWidth!==e.width||t.propsHeight!==e.height?{width:e.width,height:e.height,propsWidth:e.width,propsHeight:e.height}:null},a.prototype.render=function(){var t=this.props,r=t.handle,i=t.handleSize,a=t.onResizeStart,l=t.onResizeStop,u=t.draggableOpts,d=t.minConstraints,p=t.maxConstraints,f=t.lockAspectRatio,h=t.axis,g=t.resizeHandles,m=t.style,y=t.transformScale,b=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(t,o);return e.createElement(n.default,{axis:h,draggableOpts:u,handle:r,handleSize:i,height:this.state.height,lockAspectRatio:f,maxConstraints:p,minConstraints:d,onResizeStart:a,onResize:this.onResize,onResizeStop:l,resizeHandles:g,transformScale:y,width:this.state.width},e.createElement("div",s({},b,{style:c(c({},m),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},a}(e.Component);return $e.default=p,p.propTypes=c(c({},r.resizableProps),{},{children:t.default.element}),$e}var Fe,Ge,Ue,Xe={};function Ye(){if(Fe)return Xe;Fe=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.resizeHandleType=Xe.resizeHandleAxesType=Xe.default=void 0;var e=n(b()),t=n(f());function n(e){return e&&e.__esModule?e:{default:e}}const r=Xe.resizeHandleAxesType=e.default.arrayOf(e.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),o=Xe.resizeHandleType=e.default.oneOfType([e.default.node,e.default.func]);return Xe.default={className:e.default.string,style:e.default.object,width:e.default.number,autoSize:e.default.bool,cols:e.default.number,draggableCancel:e.default.string,draggableHandle:e.default.string,verticalCompact:function(e){},compactType:e.default.oneOf(["vertical","horizontal"]),layout:function(e){var t=e.layout;void 0!==t&&ne().validateLayout(t,"layout")},margin:e.default.arrayOf(e.default.number),containerPadding:e.default.arrayOf(e.default.number),rowHeight:e.default.number,maxRows:e.default.number,isBounded:e.default.bool,isDraggable:e.default.bool,isResizable:e.default.bool,allowOverlap:e.default.bool,preventCollision:e.default.bool,useCSSTransforms:e.default.bool,transformScale:e.default.number,isDroppable:e.default.bool,resizeHandles:r,resizeHandle:o,onLayoutChange:e.default.func,onDragStart:e.default.func,onDrag:e.default.func,onDragStop:e.default.func,onResizeStart:e.default.func,onResize:e.default.func,onResizeStop:e.default.func,onDrop:e.default.func,droppingItem:e.default.shape({i:e.default.string.isRequired,w:e.default.number.isRequired,h:e.default.number.isRequired}),children:function(e,n){const r=e[n],o={};t.default.Children.forEach(r,function(e){if(null!=e?.key){if(o[e.key])throw new Error('Duplicate child key "'+e.key+'" found! This will cause problems in ReactGridLayout.');o[e.key]=!0}})},innerRef:e.default.any},Xe}function Ve(){if(Ge)return se;Ge=1,Object.defineProperty(se,"__esModule",{value:!0}),se.default=void 0;var e=c(f()),t=h(),n=c(b()),r=Re(),o=(qe||(qe=1,ze.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},ze.exports.Resizable=Ie().default,ze.exports.ResizableBox=Be().default),ze.exports),i=ne(),a=ie(),s=Ye(),l=c(K());function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let d=class extends e.default.Component{constructor(){super(...arguments),u(this,"state",{resizing:null,dragging:null,className:""}),u(this,"elementRef",e.default.createRef()),u(this,"onDragStart",(e,t)=>{let{node:n}=t;const{onDragStart:r,transformScale:o}=this.props;if(!r)return;const i={top:0,left:0},{offsetParent:s}=n;if(!s)return;const l=s.getBoundingClientRect(),c=n.getBoundingClientRect(),u=c.left/o,d=l.left/o,p=c.top/o,f=l.top/o;i.left=u-d+s.scrollLeft,i.top=p-f+s.scrollTop,this.setState({dragging:i});const{x:h,y:g}=(0,a.calcXY)(this.getPositionParams(),i.top,i.left,this.props.w,this.props.h);return r.call(this,this.props.i,h,g,{e:e,node:n,newPosition:i})}),u(this,"onDrag",(e,n,r)=>{let{node:o,deltaX:i,deltaY:s}=n;const{onDrag:l}=this.props;if(!l)return;if(!this.state.dragging)throw new Error("onDrag called before onDragStart.");let c=this.state.dragging.top+s,u=this.state.dragging.left+i;const{isBounded:d,i:p,w:f,h:h,containerWidth:g}=this.props,m=this.getPositionParams();if(d){const{offsetParent:e}=o;if(e){const{margin:t,rowHeight:n}=this.props,r=e.clientHeight-(0,a.calcGridItemWHPx)(h,n,t[1]);c=(0,a.clamp)(c,0,r);const o=(0,a.calcGridColWidth)(m),i=g-(0,a.calcGridItemWHPx)(f,o,t[0]);u=(0,a.clamp)(u,0,i)}}const y={top:c,left:u};r?this.setState({dragging:y}):(0,t.flushSync)(()=>{this.setState({dragging:y})});const{x:b,y:v}=(0,a.calcXY)(m,c,u,f,h);return l.call(this,p,b,v,{e:e,node:o,newPosition:y})}),u(this,"onDragStop",(e,t)=>{let{node:n}=t;const{onDragStop:r}=this.props;if(!r)return;if(!this.state.dragging)throw new Error("onDragEnd called before onDragStart.");const{w:o,h:i,i:s}=this.props,{left:l,top:c}=this.state.dragging,u={top:c,left:l};this.setState({dragging:null});const{x:d,y:p}=(0,a.calcXY)(this.getPositionParams(),c,l,o,i);return r.call(this,s,d,p,{e:e,node:n,newPosition:u})}),u(this,"onResizeStop",(e,t,n)=>this.onResizeHandler(e,t,n,"onResizeStop")),u(this,"onResizeStart",(e,t,n)=>this.onResizeHandler(e,t,n,"onResizeStart")),u(this,"onResize",(e,t,n)=>this.onResizeHandler(e,t,n,"onResize"))}shouldComponentUpdate(e,t){if(this.props.children!==e.children)return!0;if(this.props.droppingPosition!==e.droppingPosition)return!0;const n=(0,a.calcGridItemPosition)(this.getPositionParams(this.props),this.props.x,this.props.y,this.props.w,this.props.h,this.state),r=(0,a.calcGridItemPosition)(this.getPositionParams(e),e.x,e.y,e.w,e.h,t);return!(0,i.fastPositionEqual)(n,r)||this.props.useCSSTransforms!==e.useCSSTransforms}componentDidMount(){this.moveDroppingItem({})}componentDidUpdate(e){this.moveDroppingItem(e)}moveDroppingItem(e){const{droppingPosition:t}=this.props;if(!t)return;const n=this.elementRef.current;if(!n)return;const r=e.droppingPosition||{left:0,top:0},{dragging:o}=this.state,i=o&&t.left!==r.left||t.top!==r.top;if(o){if(i){const e=t.left-o.left,r=t.top-o.top;this.onDrag(t.e,{node:n,deltaX:e,deltaY:r},!0)}}else this.onDragStart(t.e,{node:n,deltaX:t.left,deltaY:t.top})}getPositionParams(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return{cols:e.cols,containerPadding:e.containerPadding,containerWidth:e.containerWidth,margin:e.margin,maxRows:e.maxRows,rowHeight:e.rowHeight}}createStyle(e){const{usePercentages:t,containerWidth:n,useCSSTransforms:r}=this.props;let o;return r?o=(0,i.setTransform)(e):(o=(0,i.setTopLeft)(e),t&&(o.left=(0,i.perc)(e.left/n),o.width=(0,i.perc)(e.width/n))),o}mixinDraggable(t,n){return e.default.createElement(r.DraggableCore,{disabled:!n,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:""),scale:this.props.transformScale,nodeRef:this.elementRef},t)}curryResizeHandler(e,t){return(n,r)=>t(n,r,e)}mixinResizable(t,n,r){const{cols:i,minW:s,minH:l,maxW:c,maxH:u,transformScale:d,resizeHandles:p,resizeHandle:f}=this.props,h=this.getPositionParams(),g=(0,a.calcGridItemPosition)(h,0,0,i,0).width,m=(0,a.calcGridItemPosition)(h,0,0,s,l),y=(0,a.calcGridItemPosition)(h,0,0,c,u),b=[m.width,m.height],v=[Math.min(y.width,g),Math.min(y.height,1/0)];return e.default.createElement(o.Resizable,{draggableOpts:{disabled:!r},className:r?void 0:"react-resizable-hide",width:n.width,height:n.height,minConstraints:b,maxConstraints:v,onResizeStop:this.curryResizeHandler(n,this.onResizeStop),onResizeStart:this.curryResizeHandler(n,this.onResizeStart),onResize:this.curryResizeHandler(n,this.onResize),transformScale:d,resizeHandles:p,handle:f},t)}onResizeHandler(e,n,r,o){let{node:s,size:l,handle:c}=n;const u=this.props[o];if(!u)return;const{x:d,y:p,i:f,maxH:h,minH:g,containerWidth:m}=this.props,{minW:y,maxW:b}=this.props;let v=l;s&&(v=(0,i.resizeItemInDirection)(c,r,l,m),(0,t.flushSync)(()=>{this.setState({resizing:"onResizeStop"===o?null:v})}));let{w:x,h:w}=(0,a.calcWH)(this.getPositionParams(),v.width,v.height,d,p,c);x=(0,a.clamp)(x,Math.max(y,1),b),w=(0,a.clamp)(w,g,h),u.call(this,f,x,w,{e:e,node:s,size:v,handle:c})}render(){const{x:t,y:n,w:r,h:o,isDraggable:i,isResizable:s,droppingPosition:c,useCSSTransforms:u}=this.props,d=(0,a.calcGridItemPosition)(this.getPositionParams(),t,n,r,o,this.state),p=e.default.Children.only(this.props.children);let f=e.default.cloneElement(p,{ref:this.elementRef,className:(0,l.default)("react-grid-item",p.props.className,this.props.className,{static:this.props.static,resizing:Boolean(this.state.resizing),"react-draggable":i,"react-draggable-dragging":Boolean(this.state.dragging),dropping:Boolean(c),cssTransforms:u}),style:{...this.props.style,...p.props.style,...this.createStyle(d)}});return f=this.mixinResizable(f,d,s),f=this.mixinDraggable(f,i),f}};return se.default=d,u(d,"propTypes",{children:n.default.element,cols:n.default.number.isRequired,containerWidth:n.default.number.isRequired,rowHeight:n.default.number.isRequired,margin:n.default.array.isRequired,maxRows:n.default.number.isRequired,containerPadding:n.default.array.isRequired,x:n.default.number.isRequired,y:n.default.number.isRequired,w:n.default.number.isRequired,h:n.default.number.isRequired,minW:function(e,t){const n=e[t];return"number"!=typeof n?new Error("minWidth not Number"):n>e.w||n>e.maxW?new Error("minWidth larger than item width/maxWidth"):void 0},maxW:function(e,t){const n=e[t];return"number"!=typeof n?new Error("maxWidth not Number"):n<e.w||n<e.minW?new Error("maxWidth smaller than item width/minWidth"):void 0},minH:function(e,t){const n=e[t];return"number"!=typeof n?new Error("minHeight not Number"):n>e.h||n>e.maxH?new Error("minHeight larger than item height/maxHeight"):void 0},maxH:function(e,t){const n=e[t];return"number"!=typeof n?new Error("maxHeight not Number"):n<e.h||n<e.minH?new Error("maxHeight smaller than item height/minHeight"):void 0},i:n.default.string.isRequired,resizeHandles:s.resizeHandleAxesType,resizeHandle:s.resizeHandleType,onDragStop:n.default.func,onDragStart:n.default.func,onDrag:n.default.func,onResizeStop:n.default.func,onResizeStart:n.default.func,onResize:n.default.func,isDraggable:n.default.bool.isRequired,isResizable:n.default.bool.isRequired,isBounded:n.default.bool.isRequired,static:n.default.bool,useCSSTransforms:n.default.bool.isRequired,transformScale:n.default.number,className:n.default.string,handle:n.default.string,cancel:n.default.string,droppingPosition:n.default.shape({e:n.default.object.isRequired,left:n.default.number.isRequired,top:n.default.number.isRequired})}),u(d,"defaultProps",{className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0,transformScale:1}),se}function Je(){if(Ue)return U;Ue=1,Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var e=function(e,t){if("function"==typeof WeakMap)var n=new WeakMap,r=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var o,i,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(o=t?r:n){if(o.has(e))return o.get(e);o.set(e,a)}for(const n in e)"default"!==n&&{}.hasOwnProperty.call(e,n)&&((i=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,n))&&(i.get||i.set)?o(a,n,i):a[n]=e[n]);return a}(e,t)}(f()),t=Y(),n=s(K()),r=ne(),o=ie(),i=s(Ve()),a=s(Ye());function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c="react-grid-layout";let u=!1;try{u=/firefox/i.test(navigator.userAgent)}catch(p){}let d=class extends e.Component{constructor(){super(...arguments),l(this,"state",{activeDrag:null,layout:(0,r.synchronizeLayoutWithChildren)(this.props.layout,this.props.children,this.props.cols,(0,r.compactType)(this.props),this.props.allowOverlap),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null,resizing:!1,droppingDOMNode:null,children:[]}),l(this,"dragEnterCounter",0),l(this,"onDragStart",(e,t,n,o)=>{let{e:i,node:a}=o;const{layout:s}=this.state,l=(0,r.getLayoutItem)(s,e);if(!l)return;const c={w:l.w,h:l.h,x:l.x,y:l.y,placeholder:!0,i:e};return this.setState({oldDragItem:(0,r.cloneLayoutItem)(l),oldLayout:s,activeDrag:c}),this.props.onDragStart(s,l,l,null,i,a)}),l(this,"onDrag",(e,t,n,o)=>{let{e:i,node:a}=o;const{oldDragItem:s}=this.state;let{layout:l}=this.state;const{cols:c,allowOverlap:u,preventCollision:d}=this.props,p=(0,r.getLayoutItem)(l,e);if(!p)return;const f={w:p.w,h:p.h,x:p.x,y:p.y,placeholder:!0,i:e};l=(0,r.moveElement)(l,p,t,n,!0,d,(0,r.compactType)(this.props),c,u),this.props.onDrag(l,s,p,f,i,a),this.setState({layout:u?l:(0,r.compact)(l,(0,r.compactType)(this.props),c),activeDrag:f})}),l(this,"onDragStop",(e,t,n,o)=>{let{e:i,node:a}=o;if(!this.state.activeDrag)return;const{oldDragItem:s}=this.state;let{layout:l}=this.state;const{cols:c,preventCollision:u,allowOverlap:d}=this.props,p=(0,r.getLayoutItem)(l,e);if(!p)return;l=(0,r.moveElement)(l,p,t,n,!0,u,(0,r.compactType)(this.props),c,d);const f=d?l:(0,r.compact)(l,(0,r.compactType)(this.props),c);this.props.onDragStop(f,s,p,null,i,a);const{oldLayout:h}=this.state;this.setState({activeDrag:null,layout:f,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged(f,h)}),l(this,"onResizeStart",(e,t,n,o)=>{let{e:i,node:a}=o;const{layout:s}=this.state,l=(0,r.getLayoutItem)(s,e);l&&(this.setState({oldResizeItem:(0,r.cloneLayoutItem)(l),oldLayout:this.state.layout,resizing:!0}),this.props.onResizeStart(s,l,l,null,i,a))}),l(this,"onResize",(e,t,n,o)=>{let{e:i,node:a,handle:s}=o;const{oldResizeItem:l}=this.state,{layout:c}=this.state,{cols:u,preventCollision:d,allowOverlap:p}=this.props;let f,h,g,m=!1;const[y,b]=(0,r.withLayoutItem)(c,e,e=>{let o;if(h=e.x,g=e.y,-1!==["sw","w","nw","n","ne"].indexOf(s)&&(-1!==["sw","nw","w"].indexOf(s)&&(h=e.x+(e.w-t),t=e.x!==h&&h<0?e.w:t,h=h<0?0:h),-1!==["ne","n","nw"].indexOf(s)&&(g=e.y+(e.h-n),n=e.y!==g&&g<0?e.h:n,g=g<0?0:g),m=!0),d&&!p){o=(0,r.getAllCollisions)(c,{...e,w:t,h:n,x:h,y:g}).filter(t=>t.i!==e.i).length>0,o&&(g=e.y,n=e.h,h=e.x,t=e.w,m=!1)}return e.w=t,e.h=n,e});if(!b)return;if(f=y,m){const e=!0;f=(0,r.moveElement)(y,b,h,g,e,this.props.preventCollision,(0,r.compactType)(this.props),u,p)}const v={w:b.w,h:b.h,x:b.x,y:b.y,static:!0,i:e};this.props.onResize(f,l,b,v,i,a),this.setState({layout:p?f:(0,r.compact)(f,(0,r.compactType)(this.props),u),activeDrag:v})}),l(this,"onResizeStop",(e,t,n,o)=>{let{e:i,node:a}=o;const{layout:s,oldResizeItem:l}=this.state,{cols:c,allowOverlap:u}=this.props,d=(0,r.getLayoutItem)(s,e),p=u?s:(0,r.compact)(s,(0,r.compactType)(this.props),c);this.props.onResizeStop(p,l,d,null,i,a);const{oldLayout:f}=this.state;this.setState({activeDrag:null,layout:p,oldResizeItem:null,oldLayout:null,resizing:!1}),this.onLayoutMaybeChanged(p,f)}),l(this,"onDragOver",t=>{if(t.preventDefault(),t.stopPropagation(),u&&!t.nativeEvent.target?.classList.contains(c))return!1;const{droppingItem:n,onDropDragOver:r,margin:i,cols:a,rowHeight:s,maxRows:l,width:d,containerPadding:p,transformScale:f}=this.props,h=r?.(t);if(!1===h)return this.state.droppingDOMNode&&this.removeDroppingPlaceholder(),!1;const g={...n,...h},{layout:m}=this.state,y=t.currentTarget.getBoundingClientRect(),b=t.clientX-y.left,v=t.clientY-y.top,x={left:b/f,top:v/f,e:t};if(this.state.droppingDOMNode){if(this.state.droppingPosition){const{left:e,top:t}=this.state.droppingPosition;(e!=b||t!=v)&&this.setState({droppingPosition:x})}}else{const t={cols:a,margin:i,maxRows:l,rowHeight:s,containerWidth:d,containerPadding:p||i},n=(0,o.calcXY)(t,v,b,g.w,g.h);this.setState({droppingDOMNode:e.createElement("div",{key:g.i}),droppingPosition:x,layout:[...m,{...g,x:n.x,y:n.y,static:!1,isDraggable:!0}]})}}),l(this,"removeDroppingPlaceholder",()=>{const{droppingItem:e,cols:t}=this.props,{layout:n}=this.state,o=(0,r.compact)(n.filter(t=>t.i!==e.i),(0,r.compactType)(this.props),t,this.props.allowOverlap);this.setState({layout:o,droppingDOMNode:null,activeDrag:null,droppingPosition:void 0})}),l(this,"onDragLeave",e=>{e.preventDefault(),e.stopPropagation(),this.dragEnterCounter--,0===this.dragEnterCounter&&this.removeDroppingPlaceholder()}),l(this,"onDragEnter",e=>{e.preventDefault(),e.stopPropagation(),this.dragEnterCounter++}),l(this,"onDrop",e=>{e.preventDefault(),e.stopPropagation();const{droppingItem:t}=this.props,{layout:n}=this.state,r=n.find(e=>e.i===t.i);this.dragEnterCounter=0,this.removeDroppingPlaceholder(),this.props.onDrop(n,r,e)})}componentDidMount(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)}static getDerivedStateFromProps(e,n){let o;if(n.activeDrag)return null;if((0,t.deepEqual)(e.layout,n.propsLayout)&&e.compactType===n.compactType?(0,r.childrenEqual)(e.children,n.children)||(o=n.layout):o=e.layout,o){return{layout:(0,r.synchronizeLayoutWithChildren)(o,e.children,e.cols,(0,r.compactType)(e),e.allowOverlap),compactType:e.compactType,children:e.children,propsLayout:e.layout}}return null}shouldComponentUpdate(e,n){return this.props.children!==e.children||!(0,r.fastRGLPropsEqual)(this.props,e,t.deepEqual)||this.state.activeDrag!==n.activeDrag||this.state.mounted!==n.mounted||this.state.droppingPosition!==n.droppingPosition}componentDidUpdate(e,t){if(!this.state.activeDrag){const e=this.state.layout,n=t.layout;this.onLayoutMaybeChanged(e,n)}}containerHeight(){if(!this.props.autoSize)return;const e=(0,r.bottom)(this.state.layout),t=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return e*this.props.rowHeight+(e-1)*this.props.margin[1]+2*t+"px"}onLayoutMaybeChanged(e,n){n||(n=this.state.layout),(0,t.deepEqual)(n,e)||this.props.onLayoutChange(e)}placeholder(){const{activeDrag:t}=this.state;if(!t)return null;const{width:n,cols:r,margin:o,containerPadding:a,rowHeight:s,maxRows:l,useCSSTransforms:c,transformScale:u}=this.props;return e.createElement(i.default,{w:t.w,h:t.h,x:t.x,y:t.y,i:t.i,className:"react-grid-placeholder "+(this.state.resizing?"placeholder-resizing":""),containerWidth:n,cols:r,margin:o,containerPadding:a||o,maxRows:l,rowHeight:s,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:c,transformScale:u},e.createElement("div",null))}processGridItem(t,n){if(!t||!t.key)return;const o=(0,r.getLayoutItem)(this.state.layout,String(t.key));if(!o)return null;const{width:a,cols:s,margin:l,containerPadding:c,rowHeight:u,maxRows:d,isDraggable:p,isResizable:f,isBounded:h,useCSSTransforms:g,transformScale:m,draggableCancel:y,draggableHandle:b,resizeHandles:v,resizeHandle:x}=this.props,{mounted:w,droppingPosition:S}=this.state,j="boolean"==typeof o.isDraggable?o.isDraggable:!o.static&&p,O="boolean"==typeof o.isResizable?o.isResizable:!o.static&&f,D=o.resizeHandles||v,P=j&&h&&!1!==o.isBounded;return e.createElement(i.default,{containerWidth:a,cols:s,margin:l,containerPadding:c||l,maxRows:d,rowHeight:u,cancel:y,handle:b,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:j,isResizable:O,isBounded:P,useCSSTransforms:g&&w,usePercentages:!w,transformScale:m,w:o.w,h:o.h,x:o.x,y:o.y,i:o.i,minH:o.minH,minW:o.minW,maxH:o.maxH,maxW:o.maxW,static:o.static,droppingPosition:n?S:void 0,resizeHandles:D,resizeHandle:x},t)}render(){const{className:t,style:o,isDroppable:i,innerRef:a}=this.props,s=(0,n.default)(c,t),l={height:this.containerHeight(),...o};return e.createElement("div",{ref:a,className:s,style:l,onDrop:i?this.onDrop:r.noop,onDragLeave:i?this.onDragLeave:r.noop,onDragEnter:i?this.onDragEnter:r.noop,onDragOver:i?this.onDragOver:r.noop},e.Children.map(this.props.children,e=>this.processGridItem(e)),i&&this.state.droppingDOMNode&&this.processGridItem(this.state.droppingDOMNode,!0),this.placeholder())}};return U.default=d,l(d,"displayName","ReactGridLayout"),l(d,"propTypes",a.default),l(d,"defaultProps",{autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isBounded:!1,isDraggable:!0,isResizable:!0,allowOverlap:!1,isDroppable:!1,useCSSTransforms:!0,transformScale:1,verticalCompact:!0,compactType:"vertical",preventCollision:!1,droppingItem:{i:"__dropping-elem__",h:1,w:1},resizeHandles:["se"],onLayoutChange:r.noop,onDragStart:r.noop,onDrag:r.noop,onDragStop:r.noop,onResizeStart:r.noop,onResize:r.noop,onResizeStop:r.noop,onDrop:r.noop,onDropDragOver:r.noop}),U}var Ke,Qe,Ze={},et={};function tt(){if(Ke)return et;Ke=1,Object.defineProperty(et,"__esModule",{value:!0}),et.findOrGenerateResponsiveLayout=function(n,r,o,i,a,s){if(n[o])return(0,e.cloneLayout)(n[o]);let l=n[i];const c=t(r),u=c.slice(c.indexOf(o));for(let e=0,t=u.length;e<t;e++){const t=u[e];if(n[t]){l=n[t];break}}return l=(0,e.cloneLayout)(l||[]),(0,e.compact)((0,e.correctBounds)(l,{cols:a}),s,a)},et.getBreakpointFromWidth=function(e,n){const r=t(e);let o=r[0];for(let t=1,i=r.length;t<i;t++){const i=r[t];n>e[i]&&(o=i)}return o},et.getColsFromBreakpoint=function(e,t){if(!t[e])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+e+" is missing!");return t[e]},et.sortBreakpoints=t;var e=ne();function t(e){return Object.keys(e).sort(function(t,n){return e[t]-e[n]})}return et}function nt(){if(Qe)return Ze;Qe=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.default=void 0;var e=function(e,t){if("function"==typeof WeakMap)var n=new WeakMap,r=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var o,i,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(o=t?r:n){if(o.has(e))return o.get(e);o.set(e,a)}for(const n in e)"default"!==n&&{}.hasOwnProperty.call(e,n)&&((i=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,n))&&(i.get||i.set)?o(a,n,i):a[n]=e[n]);return a}(e,t)}(f()),t=a(b()),n=Y(),r=ne(),o=tt(),i=a(Je());function a(e){return e&&e.__esModule?e:{default:e}}function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(null,arguments)}function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=e=>Object.prototype.toString.call(e);function u(e,t){return null==e?null:Array.isArray(e)?e:e[t]}let d=class extends e.Component{constructor(){super(...arguments),l(this,"state",this.generateInitialState()),l(this,"onLayoutChange",e=>{this.props.onLayoutChange(e,{...this.props.layouts,[this.state.breakpoint]:e})})}generateInitialState(){const{width:e,breakpoints:t,layouts:n,cols:r}=this.props,i=(0,o.getBreakpointFromWidth)(t,e),a=(0,o.getColsFromBreakpoint)(i,r),s=!1===this.props.verticalCompact?null:this.props.compactType;return{layout:(0,o.findOrGenerateResponsiveLayout)(n,t,i,i,a,s),breakpoint:i,cols:a}}static getDerivedStateFromProps(e,t){if(!(0,n.deepEqual)(e.layouts,t.layouts)){const{breakpoint:n,cols:r}=t;return{layout:(0,o.findOrGenerateResponsiveLayout)(e.layouts,e.breakpoints,n,n,r,e.compactType),layouts:e.layouts}}return null}componentDidUpdate(e){this.props.width==e.width&&this.props.breakpoint===e.breakpoint&&(0,n.deepEqual)(this.props.breakpoints,e.breakpoints)&&(0,n.deepEqual)(this.props.cols,e.cols)||this.onWidthChange(e)}onWidthChange(e){const{breakpoints:t,cols:n,layouts:i,compactType:a}=this.props,s=this.props.breakpoint||(0,o.getBreakpointFromWidth)(this.props.breakpoints,this.props.width),l=this.state.breakpoint,c=(0,o.getColsFromBreakpoint)(s,n),d={...i};if(l!==s||e.breakpoints!==t||e.cols!==n){l in d||(d[l]=(0,r.cloneLayout)(this.state.layout));let e=(0,o.findOrGenerateResponsiveLayout)(d,t,s,l,c,a);e=(0,r.synchronizeLayoutWithChildren)(e,this.props.children,c,a,this.props.allowOverlap),d[s]=e,this.props.onBreakpointChange(s,c),this.props.onLayoutChange(e,d),this.setState({breakpoint:s,layout:e,cols:c})}const p=u(this.props.margin,s),f=u(this.props.containerPadding,s);this.props.onWidthChange(this.props.width,p,c,f)}render(){const{breakpoint:t,breakpoints:n,cols:r,layouts:o,margin:a,containerPadding:l,onBreakpointChange:c,onLayoutChange:d,onWidthChange:p,...f}=this.props;return e.createElement(i.default,s({},f,{margin:u(a,this.state.breakpoint),containerPadding:u(l,this.state.breakpoint),onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))}};return Ze.default=d,l(d,"propTypes",{breakpoint:t.default.string,breakpoints:t.default.object,allowOverlap:t.default.bool,cols:t.default.object,margin:t.default.oneOfType([t.default.array,t.default.object]),containerPadding:t.default.oneOfType([t.default.array,t.default.object]),layouts(e,t){if("[object Object]"!==c(e[t]))throw new Error("Layout property must be an object. Received: "+c(e[t]));Object.keys(e[t]).forEach(t=>{if(!(t in e.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,r.validateLayout)(e.layouts[t],"layouts."+t)})},width:t.default.number.isRequired,onBreakpointChange:t.default.func,onLayoutChange:t.default.func,onWidthChange:t.default.func}),l(d,"defaultProps",{breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},containerPadding:{lg:null,md:null,sm:null,xs:null,xxs:null},layouts:{},margin:[10,10],allowOverlap:!1,onBreakpointChange:r.noop,onLayoutChange:r.noop,onWidthChange:r.noop}),Ze}var rt={},ot=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some(function(e,r){return e[0]===t&&(n=r,!0)}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];e.call(t,o[1],o[0])}},t}()}(),it="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,at="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),st="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(at):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)};var lt=["top","right","bottom","left","width","height","size","weight"],ct="undefined"!=typeof MutationObserver,ut=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,o=0;function i(){n&&(n=!1,e()),r&&s()}function a(){st(i)}function s(){var e=Date.now();if(n){if(e-o<2)return;r=!0}else n=!0,r=!1,setTimeout(a,t);o=e}return s}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},e.prototype.connect_=function(){it&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),ct?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){it&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;lt.some(function(e){return!!~n.indexOf(e)})&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),dt=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},pt=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||at},ft=vt(0,0,0,0);function ht(e){return parseFloat(e)||0}function gt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(t,n){return t+ht(e["border-"+n+"-width"])},0)}function mt(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return ft;var r=pt(e).getComputedStyle(e),o=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],i=e["padding-"+o];t[o]=ht(i)}return t}(r),i=o.left+o.right,a=o.top+o.bottom,s=ht(r.width),l=ht(r.height);if("border-box"===r.boxSizing&&(Math.round(s+i)!==t&&(s-=gt(r,"left","right")+i),Math.round(l+a)!==n&&(l-=gt(r,"top","bottom")+a)),!function(e){return e===pt(e).document.documentElement}(e)){var c=Math.round(s+i)-t,u=Math.round(l+a)-n;1!==Math.abs(c)&&(s-=c),1!==Math.abs(u)&&(l-=u)}return vt(o.left,o.top,s,l)}var yt="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof pt(e).SVGGraphicsElement}:function(e){return e instanceof pt(e).SVGElement&&"function"==typeof e.getBBox};function bt(e){return it?yt(e)?function(e){var t=e.getBBox();return vt(0,0,t.width,t.height)}(e):mt(e):ft}function vt(e,t,n,r){return{x:e,y:t,width:n,height:r}}var xt=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=vt(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=bt(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),wt=function(){return function(e,t){var n,r,o,i,a,s,l,c=(r=(n=t).x,o=n.y,i=n.width,a=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(s.prototype),dt(l,{x:r,y:o,width:i,height:a,top:o,right:r+i,bottom:a+o,left:r}),l);dt(this,{target:e,contentRect:c})}}(),St=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new ot,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof pt(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new xt(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof pt(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new wt(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),jt="undefined"!=typeof WeakMap?new WeakMap:new ot,Ot=function(){return function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=ut.getInstance(),r=new St(t,n,this);jt.set(this,r)}}();["observe","unobserve","disconnect"].forEach(function(e){Ot.prototype[e]=function(){var t;return(t=jt.get(this))[e].apply(t,arguments)}});var Dt=void 0!==at.ResizeObserver?at.ResizeObserver:Ot;const Pt=g(Object.freeze(Object.defineProperty({__proto__:null,default:Dt},Symbol.toStringTag,{value:"Module"})));var Ct,_t;function Rt(){if(Ct)return rt;Ct=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.default=function(o){var l;return l=class extends e.Component{constructor(){super(...arguments),a(this,"state",{width:1280}),a(this,"elementRef",e.createRef()),a(this,"mounted",!1),a(this,"resizeObserver",void 0)}componentDidMount(){this.mounted=!0,this.resizeObserver=new n.default(e=>{if(this.elementRef.current instanceof HTMLElement){const t=e[0].contentRect.width;this.setState({width:t})}});const e=this.elementRef.current;e instanceof HTMLElement&&this.resizeObserver.observe(e)}componentWillUnmount(){this.mounted=!1;const e=this.elementRef.current;e instanceof HTMLElement&&this.resizeObserver.unobserve(e),this.resizeObserver.disconnect()}render(){const{measureBeforeMount:t,...n}=this.props;return t&&!this.mounted?e.createElement("div",{className:(0,r.default)(this.props.className,s),style:this.props.style,ref:this.elementRef}):e.createElement(o,i({innerRef:this.elementRef},n,this.state))}},a(l,"defaultProps",{measureBeforeMount:!1}),a(l,"propTypes",{measureBeforeMount:t.default.bool}),l};var e=function(e,t){if("function"==typeof WeakMap)var n=new WeakMap,r=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var o,i,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(o=t?r:n){if(o.has(e))return o.get(e);o.set(e,a)}for(const n in e)"default"!==n&&{}.hasOwnProperty.call(e,n)&&((i=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,n))&&(i.get||i.set)?o(a,n,i):a[n]=e[n]);return a}(e,t)}(f()),t=o(b()),n=o(Pt),r=o(K());function o(e){return e&&e.__esModule?e:{default:e}}function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(null,arguments)}function a(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s="react-grid-layout";return rt}var Et,zt=(_t||(_t=1,(Et=G).exports=Je().default,Et.exports.utils=ne(),Et.exports.calculateUtils=ie(),Et.exports.Responsive=nt().default,Et.exports.Responsive.utils=tt(),Et.exports.WidthProvider=Rt().default),G.exports);const Mt=zt.WidthProvider(zt.Responsive),kt={lg:1200,md:996,sm:768,xs:480,xxs:0},Nt={lg:12,md:8,sm:4,xs:2,xxs:1},Tt=({widgets:e,onLayoutChange:t,isDraggable:n=!0,isResizable:a=!0,className:s="",children:l})=>{const{currentLayout:c,setLayout:u,currentBreakpoint:f,setBreakpoint:h,isEditing:g,gridSnap:b}=r();!function(){const{user:e}=y(),t=e?.publicMetadata?.role||e?.privateMetadata?.role||"viewer",n={admin:["admin_access","manager_access","operator_access","viewer_access"],manager:["manager_access","operator_access","viewer_access"],operator:["operator_access","viewer_access"],viewer:["viewer_access"]},r=e=>(n[t]||[]).includes(e)}(),o();const[v,x]=p.useState("vertical"),[w,S]=p.useState(!1),j=p.useMemo(()=>({className:i("layout",g&&"editing-mode",s),layouts:c,breakpoints:kt,cols:Nt,rowHeight:60,isDraggable:n&&g,isResizable:a&&g,isBounded:!0,compactType:v,preventCollision:!b,useCSSTransforms:!0,measureBeforeMount:!1,autoSize:!0,margin:[16,16],containerPadding:[16,16],resizeHandles:["se","e","s"]}),[c,n,a,g,v,b,s]),O=p.useCallback((e,n)=>{t&&t(e,n),Object.entries(n).forEach(([e,t])=>{u(e,t)})},[t,u]),D=p.useCallback((e,t)=>{h(e)},[h]);return m.useEffect(()=>{S(!0)},[]),w?d.jsxs("div",{className:"dashboard-grid-container",children:[g&&d.jsx("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full animate-pulse"}),d.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Edit Mode Active"})]}),d.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Drag to move • Resize from corners • Auto-save enabled"})]})}),d.jsx(Mt,{...j,onLayoutChange:O,onBreakpointChange:D,children:l}),g&&d.jsxs("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-400 text-center",children:["Layout: ",f.toUpperCase()," • Columns: ",Nt[f]," • Widgets: ",m.Children.count(l)]})]}):d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})};function Lt({title:e,value:t,trend:n,color:r="#3b82f6",icon:o,status:i="normal",subtitle:a,onClick:s,loading:l=!1,compact:c=!1}){const u=(e=>{switch(e){case"success":return"#10b981";case"warning":return"#f59e0b";case"critical":return"#ef4444";default:return r}})(i),p=!!s,f={backgroundColor:"white",padding:c?"1rem":"1.5rem",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0,0,0,0.07)",border:`2px solid ${u}20`,borderLeft:`4px solid ${u}`,cursor:p?"pointer":"default",transition:"all 0.3s ease",position:"relative",overflow:"hidden"},h=p?{transform:"translateY(-2px)",boxShadow:"0 8px 25px rgba(0,0,0,0.15)"}:{};return d.jsxs("div",{style:f,onClick:s,onMouseOver:e=>{p&&Object.assign(e.target.style,h)},onMouseOut:e=>{p&&(e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 6px rgba(0,0,0,0.07)")},children:[l&&d.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255,255,255,0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1},children:d.jsx("div",{style:{width:"20px",height:"20px",border:`2px solid ${u}30`,borderTopColor:u,borderRadius:"50%",animation:"spin 1s linear infinite"}})}),"normal"!==i&&d.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",width:"8px",height:"8px",borderRadius:"50%",backgroundColor:u,animation:"critical"===i?"pulse 2s infinite":"none"}}),d.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[o&&d.jsx("div",{style:{fontSize:c?"1.5rem":"2rem",color:u,minWidth:"fit-content"},children:o}),d.jsxs("div",{style:{flex:1,minWidth:0},children:[d.jsx("h3",{style:{fontSize:c?"0.75rem":"0.875rem",color:"#6b7280",marginBottom:"0.5rem",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.05em"},children:e}),d.jsx("p",{style:{fontSize:c?"1.5rem":"2rem",fontWeight:"bold",color:u,marginBottom:a?"0.25rem":"0.5rem",lineHeight:1.2},children:t}),a&&d.jsx("p",{style:{fontSize:"0.75rem",color:"#9ca3af",marginBottom:"0.5rem"},children:a}),n&&d.jsx("p",{style:{fontSize:"0.75rem",color:n.includes("↑")?"#10b981":n.includes("↓")?"#ef4444":"#6b7280",display:"flex",alignItems:"center",gap:"0.25rem",fontWeight:"500"},children:n})]})]}),d.jsx("style",{children:"\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n        \n        @keyframes pulse {\n          0%, 100% { opacity: 1; }\n          50% { opacity: 0.5; }\n        }\n      "})]})}function Ht({stage:e,data:t,onClick:n}){const r=(e=>{switch(e){case"mixing":return{title:"Mixing & Infusion",icon:"🧪",color:"#10b981",subtitle:`${t?.batchesInProgress||0} batches active`};case"bottling":return{title:"Bottling & Labeling",icon:"🍾",color:"#3b82f6",subtitle:`${t?.unitsBottled?.toLocaleString()||0} units today`};case"warehousing":return{title:"Warehousing",icon:"📦",color:"#8b5cf6",subtitle:`${t?.inventory?.toLocaleString()||0} in inventory`};default:return{title:e,icon:"📊",color:"#6b7280"}}})(e),o=t?.efficiency||0,i=o>=95?"success":o>=85?"normal":o>=70?"warning":"critical";return d.jsx(Lt,{title:r.title,value:`${o.toFixed(1)}%`,trend:`Quality: ${t?.qualityScore?.toFixed(1)||0}%`,color:r.color,icon:r.icon,subtitle:r.subtitle,status:i,onClick:n})}function At({channel:e,data:t,onClick:n}){const r=(e=>{switch(e){case"amazon":return{title:"Amazon Sales",icon:"🛒",color:"#ea580c"};case"shopify":return{title:"Shopify Direct",icon:"🛍️",color:"#16a34a"};default:return{title:e.charAt(0).toUpperCase()+e.slice(1),icon:"📊",color:"#6b7280"}}})(e),o=t?.revenue||0,i=t?.orders||0,a=t?.fulfillment||0,s=a>=98?"success":a>=95?"normal":"warning";return d.jsx(Lt,{title:r.title,value:`£${o.toLocaleString()}`,trend:`${i} orders • ${a}% fulfilled`,color:r.color,icon:r.icon,status:s,onClick:n})}w.register(S,j,O,D,P,C,_,R,E);const It="#667eea",Wt="#10b981",qt="#3b82f6";function $t({channels:e={},height:t=300,title:n="Multi-Channel Performance"}){const r=p.useMemo(()=>{const t=Object.keys(e),n=t.map(t=>e[t]?.revenue||0),r=t.map(t=>e[t]?.orders||0);return{labels:t.map(e=>e.charAt(0).toUpperCase()+e.slice(1)),datasets:[{label:"Revenue (£)",data:n,backgroundColor:`${Wt}80`,borderColor:Wt,borderWidth:1,yAxisID:"revenue"},{label:"Orders",data:r,backgroundColor:`${qt}80`,borderColor:qt,borderWidth:1,yAxisID:"orders"}]}},[e]),o=p.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12,weight:"500"}}},tooltip:{backgroundColor:"#1f2937",titleColor:"#ffffff",bodyColor:"#ffffff",cornerRadius:8,callbacks:{label:e=>{const t=0===e.datasetIndex?" £":" orders";return`${e.dataset.label}: ${e.parsed.y.toLocaleString()}${t}`}}}},scales:{x:{grid:{display:!1},ticks:{color:"#6b7280",font:{size:11,weight:"500"}}},revenue:{type:"linear",display:!0,position:"left",grid:{color:"#e5e7eb"},ticks:{color:Wt,callback:e=>`£${e.toLocaleString()}`}},orders:{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1},ticks:{color:qt,callback:e=>`${e} orders`}}}}),[]);return d.jsx("div",{style:{height:`${t}px`,position:"relative"},children:d.jsx(v,{data:r,options:o})})}function Bt({productionStages:e={},height:t=250}){const n=p.useMemo(()=>{const t=["mixing","bottling","warehousing"],n=t.map(t=>e[t]?.efficiency||0),r=t.map(t=>e[t]?.qualityScore||0);return{labels:["Mixing & Infusion","Bottling & Labeling","Warehousing"],datasets:[{label:"Efficiency (%)",data:n,borderColor:It,backgroundColor:`${It}30`,tension:.4,fill:!0},{label:"Quality Score (%)",data:r,borderColor:Wt,backgroundColor:`${Wt}30`,tension:.4,fill:!0}]}},[e]),r=p.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20}},tooltip:{backgroundColor:"#1f2937",titleColor:"#ffffff",bodyColor:"#ffffff",cornerRadius:8}},scales:{x:{grid:{display:!1},ticks:{color:"#6b7280"}},y:{min:0,max:100,grid:{color:"#e5e7eb"},ticks:{color:"#6b7280",callback:e=>`${e}%`}}},elements:{point:{radius:4,hoverRadius:6}}}),[]);return d.jsx("div",{style:{height:`${t}px`,position:"relative"},children:d.jsx(x,{data:n,options:r})})}function Ft({notification:e,onClose:t}){const{id:n,type:r,title:o,message:i,duration:a=5e3}=e,s=(e=>{switch(e){case"success":return{backgroundColor:"#10b981",icon:"✅",borderColor:"#059669"};case"warning":return{backgroundColor:"#f59e0b",icon:"⚠️",borderColor:"#d97706"};case"error":return{backgroundColor:"#ef4444",icon:"❌",borderColor:"#dc2626"};case"info":return{backgroundColor:"#3b82f6",icon:"ℹ️",borderColor:"#2563eb"};default:return{backgroundColor:"#6b7280",icon:"🔔",borderColor:"#4b5563"}}})(r);return p.useEffect(()=>{if(a>0){const e=setTimeout(()=>{t(n)},a);return()=>clearTimeout(e)}},[n,a,t]),d.jsxs("div",{style:{backgroundColor:"white",borderLeft:`4px solid ${s.borderColor}`,borderRadius:"8px",padding:"1rem",marginBottom:"0.5rem",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",display:"flex",alignItems:"flex-start",gap:"0.75rem",minWidth:"320px",maxWidth:"400px",animation:"slideIn 0.3s ease-out"},children:[d.jsx("span",{style:{fontSize:"1.2rem"},children:s.icon}),d.jsxs("div",{style:{flex:1},children:[d.jsx("h4",{style:{fontSize:"0.875rem",fontWeight:"bold",color:"#1f2937",margin:0,marginBottom:"0.25rem"},children:o}),d.jsx("p",{style:{fontSize:"0.75rem",color:"#6b7280",margin:0,lineHeight:1.4},children:i})]}),d.jsx("button",{onClick:()=>t(n),style:{background:"none",border:"none",cursor:"pointer",color:"#9ca3af",fontSize:"1rem",padding:"0",lineHeight:1},onMouseOver:e=>e.target.style.color="#6b7280",onMouseOut:e=>e.target.style.color="#9ca3af",children:"✕"}),d.jsx("style",{children:"\n        @keyframes slideIn {\n          from {\n            transform: translateX(100%);\n            opacity: 0;\n          }\n          to {\n            transform: translateX(0);\n            opacity: 1;\n          }\n        }\n      "})]})}function Gt(){const[e,t]=p.useState([]),n=p.useCallback(e=>{const n=Date.now()+Math.random();t(t=>[...t,{...e,id:n}])},[]),r=p.useCallback(e=>{t(t=>t.filter(t=>t.id!==e))},[]);return p.useEffect(()=>{const e=e=>{n(e.detail)};return window.addEventListener("sentia-notify",e),()=>{window.removeEventListener("sentia-notify",e)}},[n]),p.useEffect(()=>{const e=setInterval(()=>{const e=[{type:"success",title:"Production Update",message:"Batch #SEN-2025-089 completed mixing successfully"},{type:"info",title:"New Orders",message:"5 new orders received from Amazon UK"},{type:"warning",title:"Inventory Alert",message:"Low stock warning: Gin & Tonic bottles running low"}];if(Math.random()<.1){const t=e[Math.floor(Math.random()*e.length)];n(t)}},3e4);return()=>clearInterval(e)},[n]),0===e.length?null:d.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:1e3,pointerEvents:"auto"},children:e.map(e=>d.jsx(Ft,{notification:e,onClose:r},e.id))})}const Ut=p.lazy(()=>s(()=>import("./AIAnalyticsDashboard-BwP-1WfE.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),Xt=p.lazy(()=>s(()=>import("./PredictiveAnalyticsDashboard-bvWesuGH.js"),__vite__mapDeps([13,1,2,12,3,4,5,6,14,11,10,9]))),Yt=p.lazy(()=>s(()=>import("./MCPConnectionStatus-DaLB6Az8.js"),__vite__mapDeps([15,1,2,3,4,5,6,16,17]))),Vt=p.lazy(()=>s(()=>import("./AIForecastingWidget-CI8PKfUf.js"),__vite__mapDeps([18,1,2]))),Jt=p.lazy(()=>s(()=>import("./MCPStatusWidget-CUz7vq3F.js"),__vite__mapDeps([19,1,2,17,3,4,5,6,16,11,12,10,9]))),Kt=p.lazy(()=>s(()=>import("./WorkingCapitalWidget-Djdo4mg8.js"),__vite__mapDeps([20,2,1,3,4,5,6]))),Qt=p.lazy(()=>s(()=>import("./SupplyChainWidget-C1nTpnA0.js"),__vite__mapDeps([21,1,2,3,4,5,6,16]))),Zt=()=>d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 rounded-full animate-spin border-t-blue-600 mx-auto"}),d.jsx(T,{className:"w-6 h-6 text-blue-600 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})]}),d.jsx("h3",{className:"mt-4 text-xl font-semibold text-gray-900",children:"Sentia Manufacturing"}),d.jsx("p",{className:"text-gray-600",children:"Loading enterprise dashboard with AI integration..."}),d.jsxs("div",{className:"mt-4 flex items-center justify-center space-x-2 text-sm text-gray-500",children:[d.jsx(N,{className:"w-4 h-4"}),d.jsx("span",{children:"AI Analytics"}),d.jsx("span",{children:"•"}),d.jsx(H,{className:"w-4 h-4"}),d.jsx("span",{children:"MCP Protocol"}),d.jsx("span",{children:"•"}),d.jsx(L,{className:"w-4 h-4"}),d.jsx("span",{children:"Real-time Data"})]})]})});const en=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{user:e,isLoaded:n}=y(),[r,o]=p.useState("overview"),[i,s]=p.useState(!0),[l,c]=p.useState(!0),{data:f,loading:h}=function(e,n=3e4){const[r,o]=p.useState(null),[i,a]=p.useState(!0),[s,l]=p.useState(null),[c,u]=p.useState(null),d=p.useCallback(async()=>{try{const t=await fetch(`https://sentiaprod.financeflo.ai/api${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const n=await t.json();o(n.data||n),l(null),u(new Date),i&&a(!1)}catch(n){l(n.message),a(!1),t.error(`Failed to fetch ${e}:`,n)}},[e,i]);p.useEffect(()=>{d()},[d]),p.useEffect(()=>{if(n>0){const e=setInterval(d,n);return()=>clearInterval(e)}},[d,n]);const f=p.useCallback(()=>{a(!0),d()},[d]);return{data:r,loading:i,error:s,lastUpdated:c,refresh:f}}("/api/kpis/realtime",15e3),{data:g,loading:m}=((e={})=>{const n=()=>null,[r,o]=p.useState({mcp:{status:"initializing",connections:[]},forecasting:{predictions:[],confidence:0},maintenance:{alerts:[],equipment:[]},quality:{inspections:[],defectRate:0},supplyChain:{inventory:[],suppliers:[]},digitalTwin:{simulations:[],performance:{}},analytics:{kpis:{},trends:[]},agent:{conversations:0,satisfaction:0}}),[i,a]=p.useState("disconnected"),[s,l]=p.useState(null),c=p.useRef(null),u=p.useRef(null),d=p.useRef(0),f="https://sentiaprod.financeflo.ai/api",h=p.useCallback(async()=>{try{const e=await null;c.current&&c.current.close();const n=`${f}/ai/sse/stream?token=${encodeURIComponent(e)}`,r=new EventSource(n);c.current=r,r.onopen=()=>{a("connected"),l(null),d.current=0,t.log("AI SSE connection established")},r.addEventListener("ai-status",e=>{const t=JSON.parse(e.data);o(e=>({...e,...t}))}),r.addEventListener("mcp-update",e=>{const t=JSON.parse(e.data);o(e=>({...e,mcp:{...e.mcp,...t}}))}),r.addEventListener("forecast-update",e=>{const t=JSON.parse(e.data);o(e=>({...e,forecasting:{...e.forecasting,...t}}))}),r.addEventListener("maintenance-alert",e=>{const t=JSON.parse(e.data);o(e=>({...e,maintenance:{...e.maintenance,alerts:[t,...e.maintenance.alerts].slice(0,10)}}))}),r.addEventListener("quality-inspection",e=>{const t=JSON.parse(e.data);o(e=>({...e,quality:{...e.quality,inspections:[t,...e.quality.inspections].slice(0,20),defectRate:t.defectRate||e.quality.defectRate}}))}),r.addEventListener("supply-chain-update",e=>{const t=JSON.parse(e.data);o(e=>({...e,supplyChain:{...e.supplyChain,...t}}))}),r.addEventListener("digital-twin-sync",e=>{const t=JSON.parse(e.data);o(e=>({...e,digitalTwin:{...e.digitalTwin,...t}}))}),r.addEventListener("analytics-update",e=>{const t=JSON.parse(e.data);o(e=>({...e,analytics:{...e.analytics,...t}}))}),r.addEventListener("agent-metrics",e=>{const t=JSON.parse(e.data);o(e=>({...e,agent:{...e.agent,...t}}))}),r.onerror=e=>{t.error("AI SSE connection error:",e),a("error"),l("Connection lost. Attempting to reconnect..."),r.close();const n=Math.min(1e3*Math.pow(2,d.current),3e4);d.current+=1,d.current<=5?u.current=setTimeout(()=>{h()},n):l("Unable to establish connection. Please refresh the page.")}}catch(e){t.error("Failed to establish AI SSE connection:",e),l(e.message),a("error")}},[n,f]),g=p.useCallback(()=>{c.current&&(c.current.close(),c.current=null),u.current&&(clearTimeout(u.current),u.current=null),a("disconnected")},[]),m=p.useCallback(async(e,n={})=>{try{const t=await null,r=await fetch(`${f}/ai/command`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({command:e,...n})});if(!r.ok)throw new Error(`Command failed: ${r.statusText}`);return await r.json()}catch(r){throw t.error("AI command error:",r),r}},[n,f]),y=p.useCallback(e=>r[e]||null,[r]),b=p.useCallback((e,t)=>c.current?(c.current.addEventListener(e,t),()=>{c.current&&c.current.removeEventListener(e,t)}):null,[]);return p.useEffect(()=>(!1!==e.autoConnect&&h(),()=>{g()}),[]),{data:r,connectionStatus:i,error:s,connect:h,disconnect:g,sendCommand:m,getSystemData:y,subscribeToEvent:b,mcpStatus:r.mcp,forecastingData:r.forecasting,maintenanceAlerts:r.maintenance,qualityMetrics:r.quality,supplyChainData:r.supplyChain,digitalTwinData:r.digitalTwin,analyticsData:r.analytics,agentMetrics:r.agent}})("/api/ai/insights"),{data:b}=B(),{connected:v}=a("/api/sse/dashboard");u({queryKey:["enterprise-analytics",r],queryFn:async()=>{const e=await fetch(`/api/analytics/enterprise?view=${r}`);return e.ok?e.json():null},refetchInterval:6e4,enabled:n&&!!e});const{data:x}=u({queryKey:["production-ai-enhanced"],queryFn:async()=>{const e=await fetch("/api/production/ai-enhanced");return e.ok?e.json():null},refetchInterval:3e4,enabled:i});return n?d.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[d.jsx(Gt,{}),d.jsx("div",{className:"bg-white shadow-sm border-b",children:d.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:d.jsx("span",{className:"text-white font-bold text-lg",children:"S"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Sentia Manufacturing"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Enterprise AI-Powered Dashboard"})]})]}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full "+(v?"bg-green-400":"bg-red-400")}),d.jsx("span",{className:"text-xs text-gray-600",children:"Live Data"})]}),l&&d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(H,{className:"w-4 h-4 text-blue-500"}),d.jsx("span",{className:"text-xs text-gray-600",children:"MCP Active"})]}),i&&d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(N,{className:"w-4 h-4 text-purple-500"}),d.jsx("span",{className:"text-xs text-gray-600",children:"AI Enhanced"})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(A,{className:"w-4 h-4 text-green-500"}),d.jsx("span",{className:"text-xs text-gray-600",children:e?.firstName||"Enterprise User"})]})]})]})})}),d.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[d.jsx("div",{className:"mb-6 flex space-x-2 bg-white rounded-lg p-1 shadow-sm",children:[{id:"overview",label:"Overview",icon:z},{id:"ai-analytics",label:"AI Analytics",icon:N},{id:"production",label:"Production",icon:k},{id:"mcp-status",label:"MCP Status",icon:H}].map(({id:e,label:t,icon:n})=>d.jsxs("button",{onClick:()=>o(e),className:"flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(r===e?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[d.jsx(n,{className:"w-4 h-4 mr-2"}),t]},e))}),d.jsxs(p.Suspense,{fallback:d.jsx("div",{className:"text-center py-8",children:"Loading enterprise components..."}),children:["overview"===r&&d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[d.jsx(Lt,{title:"Production Efficiency",value:f?.efficiency||"94.2%",trend:f?.efficiencyTrend||"+2.3%",icon:d.jsx(M,{className:"w-5 h-5"}),color:"blue",loading:h}),d.jsx(Lt,{title:"AI Predictions",value:g?.predictions||"98.7%",trend:g?.accuracy||"+5.1%",icon:d.jsx(N,{className:"w-5 h-5"}),color:"purple",loading:m}),d.jsx(Ht,{title:"Quality Score",value:f?.quality||"99.1%",stages:f?.qualityStages,loading:h}),d.jsx(At,{title:"Multi-Channel",channels:f?.channels,loading:h})]}),d.jsxs(Tt,{children:[d.jsx(Vt,{aiMode:i}),d.jsx(Kt,{}),d.jsx(Qt,{}),l&&d.jsx(Jt,{status:b})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[d.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[d.jsx(z,{className:"w-5 h-5 mr-2 text-blue-600"}),"Multi-Channel Performance"]}),d.jsx($t,{data:f?.channelData})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[d.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[d.jsx(k,{className:"w-5 h-5 mr-2 text-green-600"}),"Production Pipeline"]}),d.jsx(Bt,{data:x?.pipeline})]})]})]}),"ai-analytics"===r&&d.jsx(Ut,{}),"production"===r&&d.jsx(Xt,{}),"mcp-status"===r&&l&&d.jsx(Yt,{status:b})]}),d.jsxs("div",{className:"mt-8 text-center text-sm text-gray-500",children:[d.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(L,{className:"w-4 h-4"}),d.jsx("span",{children:"Real-time Integration"})]}),d.jsx("span",{children:"•"}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(N,{className:"w-4 h-4"}),d.jsx("span",{children:"AI-Powered Analytics"})]}),d.jsx("span",{children:"•"}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(H,{className:"w-4 h-4"}),d.jsx("span",{children:"MCP Protocol"})]})]}),d.jsx("p",{className:"mt-2",children:"Sentia Manufacturing Dashboard v2.0 - Enterprise Edition"})]})]})]}):d.jsx(Zt,{})}},Symbol.toStringTag,{value:"Module"}));export{N as B,en as E,$ as m,B as u};
