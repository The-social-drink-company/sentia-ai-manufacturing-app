import{Y as e,bP as a,as as s,j as t,c5 as r,k as i,W as l,aG as n,aq as d,ar as o,F as c}from"./chunk-F7gpAtKD.js";import{W as m,a as p,b as u,M as g,D as x}from"./chunk-CXuUv687.js";import"./chunk-B9jrG6yD.js";import"./chunk-D9wpZLT8.js";import"./chunk-DY4mEHZe.js";import"./chunk-DV2nQ5Q7.js";import"./chunk-Chgu22X3.js";import"./chunk-GXuKHzD9.js";import"./chunk-Dozjk7Op.js";const h=()=>{const{getToken:h}=e(),y=a(),{data:b,isLoading:v,error:j,refetch:k,isRefetching:f}=s({queryKey:["supply-chain"],queryFn:async()=>{const e=await h(),a=await fetch("https://your-production-domain.up.railway.app/api/api/supply-chain/overview",{headers:{Authorization:e?`Bearer ${e}`:"","Content-Type":"application/json"}});if(!a.ok){if(404===a.status||500===a.status)return T();throw new Error(`Failed to fetch supply chain data: ${a.statusText}`)}return a.json()},refetchInterval:6e4,retry:2,retryDelay:1e3}),T=()=>({summary:{activeSuppliers:45,totalShipments:183,inTransit:23,deliveredOnTime:156,delayed:4,averageLeadTime:5.2,supplierPerformance:93.5,inventoryTurnover:8.3},suppliers:[{id:1,name:"Pacific Materials Co.",location:"Vancouver, BC",status:"active",onTimeDelivery:94.5,qualityRating:4.8,leadTime:5,riskLevel:"low",lastDelivery:"2024-01-15",totalOrders:125},{id:2,name:"Industrial Components Ltd.",location:"Toronto, ON",status:"delayed",onTimeDelivery:87.2,qualityRating:4.3,leadTime:8,riskLevel:"medium",lastDelivery:"2024-01-14",totalOrders:98},{id:3,name:"Global Logistics Inc.",location:"Montreal, QC",status:"active",onTimeDelivery:96.1,qualityRating:4.9,leadTime:3,riskLevel:"low",lastDelivery:"2024-01-16",totalOrders:156},{id:4,name:"Eastern Supplies Corp.",location:"Halifax, NS",status:"at-risk",onTimeDelivery:78.5,qualityRating:3.9,leadTime:12,riskLevel:"high",lastDelivery:"2024-01-10",totalOrders:67}],shipmentTrend:{labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],shipped:[28,32,25,35,30,18,15],delivered:[22,28,30,28,33,20,12],delayed:[1,0,2,1,0,1,0]},leadTimeAnalysis:{labels:["Raw Materials","Components","Packaging","Equipment","Consumables"],averageDays:[4.5,6.2,3.1,8.5,2.8],targetDays:[5,7,3,10,3]},riskAssessment:{low:28,medium:12,high:5,critical:0},recentOrders:[{id:"PO-2024-0145",supplier:"Pacific Materials",status:"in-transit",eta:"2024-01-18",value:45e3},{id:"PO-2024-0144",supplier:"Global Logistics",status:"delivered",eta:"2024-01-16",value:32e3},{id:"PO-2024-0143",supplier:"Industrial Components",status:"delayed",eta:"2024-01-19",value:28500},{id:"PO-2024-0142",supplier:"Eastern Supplies",status:"processing",eta:"2024-01-22",value:18e3}],transportModes:{road:45,rail:25,sea:20,air:10},geographicDistribution:{domestic:65,northAmerica:20,asia:10,europe:5}});if(v&&!b)return t.jsx(m,{title:"Supply Chain Management",height:"400px"});if(j&&!b)return t.jsx(p,{error:j,onRetry:k,title:"Supply Chain Management"});const N=b||T(),w={labels:N.shipmentTrend?.labels||[],datasets:[{label:"Shipped",data:N.shipmentTrend?.shipped||[],backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgb(59, 130, 246)",borderWidth:1},{label:"Delivered",data:N.shipmentTrend?.delivered||[],backgroundColor:"rgba(16, 185, 129, 0.8)",borderColor:"rgb(16, 185, 129)",borderWidth:1},{label:"Delayed",data:N.shipmentTrend?.delayed||[],backgroundColor:"rgba(239, 68, 68, 0.8)",borderColor:"rgb(239, 68, 68)",borderWidth:1}]},D={labels:N.leadTimeAnalysis?.labels||[],datasets:[{label:"Average Lead Time",data:N.leadTimeAnalysis?.averageDays||[],borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4},{label:"Target Lead Time",data:N.leadTimeAnalysis?.targetDays||[],borderColor:"rgb(107, 114, 128)",backgroundColor:"rgba(107, 114, 128, 0.1)",borderDash:[5,5],tension:.4}]},C=[{key:"name",label:"Supplier"},{key:"location",label:"Location"},{key:"status",label:"Status",render:e=>t.jsx("span",{className:`text-xs px-2 py-1 rounded ${{active:"text-green-600 bg-green-100 dark:bg-green-900/20",delayed:"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20","at-risk":"text-red-600 bg-red-100 dark:bg-red-900/20"}[e]||"text-gray-600 bg-gray-100"}`,children:e})},{key:"onTimeDelivery",label:"On-Time %",render:e=>`${e}%`},{key:"leadTime",label:"Lead Time",render:e=>`${e} days`},{key:"riskLevel",label:"Risk",render:e=>t.jsx("span",{className:{low:"text-green-600",medium:"text-yellow-600",high:"text-red-600"}[e]||"text-gray-600",children:e})}],S=[{key:"id",label:"Order ID"},{key:"supplier",label:"Supplier"},{key:"status",label:"Status",render:e=>{const a={"in-transit":i,delivered:l,delayed:c,processing:n}[e]||n;return t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(a,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm",children:e})]})}},{key:"eta",label:"ETA"},{key:"value",label:"Value",render:e=>`$${(e/1e3).toFixed(0)}k`}],A=e=>({low:"bg-green-500",medium:"bg-yellow-500",high:"bg-orange-500",critical:"bg-red-500"}[e]||"bg-gray-500");return t.jsxs(u,{title:"Supply Chain Management",onRefresh:()=>{y.invalidateQueries(["supply-chain"]),k()},isRefreshing:f,className:"col-span-2",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[t.jsx(g,{label:"Active Suppliers",value:N.summary?.activeSuppliers||0,icon:r}),t.jsx(g,{label:"In Transit",value:N.summary?.inTransit||0,trend:{direction:"neutral",value:0},icon:i}),t.jsx(g,{label:"On-Time Delivery",value:N.summary?.supplierPerformance||0,unit:"%",trend:{direction:N.summary?.supplierPerformance>90?"up":"down",value:2.1},icon:l}),t.jsx(g,{label:"Avg Lead Time",value:N.summary?.averageLeadTime||0,unit:"days",icon:n})]}),t.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Supplier Risk Assessment"}),t.jsx("div",{className:"flex items-center space-x-4",children:Object.entries(N.riskAssessment||{}).map(([e,a])=>t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${A(e)}`}),t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400 capitalize",children:[e,":"]}),t.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a})]},e))})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Weekly Shipment Activity"}),t.jsx("div",{style:{height:"200px"},children:t.jsx(d,{data:w,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0,stacked:!1}}}})})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Lead Time Analysis"}),t.jsx("div",{style:{height:"200px"},children:t.jsx(o,{data:D,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0,ticks:{callback:function(e){return e+" days"}}}}}})})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Top Suppliers"}),t.jsx(x,{columns:C,data:N.suppliers?.slice(0,5)||[]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Transport Modes"}),t.jsx("div",{className:"space-y-2",children:Object.entries(N.transportModes||{}).map(([e,a])=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 capitalize",children:e}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-24 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${a}%`}})}),t.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white w-10 text-right",children:[a,"%"]})]})]},e))})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Geographic Distribution"}),t.jsx("div",{className:"space-y-2",children:Object.entries(N.geographicDistribution||{}).map(([e,a])=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 capitalize",children:e.replace(/([A-Z])/g," $1").trim()}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-24 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:t.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${a}%`}})}),t.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white w-10 text-right",children:[a,"%"]})]})]},e))})]})]}),t.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Recent Orders"}),t.jsx(x,{columns:S,data:N.recentOrders||[]})]}),t.jsxs("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-400",children:["Last updated: ",(new Date).toLocaleTimeString()]})]})};export{h as default};
