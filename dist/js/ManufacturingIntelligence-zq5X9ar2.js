import{r as e,j as t,t as r,J as i,a2 as a}from"./chunk-CXAPUP0Z.js";import{u as s,a as n}from"./chunk-CKjaC5_Z.js";import{f as c}from"./index-VRpNwfdG.js";import"./chunk-CwR8AQSU.js";import"./chunk--CRELh3m.js";import"./chunk-VeJKilaK.js";import"./chunk-DELSdgG9.js";import"./chunk-l5C0fGLm.js";import"./chunk-Kk1dlRB6.js";import"./chunk-DJCy_cXY.js";import"./chunk-Dozjk7Op.js";const l=({className:l="",timeRange:d="24h",refreshInterval:o=3e5,...m})=>{const{aiServices:u,performAIAnalysis:g,isLoading:x}=s(),{dataStreams:p,subscribe:h,STREAM_TYPES:y}=n(),{resolvedTheme:f}=c(),[b,v]=e.useState({}),[j,k]=e.useState([]),[N,w]=e.useState([]),[E,$]=e.useState([]),[S,T]=e.useState({}),[P,R]=e.useState([]),[A,I]=e.useState({}),[_,C]=e.useState({}),[M,q]=e.useState("overview"),[D,O]=e.useState(!1),U={overallEfficiency:{label:"Overall Equipment Effectiveness",format:"percentage",target:85,critical:70},throughput:{label:"Throughput Rate",format:"units_per_hour",target:100,critical:80},qualityScore:{label:"Quality Score",format:"percentage",target:99.5,critical:95},cycleTime:{label:"Average Cycle Time",format:"minutes",target:15,critical:20},downtimePercent:{label:"Downtime Percentage",format:"percentage",target:5,critical:15},energyEfficiency:{label:"Energy Efficiency",format:"kwh_per_unit",target:2.5,critical:4},costPerUnit:{label:"Cost Per Unit",format:"currency",target:25.5,critical:35},onTimeDelivery:{label:"On-Time Delivery",format:"percentage",target:98,critical:90}};e.useEffect(()=>{const e=[h(y.PRODUCTION_METRICS,F),h(y.QUALITY_DATA,L),h(y.EQUIPMENT_STATUS,Y),h(y.ENERGY_CONSUMPTION,z),h(y.INVENTORY_LEVELS,Q)];return()=>{e.forEach(e=>e())}},[h,y]);const F=e=>{v(t=>({...t,overallEfficiency:e.oee||t.overallEfficiency||82.5,throughput:e.throughput||t.throughput||95.3,cycleTime:e.averageCycleTime||t.cycleTime||16.2,downtimePercent:e.downtimePercent||t.downtimePercent||7.8,onTimeDelivery:e.onTimeDelivery||t.onTimeDelivery||96.2}))},L=e=>{C({defectRate:e.defectRate||.8,firstPassYield:e.firstPassYield||98.2,scrapRate:e.scrapRate||1.2,reworkRate:e.reworkRate||2.1,customerComplaints:e.customerComplaints||.3}),v(t=>({...t,qualityScore:100-(e.defectRate||.8)}))},Y=e=>{e.equipmentEfficiency&&v(t=>({...t,overallEfficiency:e.equipmentEfficiency}))},z=e=>{v(t=>({...t,energyEfficiency:e.kwh_per_unit||t.energyEfficiency||3.2}))},Q=e=>{if(e.totalValue&&e.unitsProduced){const t=e.totalValue/e.unitsProduced;v(e=>({...e,costPerUnit:t}))}},V=async()=>{if(u.manufacturingIntelligence){O(!0);try{const e={kpis:b,qualityMetrics:_,timeRange:d,historicalData:p,timestamp:Date.now()},t=await g("manufacturingIntelligence",e);k(t.insights||[]),w(t.recommendations||[]),$(t.anomalies||[]),T(t.trends||{}),R(t.optimizations||[]),I(t.costAnalysis||{})}catch(e){}finally{O(!1)}}};e.useEffect(()=>{V();const e=setInterval(V,o);return()=>clearInterval(e)},[o]);const G=(e,t)=>{const r=U[e];if(!r||void 0===t)return"N/A";switch(r.format){case"percentage":return`${t.toFixed(1)}%`;case"currency":return`$${t.toFixed(2)}`;case"minutes":return`${t.toFixed(1)} min`;case"units_per_hour":return`${t.toFixed(0)} units/hr`;case"kwh_per_unit":return`${t.toFixed(2)} kWh/unit`;default:return t.toFixed(1)}},H=e.useMemo(()=>j.length>0?j:[{id:"efficiency-trend",type:"efficiency",title:"Equipment Efficiency Declining",description:"Overall equipment effectiveness has dropped 3.2% over the past week.",impact:"high",confidence:.89,actionable:!0},{id:"quality-improvement",type:"quality",title:"Quality Scores Improving",description:"First-pass yield has improved by 1.8% due to recent process adjustments.",impact:"medium",confidence:.92,actionable:!1},{id:"energy-spike",type:"energy",title:"Energy Consumption Anomaly",description:"Energy usage per unit increased 15% during night shift operations.",impact:"medium",confidence:.76,actionable:!0}],[j]),J=`\n    rounded-lg border shadow-sm\n    ${"dark"===f?"bg-slate-800 border-slate-700":"bg-white border-gray-200"}\n  `,W="dark"===f?"text-gray-100":"text-gray-900",B="dark"===f?"text-gray-300":"text-gray-600",K="dark"===f?"text-gray-400":"text-gray-500";return t.jsxs("div",{className:`space-y-6 ${l}`,...m,children:[t.jsx("div",{className:J,children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(r,{className:"w-6 h-6 mr-3 text-purple-600"}),t.jsx("h2",{className:`text-xl font-semibold ${W}`,children:"Manufacturing Intelligence Platform"})]}),t.jsx("div",{className:"flex items-center space-x-3",children:t.jsx("button",{onClick:V,disabled:D||x,className:`\n                  px-4 py-2 rounded-lg font-medium transition-colors\n                  ${D||x?"bg-gray-200 text-gray-500 cursor-not-allowed dark:bg-gray-700":"bg-purple-600 text-white hover:bg-purple-700 dark:bg-purple-500 dark:hover:bg-purple-600"}\n                `,children:D?"Analyzing...":"Refresh Analysis"})})]}),t.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1",children:["overview","insights","quality","efficiency","costs"].map(e=>t.jsx("button",{onClick:()=>q(e),className:`\n                  px-4 py-2 rounded-md text-sm font-medium transition-colors\n                  ${M===e?"bg-white shadow text-purple-600 dark:bg-gray-800 dark:text-purple-400":"text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-100"}\n                `,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})}),"overview"===M&&t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:Object.entries(U).slice(0,8).map(([e,r])=>{const i=b[e],a=((e,t)=>{const r=U[e];return r&&void 0!==t?["cycleTime","downtimePercent","energyEfficiency","costPerUnit"].includes(e)?t<=r.target?"excellent":t<=r.critical?"good":"critical":t>=r.target?"excellent":t>=r.critical?"good":"critical":"unknown"})(e,i),s=(e=>{switch(e){case"excellent":return"text-green-600 bg-green-100 dark:bg-green-900/30 dark:text-green-400";case"good":return"text-blue-600 bg-blue-100 dark:bg-blue-900/30 dark:text-blue-400";case"warning":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/30 dark:text-yellow-400";case"critical":return"text-red-600 bg-red-100 dark:bg-red-900/30 dark:text-red-400";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900/30 dark:text-gray-400"}})(a);return t.jsx("div",{className:J,children:t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h3",{className:`text-sm font-medium ${B}`,children:r.label}),t.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${s}`,children:a.charAt(0).toUpperCase()+a.slice(1)})]}),t.jsxs("div",{className:"flex items-baseline justify-between",children:[t.jsx("span",{className:`text-2xl font-bold ${W}`,children:G(e,i)}),t.jsxs("span",{className:`text-xs ${K}`,children:["Target: ",G(e,r.target)]})]})]})},e)})}),"insights"===M&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsx("div",{className:J,children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx(i,{className:"w-5 h-5 mr-2 text-yellow-600"}),t.jsx("h3",{className:`text-lg font-semibold ${W}`,children:"AI-Generated Insights"})]}),t.jsx("div",{className:"space-y-4",children:H.map(e=>t.jsxs("div",{className:`\n                    p-4 rounded-lg border-l-4\n                    ${"high"===e.impact?"border-red-500 bg-red-50 dark:bg-red-900/20":"medium"===e.impact?"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20":"border-blue-500 bg-blue-50 dark:bg-blue-900/20"}\n                  `,children:[t.jsx("h4",{className:`font-medium mb-1 ${W}`,children:e.title}),t.jsx("p",{className:`text-sm mb-2 ${B}`,children:e.description}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("span",{className:`text-xs ${K}`,children:["Confidence: ",Math.round(100*e.confidence),"%"]}),e.actionable&&t.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded dark:bg-blue-900/30 dark:text-blue-400",children:"Actionable"})]})]},e.id))})]})}),t.jsx("div",{className:J,children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center mb-4",children:[t.jsx(a,{className:"w-5 h-5 mr-2 text-blue-600"}),t.jsx("h3",{className:`text-lg font-semibold ${W}`,children:"Optimization Recommendations"})]}),t.jsx("div",{className:"space-y-3",children:[{title:"Adjust Machine Parameters",description:"Reduce cycle time by 8% with optimal speed settings",savings:"$2,400/month",complexity:"Low"},{title:"Preventive Maintenance Schedule",description:"Reduce unplanned downtime by 12%",savings:"$5,600/month",complexity:"Medium"},{title:"Energy Management System",description:"Optimize power usage during off-peak hours",savings:"$1,800/month",complexity:"High"}].map((e,r)=>t.jsxs("div",{className:`\n                    p-3 rounded-lg\n                    ${"dark"===f?"bg-slate-700":"bg-gray-50"}\n                  `,children:[t.jsx("h4",{className:`font-medium ${W}`,children:e.title}),t.jsx("p",{className:`text-sm mb-2 ${B}`,children:e.description}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:e.savings}),t.jsx("span",{className:`\n                        text-xs px-2 py-1 rounded\n                        ${"Low"===e.complexity?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"Medium"===e.complexity?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}\n                      `,children:e.complexity})]})]},r))})]})})]})]})};export{l as ManufacturingIntelligence,l as default};
