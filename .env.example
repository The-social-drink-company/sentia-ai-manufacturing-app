# Node.js Environment
NODE_ENV=development
PORT=5000

# ============================================================================
# SECURITY WARNING - READ THIS FIRST
# ============================================================================
# This file contains PLACEHOLDER values only for documentation purposes.
# NEVER commit real API keys, tokens, passwords, or secrets to git.
# Copy this file to .env.local and replace placeholders with real values.
# .env.local is already in .gitignore and will not be committed.
# ============================================================================

# Clerk Authentication
# Get your keys from: https://dashboard.clerk.com/last-active?path=api-keys
VITE_CLERK_PUBLISHABLE_KEY=your_clerk_publishable_key_here
CLERK_SECRET_KEY=your_clerk_secret_key_here

# Database Configuration - Render PostgreSQL
# Render automatically injects DATABASE_URL in production
# For local development, create a local PostgreSQL database
DEV_DATABASE_URL=postgresql://username:password@localhost:5432/capliquify_dev
TEST_DATABASE_URL=postgresql://username:password@localhost:5432/capliquify_test
DATABASE_URL=postgresql://username:password@host:5432/capliquify_prod

# CORS Configuration
# Development
CORS_ORIGINS=http://localhost:3000,http://localhost:5000
# Production (uncomment and update for production)
# CORS_ORIGINS=https://capliquify.com,https://www.capliquify.com,https://auth.capliquify.com

# ============================================================================
# CapLiquify Domain Configuration
# ============================================================================
VITE_APP_DOMAIN=capliquify.com
VITE_AUTH_DOMAIN=auth.capliquify.com
CLERK_FRONTEND_API=clerk.capliquify.com

# ============================================================================
# Cloudflare Configuration
# ============================================================================
# IMPORTANT: Use API TOKENS (not Global API Key) for better security
# Create tokens at: https://dash.cloudflare.com/profile/api-tokens
# Required permissions: Zone:DNS:Edit for capliquify.com

# Cloudflare API Token (RECOMMENDED - use this instead of Global API Key)
CLOUDFLARE_API_TOKEN=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# Cloudflare Account Details
CLOUDFLARE_ZONE_ID=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
CLOUDFLARE_ACCOUNT_ID=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
CLOUDFLARE_EMAIL=your-email@capliquify.com

# ⚠️ NEVER USE GLOBAL API KEY - Use API Token instead
# Global API Key has full account access - security risk
# CLOUDFLARE_GLOBAL_API_KEY=DO_NOT_USE_THIS_USE_TOKENS_INSTEAD

# Cloudflare SSL/TLS Configuration
CLOUDFLARE_SSL_MODE=full_strict
CLOUDFLARE_MIN_TLS_VERSION=1.2

# ============================================================================
# Payment & Subscription Configuration (Stripe)
# ============================================================================
# Stripe configuration for CapLiquify subscription model
# Get keys from: https://dashboard.stripe.com/apikeys

STRIPE_PUBLISHABLE_KEY=your_stripe_publishable_key_here
STRIPE_SECRET_KEY=your_stripe_secret_key_here
STRIPE_WEBHOOK_SECRET=your_stripe_webhook_secret_here

# CapLiquify Subscription Plan IDs (create in Stripe dashboard)
STRIPE_BASIC_PLAN_ID=price_XXXXXXXXXXXXXXXXXXXXXXXX
STRIPE_PRO_PLAN_ID=price_XXXXXXXXXXXXXXXXXXXXXXXX
STRIPE_ENTERPRISE_PLAN_ID=price_XXXXXXXXXXXXXXXXXXXXXXXX

# Subscription Features
ENABLE_SUBSCRIPTION_PAYMENTS=true
SUBSCRIPTION_TRIAL_DAYS=14
SUBSCRIPTION_GRACE_PERIOD_DAYS=3

# Unleashed Software API
# Get credentials from: https://www.unleashedsoftware.com/integrations
UNLEASHED_API_ID=XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
UNLEASHED_API_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
UNLEASHED_API_URL=https://api.unleashedsoftware.com

# Railway Deployment
# Project: Sentia Manufacturing Dashboard
# Current Project ID: ef36131f-d36e-4c2d-8ab9-1914288d5781
RAILWAY_TOKEN=your_railway_token_here
RAILWAY_PROJECT_ID=ef36131f-d36e-4c2d-8ab9-1914288d5781

# GitHub Configuration
GITHUB_TOKEN=your_github_token_here
GITHUB_REPO=sentia-manufacturing-dashboard

# Application Settings
VITE_API_URL=http://localhost:5000/api
VITE_APP_NAME=Sentia Manufacturing Dashboard
VITE_APP_VERSION=1.0.0

# Global Configuration (Multi-region support)
GLOBAL_DEFAULT_BASE_CURRENCY=GBP
GLOBAL_SUPPORTED_CURRENCIES=GBP,EUR,USD
GLOBAL_SUPPORTED_REGIONS=UK,EU,USA
GLOBAL_DEFAULT_LOCALE=en-GB
GLOBAL_AVAILABLE_LOCALES=en-GB,en-US,de-DE,fr-FR
GLOBAL_TIMEZONES={"UK":"Europe/London","EU":"Europe/Paris","USA":"America/New_York"}
GLOBAL_FX_PROVIDER=ecb
GLOBAL_FX_API_KEY=your_fx_api_key_here

# Compliance Features
GLOBAL_COMPLIANCE_FEATURES={"VAT_ENABLED":false,"GDPR_ENABLED":true,"US_SALES_TAX_ENABLED":false}

# Feature Flags (PROMPT 8 Dashboard Overlay)
FEATURE_CFO_PRESET=false
FEATURE_GLOBAL_TABS=false
FEATURE_BOARD_EXPORT=false
FEATURE_TRUST_BADGES=false
FEATURE_BENCHMARKS=false
SHARE_LINK_TTL_MINUTES=60

# Legacy Global Feature Flags
GLOBAL_FEATURE_FLAGS={"GLOBAL_CFO_PRESET":false,"MULTI_CURRENCY_SUPPORT":false,"REGIONAL_HOLIDAYS":false,"BOARD_PACK_EXPORT":false}

# Holiday Calendar APIs (Optional)
UK_HOLIDAY_API_KEY=your_uk_holiday_api_key
EU_HOLIDAY_API_KEY=your_eu_holiday_api_key
US_HOLIDAY_API_KEY=your_us_holiday_api_key

# Performance Monitoring
VITE_COLLECT_VITALS=false

# Security Configuration
SECURITY_RATE_LIMIT_WINDOW=900000
SECURITY_RATE_LIMIT_MAX=1000
SECURITY_AUTH_RATE_LIMIT_MAX=20
SECURITY_UPLOAD_RATE_LIMIT_MAX=50

# Admin Portal Feature Flags (PROMPT 10 - Admin Portal Overlay)
FEATURE_INTL_ENTITIES=false
FEATURE_INTL_FX=false
FEATURE_BOARD_MODE=false
ADMIN_REQUIRE_STEP_UP=true
ADMIN_STEP_UP_TTL_MINUTES=10

# Integration & Reconciliation Configuration
INTEGRATION_RECONCILE_CRON=0 2 * * *
TOKEN_ROTATE_HOURS=24
RATE_LIMITER_WINDOW_MS=60000

# ============================================
# DEPLOYMENT & PRODUCTION OVERLAY SETTINGS
# Added via Prompt 12 - Railway Production Setup
# ============================================

# General Configuration
NODE_VERSION=20
LOG_LEVEL=info
LOG_SAMPLING_RATE=0.1
SERVICE_NAME=sentia-api
VERSION_FROM_GIT=true

# Health & Readiness Endpoints
HEALTHCHECK_PATH=/health
READINESS_PATH=/ready
METRICS_PATH=/metrics

# Auto-scaling Configuration (Production)
API_MIN_INSTANCES=2
API_MAX_INSTANCES=10
API_CPU_TARGET=70
WORKER_MIN_INSTANCES=1
WORKER_MAX_INSTANCES=5
WORKER_CONCURRENCY=5
QUEUE_ALERT_DEPTH=500

# Observability & OpenTelemetry
OTEL_EXPORTER_OTLP_ENDPOINT=
OTEL_RESOURCE_ATTRIBUTES=service.name=$(SERVICE_NAME),deployment.environment=
ERROR_RATE_ALERT_THRESHOLD=0.02

# Enhanced Security Headers
ENABLE_HSTS=true
CORS_ALLOWED_ORIGINS=https://sentia-manufacturing.railway.app
CSP_NONCE_MODE=true
WEBHOOK_IP_ALLOWLIST=
ENABLE_CSRF=true
MAX_REQUEST_SIZE=10mb
TRUSTED_PROXIES=loopback,linklocal,uniquelocal

# Database & Backup Configuration
DATABASE_POOL_MAX=100
DATABASE_SSL_CA=
BACKUP_RETENTION_DAYS=30
ENABLE_PITR=true

# Redis Configuration
REDIS_CACHE_TTL=300
REDIS_MAX_MEMORY=2GB
REDIS_MAX_MEMORY_POLICY=allkeys-lru

# Regional & Compliance Settings
REGIONAL_HINT=EU
FEATURE_BOARD_MODE=false
PII_REDACTION_ENABLED=true
PII_RETENTION_DAYS=365
DATA_RESIDENCY_REGION=eu

# SLO Monitoring & Alerts
ALERT_WEBHOOK_URL=
SLO_DATA_FRESHNESS_MINUTES=30
SLO_FORECAST_SUCCESS_PCT=99
SLO_WC_RECENCY_HOURS=24
SLO_API_LATENCY_P95_MS=500
SLO_ERROR_RATE_THRESHOLD=0.01
SLO_AVAILABILITY_PCT=99.9

# FX & Global Operations (Stub)
FX_PROVIDER=
FX_API_KEY=
FX_PULL_CRON=0 1 * * *

# Performance Optimization
ENABLE_COMPRESSION=true
ENABLE_CACHE=true
CACHE_DEFAULT_TTL=300
CACHE_MAX_SIZE=100MB

# Maintenance Mode
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=System maintenance in progress. Please check back shortly.
MAINTENANCE_ALLOWED_IPS=

# Deployment Metadata
DEPLOYMENT_VERSION=
DEPLOYMENT_TIME=
DEPLOYMENT_ENVIRONMENT=
ROLLBACK_MAX_VERSIONS=3

# Client Performance Monitoring
ENABLE_RUM=false
RUM_SAMPLE_RATE=0.1
CLIENT_LATENCY_TRACKING=true

# Share Links
SHARE_LINK_TTL_MINUTES=60

# Circuit Breaker Settings
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=60000
CIRCUIT_BREAKER_RESET_TIMEOUT=30000

# ============================================
# DOCUMENTATION SETTINGS
# Added via Prompt 13 - Documentation Overlay
# ============================================

# Documentation Configuration
DOCS_BASE_URL=/docs
DOCS_SEARCH_INDEX_PATH=./docs/.search/index.json
DOCS_ANALYTICS_WRITE_KEY=
DOCS_PORT=3001

# Documentation Features
FEATURE_DOCS_SEARCH=true
FEATURE_DOCS_FEEDBACK=true
FEATURE_DOCS_PRINT_MODE=true
FEATURE_BENCHMARKS=false

# Documentation Governance
DOCS_REVIEW_CYCLE_DAYS=90
DOCS_OWNERS_LIST=engineering,finance,operations,admin,support
DOCS_VALID_STAGES=beta,ga,deprecated

# API Documentation
DOCS_API_AUTO_GENERATE=true
DOCS_API_GENERATE_CRON=0 2 * * *
DOCS_OPENAPI_PATH=/public/api/openapi.json

# ============================================
# AGENT SAFETY & PERMISSIONS OVERLAY
# Added via Prompt 17 - Agent Safety
# ============================================

# Agent Feature Flags (Optional)
FEATURE_AGENT=false
FEATURE_AGENT_EVAL=false
FEATURE_AGENT_AUTOPILOT=false
FEATURE_AGENT_POLICY=false

# Agent Safety Configuration
AGENT_DEFAULT_MODE=DRY_RUN
AGENT_MAX_STEPS=12
AGENT_WALL_CLOCK_MS=180000
AGENT_RATE_LIMIT_BURST=10
AGENT_RATE_LIMIT_PER_MIN=30
AGENT_EXECUTE_REQUIRE_STEPUP=true
AGENT_DENY_EXECUTE_IN_NON_PROD=true
AGENT_SAFE_NUMERIC_CLAMPS='{"horizonDaysMax":180,"orderQtyMax":100000,"pctBounds":[-0.5,0.5]}'

# Agent Evaluation Thresholds
FORECAST_MIN_ACCURACY_DELTA=0.05
WC_MAX_BREACH_MONTHS_DELTA=0
WC_MIN_CASH_DELTA=0
OPT_MIN_STOCKOUTS_AVOIDED=0.10

# Agent Scheduler Configuration
AGENT_SCHEDULE_TZ=Europe/London
AUTOPILOT_DEFAULT_MODE=PROPOSE
AUTOPILOT_DEBOUNCE_MINUTES=60
AUTOPILOT_MAX_CONCURRENT=1
FREEZE_WINDOW_CRON_MONTH_END=0 0 28-31 * *

# Agent Notification Settings
NOTIFY_SLACK_WEBHOOK=
SLACK_BOT_TOKEN=
SLACK_CHANNEL=#general
NOTIFY_EMAIL_TO=
APP_URL=http://localhost:3000