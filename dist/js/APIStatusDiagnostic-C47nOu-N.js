import{a as e,j as s,aE as t,aT as a,W as r,F as i,aA as n,aD as l}from"./chunk-CZvSV-v7.js";import"./chunk-rwMzC66e.js";import"./chunk-BHfUfMK7.js";import"./chunk-C3DITRU1.js";import"./chunk-BC7Dcwdl.js";import"./chunk-CSoZPqtx.js";import"./chunk-GD9X1rNN.js";import"./chunk-Dozjk7Op.js";const c=()=>{const[c,o]=e.useState({}),[m,d]=e.useState(!0),[x,h]=e.useState(null),p=[{name:"Health Check",path:"/api/health",critical:!0},{name:"Analytics Overview",path:"/api/analytics/overview",critical:!0},{name:"Dashboard Overview",path:"/api/dashboard/overview",critical:!0},{name:"Working Capital KPIs",path:"/api/working-capital/kpis/trends",critical:!0},{name:"Production Optimization",path:"/api/production/optimization",critical:!1},{name:"Forecasting Enhanced",path:"/api/forecasting/enhanced",critical:!1},{name:"AI Insights",path:"/api/ai/insights",critical:!1},{name:"Inventory Management",path:"/api/inventory/status",critical:!1},{name:"Quality Control",path:"/api/quality/metrics",critical:!1},{name:"Xero Integration",path:"/api/xero/status",critical:!1},{name:"Shopify Integration",path:"/api/shopify/status",critical:!1},{name:"Admin System Stats",path:"/api/admin/system-stats",critical:!1},{name:"Real-time Data Sync",path:"/api/sync/status",critical:!1}],u=async()=>{d(!0);const e={},s=p.map(async s=>{const t=await(async e=>{const s=Date.now();try{const t="https://your-production-domain.up.railway.app/api",a=e.path.startsWith("/api")?`${t.replace("/api","")}${e.path}`:`${t}${e.path}`,r=new AbortController,i=setTimeout(()=>r.abort(),5e3),n=await fetch(a,{signal:r.signal,headers:{Accept:"application/json","Content-Type":"application/json"}});return clearTimeout(i),{name:e.name,path:e.path,critical:e.critical,status:n.ok?"online":"error",statusCode:n.status,statusText:n.statusText,responseTime:Date.now()-s,error:n.ok?null:`HTTP ${n.status}: ${n.statusText}`}}catch(t){return{name:e.name,path:e.path,critical:e.critical,status:"AbortError"===t.name?"timeout":"offline",statusCode:null,statusText:null,responseTime:null,error:"AbortError"===t.name?"Request timeout (>5s)":t.message.includes("ECONNREFUSED")?"Server not running":t.message}}})(s);return e[s.name]=t,t});await Promise.all(s),o(e),h(new Date),d(!1)};e.useEffect(()=>{u();const e=setInterval(u,3e4);return()=>clearInterval(e)},[]);const g=e=>{switch(e){case"online":return s.jsx(r,{className:"h-5 w-5 text-green-500"});case"error":return s.jsx(i,{className:"h-5 w-5 text-yellow-500"});case"timeout":return s.jsx(l,{className:"h-5 w-5 text-orange-500"});default:return s.jsx(n,{className:"h-5 w-5 text-red-500"})}},j=e=>{switch(e){case"online":return"border-green-200 bg-green-50";case"error":return"border-yellow-200 bg-yellow-50";case"timeout":return"border-orange-200 bg-orange-50";default:return"border-red-200 bg-red-50"}},y=(()=>{const e=Object.values(c).filter(e=>e.critical),s=e.filter(e=>"online"===e.status).length,t=e.length;return s===t&&t>0?{status:"healthy",message:"All critical APIs are online"}:s>0?{status:"partial",message:`${s}/${t} critical APIs online`}:{status:"critical",message:"Critical APIs are offline"}})();return m&&0===Object.keys(c).length?s.jsx("div",{className:"max-w-4xl mx-auto p-6",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(t,{className:"h-8 w-8 text-blue-600"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"API Status Diagnostic"})]}),s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(a,{className:"h-8 w-8 text-blue-600 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Testing API endpoints..."})]})})]})}):s.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(t,{className:"h-8 w-8 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"API Status Diagnostic"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Real-time monitoring of all application APIs"})]})]}),s.jsxs("button",{onClick:u,disabled:m,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(a,{className:"h-4 w-4 "+(m?"animate-spin":"")}),s.jsx("span",{children:"Refresh"})]})]}),s.jsx("div",{className:"mt-6 p-4 rounded-lg border-2 "+("healthy"===y.status?"border-green-200 bg-green-50":"partial"===y.status?"border-yellow-200 bg-yellow-50":"border-red-200 bg-red-50"),children:s.jsxs("div",{className:"flex items-center space-x-3",children:["healthy"===y.status?s.jsx(r,{className:"h-6 w-6 text-green-600"}):"partial"===y.status?s.jsx(i,{className:"h-6 w-6 text-yellow-600"}):s.jsx(n,{className:"h-6 w-6 text-red-600"}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium "+("healthy"===y.status?"text-green-800":"partial"===y.status?"text-yellow-800":"text-red-800"),children:["System Status: ",y.status.charAt(0).toUpperCase()+y.status.slice(1)]}),s.jsx("p",{className:"text-sm "+("healthy"===y.status?"text-green-600":"partial"===y.status?"text-yellow-600":"text-red-600"),children:y.message})]})]})}),x&&s.jsxs("p",{className:"mt-4 text-sm text-gray-500",children:["Last updated: ",x.toLocaleString()]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.values(c).map((e,t)=>s.jsx("div",{className:`border-2 rounded-lg p-4 ${j(e.status)}`,children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[g(e.status),s.jsxs("h3",{className:"font-medium text-gray-900",children:[e.name,e.critical&&s.jsx("span",{className:"ml-2 px-2 py-1 text-xs bg-red-100 text-red-800 rounded-full",children:"Critical"})]})]}),s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Endpoint:"})," ",e.path]}),"online"===e.status&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Status:"})," ",e.statusCode," ",e.statusText]}),e.responseTime&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Response time:"})," ",e.responseTime,"ms"]})]}),"online"!==e.status&&e.error&&s.jsxs("p",{className:"text-red-600",children:[s.jsx("span",{className:"font-medium",children:"Error:"})," ",e.error]})]})]})})},t))}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Status Legend"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(r,{className:"h-5 w-5 text-green-500"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Online - Working normally"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(i,{className:"h-5 w-5 text-yellow-500"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Error - Returns error response"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(l,{className:"h-5 w-5 text-orange-500"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Timeout - Response too slow"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(n,{className:"h-5 w-5 text-red-500"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Offline - Server not responding"})]})]})]})]})};export{c as default};
