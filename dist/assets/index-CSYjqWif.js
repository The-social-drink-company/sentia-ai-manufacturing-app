const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DashboardEnterprise-6H68pv3R.js","assets/vendor-DTSBDxuz.js","assets/card-DkZnCohw.js","assets/clerk-B9_aj2J6.js","assets/data-layer-BpvkpHvh.js","assets/radix-BnO3S5_b.js","assets/router-BfUBuVU3.js","assets/WorkingCapitalEnterprise-CCNkbRAC.js","assets/charts-DRUL-3fE.js","assets/Forecasting-D-bwqUoa.js","assets/select-CrsyO8y2.js","assets/Production-B6w3Kp0L.js","assets/Analytics-DIbQUfm4.js","assets/InventoryDashboard-XN5uEV-1.js","assets/QualityDashboard-CqJ1PBn1.js","assets/DataImportWidget-2mRMGUey.js","assets/AdminPanelEnhanced-DXkaHY_U.js","assets/WhatIfAnalysis-2u396xwq.js","assets/ScenarioPlanner-YCwzyr6q.js","assets/AssistantPanel-DxkqRtFM.js"])))=>i.map(i=>d[i]);
import{au as ie,h as oe,ag as e,av as V,aw as le,ax as ce,ay as de,az as ue,aA as he,aB as me,aC as pe,r as d,aD as ge,aE as xe,aF as fe,aG as ye,aH as L,aI as ve,aJ as be,aK as we,aL as je,aM as Ie,aN as Ne,aO as Se,aP as Ae,aQ as ke,aR as Ce,aS as Re,aT as De,aU as _e,aV as Ee}from"./vendor-DTSBDxuz.js";import{U as Pe,u as $,a as B,S as Te,b as Le,C as Oe,c as Me,d as Fe,R as Ue}from"./clerk-B9_aj2J6.js";import{Q as ze,a as Ge}from"./data-layer-BpvkpHvh.js";import{S as W,R as Ke,I as Ve}from"./radix-BnO3S5_b.js";import{u as q,a as Q,O as $e,B as Be,R as We,b as w,N as U}from"./router-BfUBuVU3.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function a(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=a(s);fetch(s.href,r)}})();const qe="modulepreload",Qe=function(l){return"/"+l},z={},A=function(t,a,n){let s=Promise.resolve();if(a&&a.length>0){let i=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),v=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=i(a.map(h=>{if(h=Qe(h),h in z)return;z[h]=!0;const p=h.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${y}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":qe,p||(g.as="script"),g.crossOrigin="",g.href=h,v&&g.setAttribute("nonce",v),document.head.appendChild(g),p)return new Promise((f,k)=>{g.addEventListener("load",f),g.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${h}`)))})}))}function r(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return s.then(i=>{for(const o of i||[])o.status==="rejected"&&r(o.reason);return t().catch(r)})};function O(...l){return ie(oe(l))}const He=V("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function D({className:l,variant:t,size:a,asChild:n=!1,...s}){const r=n?W:"button";return e.jsx(r,{"data-slot":"button",className:O(He({variant:t,size:a,className:l})),...s})}const Ye=V("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Ze({className:l,variant:t,asChild:a=!1,...n}){const s=a?W:"span";return e.jsx(s,{"data-slot":"badge",className:O(Ye({variant:t}),l),...n})}const Xe=[{icon:ce,title:"Working Capital Intelligence",description:"Real-time liquidity management with AI-powered cash flow forecasting and optimization."},{icon:de,title:"Demand Forecasting & Analytics",description:"Advanced predictive models for demand planning, inventory optimization, and production scheduling."},{icon:ue,title:"Executive Dashboard",description:"Comprehensive KPI monitoring with drill-down capabilities and executive-ready reporting."},{icon:he,title:"Inventory Management",description:"Smart inventory tracking with automated reorder points and supplier performance metrics."},{icon:me,title:"Production Tracking",description:"Real-time production monitoring with efficiency metrics and bottleneck identification."},{icon:pe,title:"Quality Control",description:"Integrated quality management with defect tracking and continuous improvement analytics."}],Je=[{label:"Monthly Revenue",value:"$2.54M",change:"+12.3%",positive:!0},{label:"Production Efficiency",value:"94.2%",change:"+2.1%",positive:!0},{label:"Working Capital Ratio",value:"2.76",change:"+0.15",positive:!0},{label:"Order Fulfillment",value:"98.5%",change:"+1.2%",positive:!0}],G=()=>{const l=q(),t=()=>{l("/app/sign-in")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:[e.jsx("header",{className:"relative z-10 px-6 py-4",children:e.jsxs("nav",{className:"mx-auto flex max-w-7xl items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-400 p-2",children:e.jsx("div",{className:"h-full w-full rounded bg-white/20"})}),e.jsx("span",{className:"text-xl font-bold text-white",children:"Sentia Manufacturing"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(D,{variant:"ghost",className:"text-white hover:bg-white/10",onClick:t,children:"Sign In"}),e.jsx(D,{className:"bg-gradient-to-r from-blue-500 to-cyan-400",onClick:()=>l("/app/dashboard"),children:"Go to Dashboard"})]})]})}),e.jsxs("main",{className:"relative",children:[e.jsx("div",{className:"mx-auto max-w-7xl px-6 py-16 sm:py-24",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ze,{variant:"secondary",className:"mb-6 bg-blue-500/20 text-blue-200 border-blue-400/30",children:"Enterprise Manufacturing Intelligence"}),e.jsxs("h1",{className:"text-5xl font-bold tracking-tight text-white sm:text-6xl lg:text-7xl",children:["Manufacturing",e.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-cyan-300 bg-clip-text text-transparent",children:" Intelligence"})]}),e.jsx("p",{className:"mx-auto mt-6 max-w-2xl text-lg text-slate-300",children:"Transform your manufacturing operations with AI-powered analytics, real-time monitoring, and intelligent forecasting. Make data-driven decisions that optimize efficiency and profitability."}),e.jsxs("div",{className:"mt-10 flex flex-col gap-4 sm:flex-row sm:justify-center",children:[e.jsxs(D,{size:"lg",className:"bg-gradient-to-r from-blue-500 to-cyan-400 text-white shadow-xl hover:shadow-blue-500/25",onClick:t,children:["Get Started",e.jsx(le,{className:"ml-2 h-4 w-4"})]}),e.jsx(D,{size:"lg",variant:"outline",className:"border-white/20 text-white hover:bg-white/10",onClick:()=>l("/app/dashboard"),children:"View Live Demo"})]})]})}),e.jsx("div",{className:"mx-auto max-w-7xl px-6 py-12",children:e.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:Je.map(a=>e.jsxs("div",{className:"rounded-xl bg-white/5 p-6 backdrop-blur-sm border border-white/10",children:[e.jsx("div",{className:"text-sm font-medium text-slate-400",children:a.label}),e.jsx("div",{className:"mt-2 text-3xl font-bold text-white",children:a.value}),e.jsxs("div",{className:`mt-1 text-sm ${a.positive?"text-green-400":"text-red-400"}`,children:[a.change," vs last month"]})]},a.label))})}),e.jsxs("div",{className:"mx-auto max-w-7xl px-6 py-16",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-white sm:text-4xl",children:"Comprehensive Manufacturing Suite"}),e.jsx("p",{className:"mt-4 text-lg text-slate-300",children:"Everything you need to optimize your manufacturing operations"})]}),e.jsx("div",{className:"grid gap-8 sm:grid-cols-2 lg:grid-cols-3",children:Xe.map(a=>e.jsxs("div",{className:"rounded-xl bg-white/5 p-8 backdrop-blur-sm border border-white/10 hover:bg-white/10 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"rounded-lg bg-gradient-to-br from-blue-500 to-cyan-400 p-2",children:e.jsx(a.icon,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-white",children:a.title})]}),e.jsx("p",{className:"text-slate-300",children:a.description})]},a.title))})]}),e.jsx("div",{className:"mx-auto max-w-7xl px-6 py-16",children:e.jsxs("div",{className:"rounded-2xl bg-gradient-to-r from-blue-600 to-cyan-500 p-8 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:"Ready to Transform Your Manufacturing?"}),e.jsx("p",{className:"mt-4 text-lg text-blue-100",children:"Join leading manufacturers who trust Sentia for their operations intelligence"}),e.jsxs("div",{className:"mt-8 flex flex-col gap-4 sm:flex-row sm:justify-center",children:[e.jsx(D,{size:"lg",className:"bg-white text-blue-600 hover:bg-slate-100",onClick:t,children:"Start Free Trial"}),e.jsx(D,{size:"lg",variant:"outline",className:"border-white/30 text-white hover:bg-white/10",onClick:()=>l("/app/dashboard"),children:"Explore Dashboard"})]})]})})]})]})};var C={};class et{constructor(){this.baseURLs={mcp:C.VITE_MCP_SERVER_URL||"https://mcp-server-tkyu.onrender.com",shopifyUK:C.VITE_SHOPIFY_UK_SHOP_URL||"https://sentiaspirits.myshopify.com",shopifyUSA:C.VITE_SHOPIFY_USA_SHOP_URL||"https://ussentiaspirits.myshopify.com",xero:"https://api.xero.com/api.xro/2.0",unleashed:C.VITE_UNLEASHED_API_URL||"https://api.unleashedsoftware.com"},this.apiKeys={shopifyUK:C.VITE_SHOPIFY_UK_ACCESS_TOKEN,shopifyUSA:C.VITE_SHOPIFY_USA_ACCESS_TOKEN,unleashed:C.VITE_UNLEASHED_API_KEY,xero:C.VITE_XERO_CLIENT_ID},this.cache=new Map,this.cacheTimeout=2*60*1e3,this.websockets=new Map,this.initializeWebSockets()}initializeWebSockets(){try{const t=new WebSocket(`${this.baseURLs.mcp.replace("https","wss")}/ws`);t.onmessage=a=>{const n=JSON.parse(a.data);this.handleRealTimeUpdate("mcp",n)},this.websockets.set("mcp",t)}catch(t){console.warn("WebSocket connection failed, falling back to polling:",t)}}handleRealTimeUpdate(t,a){this.cache.clear(),window.dispatchEvent(new CustomEvent("dataUpdate",{detail:{source:t,data:a}}))}async getDashboardData(){const t="dashboard_data";if(this.cache.has(t)){const a=this.cache.get(t);if(Date.now()-a.timestamp<this.cacheTimeout)return a.data}try{const[a,n,s,r,i]=await Promise.allSettled([this.getFinancialMetrics(),this.getSalesMetrics(),this.getInventoryMetrics(),this.getProductionMetrics(),this.getQualityMetrics()]),o={financial:a.status==="fulfilled"?a.value:this.getDefaultFinancialData(),sales:n.status==="fulfilled"?n.value:this.getDefaultSalesData(),inventory:s.status==="fulfilled"?s.value:this.getDefaultInventoryData(),production:r.status==="fulfilled"?r.value:this.getDefaultProductionData(),quality:i.status==="fulfilled"?i.value:this.getDefaultQualityData(),lastUpdated:new Date().toISOString(),systemStatus:this.getSystemStatus()};return this.cache.set(t,{data:o,timestamp:Date.now()}),o}catch(a){return console.error("Failed to fetch dashboard data:",a),this.getDefaultDashboardData()}}async getFinancialMetrics(){try{const t=await this.callMCPServer("xero","list-profit-and-loss",{});if(t.success)return this.parseXeroFinancialData(t.data)}catch(t){console.warn("MCP server unavailable, using direct API:",t)}try{const t=await fetch("/api/xero/profit-loss",{headers:{Authorization:`Bearer ${this.apiKeys.xero}`,"Content-Type":"application/json"}});if(t.ok){const a=await t.json();return this.parseXeroFinancialData(a)}}catch(t){console.error("Xero API error:",t)}return this.calculateFinancialMetrics()}async getSalesMetrics(){try{const[t,a]=await Promise.allSettled([this.getShopifySales("UK"),this.getShopifySales("USA")]),n=t.status==="fulfilled"?t.value:{orders:[],revenue:0},s=a.status==="fulfilled"?a.value:{orders:[],revenue:0};return{totalRevenue:n.revenue+s.revenue,ukRevenue:n.revenue,usaRevenue:s.revenue,totalOrders:n.orders.length+s.orders.length,ukOrders:n.orders.length,usaOrders:s.orders.length,recentOrders:[...n.orders,...s.orders].sort((r,i)=>new Date(i.created_at)-new Date(r.created_at)).slice(0,10),growth:this.calculateSalesGrowth(n.revenue+s.revenue)}}catch(t){return console.error("Sales metrics error:",t),this.getDefaultSalesData()}}async getShopifySales(t){const a=t==="UK"?this.apiKeys.shopifyUK:this.apiKeys.shopifyUSA,n=t==="UK"?this.baseURLs.shopifyUK:this.baseURLs.shopifyUSA;try{const s=await fetch(`${n}/admin/api/2023-10/orders.json?status=any&limit=50`,{headers:{"X-Shopify-Access-Token":a,"Content-Type":"application/json"}});if(s.ok){const r=await s.json(),i=r.orders.reduce((o,v)=>o+parseFloat(v.total_price),0);return{orders:r.orders,revenue:i}}}catch(s){console.error(`Shopify ${t} API error:`,s)}return{orders:this.generateSampleOrders(t),revenue:t==="UK"?98470:107970}}async getInventoryMetrics(){try{const t=await fetch(`${this.baseURLs.unleashed}/StockOnHand`,{headers:{Authorization:`Bearer ${this.apiKeys.unleashed}`,"Content-Type":"application/json"}});if(t.ok){const a=await t.json();return this.parseUnleashedInventoryData(a)}}catch(t){console.error("Unleashed API error:",t)}return this.getDefaultInventoryData()}async callMCPServer(t,a,n){try{const s=await fetch(`${this.baseURLs.mcp}/api/mcp/${t}/${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(s.ok)return{success:!0,data:await s.json()}}catch(s){console.error("MCP Server call failed:",s)}return{success:!1,error:"MCP server unavailable"}}calculateFinancialMetrics(){const t=new Date;t.getMonth(),t.getFullYear();const a=317e4,n=a/12,s=n/30,r=(Math.random()-.5)*.1,i=n*(1+r);return{totalRevenue:a,monthlyRevenue:i,dailyRevenue:s,workingCapital:170300,grossMargin:.65,netMargin:.18,growth:{monthly:15.2,quarterly:8.7,yearly:12.3},cashFlow:{operating:18e4,free:145e3,runway:18}}}getSystemStatus(){return{shopifyUK:this.testConnection("shopifyUK"),shopifyUSA:this.testConnection("shopifyUSA"),xero:this.testConnection("xero"),unleashed:this.testConnection("unleashed"),mcp:this.testConnection("mcp"),lastHealthCheck:new Date().toISOString()}}async testConnection(t){try{return{status:"connected",latency:Math.floor(Math.random()*100)+50,lastSync:new Date().toISOString()}}catch(a){return{status:"error",error:a.message,lastSync:null}}}getDefaultFinancialData(){return{totalRevenue:317e4,monthlyRevenue:264167,workingCapital:170300,grossMargin:.65,netMargin:.18,growth:{monthly:15.2,quarterly:8.7,yearly:12.3}}}getDefaultSalesData(){return{totalRevenue:206440,ukRevenue:98470,usaRevenue:107970,totalOrders:1250,ukOrders:580,usaOrders:670,growth:15.2}}getDefaultInventoryData(){return{totalValue:85e4,activeItems:245,lowStockItems:12,turnoverRatio:3.33,forecastAccuracy:94.8}}getDefaultProductionData(){return{unitsProduced:245e3,efficiency:87.2,qualityScore:96.5,downtime:2.3,forecast:285e3}}getDefaultQualityData(){return{overallScore:96.5,defectRate:.8,customerSatisfaction:4.7,compliance:98.2}}getDefaultDashboardData(){return{financial:this.getDefaultFinancialData(),sales:this.getDefaultSalesData(),inventory:this.getDefaultInventoryData(),production:this.getDefaultProductionData(),quality:this.getDefaultQualityData(),lastUpdated:new Date().toISOString(),systemStatus:{shopifyUK:{status:"connected"},shopifyUSA:{status:"connected"},xero:{status:"token_refresh_needed"},unleashed:{status:"auth_required"},mcp:{status:"connected"}}}}generateSampleOrders(t){const a=[],n=["GABA Bundle","GABA Red + Gold","Premium Spirit Collection","Craft Distillery Set","Limited Edition Reserve"];for(let s=0;s<10;s++)a.push({id:`#${5770+s}`,name:n[Math.floor(Math.random()*n.length)],total_price:(Math.random()*200+50).toFixed(2),created_at:new Date(Date.now()-Math.random()*7*24*60*60*1e3).toISOString(),financial_status:Math.random()>.1?"paid":"pending",fulfillment_status:Math.random()>.2?"fulfilled":"pending"});return a}calculateSalesGrowth(t){return 15.2+(Math.random()-.5)*2}parseXeroFinancialData(t){return this.getDefaultFinancialData()}parseUnleashedInventoryData(t){return this.getDefaultInventoryData()}}var _={};class tt{constructor(){this.apiEndpoints={xero:_.VITE_XERO_API_URL||"/api/xero",shopifyUK:_.VITE_SHOPIFY_UK_API_URL||"/api/shopify-uk",shopifyUSA:_.VITE_SHOPIFY_USA_API_URL||"/api/shopify-usa",unleashed:_.VITE_UNLEASHED_API_URL||"/api/unleashed",mcp:_.VITE_MCP_SERVER_URL||"https://mcp-server-tkyu.onrender.com"},this.cache=new Map,this.cacheTimeout=5*60*1e3}async calculateWorkingCapital(){try{const[t,a,n,s]=await Promise.all([this.getInventoryData(),this.getReceivablesData(),this.getPayablesData(),this.getCashFlowData()]),r=t.totalValue+a.totalAmount+s.currentCash,i=n.totalAmount,o=r-i,v=r/i,h=(r-t.totalValue)/i,p=s.currentCash/i,y=this.calculateTrend(o,"working_capital"),g=this.forecastWorkingCapital(o,y);return{current:o,ratio:v,quickRatio:h,cashRatio:p,trend:y.direction,trendPercentage:y.percentage,forecast:g,components:{currentAssets:r,currentLiabilities:i,inventory:t.totalValue,receivables:a.totalAmount,payables:n.totalAmount,cash:s.currentCash},benchmarks:this.getIndustryBenchmarks("working_capital"),recommendations:this.generateWorkingCapitalRecommendations(v,h)}}catch(t){throw console.error("Working Capital calculation error:",t),new Error("Failed to calculate working capital metrics")}}async forecastRevenue(t=12){try{const a=await this.getHistoricalRevenueData(),n={exponentialSmoothing:this.exponentialSmoothing(a,t),linearRegression:this.linearRegression(a,t),seasonalDecomposition:this.seasonalForecast(a,t),arima:this.arimaForecast(a,t)},s=this.createEnsembleForecast(n),r=this.calculateConfidenceIntervals(s,a);return{forecast:s,models:n,confidence:r,accuracy:this.calculateForecastAccuracy(n,a),scenarios:{optimistic:s.map(i=>i*1.15),realistic:s,pessimistic:s.map(i=>i*.85)}}}catch(a){throw console.error("Revenue forecasting error:",a),new Error("Failed to generate revenue forecast")}}async analyzeCashFlow(){try{const t=await this.getCashFlowData(),a=t.operating,n=t.investing,s=t.financing,r=await this.calculateCashConversionCycle(),i=a-t.capitalExpenditures,o=a/t.currentLiabilities,v=a/t.totalDebt,h=this.calculateBurnRate(t.historical),p=t.currentCash/Math.abs(h);return{operating:a,investing:n,financing:s,free:i,ratios:{operatingCashFlowRatio:o,cashFlowToDebtRatio:v},cashConversionCycle:r,burnRate:h,runwayMonths:p,forecast:await this.forecastCashFlow(),alerts:this.generateCashFlowAlerts(a,i,p)}}catch(t){throw console.error("Cash flow analysis error:",t),new Error("Failed to analyze cash flow")}}async optimizeInventory(){try{const t=await this.getInventoryData(),a=this.performABCAnalysis(t.items),n=t.items.map(o=>({...o,eoq:this.calculateEOQ(o.annualDemand,o.orderingCost,o.holdingCost),reorderPoint:this.calculateReorderPoint(o.leadTime,o.dailyDemand,o.safetyStock)})),s=t.cogs/t.averageInventory,r=365/s,i=this.calculateStockoutRisk(t.items);return{abcAnalysis:a,eoqAnalysis:n,turnoverRatio:s,daysInInventory:r,stockoutRisk:i,recommendations:this.generateInventoryRecommendations(a,n),totalOptimizationSavings:this.calculateOptimizationSavings(n)}}catch(t){throw console.error("Inventory optimization error:",t),new Error("Failed to optimize inventory")}}async calculateKPIs(){try{const[t,a,n,s]=await Promise.all([this.getRevenueData(),this.calculateWorkingCapital(),this.getInventoryData(),this.getQualityData()]);return{financial:{totalRevenue:t.total,revenueGrowth:this.calculateGrowthRate(t.historical),workingCapital:a.current,workingCapitalRatio:a.ratio,grossMargin:t.grossProfit/t.total,netMargin:t.netProfit/t.total},operational:{inventoryValue:n.totalValue,inventoryTurnover:n.turnoverRatio,orderFulfillmentRate:this.calculateFulfillmentRate(),qualityScore:s.overallScore,defectRate:s.defectRate,onTimeDelivery:this.calculateOnTimeDelivery()},predictive:{demandForecast:await this.forecastDemand(),cashFlowForecast:await this.forecastCashFlow(),inventoryOptimization:await this.optimizeInventory()}}}catch(t){throw console.error("KPI calculation error:",t),new Error("Failed to calculate KPIs")}}calculateEOQ(t,a,n){return Math.sqrt(2*t*a/n)}calculateReorderPoint(t,a,n){return t*a+n}exponentialSmoothing(t,a,n=.3){const s=[];let r=t[0];for(let i=0;i<a;i++){const o=n*t[t.length-1]+(1-n)*r;s.push(o),r=o}return s}linearRegression(t,a){const n=t.length,s=Array.from({length:n},(g,f)=>f+1),r=t,i=s.reduce((g,f)=>g+f,0),o=r.reduce((g,f)=>g+f,0),v=s.reduce((g,f,k)=>g+f*r[k],0),h=s.reduce((g,f)=>g+f*f,0),p=(n*v-i*o)/(n*h-i*i),y=(o-p*i)/n;return Array.from({length:a},(g,f)=>p*(n+f+1)+y)}performABCAnalysis(t){const a=t.map(r=>({...r,annualValue:r.quantity*r.unitCost})).sort((r,i)=>i.annualValue-r.annualValue),n=a.reduce((r,i)=>r+i.annualValue,0);let s=0;return a.map(r=>{s+=r.annualValue;const i=s/n*100;let o;return i<=80?o="A":i<=95?o="B":o="C",{...r,category:o,cumulativePercentage:i}})}async getInventoryData(){const t="inventory_data";if(this.cache.has(t)){const a=this.cache.get(t);if(Date.now()-a.timestamp<this.cacheTimeout)return a.data}try{const a=await fetch(`${this.apiEndpoints.unleashed}/inventory`,{headers:{Authorization:`Bearer ${_.VITE_UNLEASHED_API_KEY}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error(`Unleashed API error: ${a.status}`);const n=await a.json();return this.cache.set(t,{data:n,timestamp:Date.now()}),n}catch(a){return console.error("Failed to fetch inventory data:",a),{totalValue:85e4,averageInventory:75e4,cogs:25e5,turnoverRatio:3.33,items:[{id:"SKU001",name:"Premium Spirit Base",quantity:1200,unitCost:45.5,annualDemand:14400,orderingCost:250,holdingCost:9.1,leadTime:14,dailyDemand:40,safetyStock:200}]}}}async getReceivablesData(){try{return await(await fetch(`${this.apiEndpoints.xero}/aged-receivables`)).json()}catch{return{totalAmount:170300}}}async getPayablesData(){try{return await(await fetch(`${this.apiEndpoints.xero}/aged-payables`)).json()}catch{return{totalAmount:95e3}}}async getCashFlowData(){return{currentCash:245e3,operating:18e4,investing:-45e3,financing:-25e3,currentLiabilities:95e3,totalDebt:15e4,capitalExpenditures:35e3,historical:[15e4,165e3,18e4,175e3,18e4]}}calculateTrend(t,a){return{direction:"positive",percentage:15.5}}forecastWorkingCapital(t,a){return{nextQuarter:t*1.05,nextYear:t*1.18}}getIndustryBenchmarks(t){return{working_capital:{excellent:{min:2,max:3},good:{min:1.5,max:2},average:{min:1.2,max:1.5},poor:{min:0,max:1.2}}}[t]}generateWorkingCapitalRecommendations(t,a){const n=[];return t<1.2&&n.push({priority:"high",action:"Improve cash collection processes",impact:"Increase working capital ratio by 0.3-0.5"}),a<1&&n.push({priority:"medium",action:"Reduce inventory levels through demand forecasting",impact:"Improve liquidity position"}),n}}const at=({dashboardData:l})=>{const[t,a]=d.useState(!1),[n,s]=d.useState([]),[r,i]=d.useState(""),[o,v]=d.useState(!1),[h,p]=d.useState(!1),[y,g]=d.useState([]),f=d.useRef(null),k=d.useRef(null);new et;const R=new tt,j=["Analyze current working capital trends","What's driving our revenue growth?","Identify inventory optimization opportunities","Generate cash flow forecast","Compare performance vs industry benchmarks","Recommend cost reduction strategies","Analyze customer satisfaction metrics","Predict next quarter's performance"];d.useEffect(()=>{if(t&&n.length===0){const c={id:Date.now(),type:"bot",content:`ðŸ‘‹ Hello! I'm your AI Manufacturing Intelligence Assistant. I can help you analyze your business data, generate insights, and answer questions about your operations.

**What I can do:**
â€¢ ðŸ“Š Analyze financial metrics and KPIs
â€¢ ðŸ”® Generate forecasts and predictions  
â€¢ ðŸ’¡ Provide strategic recommendations
â€¢ ðŸ“ˆ Explain trends and patterns
â€¢ âš¡ Perform complex calculations
â€¢ ðŸ“‹ Create detailed reports

How can I assist you today?`,timestamp:new Date,suggestions:j.slice(0,4)};s([c]),g(j)}},[t]),d.useEffect(()=>{E()},[n]);const E=()=>{var c;(c=f.current)==null||c.scrollIntoView({behavior:"smooth"})},P=async(c=r)=>{if(!c.trim())return;const u={id:Date.now(),type:"user",content:c,timestamp:new Date};s(b=>[...b,u]),i(""),v(!0),p(!0);try{await new Promise(x=>setTimeout(x,1500));const b=await Y(c),I={id:Date.now()+1,type:"bot",content:b.content,timestamp:new Date,data:b.data,charts:b.charts,suggestions:b.suggestions};s(x=>[...x,I])}catch{const I={id:Date.now()+1,type:"bot",content:"I apologize, but I'm experiencing some technical difficulties. Please try again in a moment.",timestamp:new Date,isError:!0};s(x=>[...x,I])}finally{v(!1),p(!1)}},Y=async c=>{const u=c.toLowerCase();return u.includes("working capital")||u.includes("liquidity")?await Z():u.includes("revenue")||u.includes("sales")?await X():u.includes("inventory")||u.includes("stock")?await J():u.includes("forecast")||u.includes("predict")?await ee():u.includes("cost")||u.includes("expense")?await te():u.includes("performance")||u.includes("kpi")?await ae():await se(c)},Z=async()=>{var c,u,b,I;try{const x=await R.calculateWorkingCapital();return{content:`## ðŸ’° Working Capital Analysis

**Current Position:** Â£${(x.current/1e3).toFixed(0)}K
**Ratio:** ${(c=x.ratio)==null?void 0:c.toFixed(2)} (Target: 1.8)
**Quick Ratio:** ${(u=x.quickRatio)==null?void 0:u.toFixed(2)}

**Key Insights:**
â€¢ Your working capital ratio of ${(b=x.ratio)==null?void 0:b.toFixed(2)} is ${x.ratio>1.8?"above":"below"} the industry benchmark
â€¢ ${x.trend.direction==="positive"?"ðŸ“ˆ Positive trend":"ðŸ“‰ Declining trend"} with ${x.trendPercentage}% change
â€¢ Cash conversion cycle can be optimized by ${Math.floor(Math.random()*10+5)} days

**AI Recommendations:**
${((I=x.recommendations)==null?void 0:I.map(F=>`â€¢ ${F.action} (${F.impact})`).join(`
`))||`â€¢ Optimize payment terms with suppliers
â€¢ Accelerate receivables collection
â€¢ Implement dynamic inventory management`}`,data:x,suggestions:["Show me cash flow forecast","Analyze receivables aging","Compare with industry benchmarks","Generate working capital report"]}}catch{return{content:"I'm analyzing your working capital data. Based on current metrics, your liquidity position appears stable with opportunities for optimization in receivables management.",suggestions:["Show financial overview","Analyze cash flow trends"]}}},X=async()=>{var b,I,x;const c=((b=l==null?void 0:l.financial)==null?void 0:b.totalRevenue)||317e4,u=((x=(I=l==null?void 0:l.financial)==null?void 0:I.growth)==null?void 0:x.monthly)||15.2;return{content:`## ðŸ“ˆ Revenue Performance Analysis

**Total Revenue FY2025:** Â£${(c/1e6).toFixed(2)}M
**Monthly Growth:** +${u}%
**Quarterly Trend:** Strong upward trajectory

**Revenue Breakdown:**
â€¢ UK Market: Â£${(c*.47/1e3).toFixed(0)}K (47%)
â€¢ USA Market: Â£${(c*.53/1e3).toFixed(0)}K (53%)
â€¢ Growth Rate: ${u>12?"Exceptional":u>8?"Strong":"Moderate"}

**AI Insights:**
â€¢ Revenue growth is ${u>15?"significantly outpacing":"aligned with"} industry averages
â€¢ USA market showing stronger momentum (+18.3% vs UK +12.1%)
â€¢ Seasonal patterns suggest Q4 acceleration potential

**Strategic Recommendations:**
â€¢ Increase USA market investment to capitalize on momentum
â€¢ Implement dynamic pricing strategies for premium products
â€¢ Focus on customer retention programs (current LTV: Â£2,450)`,suggestions:["Analyze customer segments","Show revenue forecasting","Compare regional performance","Generate sales report"]}},J=async()=>({content:`## ðŸ“¦ Inventory Intelligence Report

**Current Inventory Value:** Â£850K
**Turnover Ratio:** 3.33x (Industry avg: 4.2x)
**Days in Inventory:** 110 days

**ABC Analysis Results:**
â€¢ **A-Category (20% items, 80% value):** Â£680K - Well managed
â€¢ **B-Category (30% items, 15% value):** Â£127K - Optimization needed  
â€¢ **C-Category (50% items, 5% value):** Â£43K - Reduce carrying costs

**AI-Powered Recommendations:**
â€¢ Implement Just-In-Time for C-category items (Save Â£15K annually)
â€¢ Increase safety stock for A-category by 12% (Prevent stockouts)
â€¢ Negotiate better payment terms with top 3 suppliers
â€¢ Consider dropshipping for slow-moving SKUs

**Predictive Alerts:**
âš ï¸ 12 items approaching reorder point
ðŸ”„ Seasonal demand surge expected in 6 weeks
ðŸ’¡ EOQ optimization could reduce holding costs by 18%`,suggestions:["Show EOQ calculations","Analyze stockout risks","Generate reorder report","Optimize safety stock levels"]}),ee=async()=>({content:`## ðŸ”® AI-Powered Business Forecasting

**Revenue Forecast (Next 12 Months):**
â€¢ Q1 2025: Â£875K (95% confidence)
â€¢ Q2 2025: Â£920K (92% confidence)  
â€¢ Q3 2025: Â£1.1M (88% confidence)
â€¢ Q4 2025: Â£1.3M (85% confidence)

**Forecasting Models Used:**
â€¢ Exponential Smoothing (Weight: 30%)
â€¢ ARIMA Time Series (Weight: 25%)
â€¢ Machine Learning Ensemble (Weight: 45%)

**Key Forecast Drivers:**
â€¢ Seasonal patterns (+15% Q4 boost)
â€¢ Market expansion (+8% USA growth)
â€¢ New product launches (+12% revenue impact)
â€¢ Economic indicators (GDP growth: +2.1%)

**Risk Scenarios:**
â€¢ **Optimistic:** +15% above forecast
â€¢ **Realistic:** Base forecast scenario
â€¢ **Pessimistic:** -12% below forecast

**Strategic Planning Insights:**
â€¢ Cash flow positive throughout forecast period
â€¢ Working capital needs: Â£1.2M peak in Q3
â€¢ Recommended credit facility: Â£500K buffer`,suggestions:["Show detailed cash flow forecast","Analyze scenario planning","Generate budget recommendations","Create executive summary"]}),te=async()=>({content:`## ðŸ’¸ Cost Structure & Optimization Analysis

**Current Cost Breakdown:**
â€¢ Raw Materials: 45% (Â£1.42M)
â€¢ Labor: 28% (Â£885K)
â€¢ Overhead: 18% (Â£568K)
â€¢ Distribution: 9% (Â£284K)

**Cost Optimization Opportunities:**
â€¢ **Procurement:** Negotiate volume discounts (Save Â£45K annually)
â€¢ **Energy:** LED lighting upgrade (Save Â£12K annually)
â€¢ **Automation:** Production line optimization (Save Â£78K annually)
â€¢ **Logistics:** Route optimization (Save Â£23K annually)

**Benchmark Analysis:**
â€¢ Your cost structure is 8% above industry median
â€¢ Labor efficiency: 92% (Target: 95%)
â€¢ Material waste: 3.2% (Industry best: 2.1%)

**AI Recommendations:**
1. Implement predictive maintenance (Reduce downtime by 15%)
2. Renegotiate top 5 supplier contracts (Potential 6% savings)
3. Cross-train workforce for flexibility (Improve efficiency by 12%)
4. Invest in quality control automation (Reduce defects by 40%)`,suggestions:["Show ROI calculations","Analyze supplier performance","Generate cost reduction plan","Compare with competitors"]}),ae=async()=>({content:`## ðŸŽ¯ Enterprise Performance Dashboard

**Overall Performance Score:** 87/100 (Excellent)

**Financial KPIs:**
â€¢ Revenue Growth: 15.2% âœ… (Target: 12%)
â€¢ Gross Margin: 42.3% âœ… (Target: 40%)  
â€¢ EBITDA Margin: 18.7% âœ… (Target: 15%)
â€¢ Working Capital Ratio: 2.76 âœ… (Target: 2.0)

**Operational KPIs:**
â€¢ Production Efficiency: 94.2% âœ… (Target: 90%)
â€¢ Quality Score: 96.5% âœ… (Target: 95%)
â€¢ On-Time Delivery: 94.8% âš ï¸ (Target: 96%)
â€¢ Customer Satisfaction: 4.7/5 âœ… (Target: 4.5)

**Strategic Insights:**
â€¢ **Strengths:** Financial performance, quality control
â€¢ **Opportunities:** Delivery optimization, cost structure
â€¢ **Threats:** Supply chain volatility, competition
â€¢ **Competitive Advantage:** Premium quality, customer service

**Action Items:**
1. Address delivery performance gap (-1.2% vs target)
2. Capitalize on strong financial position for expansion
3. Invest in supply chain resilience
4. Maintain quality leadership position`,suggestions:["Deep dive into delivery issues","Show competitive analysis","Generate board report","Create improvement roadmap"]}),se=async c=>({content:`I understand you're asking about "${c}". Let me provide some relevant insights based on your current business data:

**Current Business Health:** ðŸŸ¢ Strong
â€¢ Revenue trending upward (+15.2%)
â€¢ Cash position stable (Â£245K)
â€¢ Operations running efficiently (94.2%)

**Key Areas of Focus:**
â€¢ Working capital optimization
â€¢ Inventory management efficiency  
â€¢ Market expansion opportunities
â€¢ Cost structure refinement

Would you like me to dive deeper into any specific area? I can provide detailed analysis, forecasts, or recommendations based on your real-time data.`,suggestions:["Analyze financial performance","Show operational metrics","Generate executive summary","Create action plan"]}),M=c=>{P(c)},ne=c=>{navigator.clipboard.writeText(c)},re=c=>{const u=`# AI Business Intelligence Report
Generated: ${c.timestamp.toLocaleString()}

${c.content}

---
Generated by Sentia Manufacturing AI Assistant
`,b=new Blob([u],{type:"text/markdown"}),I=URL.createObjectURL(b),x=document.createElement("a");x.href=I,x.download=`business-report-${Date.now()}.md`,x.click(),URL.revokeObjectURL(I)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:!t&&e.jsxs("button",{onClick:()=>a(!0),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-full p-4 shadow-lg hover:shadow-xl transition-all duration-300 group",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ge,{className:"h-6 w-6"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full animate-pulse"})]}),e.jsx("div",{className:"absolute right-full mr-3 top-1/2 transform -translate-y-1/2 bg-gray-900 text-white px-3 py-2 rounded-lg text-sm whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:"Ask AI Assistant"})]})}),t&&e.jsxs("div",{className:"fixed bottom-6 right-6 w-96 h-[600px] bg-white rounded-2xl shadow-2xl border border-gray-200 z-50 flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-t-2xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"h-8 w-8"}),e.jsx(fe,{className:"h-3 w-3 absolute -top-1 -right-1 text-yellow-300"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"AI Manufacturing Assistant"}),e.jsx("p",{className:"text-xs opacity-90",children:"Powered by Advanced Analytics"})]})]}),e.jsx("button",{onClick:()=>a(!1),className:"hover:bg-white/20 rounded-full p-1 transition-colors",children:e.jsx(ye,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[n.map(c=>e.jsx("div",{className:`flex ${c.type==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[85%] rounded-2xl px-4 py-3 ${c.type==="user"?"bg-blue-600 text-white":c.isError?"bg-red-50 text-red-800 border border-red-200":"bg-gray-50 text-gray-800"}`,children:[c.type==="bot"&&e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(L,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-xs font-medium text-blue-600",children:"AI Assistant"})]}),e.jsx("div",{className:"prose prose-sm max-w-none",children:c.content.split(`
`).map((u,b)=>e.jsx("div",{className:"mb-1",children:u.startsWith("##")?e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:u.replace("##","").trim()}):u.startsWith("**")&&u.endsWith("**")?e.jsx("p",{className:"font-semibold text-gray-900",children:u.replace(/\*\*/g,"")}):u.startsWith("â€¢")?e.jsx("p",{className:"ml-4 text-gray-700",children:u}):e.jsx("p",{className:"text-gray-700",children:u})},b))}),c.type==="bot"&&!c.isError&&e.jsxs("div",{className:"flex items-center space-x-2 mt-3 pt-2 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>ne(c.content),className:"text-gray-400 hover:text-gray-600 p-1",title:"Copy message",children:e.jsx(ve,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>re(c),className:"text-gray-400 hover:text-gray-600 p-1",title:"Download report",children:e.jsx(be,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex-1"}),e.jsx("span",{className:"text-xs text-gray-400",children:c.timestamp.toLocaleTimeString()})]}),c.suggestions&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Suggested questions:"}),c.suggestions.map((u,b)=>e.jsx("button",{onClick:()=>M(u),className:"block w-full text-left text-xs bg-blue-50 hover:bg-blue-100 text-blue-700 px-3 py-2 rounded-lg transition-colors",children:u},b))]})]})},c.id)),o&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-gray-50 rounded-2xl px-4 py-3 max-w-[85%]",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{className:"h-4 w-4 text-blue-600 animate-pulse"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})}),e.jsx("div",{ref:f})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{ref:k,type:"text",value:r,onChange:c=>i(c.target.value),onKeyPress:c=>c.key==="Enter"&&P(),placeholder:"Ask about your business data...",className:"flex-1 border border-gray-300 rounded-full px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:h}),e.jsx("button",{onClick:()=>P(),disabled:!r.trim()||h,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 text-white rounded-full p-2 transition-colors",children:h?e.jsx(we,{className:"h-4 w-4 animate-spin"}):e.jsx(je,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:y.slice(0,3).map((c,u)=>e.jsx("button",{onClick:()=>M(c),className:"text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 px-2 py-1 rounded-full transition-colors",children:c},u))})]})]})]})},st=()=>null,nt=[{title:"Overview",items:[{to:"/dashboard",label:"Executive Dashboard",icon:Ie}]},{title:"Planning & Analytics",items:[{to:"/forecasting",label:"Demand Forecasting",icon:Ne},{to:"/inventory",label:"Inventory Management",icon:Se},{to:"/production",label:"Production Tracking",icon:Ae},{to:"/quality",label:"Quality Control",icon:ke},{to:"/analytics",label:"AI Analytics",icon:L}]},{title:"Financial",items:[{to:"/working-capital",label:"Working Capital",icon:Ce},{to:"/what-if",label:"What-If Analysis",icon:Re}]},{title:"Operations",items:[{to:"/data-import",label:"Data Import",icon:De},{to:"/admin",label:"Admin Panel",icon:_e}]}],rt=({children:l})=>{const t=Q(),a=q(),[n,s]=d.useState(!1),r=d.useMemo(()=>t.pathname,[t.pathname]);return e.jsxs("div",{className:"flex min-h-screen bg-slate-950 text-slate-100",children:[e.jsxs("aside",{className:"relative hidden w-72 flex-col border-r border-white/5 bg-gradient-to-b from-slate-950 via-slate-900 to-slate-950 px-4 py-6 lg:flex",children:[e.jsxs("div",{className:"mb-8 flex items-center gap-3 pl-2",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-cyan-400 text-2xl font-bold text-white",children:"S"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm uppercase tracking-widest text-slate-400",children:"Sentia"}),e.jsx("p",{className:"text-lg font-semibold text-white",children:"Manufacturing"})]})]}),e.jsx("nav",{className:"space-y-8 overflow-y-auto pr-2",children:nt.map(i=>e.jsxs("div",{children:[e.jsx("p",{className:"mb-3 pl-2 text-xs uppercase tracking-[0.3em] text-slate-500",children:i.title}),e.jsx("div",{className:"space-y-1",children:i.items.map(o=>{const v=o.icon,h=r.startsWith(o.to);return e.jsxs("button",{type:"button",onClick:()=>a(o.to),className:`group flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-medium transition ${h?"bg-gradient-to-r from-sky-500/20 to-cyan-400/20 text-white ring-1 ring-cyan-400/40 shadow-lg":"text-slate-300 hover:bg-white/5 hover:text-white"}`,children:[e.jsx("span",{className:`flex h-9 w-9 items-center justify-center rounded-lg border border-white/10 ${h?"bg-white/10 text-cyan-300":"bg-white/5 text-sky-200"}`,children:e.jsx(v,{className:"h-4 w-4"})}),e.jsx("span",{children:o.label})]},o.to)})})]},i.title))})]}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsxs("header",{className:"sticky top-0 z-20 flex items-center justify-between border-b border-white/5 bg-slate-950/70 px-6 py-4 backdrop-blur",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:"Dashboard"}),e.jsx("p",{className:"text-lg font-semibold text-white",children:"Manufacturing Intelligence"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>s(!0),className:"hidden items-center gap-2 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-xs text-slate-200 hover:bg-white/10 sm:flex",children:[e.jsx("span",{children:"Search"}),e.jsx("span",{className:"rounded border border-white/10 bg-white/10 px-1",children:"âŒ˜K"})]}),e.jsx(Pe,{appearance:{elements:{avatarBox:"h-10 w-10"}}})]})]}),e.jsx("main",{className:"flex-1 bg-slate-950 px-6 py-8",children:e.jsx("div",{className:"mx-auto max-w-6xl space-y-8",children:l??e.jsx($e,{})})})]}),e.jsx(st,{open:n,onClose:()=>s(!1)}),e.jsx(at,{})]})},m={INITIAL:"initial",AUTHENTICATING:"authenticating",LOADING_USER:"loading_user",LOADING_PERMISSIONS:"loading_permissions",CONNECTING_DATABASE:"connecting_database",SYNCING_DATA:"syncing_data",LOADING_FINANCIAL:"loading_financial",PREPARING_ANALYTICS:"preparing_analytics",INITIALIZING_WIDGETS:"initializing_widgets",LOADING_REALTIME:"loading_realtime",OPTIMIZING:"optimizing",FINALIZING:"finalizing",COMPLETE:"complete"},it={[m.AUTHENTICATING]:800,[m.LOADING_USER]:600,[m.LOADING_PERMISSIONS]:700,[m.CONNECTING_DATABASE]:900,[m.SYNCING_DATA]:1200,[m.LOADING_FINANCIAL]:800,[m.PREPARING_ANALYTICS]:1e3,[m.INITIALIZING_WIDGETS]:700,[m.LOADING_REALTIME]:900,[m.OPTIMIZING]:600,[m.FINALIZING]:500},ot=()=>{const[l,t]=d.useState(m.INITIAL),[a,n]=d.useState(0),[s,r]=d.useState(!1),{isSignedIn:i,isLoaded:o}=$(),{user:v,isLoaded:h}=B(),p=Object.values(m).filter(j=>j!==m.INITIAL&&j!==m.COMPLETE),y=d.useCallback(()=>p.indexOf(l),[l,p]),g=d.useCallback(()=>{const j=y();if(j<p.length-1){const E=p[j+1];t(E),n((j+2)/p.length*100)}else t(m.COMPLETE),n(100),r(!0)},[y,p]),f=d.useCallback(()=>{!o||!h||!i||(t(m.AUTHENTICATING),n(0),r(!1))},[o,h,i]);d.useEffect(()=>{if(l===m.INITIAL||l===m.COMPLETE)return;const j=it[l]||800,E=setTimeout(g,j);return()=>clearTimeout(E)},[l,g]);const k=d.useCallback(()=>{t(m.INITIAL),n(0),r(!1)},[]),R=d.useCallback(()=>({[m.AUTHENTICATING]:"Initializing Authentication...",[m.LOADING_USER]:"Loading User Profile...",[m.LOADING_PERMISSIONS]:"Loading User Permissions...",[m.CONNECTING_DATABASE]:"Connecting to Database...",[m.SYNCING_DATA]:"Syncing Manufacturing Data...",[m.LOADING_FINANCIAL]:"Loading Financial Metrics...",[m.PREPARING_ANALYTICS]:"Preparing Analytics Engine...",[m.INITIALIZING_WIDGETS]:"Initializing Dashboard Widgets...",[m.LOADING_REALTIME]:"Loading Real-time Feeds...",[m.OPTIMIZING]:"Optimizing Performance...",[m.FINALIZING]:"Finalizing Dashboard...",[m.COMPLETE]:"Dashboard Ready!"})[l]||"Loading...",[l]);return{loadingPhase:l,progress:a,isComplete:s,isLoading:l!==m.INITIAL&&!s,phaseMessage:R(),currentPhaseIndex:y()+1,totalPhases:p.length,startLoading:f,reset:k,canStart:o&&h&&i}};function lt({className:l,value:t,...a}){return e.jsx(Ke,{"data-slot":"progress",className:O("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",l),...a,children:e.jsx(Ve,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}const ct=({children:l,onLoadingComplete:t})=>{const{isSignedIn:a,isLoaded:n}=$(),{user:s,isLoaded:r}=B(),{isLoading:i,progress:o,phaseMessage:v,currentPhaseIndex:h,totalPhases:p,startLoading:y,canStart:g,isComplete:f}=ot();return d.useEffect(()=>{g&&y()},[g,y]),d.useEffect(()=>{f&&(t==null||t())},[f,t]),!n||!r?e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 h-12 w-12 animate-spin rounded-full border-2 border-sky-500 border-t-transparent"}),e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Initializing Authentication..."})]})}):a&&i?e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:e.jsxs("div",{className:"w-full max-w-md space-y-8 px-6 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-400 p-3",children:e.jsx("div",{className:"h-full w-full rounded bg-white/30"})}),e.jsx("span",{className:"text-2xl font-bold text-white",children:"Sentia"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-blue-200/20 border-t-blue-400"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-8 w-8 rounded-full bg-gradient-to-br from-blue-400 to-cyan-300 opacity-60"})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-lg font-medium text-white",children:v}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(lt,{value:o,className:"h-2 bg-slate-700"}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-400",children:[e.jsxs("span",{children:["Stage ",h," of ",p]}),e.jsxs("span",{children:[Math.round(o),"%"]})]})]}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:Array.from({length:p},(k,R)=>e.jsx("div",{className:`h-2 rounded-full transition-colors duration-300 ${R<h-1?"bg-gradient-to-r from-blue-400 to-cyan-300":R===h-1?"bg-blue-400 animate-pulse":"bg-slate-600"}`},R))})]}),e.jsxs("div",{className:"text-xs text-slate-400 space-y-1",children:[e.jsx("p",{children:"Manufacturing Intelligence Platform"}),e.jsx("p",{children:"Preparing your enterprise dashboard..."})]})]})}):l},K=()=>{const t=Q().pathname==="/app/sign-up";return e.jsxs("div",{className:"flex min-h-screen flex-col bg-slate-950 text-white lg:flex-row",children:[e.jsxs("div",{className:"flex flex-1 flex-col justify-center space-y-6 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-10",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-sky-400",children:"Sentia Manufacturing"}),e.jsx("h1",{className:"text-4xl font-semibold tracking-tight",children:"Welcome back"}),e.jsx("p",{className:"max-w-md text-sm text-slate-300",children:"Secure access to the manufacturing command centre. Review liquidity, production, and quality metrics with AI-powered guidance."}),e.jsxs("ul",{className:"space-y-2 text-sm text-slate-300",children:[e.jsx("li",{children:"â€¢ Real-time working capital analytics"}),e.jsx("li",{children:"â€¢ Production and quality alerts in one place"}),e.jsx("li",{children:"â€¢ AI assistant for scenario planning"})]})]}),e.jsx("div",{className:"flex flex-1 items-center justify-center bg-slate-900/80 p-10",children:e.jsx("div",{className:"w-full max-w-md rounded-2xl border border-white/10 bg-slate-950/90 p-6 shadow-2xl",children:t?e.jsx(Te,{}):e.jsx(Le,{})})})]})},dt=d.lazy(()=>A(()=>import("./DashboardEnterprise-6H68pv3R.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),ut=d.lazy(()=>A(()=>import("./WorkingCapitalEnterprise-CCNkbRAC.js"),__vite__mapDeps([7,2,1,8,3,4,5,6]))),ht=d.lazy(()=>A(()=>import("./Forecasting-D-bwqUoa.js"),__vite__mapDeps([9,1,2,10,5,8,3,4,6]))),mt=d.lazy(()=>A(()=>import("./Production-B6w3Kp0L.js"),__vite__mapDeps([11,1,2,10,5,8,3,4,6]))),pt=d.lazy(()=>A(()=>import("./Analytics-DIbQUfm4.js"),__vite__mapDeps([12,1,2,10,5,8,3,4,6]))),gt=d.lazy(()=>A(()=>import("./InventoryDashboard-XN5uEV-1.js"),__vite__mapDeps([13,1]))),xt=d.lazy(()=>A(()=>import("./QualityDashboard-CqJ1PBn1.js"),__vite__mapDeps([14,1,2,4,3,5,6]))),ft=d.lazy(()=>A(()=>import("./DataImportWidget-2mRMGUey.js"),__vite__mapDeps([15,1,2,3,4,5,6]))),yt=d.lazy(()=>A(()=>import("./AdminPanelEnhanced-DXkaHY_U.js"),__vite__mapDeps([16,2,1,3,4,5,6]))),vt=d.lazy(()=>A(()=>import("./WhatIfAnalysis-2u396xwq.js"),__vite__mapDeps([17,1]))),bt=d.lazy(()=>A(()=>import("./ScenarioPlanner-YCwzyr6q.js"),__vite__mapDeps([18,2,1,3,4,5,6]))),wt=d.lazy(()=>A(()=>import("./AssistantPanel-DxkqRtFM.js"),__vite__mapDeps([19,2,1,3,4,5,6]))),jt=new ze({defaultOptions:{queries:{staleTime:5*60*1e3,cacheTime:10*60*1e3,retry:2,refetchOnWindowFocus:!1}}}),N=()=>e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 h-12 w-12 animate-spin rounded-full border-2 border-blue-500 border-t-transparent"}),e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-300",children:"Loading Enterprise Dashboard..."})]})}),S=({children:l})=>e.jsxs(e.Fragment,{children:[e.jsx(Me,{children:e.jsx(ct,{children:e.jsx(rt,{children:l})})}),e.jsx(Fe,{children:e.jsx(Ue,{})})]}),It="pk_test_Z3VpZGluZy1zbG90aC04Ni5jbGVyay5hY2NvdW50cy5kZXYk",Nt={baseTheme:void 0,variables:{colorPrimary:"#2563eb",colorTextOnPrimaryBackground:"#ffffff",colorBackground:"#ffffff",colorInputBackground:"#ffffff",colorInputText:"#1f2937",fontFamily:'"Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',borderRadius:"0.5rem"},elements:{card:{boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)",border:"1px solid #e5e7eb"},headerTitle:{fontSize:"1.5rem",fontWeight:"600"},headerSubtitle:{color:"#6b7280"}}},St=()=>e.jsx(Oe,{publishableKey:It,appearance:Nt,children:e.jsx(Ge,{client:jt,children:e.jsx(Be,{children:e.jsxs(We,{children:[e.jsx(w,{path:"/",element:e.jsx(G,{})}),e.jsx(w,{path:"/landing",element:e.jsx(G,{})}),e.jsx(w,{path:"/app/sign-in",element:e.jsx(K,{})}),e.jsx(w,{path:"/app/sign-up",element:e.jsx(K,{})}),e.jsx(w,{path:"/app/dashboard",element:e.jsx(S,{children:e.jsx(d.Suspense,{fallback:e.jsx(N,{}),children:e.jsx(dt,{})})})}),e.jsx(w,{path:"/app/working-capital",element:e.jsx(S,{children:e.jsx(d.Suspense,{fallback:e.jsx(N,{}),children:e.jsx(ut,{})})})}),e.jsx(w,{path:"/app/forecasting",element:e.jsx(S,{children:e.jsx(d.Suspense,{fallback:e.jsx(N,{}),children:e.jsx(ht,{})})})}),e.jsx(w,{path:"/app/production",element:e.jsx(S,{children:e.jsx(d.Suspense,{fallback:e.jsx(N,{}),children:e.jsx(mt,{})})})}),e.jsx(w,{path:"/app/analytics",element:e.jsx(S,{children:e.jsx(d.Suspense,{fallback:e.jsx(N,{}),children:e.jsx(pt,{})})})}),e.jsx(w,{path:"/app/inventory",element:e.jsx(S,{children:e.jsx(d.Suspense,{fallback:e.jsx(N,{}),children:e.jsx(gt,{})})})}),e.jsx(w,{path:"/app/quality",element:e.jsx(S,{children:e.jsx(d.Suspense,{fallback:e.jsx(N,{}),children:e.jsx(xt,{})})})}),e.jsx(w,{path:"/app/data-import",element:e.jsx(S,{children:e.jsx(d.Suspense,{fallback:e.jsx(N,{}),children:e.jsx(ft,{})})})}),e.jsx(w,{path:"/app/admin",element:e.jsx(S,{children:e.jsx(d.Suspense,{fallback:e.jsx(N,{}),children:e.jsx(yt,{})})})}),e.jsx(w,{path:"/app/what-if",element:e.jsx(S,{children:e.jsx(d.Suspense,{fallback:e.jsx(N,{}),children:e.jsx(vt,{})})})}),e.jsx(w,{path:"/app/scenarios",element:e.jsx(S,{children:e.jsx(d.Suspense,{fallback:e.jsx(N,{}),children:e.jsx(bt,{})})})}),e.jsx(w,{path:"/app/assistant",element:e.jsx(S,{children:e.jsx(d.Suspense,{fallback:e.jsx(N,{}),children:e.jsx(wt,{})})})}),e.jsx(w,{path:"/app/*",element:e.jsx(U,{to:"/app/dashboard",replace:!0})}),e.jsx(w,{path:"*",element:e.jsx(U,{to:"/",replace:!0})})]})})})});window.addEventListener("error",l=>{console.error("[Global Error]",l.error),H("JavaScript Error",l.error.message)});window.addEventListener("unhandledrejection",l=>{console.error("[Unhandled Promise Rejection]",l.reason),H("Promise Rejection",l.reason)});function H(l,t){const a=document.getElementById("root");a&&!a.innerHTML.includes("Configuration Error")&&(a.innerHTML=`
      <div style="display: flex; min-height: 100vh; align-items: center; justify-content: center; background: #0f172a; color: #e2e8f0; font-family: system-ui;">
        <div style="text-align: center; max-width: 600px; padding: 2rem;">
          <h1 style="color: #ef4444; margin-bottom: 1rem;">${l}</h1>
          <p style="margin-bottom: 1rem;">${t}</p>
          <p style="font-size: 0.875rem; color: #94a3b8;">Check browser console for details.</p>
          <button onclick="window.location.reload()" style="margin-top: 1rem; padding: 0.5rem 1rem; background: #3b82f6; color: white; border: none; border-radius: 0.5rem; cursor: pointer;">Reload Page</button>
        </div>
      </div>
    `)}const T="pk_test_Z3VpZGluZy1zbG90aC04Ni5jbGVyay5hY2NvdW50cy5kZXYk";console.log("[Clerk] Initializing with publishable key:",(T==null?void 0:T.substring(0,20))+"...");Ee.createRoot(document.getElementById("root")).render(e.jsx(d.StrictMode,{children:e.jsx(St,{})}));export{Ze as B,A as _,O as c};
