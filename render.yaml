# Render configuration with PR Previews enabled
# PR Previews: Always create PR previews. Skip a PR by adding the label render-preview-skip or [skip preview] in its title.

previewsEnabled: true
previewsExpireAfterDays: 3

services:
  # Development Environment
  - type: web
    name: sentia-manufacturing-development
    env: node
    plan: starter
    region: oregon
    branch: development
    buildCommand: "npm ci --include=dev && npm run build"
    startCommand: "node --expose-gc --max-old-space-size=128 server-ultra-light.js"
    healthCheckPath: /health
    autoDeploy: true
    pullRequestPreviewsEnabled: true
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000
      - key: IS_PULL_REQUEST
        generateValue: true
      - key: NODE_OPTIONS
        value: "--expose-gc --max-old-space-size=128"
