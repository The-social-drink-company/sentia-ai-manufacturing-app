var e=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"});function r({packageName:r,customMessages:t}){let s=r;function n(e,r){if(!r)return`${s}: ${e}`;let t=e;const n=e.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(const s of n){const e=(r[s[1]]||"").toString();t=t.replace(`{{${s[1]}}}`,e)}return`${s}: ${t}`}const o={...e,...t};return{setPackageName({packageName:e}){return"string"==typeof e&&(s=e),this},setMessages({customMessages:e}){return Object.assign(o,e||{}),this},throwInvalidPublishableKeyError(e){throw new Error(n(o.InvalidPublishableKeyErrorMessage,e))},throwInvalidProxyUrl(e){throw new Error(n(o.InvalidProxyUrlErrorMessage,e))},throwMissingPublishableKeyError(){throw new Error(n(o.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw new Error(n(o.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(e){throw new Error(n(o.MissingClerkProvider,e))},throw(e){throw new Error(n(e))}}}var t=Object.defineProperty,s=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i=(e,r)=>{for(var s in r)t(e,s,{get:r[s],enumerable:!0})},a=(e,r,i)=>(((e,r,i,a)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let l of n(r))o.call(e,l)||l===i||t(e,l,{get:()=>r[l],enumerable:!(a=s(r,l))||a.enumerable})})(e,r,"default"),i),l={strict_mfa:{afterMinutes:10,level:"multi_factor"},strict:{afterMinutes:10,level:"second_factor"},moderate:{afterMinutes:60,level:"second_factor"},lax:{afterMinutes:1440,level:"second_factor"}},c=new Set(["first_factor","second_factor","multi_factor"]),u=new Set(["strict_mfa","strict","moderate","lax"]),d=e=>e.replace(/^(org:)*/,"org:"),g=(e,r)=>{const{org:t,user:s}=f(e),[n,o]=r.split(":"),i=o||n;return"org"===n?t.includes(i):"user"===n?s.includes(i):[...t,...s].includes(i)},f=e=>{const r=e?e.split(",").map(e=>e.trim()):[];return{org:r.filter(e=>e.split(":")[0].includes("o")).map(e=>e.split(":")[1]),user:r.filter(e=>e.split(":")[0].includes("u")).map(e=>e.split(":")[1])}},p=e=>{if(!e)return!1;const r=e=>"string"==typeof e?l[e]:e,t="string"==typeof e&&(s=e,u.has(s));var s;const n="object"==typeof e&&(i=e.level,c.has(i))&&("number"==typeof(o=e.afterMinutes)&&o>0);var o,i;return!(!t&&!n)&&r.bind(null,e)},h=e=>r=>{if(!e.userId)return!1;const t=((e,r)=>{const{features:t,plans:s}=r;return e.feature&&t?g(t,e.feature):e.plan&&s?g(s,e.plan):null})(r,e),s=((e,r)=>{const{orgId:t,orgRole:s,orgPermissions:n}=r;return(e.role||e.permission)&&t&&s&&n?e.permission?n.includes(d(e.permission)):e.role?d(s)===d(e.role):null:null})(r,e),n=((e,{factorVerificationAge:r})=>{if(!e.reverification||!r)return null;const t=p(e.reverification);if(!t)return null;const{level:s,afterMinutes:n}=t(),[o,i]=r,a=-1!==o?n>o:null,l=-1!==i?n>i:null;switch(s){case"first_factor":return a;case"second_factor":return-1!==i?l:a;case"multi_factor":return-1===i?a:a&&l}})(r,e);return[t||s,n].some(e=>null===e)?[t||s,n].some(e=>!0===e):[t||s,n].every(e=>!0===e)},y=({authObject:{sessionId:e,sessionStatus:r,userId:t,actor:s,orgId:n,orgRole:o,orgSlug:i,signOut:a,getToken:l,has:c,sessionClaims:u},options:{treatPendingAsSignedOut:d=!0}})=>void 0===e&&void 0===t?{isLoaded:!1,isSignedIn:void 0,sessionId:e,sessionClaims:void 0,userId:t,actor:void 0,orgId:void 0,orgRole:void 0,orgSlug:void 0,has:void 0,signOut:a,getToken:l}:null===e&&null===t?{isLoaded:!0,isSignedIn:!1,sessionId:e,userId:t,sessionClaims:null,actor:null,orgId:null,orgRole:null,orgSlug:null,has:()=>!1,signOut:a,getToken:l}:d&&"pending"===r?{isLoaded:!0,isSignedIn:!1,sessionId:null,userId:null,sessionClaims:null,actor:null,orgId:null,orgRole:null,orgSlug:null,has:()=>!1,signOut:a,getToken:l}:e&&u&&t&&n&&o?{isLoaded:!0,isSignedIn:!0,sessionId:e,sessionClaims:u,userId:t,actor:s||null,orgId:n,orgRole:o,orgSlug:i||null,has:c,signOut:a,getToken:l}:e&&u&&t&&!n?{isLoaded:!0,isSignedIn:!0,sessionId:e,sessionClaims:u,userId:t,actor:s||null,orgId:null,orgRole:null,orgSlug:null,has:c,signOut:a,getToken:l}:void 0,m=e=>"undefined"!=typeof atob&&"function"==typeof atob?atob(e):"undefined"!=typeof global&&global.Buffer?new global.Buffer(e,"base64").toString():e,v=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],b="pk_live_";function w(e){if(!e.endsWith("$"))return!1;const r=e.slice(0,-1);return!r.includes("$")&&r.includes(".")}function k(e,r={}){if(!(e=e||"")||!I(e)){if(r.fatal&&!e)throw new Error("Publishable key is missing. Ensure that your publishable key is correctly configured. Double-check your environment configuration for your keys, or access them here: https://dashboard.clerk.com/last-active?path=api-keys");if(r.fatal&&!I(e))throw new Error("Publishable key not valid.");return null}const t=e.startsWith(b)?"production":"development";let s;try{s=m(e.split("_")[2])}catch{if(r.fatal)throw new Error("Publishable key not valid: Failed to decode key.");return null}if(!w(s)){if(r.fatal)throw new Error("Publishable key not valid: Decoded key has invalid format.");return null}let n=s.slice(0,-1);return r.proxyUrl?n=r.proxyUrl:"development"!==t&&r.domain&&r.isSatellite&&(n=`clerk.${r.domain}`),{instanceType:t,frontendApi:n}}function I(e=""){try{if(!(e.startsWith(b)||e.startsWith("pk_test_")))return!1;const r=e.split("_");if(3!==r.length)return!1;const t=r[2];if(!t)return!1;return w(m(t))}catch{return!1}}function S(e,r){return{event:"METHOD_CALLED",eventSamplingRate:.1,payload:{method:e,...r}}}var M=new Set,P=(e,r,t)=>{const s=(()=>{try{return!1}catch{}return!1})()||(()=>{try{return!1}catch{}return!1})(),n=e;M.has(n)||s||M.add(n)},E=e=>{(()=>{try{return!0}catch{}})()};function O(e,r,t){return"function"==typeof e?e(r):void 0!==e?e:void 0!==t?t:void 0}var x=(e,...r)=>{const t={...e};for(const s of r)delete t[s];return t},C=e=>e.trim().replace(/^v/,"").match(/-(.+?)(\.|$)/)?.[1],_=e=>e.trim().replace(/^v/,"").split(".")[0];function R(e){return e.startsWith("/")}var j={initialDelay:125,maxDelayBetweenRetries:0,factor:2,shouldRetry:(e,r)=>r<5,retryImmediately:!1,jitter:!0},K=async e=>new Promise(r=>setTimeout(r,e)),L=(e,r)=>r?e*(1+Math.random()):e,T=e=>{let r=0;return async()=>{await K((()=>{const t=e.initialDelay,s=e.factor;let n=t*Math.pow(s,r);return n=L(n,e.jitter),Math.min(e.maxDelayBetweenRetries||n,n)})()),r++}};async function $(e="",r){const{async:t,defer:s,beforeLoad:n,crossOrigin:o,nonce:i}=r||{};return(async(e,r={})=>{let t=0;const{shouldRetry:s,initialDelay:n,maxDelayBetweenRetries:o,factor:i,retryImmediately:a,jitter:l}={...j,...r},c=T({initialDelay:n,maxDelayBetweenRetries:o,factor:i,jitter:l});for(;;)try{return await e()}catch(u){if(t++,!s(u,t))throw u;a&&1===t?await K(L(100,l)):await c()}})(()=>new Promise((r,a)=>{e||a(new Error("loadScript cannot be called without a src")),document&&document.body||a("loadScript cannot be called when document does not exist");const l=document.createElement("script");o&&l.setAttribute("crossorigin",o),l.async=t||!1,l.defer=s||!1,l.addEventListener("load",()=>{l.remove(),r(l)}),l.addEventListener("error",()=>{l.remove(),a()}),l.src=e,l.nonce=i,n?.(l),document.body.appendChild(l)}),{shouldRetry:(e,r)=>r<=5})}var A="Clerk: Failed to load Clerk",{isDevOrStagingUrl:D}=function(){const e=new Map;return{isDevOrStagingUrl:r=>{if(!r)return!1;const t="string"==typeof r?r:r.hostname;let s=e.get(t);return void 0===s&&(s=v.some(e=>t.endsWith(e)),e.set(t,s)),s}}}(),U=r({packageName:"@clerk/shared"});function z(e){U.setPackageName({packageName:e})}function N(){if("undefined"==typeof window||!window.Clerk)return!1;const e=window.Clerk;return"object"==typeof e&&"function"==typeof e.load}function V(e){return new Promise((r,t)=>{let s=!1;const n=(e,r)=>{clearTimeout(e),clearInterval(r)},o=()=>{s||N()&&(s=!0,n(i,a),r(null))},i=setTimeout(()=>{s||(s=!0,n(i,a),N()?r(null):t(new Error(A)))},e);o();const a=setInterval(()=>{s?clearInterval(a):o()},100)})}var B=async e=>{const r=e?.scriptLoadTimeout??15e3;if(N())return null;if(document.querySelector("script[data-clerk-js-script]"))return V(r);if(!e?.publishableKey)return U.throwMissingPublishableKeyError(),null;const t=V(r);return $(W(e),{async:!0,crossOrigin:"anonymous",nonce:e.nonce,beforeLoad:J(e)}).catch(()=>{throw new Error(A)}),t},W=e=>{const{clerkJSUrl:r,clerkJSVariant:t,clerkJSVersion:s,proxyUrl:n,domain:o,publishableKey:i}=e;if(r)return r;let a="";var l,c;a=n&&(!(c=n)||function(e){return/^http(s)?:\/\//.test(e||"")}(c)||R(c))?(l=n,l?R(l)?new URL(l,window.location.origin).toString():l:"").replace(/http(s)?:\/\//,""):o&&!D(k(i)?.frontendApi||"")?function(e){if(!e)return"";let r;if(e.match(/^(clerk\.)+\w*$/))r=/(clerk\.)*(?=clerk\.)/;else{if(e.match(/\.clerk.accounts/))return e;r=/^(clerk\.)*/gi}return`clerk.${e.replace(r,"")}`}(o):k(i)?.frontendApi||"";const u=t?`${t.replace(/\.+$/,"")}.`:"",d=((e,r="5.92.0")=>{if(e)return e;const t=C(r);return t?"snapshot"===t?"5.92.0":t:_(r)})(s);return`https://${a}/npm/@clerk/clerk-js@${d}/dist/clerk.${u}browser.js`},J=e=>r=>{const t=(e=>{const r={};return e.publishableKey&&(r["data-clerk-publishable-key"]=e.publishableKey),e.proxyUrl&&(r["data-clerk-proxy-url"]=e.proxyUrl),e.domain&&(r["data-clerk-domain"]=e.domain),e.nonce&&(r.nonce=e.nonce),r})(e);for(const e in t)r.setAttribute(e,t[e])},Y=(e,r,t)=>!e&&t?F(t):q(r),F=e=>{const r=e.userId,t=e.user,s=e.sessionId,n=e.sessionStatus,o=e.sessionClaims;return{userId:r,user:t,sessionId:s,session:e.session,sessionStatus:n,sessionClaims:o,organization:e.organization,orgId:e.orgId,orgRole:e.orgRole,orgPermissions:e.orgPermissions,orgSlug:e.orgSlug,actor:e.actor,factorVerificationAge:e.factorVerificationAge}},q=e=>{const r=e.user?e.user.id:e.user,t=e.user,s=e.session?e.session.id:e.session,n=e.session,o=e.session?.status,i=e.session?e.session.lastActiveToken?.jwt?.claims:null,a=e.session?e.session.factorVerificationAge:null,l=n?.actor,c=e.organization,u=e.organization?e.organization.id:e.organization,d=c?.slug,g=c?t?.organizationMemberships?.find(e=>e.organization.id===u):c,f=g?g.permissions:g,p=g?g.role:g;return{userId:r,user:t,sessionId:s,session:n,sessionStatus:o,sessionClaims:i,organization:c,orgId:u,orgRole:p,orgSlug:d,orgPermissions:f,actor:l,factorVerificationAge:a}};function H(){return"undefined"!=typeof window}var Z=(e,r,t,s,n)=>{const{notify:o}=n||{};let i=e.get(t);i||(i=[],e.set(t,i)),i.push(s),o&&r.has(t)&&s(r.get(t))},G=(e,r,t)=>(e.get(r)||[]).map(e=>e(t)),Q=(e,r,t)=>{const s=e.get(r);s&&(t?s.splice(s.indexOf(t)>>>0,1):e.set(r,[]))},X={Status:"status"},ee=()=>(()=>{const e=new Map,r=new Map,t=new Map;return{on:(...t)=>Z(e,r,...t),prioritizedOn:(...e)=>Z(t,r,...e),emit:(s,n)=>{r.set(s,n),G(t,s,n),G(e,s,n)},off:(...r)=>Q(e,...r),prioritizedOff:(...e)=>Q(t,...e),internal:{retrieveListeners:r=>e.get(r)||[]}}})();export{i as _,a,r as b,h as c,P as d,S as e,ee as f,X as g,O as h,H as i,B as j,I as k,E as l,Y as m,y as r,z as s,x as w};
