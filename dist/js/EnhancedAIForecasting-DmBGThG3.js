import{a as e,j as t,l as a,t as s,m as r,n,aH as d,be as i,ai as l,an as c,b7 as o,F as m,G as u}from"./chunk-DPRQcyFe.js";import{C as x}from"./chunk-C9TfaDEA.js";import{R as p,r as g,h,X as y,Y as j,j as f,k as b,m as v,v as w,l as k}from"./chunk-C7vLRJrk.js";import"./chunk-BfmujUnw.js";import"./chunk-B5P-aYZ_.js";import"./chunk-BS6JJXKa.js";import"./chunk-DC45jon4.js";import"./chunk-pU9d5F3v.js";import"./chunk-Dozjk7Op.js";const N=()=>{const[N,B]=e.useState(null),[S,T]=e.useState(!0),[A,F]=e.useState("ensemble"),[C,D]=e.useState(30),[M,I]=e.useState(95),[E,_]=e.useState(["demand","revenue","inventory"]),[L,K]=e.useState(!0),[z,W]=e.useState(!1);e.useEffect(()=>{const e=async()=>{try{const e=await fetch(`/api/forecasting/enhanced?model=${A}&horizon=${C}&confidence=${M}`);if(e.ok){const t=await e.json();B(t)}else B(O)}catch(e){B(O)}finally{T(!1)}};e();const t=setInterval(e,6e4);return()=>clearInterval(t)},[A,C,M]);const O={models:{ensemble:{name:"AI Ensemble Model",accuracy:94.2,confidence:.96,mape:5.8,description:"Combines multiple AI models including neural networks, LSTM, and statistical models",lastTrained:"2025-09-08T06:00:00Z",features:["seasonal_patterns","market_trends","external_factors","promotional_impact"],performance:{shortTerm:96.1,mediumTerm:93.8,longTerm:89.5}},neuralNetwork:{name:"Deep Neural Network",accuracy:91.5,confidence:.94,mape:8.5,description:"Advanced deep learning model with attention mechanisms",lastTrained:"2025-09-08T02:00:00Z",features:["time_series","cross_product_influence","market_sentiment"],performance:{shortTerm:94.2,mediumTerm:91.1,longTerm:87.8}},lstm:{name:"LSTM Time Series",accuracy:89.7,confidence:.91,mape:10.3,description:"Long Short-Term Memory network optimized for sequential data",lastTrained:"2025-09-07T18:00:00Z",features:["historical_demand","seasonality","trend_analysis"],performance:{shortTerm:92.1,mediumTerm:88.9,longTerm:84.2}},statistical:{name:"Statistical Models",accuracy:85.3,confidence:.87,mape:14.7,description:"ARIMA, Exponential Smoothing, and Regression models",lastTrained:"2025-09-08T00:00:00Z",features:["moving_averages","seasonal_decomposition","linear_trends"],performance:{shortTerm:87.5,mediumTerm:84.1,longTerm:82.3}}},forecast:{demand:[{date:"2025-09-09",actual:null,predicted:2420,upperBound:2580,lowerBound:2260,confidence:.95},{date:"2025-09-10",actual:null,predicted:2450,upperBound:2620,lowerBound:2280,confidence:.95},{date:"2025-09-11",actual:null,predicted:2380,upperBound:2560,lowerBound:2200,confidence:.94},{date:"2025-09-12",actual:null,predicted:2520,upperBound:2710,lowerBound:2330,confidence:.94},{date:"2025-09-13",actual:null,predicted:2480,upperBound:2680,lowerBound:2280,confidence:.93},{date:"2025-09-14",actual:null,predicted:2350,upperBound:2560,lowerBound:2140,confidence:.93},{date:"2025-09-15",actual:null,predicted:2290,upperBound:2510,lowerBound:2070,confidence:.92}],revenue:[{date:"2025-09-09",actual:null,predicted:96800,upperBound:103200,lowerBound:90400,confidence:.95},{date:"2025-09-10",actual:null,predicted:98e3,upperBound:104800,lowerBound:91200,confidence:.95},{date:"2025-09-11",actual:null,predicted:95200,upperBound:102400,lowerBound:88e3,confidence:.94},{date:"2025-09-12",actual:null,predicted:100800,upperBound:108400,lowerBound:93200,confidence:.94},{date:"2025-09-13",actual:null,predicted:99200,upperBound:107200,lowerBound:91200,confidence:.93},{date:"2025-09-14",actual:null,predicted:94e3,upperBound:102400,lowerBound:85600,confidence:.93},{date:"2025-09-15",actual:null,predicted:91600,upperBound:100400,lowerBound:82800,confidence:.92}],inventory:[{date:"2025-09-09",actual:null,predicted:15200,upperBound:16800,lowerBound:13600,confidence:.95},{date:"2025-09-10",actual:null,predicted:14800,upperBound:16400,lowerBound:13200,confidence:.95},{date:"2025-09-11",actual:null,predicted:15600,upperBound:17200,lowerBound:14e3,confidence:.94},{date:"2025-09-12",actual:null,predicted:14200,upperBound:15800,lowerBound:12600,confidence:.94},{date:"2025-09-13",actual:null,predicted:14900,upperBound:16500,lowerBound:13300,confidence:.93},{date:"2025-09-14",actual:null,predicted:15800,upperBound:17400,lowerBound:14200,confidence:.93},{date:"2025-09-15",actual:null,predicted:16200,upperBound:17800,lowerBound:14600,confidence:.92}]},historical:[{date:"2025-09-01",demand:2380,revenue:95200,inventory:15400},{date:"2025-09-02",demand:2420,revenue:96800,inventory:15100},{date:"2025-09-03",demand:2350,revenue:94e3,inventory:15800},{date:"2025-09-04",demand:2480,revenue:99200,inventory:14900},{date:"2025-09-05",demand:2520,revenue:100800,inventory:14600},{date:"2025-09-06",demand:2390,revenue:95600,inventory:15300},{date:"2025-09-07",demand:2450,revenue:98e3,inventory:14800},{date:"2025-09-08",demand:2410,revenue:96400,inventory:15200}],modelComparison:[{date:"2025-09-09",ensemble:2420,neural:2450,lstm:2380,statistical:2400},{date:"2025-09-10",ensemble:2450,neural:2480,lstm:2410,statistical:2430},{date:"2025-09-11",ensemble:2380,neural:2420,lstm:2350,statistical:2370},{date:"2025-09-12",ensemble:2520,neural:2560,lstm:2490,statistical:2510},{date:"2025-09-13",ensemble:2480,neural:2510,lstm:2450,statistical:2470},{date:"2025-09-14",ensemble:2350,neural:2390,lstm:2320,statistical:2340},{date:"2025-09-15",ensemble:2290,neural:2330,lstm:2260,statistical:2280}],insights:[{type:"trend",severity:"info",title:"Seasonal Pattern Detected",description:"Strong weekly seasonality with peak demand on Fridays and weekends",impact:"medium",confidence:.94,recommendedActions:["Adjust production schedule","Optimize inventory levels"]},{type:"anomaly",severity:"warning",title:"Demand Surge Expected",description:"AI model predicts 15% increase in demand next week based on market indicators",impact:"high",confidence:.87,recommendedActions:["Increase production capacity","Review supplier commitments"]},{type:"optimization",severity:"success",title:"Inventory Optimization Opportunity",description:"Model suggests reducing safety stock by 8% without impacting service levels",impact:"medium",confidence:.92,recommendedActions:["Adjust reorder points","Optimize warehouse space"]},{type:"risk",severity:"error",title:"Supply Chain Risk Alert",description:"External factors indicate potential supply disruption in 2 weeks",impact:"high",confidence:.79,recommendedActions:["Diversify suppliers","Build buffer inventory"]}],metrics:{accuracy:{current:94.2,target:95,trend:"up"},mape:{current:5.8,target:5,trend:"down"},bias:{current:-.2,target:0,trend:"stable"},coverage:{current:96.1,target:95,trend:"up"}},externalFactors:[{name:"Weather Impact",influence:.15,trend:"positive",description:"Favorable weather conditions increasing demand"},{name:"Market Sentiment",influence:.08,trend:"neutral",description:"Stable consumer confidence levels"},{name:"Competitor Activity",influence:-.05,trend:"negative",description:"New competitor product launch"},{name:"Economic Indicators",influence:.12,trend:"positive",description:"Strong economic growth in key markets"},{name:"Promotional Events",influence:.22,trend:"positive",description:"Planned marketing campaigns driving demand"}]},P=e=>{switch(e){case"trend":return t.jsx(l,{className:"h-5 w-5"});case"anomaly":case"risk":return t.jsx(m,{className:"h-5 w-5"});case"optimization":return t.jsx(u,{className:"h-5 w-5"});default:return t.jsx(o,{className:"h-5 w-5"})}},R=e=>{switch(e){case"success":return"text-green-600 bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800";case"warning":return"text-yellow-600 bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800";case"error":return"text-red-600 bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800";default:return"text-blue-600 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"}},H=e=>new Date(e).toLocaleDateString("en-GB",{month:"short",day:"numeric"});if(S)return t.jsx("div",{className:"max-w-7xl mx-auto p-6",children:t.jsxs("div",{className:"animate-pulse",children:[t.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/3 mb-6"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[...Array(8)].map((e,a)=>t.jsx("div",{className:"h-32 bg-gray-300 rounded"},a))})]})});const U=N||O,Z=U.models[A];return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Enhanced AI Forecasting"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Advanced machine learning models for demand prediction and business intelligence"})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("button",{onClick:()=>W(!z),className:"px-4 py-2 rounded-lg transition-colors flex items-center space-x-2 "+(z?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"),children:[t.jsx(a,{className:"h-4 w-4"}),t.jsx("span",{children:"Scenario Mode"})]}),t.jsxs("button",{onClick:()=>K(!L),className:"px-4 py-2 rounded-lg transition-colors flex items-center space-x-2 "+(L?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"),children:[t.jsx(s,{className:"h-4 w-4"}),t.jsx("span",{children:"Model Comparison"})]})]})]}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Forecasting Model"}),t.jsxs("select",{value:A,onChange:e=>F(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[t.jsx("option",{value:"ensemble",children:"AI Ensemble Model"}),t.jsx("option",{value:"neuralNetwork",children:"Deep Neural Network"}),t.jsx("option",{value:"lstm",children:"LSTM Time Series"}),t.jsx("option",{value:"statistical",children:"Statistical Models"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Forecast Horizon (days)"}),t.jsxs("select",{value:C,onChange:e=>D(Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[t.jsx("option",{value:7,children:"7 Days"}),t.jsx("option",{value:14,children:"14 Days"}),t.jsx("option",{value:30,children:"30 Days"}),t.jsx("option",{value:90,children:"90 Days"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confidence Level"}),t.jsxs("select",{value:M,onChange:e=>I(Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[t.jsx("option",{value:90,children:"90%"}),t.jsx("option",{value:95,children:"95%"}),t.jsx("option",{value:99,children:"99%"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Metrics to Display"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:["demand","revenue","inventory"].map(e=>t.jsx("button",{onClick:()=>{E.includes(e)?_(E.filter(t=>t!==e)):_([...E,e])},className:"px-3 py-1 text-xs rounded-full transition-colors "+(E.includes(e)?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Model Accuracy"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[Z.accuracy,"%"]}),t.jsx("p",{className:"text-sm text-green-600",children:"Above target (95%)"})]}),t.jsx(r,{className:"h-8 w-8 text-blue-600"})]})}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Confidence Score"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[(100*Z.confidence).toFixed(1),"%"]}),t.jsx("p",{className:"text-sm text-blue-600",children:"High confidence"})]}),t.jsx(n,{className:"h-8 w-8 text-green-600"})]})}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"MAPE Error"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[Z.mape,"%"]}),t.jsx("p",{className:"text-sm text-yellow-600",children:"Target: <5%"})]}),t.jsx(s,{className:"h-8 w-8 text-yellow-600"})]})}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Last Updated"}),t.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:new Date(Z.lastTrained).toLocaleDateString()}),t.jsx("p",{className:"text-sm text-gray-500",children:"Auto-retrained daily"})]}),t.jsx(d,{className:"h-8 w-8 text-purple-600"})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Demand Forecast with Confidence Intervals"}),t.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full"}),t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Predicted"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 bg-blue-200 rounded-full"}),t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Confidence Band"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 bg-gray-600 rounded-full"}),t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Historical"})]})]})]}),t.jsx("div",{className:"h-80",children:t.jsx(x,{children:t.jsx(p,{width:"100%",height:"100%",children:t.jsxs(g,{data:[...U.historical,...U.forecast.demand],margin:{top:20,right:30,left:20,bottom:5},children:[t.jsx(h,{strokeDasharray:"3 3"}),t.jsx(y,{dataKey:"date",tickFormatter:H}),t.jsx(j,{}),t.jsx(f,{formatter:(e,t)=>"predicted"===t||"demand"===t?[e?.toLocaleString(),"Units"]:[e?.toLocaleString(),t],labelFormatter:e=>H(e)}),t.jsx(b,{dataKey:"upperBound",stroke:"none",fill:"#3B82F6",fillOpacity:.1,connectNulls:!1}),t.jsx(b,{dataKey:"lowerBound",stroke:"none",fill:"#ffffff",fillOpacity:1,connectNulls:!1}),t.jsx(v,{type:"monotone",dataKey:"demand",stroke:"#6B7280",strokeWidth:2,dot:{r:4},connectNulls:!1}),t.jsx(v,{type:"monotone",dataKey:"predicted",stroke:"#3B82F6",strokeWidth:3,strokeDasharray:"5 5",dot:{r:4},connectNulls:!1}),t.jsx(w,{x:"2025-09-08",stroke:"#EF4444",strokeDasharray:"2 2"})]})})})})]}),L&&t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Model Performance Comparison"}),t.jsx("div",{className:"h-64",children:t.jsx(x,{children:t.jsx(p,{width:"100%",height:"100%",children:t.jsxs(k,{data:U.modelComparison,children:[t.jsx(h,{strokeDasharray:"3 3"}),t.jsx(y,{dataKey:"date",tickFormatter:H}),t.jsx(j,{}),t.jsx(f,{formatter:e=>[e?.toLocaleString(),"Units"],labelFormatter:e=>H(e)}),t.jsx(v,{type:"monotone",dataKey:"ensemble",stroke:"#3B82F6",strokeWidth:2,name:"Ensemble"}),t.jsx(v,{type:"monotone",dataKey:"neural",stroke:"#10B981",strokeWidth:2,name:"Neural Network"}),t.jsx(v,{type:"monotone",dataKey:"lstm",stroke:"#F59E0B",strokeWidth:2,name:"LSTM"}),t.jsx(v,{type:"monotone",dataKey:"statistical",stroke:"#EF4444",strokeWidth:2,name:"Statistical"})]})})})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"External Factors Impact"}),t.jsx(i,{className:"h-5 w-5 text-gray-400"})]}),t.jsx("div",{className:"space-y-4",children:U.externalFactors.map((e,a)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-2 rounded-full "+("positive"===e.trend?"bg-green-100 dark:bg-green-900/20":"negative"===e.trend?"bg-red-100 dark:bg-red-900/20":"bg-gray-100 dark:bg-gray-600"),children:"positive"===e.trend?t.jsx(l,{className:"h-4 w-4 text-green-600"}):"negative"===e.trend?t.jsx(c,{className:"h-4 w-4 text-red-600"}):t.jsx(l,{className:"h-4 w-4 text-gray-600"})}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e.name}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.description})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"font-medium text-sm "+(e.influence>0?"text-green-600":e.influence<0?"text-red-600":"text-gray-600"),children:[e.influence>0?"+":"",(100*e.influence).toFixed(1),"%"]}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Influence"})]})]},a))})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"AI-Generated Insights"}),t.jsx(r,{className:"h-5 w-5 text-gray-400"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:U.insights.map((e,a)=>t.jsx("div",{className:`p-4 rounded-lg border ${R(e.severity)}`,children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"flex-shrink-0",children:P(e.type)}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-medium text-sm",children:e.title}),t.jsxs("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-white bg-opacity-50",children:[(100*e.confidence).toFixed(0),"% confident"]})]}),t.jsx("p",{className:"text-sm mb-3",children:e.description}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"text-xs font-medium",children:"Recommended Actions:"}),t.jsx("ul",{className:"text-xs space-y-1",children:e.recommendedActions.map((e,a)=>t.jsxs("li",{className:"flex items-center space-x-1",children:[t.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),t.jsx("span",{children:e})]},a))})]})]})]})},a))})]})]})};export{N as default};
