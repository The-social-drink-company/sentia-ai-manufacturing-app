# BMAD Auto-Update Agent - Workflow Integration

**Project**: Sentia Manufacturing AI Dashboard
**BMAD Version**: 6.0.0-alpha.0
**Agent Version**: 1.0.0
**Created**: 2025-10-21

---

## Overview

The BMAD Auto-Update Agent is now integrated into your project's BMAD-METHOD workflow, providing autonomous framework updates while preserving 100% of your project work.

---

## Integration Points

### 1. Daily Workflow Integration

The agent runs daily at 3:00 AM and integrates with your existing BMAD workflow:

**Before Update**:
- Checks for new BMAD v6-alpha commits
- Creates timestamped backup
- Logs action to `logs/bmad-updates/`

**During Update**:
- Updates framework files only (bmad/core/, bmad/bmm/)
- Preserves ALL project files:
  - âœ… bmad/epics/ (14 files)
  - âœ… bmad/stories/ (59 files)
  - âœ… bmad/retrospectives/ (38 files)
  - âœ… bmad/planning/ (3 files)
  - âœ… bmad/solutioning/ (2 files)
  - âœ… bmad/status/ (4 files)
  - âœ… bmad/progress/ (2 files)
  - âœ… bmad/reports/ (3 files)
  - âœ… bmad/audit/ (16 files)
  - âœ… bmad/guides/ (project guides)
  - âœ… bmad/context/ (project context)

**After Update**:
- Validates update success
- Creates git commit (automatic)
- Generates update report in bmad/status/
- Updates bmad/config.yaml with new version

### 2. BMAD Status Integration

Update reports are automatically saved to:
```
bmad/status/auto-update-YYYY-MM-DD.md
```

These reports follow BMAD status report format and include:
- Update status
- Version changes
- Actions taken
- Full execution log

### 3. Git Integration

When updates occur, automatic commits are created with BMAD-style messages:

```
chore: Auto-update BMAD-METHOD to v6-alpha (abc1234)

Autonomous update performed by bmad-auto-update agent.

Changes:
- Updated framework files (core, BMM module)
- Preserved all project files (epics, stories, retrospectives)
- Updated version tracking

ðŸ¤– Generated by BMAD Auto-Update Agent

Co-Authored-By: Claude <noreply@anthropic.com>
```

---

## Preserved Project Files (100% Guarantee)

### Project Directories (Always Preserved)
```
bmad/
â”œâ”€â”€ epics/            âœ… 14 files preserved
â”œâ”€â”€ stories/          âœ… 59 files preserved
â”œâ”€â”€ retrospectives/   âœ… 38 files preserved
â”œâ”€â”€ planning/         âœ… 3 files preserved
â”œâ”€â”€ solutioning/      âœ… 2 files preserved
â”œâ”€â”€ status/           âœ… 4 files preserved
â”œâ”€â”€ progress/         âœ… 2 files preserved
â”œâ”€â”€ reports/          âœ… 3 files preserved
â”œâ”€â”€ audit/            âœ… 16 files preserved
â”œâ”€â”€ guides/           âœ… All preserved
â””â”€â”€ context/          âœ… All preserved
```

### Configuration Files (Always Preserved)
```
bmad/config.yaml                 âœ… Master configuration
bmad/core/core-config.yaml       âœ… Project-specific settings
bmad/bmm/config.yaml             âœ… BMM module configuration
```

### Framework Files (Updated)
```
bmad/core/                       ðŸ”„ Updated from v6-alpha
bmad/bmm/                        ðŸ”„ Updated from v6-alpha
bmad/_cfg/                       ðŸ”„ Updated (preserves customizations)
bmad/docs/                       ðŸ”„ Updated documentation
```

---

## BMAD Workflow Commands

### Check Update Status

```bash
# View latest update report
cat bmad/status/$(ls -t bmad/status/auto-update-* | head -1)

# View update logs
cat logs/bmad-updates/$(ls -t logs/bmad-updates/ | head -1)

# Check git commits
git log --oneline --grep="Auto-update BMAD" -5
```

### Manual Update Trigger

```bash
# Dry-run test
node scripts/bmad-auto-update.cjs --dry-run

# Force update now
node scripts/bmad-auto-update.cjs --force

# Update without commit
node scripts/bmad-auto-update.cjs --no-commit
```

### Integration with BMAD Agents

The agent respects BMAD-METHOD workflow:

**PM Agent** (`bmad pm`):
- Can review update reports
- Plan epics considering new framework features

**SM Agent** (`bmad sm`):
- Reviews update retrospectives
- Creates stories for new framework features

**DEV Agent** (`bmad dev`):
- Works with updated framework
- All project context preserved

**Analyst Agent** (`bmad analyst`):
- Analyzes update patterns
- Reports on framework evolution

---

## Configuration for Your Project

### Current Settings

From `scripts/bmad-update-config.json`:

```yaml
Project: Sentia Manufacturing AI Dashboard
BMAD Version: 6.0.0-alpha.0
Modules: Core + BMM
IDE: claude-code

Update Schedule: Daily at 03:00
Auto-Commit: Enabled
Backup Retention: 5
```

### Project-Specific Preservation

Your project has 141 files across 9 directories that are **always preserved**:

| Directory | Files | Status |
|-----------|-------|--------|
| epics | 14 | âœ… Preserved |
| stories | 59 | âœ… Preserved |
| retrospectives | 38 | âœ… Preserved |
| planning | 3 | âœ… Preserved |
| solutioning | 2 | âœ… Preserved |
| status | 4 | âœ… Preserved |
| progress | 2 | âœ… Preserved |
| reports | 3 | âœ… Preserved |
| audit | 16 | âœ… Preserved |

---

## Safety Mechanisms

### 1. Automatic Backup

Before every update:
```
bmad-backups/bmad-backup-YYYY-MM-DD-TIMESTAMP/
```

Keeps last 5 backups (configurable).

### 2. Validation

After update, validates:
- âœ… Critical files exist
- âœ… Project files intact
- âœ… Configuration valid
- âœ… Git repository clean

### 3. Automatic Rollback

If validation fails:
- Automatically restores from backup
- Logs error
- No changes committed

### 4. Git Safety

Only commits if:
- Update successful
- Validation passed
- No merge conflicts
- Auto-commit enabled

---

## Monitoring & Maintenance

### Daily Checks (Automatic)

The agent performs these checks daily:
1. Query GitHub for v6-alpha updates
2. Compare with local version
3. Only update if changes detected

### Manual Monitoring

```bash
# Check scheduled task status
Get-ScheduledTask -TaskName "BMAD-Auto-Update-Daily"

# View last 5 update logs
ls -lt logs/bmad-updates/ | head -6

# View update reports
ls -lt bmad/status/auto-update-* | head -5

# Check backups
ls -lt bmad-backups/ | head -6
```

### Weekly Maintenance

- Review update reports in bmad/status/
- Check backup disk space
- Verify git commits look correct
- Review logs for any errors

---

## Troubleshooting

### Update Not Running

**Check**:
```powershell
Get-ScheduledTask -TaskName "BMAD-Auto-Update-Daily"
```

**Fix**:
```powershell
powershell -ExecutionPolicy Bypass -File scripts/setup-task-scheduler.ps1
```

### Project Files Missing

**This should never happen** due to automatic rollback.

**If it does**:
```bash
# Restore from backup
rm -rf bmad
cp -r bmad-backups/$(ls -t bmad-backups/ | head -1) bmad

# Verify restoration
ls bmad/epics/ bmad/stories/ bmad/retrospectives/
```

### Disable Auto-Updates

**Temporary**:
```powershell
Disable-ScheduledTask -TaskName "BMAD-Auto-Update-Daily"
```

**Permanent**:
```json
// Edit scripts/bmad-update-config.json
{
  "enabled": false
}
```

---

## Best Practices

### 1. Let It Run Automatically

The agent is designed to run unattended. Trust the process:
- âœ… Checks for updates daily
- âœ… Only updates if necessary
- âœ… Preserves all project work
- âœ… Creates automatic backups
- âœ… Rolls back on failure

### 2. Review Update Reports

Check `bmad/status/auto-update-*.md` periodically to:
- Understand what changed
- Verify updates successful
- Learn about new features

### 3. Keep Backups Clean

Backups auto-cleanup after 5 (keeps last 5). Adjust if needed:
```json
"backupRetention": 10  // Keep last 10
```

### 4. Monitor Logs

If issues occur, logs provide full details:
```bash
cat logs/bmad-updates/$(ls -t logs/bmad-updates/ | head -1)
```

---

## Integration with BMAD Development

### Using Updated Framework

After automatic update, framework changes are available immediately:

```bash
# New agents automatically available
bmad pm plan-project

# Updated workflows accessible
bmad sm create-story

# Enhanced features ready
bmad dev dev-story
```

### Creating Stories for Framework Changes

When major framework updates occur, consider:

```bash
# Create story to adopt new features
bmad sm create-story

# Topic: "Adopt BMAD v6-alpha new workflow features"
# Description: "Integrate newly added framework capabilities"
```

### Documenting Framework Evolution

Update reports automatically track:
- Framework version changes
- Update frequency
- Feature additions

Review these in retrospectives to understand framework evolution.

---

## Support & Resources

### Project Documentation
- [Auto-Update Documentation](../docs/BMAD-AUTO-UPDATE.md)
- [CLAUDE.md](../CLAUDE.md) - Development guidelines
- [BMAD Implementation Plan](../BMAD-METHOD-V6A-IMPLEMENTATION.md)

### BMAD Resources
- [BMAD-METHOD Repository](https://github.com/bmad-code-org/BMAD-METHOD)
- [v6-Alpha Branch](https://github.com/bmad-code-org/BMAD-METHOD/tree/v6-alpha)
- [BMAD Discord](https://discord.gg/gk8jAdXWmj)

### Logs & Reports
- Update Logs: `logs/bmad-updates/`
- Status Reports: `bmad/status/auto-update-*.md`
- Backups: `bmad-backups/`
- Git History: `git log --grep="Auto-update BMAD"`

---

## Summary

The BMAD Auto-Update Agent seamlessly integrates with your BMAD-METHOD workflow:

âœ… **Autonomous**: Runs daily without intervention
âœ… **Safe**: Always backs up, preserves project files
âœ… **Integrated**: Works with BMAD agents and workflows
âœ… **Transparent**: Full logging and reporting
âœ… **Reliable**: Automatic rollback on failure

Your 141 project files across 9 directories are **always preserved** while keeping the framework up-to-date with the latest v6-alpha features.

---

**Integration Complete**: 2025-10-21
**Status**: Active and Monitoring
**Next Review**: Check `bmad/status/auto-update-*.md` after first scheduled run
