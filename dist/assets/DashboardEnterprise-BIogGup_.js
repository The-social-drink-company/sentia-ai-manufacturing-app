const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/RegionalContributionChart-Cns9MYEb.js","assets/vendor-C1LNgw1J.js","assets/charts-1s3mMhcR.js","assets/PLAnalysisChart-DBCIGQA7.js","assets/ProductSalesChart-Cso4rRVU.js","assets/StockLevelsWidget-DxKV29L8.js","assets/index-DoaTGdTH.js","assets/data-layer-rESbPKUZ.js","assets/radix-CSh4aNe1.js","assets/router-BEPb3H3e.js","assets/index-BGMQsuhu.css","assets/stockLevelsApi-DIq5uP6J.js","assets/QuickActions-bNEs_6Ip.js"])))=>i.map(i=>d[i]);
import{r,ab as e,b1 as v}from"./vendor-C1LNgw1J.js";import{B as W,C as x,a as f,b as g,c as j,d as y}from"./index-DoaTGdTH.js";class J{constructor(){this.baseURL="/api",this.defaultHeaders={"Content-Type":"application/json",Accept:"application/json"}}async request(s,t={}){const i=`${this.baseURL}${s}`,o={headers:{...this.defaultHeaders,...t.headers},...t};try{const n=await fetch(i,o);if(!n.ok)throw new Error(`API Error: ${n.status} ${n.statusText}`);const h=n.headers.get("content-type");return h&&h.includes("application/json")?await n.json():await n.text()}catch(n){throw console.error(`[APIClient] Request failed for ${s}:`,n),n}}async get(s,t={}){const i=s.startsWith("/api")?s:`${this.baseURL}${s}`,o=new URL(i,window.location.origin);return Object.keys(t).forEach(n=>{t[n]!==void 0&&t[n]!==null&&o.searchParams.append(n,t[n])}),this.request(o.pathname+o.search,{method:"GET"})}async post(s,t={}){return this.request(s,{method:"POST",body:JSON.stringify(t)})}async put(s,t={}){return this.request(s,{method:"PUT",body:JSON.stringify(t)})}async delete(s){return this.request(s,{method:"DELETE"})}async health(){return this.get("/health")}async status(){return this.get("/status")}}const m=new J,F={async getPLAnalysis(l={}){return(await m.get("/api/financial/pl-analysis",{params:l})).data},async getPLSummary(l="year"){return(await m.get("/api/financial/pl-summary",{params:{period:l}})).data},async getKPISummary(){return(await m.get("/api/financial/kpi-summary")).data}},G={async getProductSalesData(l="year"){return(await m.get("/api/sales/product-performance",{params:{period:l}})).data},async getProductSalesSummary(l="year"){return(await m.get("/api/sales/product-summary",{params:{period:l}})).data},async getTopProducts(l=5){return(await m.get("/api/sales/top-products",{params:{limit:l}})).data}};class V{async getRegionalPerformance(){try{return{success:!0,data:(await m.get("/regional/performance")).data}}catch(s){throw console.error("Failed to fetch regional performance data:",s),s}}async getRegionalMetrics(s){try{return{success:!0,data:(await m.get(`/regional/performance/${s}`)).data}}catch(t){throw console.error(`Failed to fetch metrics for region ${s}:`,t),t}}}const Y=new V,Q=()=>"http://localhost:5000/api",X=Q(),O=3,Z=1e3;class U extends Error{constructor(s,t,i){super(s),this.name="ApiError",this.status=t,this.data=i}}class ee{constructor(){this.baseURL=X,this.defaultHeaders={"Content-Type":"application/json"}}async request(s,t={}){const i=`${this.baseURL}${s}`,o={...t,headers:{...this.defaultHeaders,...t.headers}},n=this.getAuthToken();n&&(o.headers.Authorization=`Bearer ${n}`);let h;for(let p=0;p<O;p++)try{const d=await fetch(i,o);if(!d.ok){const N=await d.json().catch(()=>({}));throw new U(N.message||`HTTP ${d.status}`,d.status,N)}return await d.json()}catch(d){if(h=d,d instanceof U&&d.status>=400&&d.status<500)throw d;p<O-1&&await this.sleep(Z*Math.pow(2,p))}throw h}async get(s,t={}){const i=new URLSearchParams(t).toString(),o=i?`${s}?${i}`:s;return this.request(o,{method:"GET"})}async post(s,t={}){return this.request(s,{method:"POST",body:JSON.stringify(t)})}async put(s,t={}){return this.request(s,{method:"PUT",body:JSON.stringify(t)})}async patch(s,t={}){return this.request(s,{method:"PATCH",body:JSON.stringify(t)})}async delete(s){return this.request(s,{method:"DELETE"})}getAuthToken(){var t,i;const s=(i=(t=window.Clerk)==null?void 0:t.session)==null?void 0:i.getToken();return s||localStorage.getItem("authToken")}sleep(s){return new Promise(t=>setTimeout(t,s))}}const b=new ee;class se{async getWorkingCapital(s){return b.get("/financial/working-capital",s?{period:s}:{})}async getCashFlow(){return b.get("/financial/cash-flow")}async getFinancialMetrics(){return b.get("/financial/metrics")}async getDashboardSummary(){return b.get("/dashboard/summary")}async getMcpStatus(){return b.get("/mcp/status")}async requestAiInsights(s){return b.post("/ai/insights",s)}async getWorkingCapitalSummary(s){return b.get("/financial/working-capital-summary",s)}}const te=new se,ae=r.lazy(()=>v(()=>import("./RegionalContributionChart-Cns9MYEb.js"),__vite__mapDeps([0,1,2]))),re=r.lazy(()=>v(()=>import("./PLAnalysisChart-DBCIGQA7.js"),__vite__mapDeps([3,1,2]))),ne=r.lazy(()=>v(()=>import("./ProductSalesChart-Cso4rRVU.js"),__vite__mapDeps([4,1,2]))),le=r.lazy(()=>v(()=>import("./StockLevelsWidget-DxKV29L8.js"),__vite__mapDeps([5,1,6,7,8,9,10,11]))),ie=r.lazy(()=>v(()=>import("./QuickActions-bNEs_6Ip.js"),__vite__mapDeps([12,1,6,7,8,9,10,11]))),ce=()=>{const[l,s]=r.useState([]),[t,i]=r.useState(!0),[o,n]=r.useState(null),[h,p]=r.useState([]),[d,N]=r.useState(!0),[P,S]=r.useState(null),[M,L]=r.useState([]),[z,A]=r.useState(!0),[k,C]=r.useState(null),[w,_]=r.useState([]),[B,R]=r.useState(!0),[D,T]=r.useState(null),[E,I]=r.useState([]),[H,$]=r.useState(!0),[K,q]=r.useState(null);return r.useEffect(()=>{(async()=>{try{i(!0),n(null);const a=await F.getPLAnalysis();if(a.success)s(a.data);else throw new Error("Failed to fetch P&L data")}catch(a){console.error("Error fetching P&L data:",a),n(a.message),s([])}finally{i(!1)}})()},[]),r.useEffect(()=>{(async()=>{try{N(!0),S(null);const a=await F.getKPISummary();if(a.success&&a.data){const u=a.data;p([{label:"Annual revenue",value:u.annualRevenue.value,helper:u.annualRevenue.helper},{label:"Units sold",value:u.unitsSold.value,helper:u.unitsSold.helper},{label:"Gross margin",value:u.grossMargin.value,helper:u.grossMargin.helper}])}else throw new Error("Failed to fetch KPI data")}catch(a){console.error("Error fetching KPI data:",a),S(a.message),p([])}finally{N(!1)}})()},[]),r.useEffect(()=>{(async()=>{try{A(!0),C(null);const a=await G.getProductSalesData();if(a.success)L(a.data);else throw new Error("Failed to fetch product sales data")}catch(a){console.error("Error fetching product sales data:",a),C(a.message),L([])}finally{A(!1)}})()},[]),r.useEffect(()=>{(async()=>{try{R(!0),T(null);const a=await Y.getRegionalPerformance();if(a.success)_(a.data);else throw new Error("Failed to fetch regional performance data")}catch(a){console.error("Error fetching regional data:",a),T(a.message),_([])}finally{R(!1)}})()},[]),r.useEffect(()=>{(async()=>{try{$(!0),q(null);const a=await te.getWorkingCapitalSummary();if(a.success&&a.data){const u=a.data;I([{label:"Global working capital",value:u.totalWorkingCapital||"$0",helper:"Across all subsidiaries"},{label:"Cash coverage",value:u.cashCoverage||"0 days",helper:"Including credit facilities"},{label:"Intercompany exposure",value:u.intercompanyExposure||"$0",helper:"Pending settlements"},{label:"FX sensitivity",value:u.fxSensitivity||"$0",helper:"Â±1% USD/EUR/JPY"}])}else throw new Error("Failed to fetch capital KPIs")}catch(a){console.error("Error fetching capital KPIs:",a),q(a.message),I([])}finally{$(!1)}})()},[]),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold tracking-tight",children:"Enterprise dashboard"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Consolidated liquidity and performance outlook across all regions."})]}),e.jsx(W,{variant:"outline",children:"Global view"})]}),e.jsxs(x,{children:[e.jsxs(f,{children:[e.jsx(g,{children:"Capital position"}),e.jsx(j,{children:"Key metrics reviewed in the weekly treasury meeting."})]}),e.jsx(y,{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:H?Array.from({length:4}).map((c,a)=>e.jsxs("div",{className:"rounded-lg border border-border bg-muted/30 p-4",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded mb-2 animate-pulse"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded mb-2 animate-pulse"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded animate-pulse"})]},a)):K?e.jsx("div",{className:"col-span-full flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-destructive mb-2",children:"Failed to load capital metrics"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:K})]})}):!E||E.length===0?e.jsx("div",{className:"col-span-full flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"No capital metrics available"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Check API configuration"})]})}):(E||[]).map(c=>e.jsxs("div",{className:"rounded-lg border border-border bg-muted/30 p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:c.label}),e.jsx("p",{className:"text-lg font-semibold text-foreground",children:c.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:c.helper})]},c.label))})]}),e.jsxs(x,{children:[e.jsxs(f,{children:[e.jsx(g,{children:"Performance metrics"}),e.jsx(j,{children:"Key business performance indicators tracked for operational excellence."})]}),e.jsx(y,{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:d?Array.from({length:3}).map((c,a)=>e.jsxs("div",{className:"rounded-lg border border-border bg-muted/30 p-4",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded mb-2 animate-pulse"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded mb-2 animate-pulse"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded animate-pulse"})]},a)):P?e.jsx("div",{className:"col-span-full flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-destructive mb-2",children:"Failed to load performance metrics"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:P})]})}):!h||h.length===0?e.jsx("div",{className:"col-span-full flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"No performance metrics available"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Check API configuration"})]})}):(h||[]).map(c=>e.jsxs("div",{className:"rounded-lg border border-border bg-muted/30 p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:c.label}),e.jsx("p",{className:"text-lg font-semibold text-foreground",children:c.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:c.helper})]},c.label))})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs(x,{children:[e.jsxs(f,{children:[e.jsx(g,{children:"Product Sales Performance"}),e.jsx(j,{children:"Revenue by product line"})]}),e.jsx(y,{className:"h-64",children:z?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]})}):k?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-destructive mb-2",children:"Failed to load product sales data"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:k})]})}):e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"flex h-full items-center justify-center",children:"Loading chart..."}),children:e.jsx(ne,{data:M})})})]}),e.jsxs(x,{children:[e.jsxs(f,{children:[e.jsx(g,{children:"P&L Analysis"}),e.jsx(j,{children:"Monthly profit and loss trends"})]}),e.jsx(y,{className:"h-64",children:t?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]})}):o?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-destructive mb-2",children:"Failed to load P&L data"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:o})]})}):e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"flex h-full items-center justify-center",children:"Loading chart..."}),children:e.jsx(re,{data:l})})})]}),e.jsxs(x,{children:[e.jsxs(f,{children:[e.jsx(g,{children:"Regional Contribution"}),e.jsx(j,{children:"Revenue and EBITDA by region"})]}),e.jsx(y,{className:"h-64",children:B?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]})}):D?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-destructive mb-2",children:"Failed to load regional data"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:D})]})}):!w||w.length===0?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"No regional data available"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Check API configuration"})]})}):e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"flex h-full items-center justify-center",children:"Loading chart..."}),children:e.jsx(ae,{data:w})})})]})]}),e.jsx(r.Suspense,{fallback:e.jsxs(x,{children:[e.jsxs(f,{children:[e.jsx(g,{children:"Current Stock Levels"}),e.jsx(j,{children:"Loading inventory data..."})]}),e.jsx(y,{className:"h-64",children:e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent"})})})]}),children:e.jsx(le,{})}),e.jsx(r.Suspense,{fallback:e.jsxs(x,{className:"mt-8",children:[e.jsxs(f,{children:[e.jsx(g,{children:"Quick Actions"}),e.jsx(j,{children:"Loading quick actions..."})]}),e.jsx(y,{className:"h-32",children:e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent"})})})]}),children:e.jsx(ie,{})})]})},ue=Object.freeze(Object.defineProperty({__proto__:null,default:ce},Symbol.toStringTag,{value:"Module"}));export{ue as D,G as a,m as b,F as p};
