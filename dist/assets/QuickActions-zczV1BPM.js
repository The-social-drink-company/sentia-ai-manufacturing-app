import{ab as r,aG as I,b2 as _,ar as K,b4 as D,aY as O,b5 as H,b6 as g,b7 as G,b8 as Y,r as y,b9 as B,ba as U,bb as z,bc as q,bd as J,be as Q,bf as N,bg as V,bh as X,aJ as Z}from"./vendor-CUZU9yWq.js";import{e as m,C as j,a as w,b as S,c as k,d as F,f as p}from"./index-DgIGSApT.js";import{i as W,j as ee,k as te,l as ae,D as se,m as re,O as oe,n as ne,o as ie,p as le,q as ce,r as de,s as ue,t as me,u as xe}from"./radix-B2sbv38h.js";import{p as P,a as ge}from"./DashboardEnterprise-CsB9lit6.js";import{s as he}from"./stockLevelsApi-DkNBQIhj.js";import"./data-layer-Dk4PQe5w.js";import"./router-De_D0Hn1.js";function pe({...e}){return r.jsx(W,{"data-slot":"dialog",...e})}function be({...e}){return r.jsx(re,{"data-slot":"dialog-portal",...e})}function ve({className:e,...a}){return r.jsx(oe,{"data-slot":"dialog-overlay",className:m("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...a})}function ye({className:e,children:a,...t}){return r.jsxs(be,{"data-slot":"dialog-portal",children:[r.jsx(ve,{}),r.jsxs(ee,{"data-slot":"dialog-content",className:m("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t,children:[a,r.jsxs(te,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[r.jsx(I,{}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function fe({className:e,...a}){return r.jsx("div",{"data-slot":"dialog-header",className:m("flex flex-col gap-2 text-center sm:text-left",e),...a})}function je({className:e,...a}){return r.jsx(ae,{"data-slot":"dialog-title",className:m("text-lg leading-none font-semibold",e),...a})}function we({className:e,...a}){return r.jsx(se,{"data-slot":"dialog-description",className:m("text-muted-foreground text-sm",e),...a})}function Se({className:e,...a}){return r.jsx(ne,{"data-slot":"checkbox",className:m("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...a,children:r.jsx(ie,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:r.jsx(_,{className:"size-3.5"})})})}function ke({className:e,...a}){return r.jsx(le,{"data-slot":"label",className:m("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}function Fe({className:e,orientation:a="horizontal",decorative:t=!0,...s}){return r.jsx(ce,{"data-slot":"separator-root",decorative:t,orientation:a,className:m("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...s})}const R=K("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Ce({className:e,classNames:a,showOutsideDays:t=!0,...s}){return r.jsx(D,{showOutsideDays:t,className:m("p-3",e),classNames:{months:"flex flex-col sm:flex-row gap-2",month:"flex flex-col gap-4",caption:"flex justify-center pt-1 relative items-center w-full",caption_label:"text-sm font-medium",nav:"flex items-center gap-1",nav_button:m(R({variant:"outline"}),"size-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-x-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:m("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-range-end)]:rounded-r-md",s.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:m(R({variant:"ghost"}),"size-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start aria-selected:bg-primary aria-selected:text-primary-foreground",day_range_end:"day-range-end aria-selected:bg-primary aria-selected:text-primary-foreground",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:({className:n,...i})=>r.jsx(H,{className:m("size-4",n),...i}),IconRight:({className:n,...i})=>r.jsx(O,{className:m("size-4",n),...i})},...s})}function Ne({...e}){return r.jsx(de,{"data-slot":"popover",...e})}function Pe({...e}){return r.jsx(ue,{"data-slot":"popover-trigger",...e})}function Me({className:e,align:a="center",sideOffset:t=4,...s}){return r.jsx(me,{children:r.jsx(xe,{"data-slot":"popover-content",align:a,sideOffset:t,className:m("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...s})})}const A=[{label:"Global working capital",value:"$9.2M",helper:"Across all subsidiaries"},{label:"Cash coverage",value:"214 days",helper:"Including credit facilities"},{label:"Intercompany exposure",value:"$1.1M",helper:"Pending settlements"},{label:"FX sensitivity",value:"$380K",helper:"±1% USD/EUR/JPY"}],E=[{region:"UK",revenue:42e5,ebitda:98e4},{region:"US",revenue:385e4,ebitda:82e4},{region:"EU",revenue:615e4,ebitda:114e4}],ze=async(e,a)=>{const t={metadata:{title:"Sentia Manufacturing Dashboard Report",generatedAt:new Date().toISOString(),reportPeriod:{from:a.from,to:a.to,formatted:`${g(a.from,"MMMM d, yyyy")} - ${g(a.to,"MMMM d, yyyy")}`},sections:e},sections:{}};try{if(e.capitalKpis&&(t.sections.capitalKpis={title:"Capital Position",description:"Key metrics reviewed in the weekly treasury meeting",data:A,summary:Re(A)}),e.performanceKpis){const s=await P.getKPISummary();t.sections.performanceKpis={title:"Performance Metrics",description:"Key business performance indicators tracked for operational excellence",data:s.success?[{label:"Annual revenue",value:s.data.annualRevenue.value,helper:s.data.annualRevenue.helper},{label:"Units sold",value:s.data.unitsSold.value,helper:s.data.unitsSold.helper},{label:"Gross margin",value:s.data.grossMargin.value,helper:s.data.grossMargin.helper}]:[],summary:Ae(s.data)}}if(e.plAnalysis){const s=await P.getPLAnalysis(),n=await P.getPLSummary("year");t.sections.plAnalysis={title:"P&L Analysis",description:"Monthly profit and loss trends",data:s.success?s.data:[],summary:n.success?n.data:null,chartData:s.success?s.data:[]}}if(e.regionalContribution&&(t.sections.regionalContribution={title:"Regional Performance",description:"Revenue and EBITDA by region",data:E,summary:Ee(E)}),e.stockLevels)try{const s=await he.getStockLevels();t.sections.stockLevels={title:"Current Stock Levels",description:"Inventory status and stock levels",data:s.success?s.data:[],summary:$e(s.data)}}catch(s){console.error("Error fetching stock levels:",s),t.sections.stockLevels={title:"Current Stock Levels",description:"Inventory status and stock levels",data:[],summary:{status:"Data unavailable",message:"Stock levels could not be retrieved"}}}if(e.productSales){const s=await ge.getProductSalesData();t.sections.productSales={title:"Product Sales Performance",description:"Revenue by product line",data:s.success?s.data:[],summary:Le(s.data)}}t.executiveSummary=Te(t.sections,a)}catch(s){throw console.error("Error generating report:",s),new Error(`Failed to generate report: ${s.message}`)}return t},Re=e=>{const a=e.find(s=>s.label.includes("working capital")),t=e.find(s=>s.label.includes("Cash coverage"));return{workingCapital:(a==null?void 0:a.value)||"N/A",cashCoverage:(t==null?void 0:t.value)||"N/A",status:"Strong liquidity position maintained",keyInsight:"Global working capital remains healthy with adequate cash coverage"}},Ae=e=>{var a,t,s;return e?{revenue:((a=e.annualRevenue)==null?void 0:a.value)||"N/A",units:((t=e.unitsSold)==null?void 0:t.value)||"N/A",margin:((s=e.grossMargin)==null?void 0:s.value)||"N/A",status:"Performance targets on track",keyInsight:"Strong revenue growth with healthy margin maintenance"}:{status:"Data unavailable"}},Ee=e=>{const a=e.reduce((i,o)=>i+o.revenue,0),t=e.reduce((i,o)=>i+o.ebitda,0),s=t/a*100,n=e.reduce((i,o)=>i.revenue>o.revenue?i:o);return{totalRevenue:`$${(a/1e6).toFixed(1)}M`,totalEbitda:`$${(t/1e6).toFixed(1)}M`,avgEbitdaMargin:`${s.toFixed(1)}%`,topRegion:n.region,status:"Balanced regional performance",keyInsight:`${n.region} leads revenue generation with strong EBITDA margins`}},$e=e=>{if(!e||!Array.isArray(e))return{status:"Data unavailable",message:"Stock level data not accessible"};const a=e.filter(s=>s.status==="Low"||s.level<20),t=e.filter(s=>s.status==="Optimal"||s.level>=20&&s.level<=80);return{totalItems:e.length,lowStockCount:a.length,optimalStockCount:t.length,status:a.length>0?"Attention required":"Stock levels healthy",keyInsight:a.length>0?`${a.length} items require restocking attention`:"All inventory levels within optimal ranges"}},Le=e=>{if(!e||!Array.isArray(e))return{status:"Data unavailable",message:"Product sales data not accessible"};const a=e.reduce((s,n)=>s+(n.sales||n.revenue||0),0),t=e.reduce((s,n)=>(s.sales||s.revenue||0)>(n.sales||n.revenue||0)?s:n);return{totalSales:`$${(a/1e6).toFixed(1)}M`,topProduct:t.name||t.product||"N/A",productCount:e.length,status:"Product performance tracked",keyInsight:`${t.name||t.product} leads product sales performance`}},Te=(e,a)=>{const t=[];let s="Operational";return e.capitalKpis&&t.push("Strong capital position maintained with healthy working capital levels"),e.performanceKpis&&t.push("Key performance indicators showing positive trends across revenue and margin metrics"),e.plAnalysis&&t.push("P&L analysis reveals consistent profitability trends with seasonal variations"),e.regionalContribution&&t.push("Regional performance balanced across all markets with EU leading revenue contribution"),e.stockLevels&&t.push("Inventory management requires attention for optimal stock level maintenance"),e.productSales&&t.push("Product sales performance tracking enables informed strategic decisions"),{status:s,reportPeriod:g(a.from,"MMMM yyyy"),keyInsights:t,recommendation:"Continue monitoring key metrics while focusing on inventory optimization and regional growth opportunities",dataQuality:"High - All critical systems operational and providing real-time data"}},Ie=async e=>{try{const a=new G("p","mm","a4"),t=a.internal.pageSize.getWidth(),s=a.internal.pageSize.getHeight(),n=20,i=t-n*2;let o=n;C(a,t,n),o+=30,a.setFontSize(24),a.setFont(void 0,"bold"),a.text("Manufacturing Dashboard Report",n,o),o+=15,a.setFontSize(12),a.setFont(void 0,"normal"),a.setTextColor(100,100,100),a.text(`Generated: ${g(new Date,"MMMM d, yyyy 'at' h:mm a")}`,n,o),o+=8,a.text(`Report Period: ${e.metadata.reportPeriod.formatted}`,n,o),o+=20,e.executiveSummary&&(o=_e(a,e.executiveSummary,n,o,i,s));for(const[,u]of Object.entries(e.sections))o>s-50&&(a.addPage(),C(a,t,n),o=n+30),o=Ke(a,u,n,o,i,s),o+=15;Be(a,t,s,n);const c=`Sentia_Manufacturing_Report_${g(new Date,"yyyy-MM-dd_HH-mm")}.pdf`;return a.save(c),{success:!0,filename:c}}catch(a){throw console.error("Error generating PDF:",a),new Error(`Failed to generate PDF: ${a.message}`)}},C=(e,a,t)=>{e.setFillColor(59,130,246),e.roundedRect(t,t,30,15,2,2,"F"),e.setFontSize(14),e.setFont(void 0,"bold"),e.setTextColor(255,255,255),e.text("S",t+12,t+10),e.setFontSize(16),e.setFont(void 0,"bold"),e.setTextColor(0,0,0),e.text("Sentia Manufacturing",t+35,t+8),e.setFontSize(12),e.setFont(void 0,"normal"),e.setTextColor(100,100,100),e.text("Enterprise Manufacturing Intelligence",t+35,t+16),e.setDrawColor(200,200,200),e.line(t,t+25,a-t,t+25)},_e=(e,a,t,s,n,i)=>{let o=s;return e.setFontSize(18),e.setFont(void 0,"bold"),e.setTextColor(0,0,0),e.text("Executive Summary",t,o),o+=12,e.setFontSize(12),e.setFont(void 0,"bold"),e.text("Status:",t,o),e.setFont(void 0,"normal"),e.text(a.status,t+20,o),o+=10,e.setFont(void 0,"bold"),e.text("Period:",t,o),e.setFont(void 0,"normal"),e.text(a.reportPeriod,t+20,o),o+=15,a.keyInsights&&a.keyInsights.length>0&&(e.setFont(void 0,"bold"),e.text("Key Insights:",t,o),o+=8,e.setFont(void 0,"normal"),a.keyInsights.forEach((d,c)=>{e.splitTextToSize(`• ${d}`,n-10).forEach(h=>{o>i-30&&(e.addPage(),C(e,e.internal.pageSize.getWidth(),t),o=t+40),e.text(h,t+5,o),o+=6}),o+=2})),a.recommendation&&(o+=5,e.setFont(void 0,"bold"),e.text("Recommendation:",t,o),o+=8,e.setFont(void 0,"normal"),e.splitTextToSize(a.recommendation,n).forEach(c=>{o>i-30&&(e.addPage(),C(e,e.internal.pageSize.getWidth(),t),o=t+40),e.text(c,t,o),o+=6})),o+20},Ke=(e,a,t,s,n,i)=>{let o=s;return e.setFontSize(16),e.setFont(void 0,"bold"),e.setTextColor(0,0,0),e.text(a.title,t,o),o+=10,a.description&&(e.setFontSize(11),e.setFont(void 0,"normal"),e.setTextColor(100,100,100),e.splitTextToSize(a.description,n).forEach(c=>{e.text(c,t,o),o+=6}),o+=10),a.data&&Array.isArray(a.data)&&(a.title==="Capital Position"||a.title==="Performance Metrics"?o=De(e,a.data,t,o,n):a.title==="Regional Performance"?o=Oe(e,a.data,t,o,n):a.title==="P&L Analysis"?o=He(e,a.data,t,o,n):o=Ge(e,a.data,t,o,n)),a.summary&&typeof a.summary=="object"&&(o+=10,o=Ye(e,a.summary,t,o,n)),o},De=(e,a,t,s,n)=>{let i=s;const o=12,d=15;return e.setFillColor(245,245,245),e.rect(t,i,n,d,"F"),e.setFontSize(11),e.setFont(void 0,"bold"),e.text("Metric",t+5,i+10),e.text("Value",t+n/2,i+10),e.text("Description",t+n*.75,i+10),i+=d,e.setFont(void 0,"normal"),a.forEach((c,u)=>{u%2===0&&(e.setFillColor(250,250,250),e.rect(t,i,n,o,"F")),e.text(c.label,t+5,i+8),e.setFont(void 0,"bold"),e.text(c.value,t+n/2,i+8),e.setFont(void 0,"normal");const h=e.splitTextToSize(c.helper||"",n*.23);e.text(h[0]||"",t+n*.75,i+8),i+=o}),i},Oe=(e,a,t,s,n)=>{let i=s;const o=12,d=15;return e.setFillColor(245,245,245),e.rect(t,i,n,d,"F"),e.setFontSize(11),e.setFont(void 0,"bold"),e.text("Region",t+5,i+10),e.text("Revenue",t+n/3,i+10),e.text("EBITDA",t+n*.66,i+10),i+=d,e.setFont(void 0,"normal"),a.forEach((c,u)=>{u%2===0&&(e.setFillColor(250,250,250),e.rect(t,i,n,o,"F")),e.text(c.region,t+5,i+8),e.text(`$${(c.revenue/1e6).toFixed(1)}M`,t+n/3,i+8),e.text(`$${(c.ebitda/1e6).toFixed(1)}M`,t+n*.66,i+8),i+=o}),i},He=(e,a,t,s,n)=>{let i=s;const o=10,d=12,c=a.slice(-6);return e.setFillColor(245,245,245),e.rect(t,i,n,d,"F"),e.setFontSize(10),e.setFont(void 0,"bold"),e.text("Month",t+5,i+8),e.text("Revenue",t+n*.25,i+8),e.text("Gross Profit",t+n*.5,i+8),e.text("EBITDA",t+n*.75,i+8),i+=d,e.setFont(void 0,"normal"),c.forEach((u,h)=>{h%2===0&&(e.setFillColor(250,250,250),e.rect(t,i,n,o,"F")),e.text(u.month,t+5,i+7),e.text(`$${u.revenue}K`,t+n*.25,i+7),e.text(`$${u.grossProfit}K`,t+n*.5,i+7),e.text(`$${u.ebitda}K`,t+n*.75,i+7),i+=o}),i},Ge=(e,a,t,s,n)=>{let i=s;return e.setFontSize(11),e.setFont(void 0,"normal"),a.forEach(o=>{const d=typeof o=="object"?JSON.stringify(o):String(o);e.splitTextToSize(`• ${d}`,n).forEach(u=>{e.text(u,t+5,i),i+=6}),i+=2}),i},Ye=(e,a,t,s,n)=>{let i=s;e.setFillColor(249,250,251),e.setDrawColor(200,200,200);const o=25;return e.roundedRect(t,i,n,o,2,2,"FD"),i+=8,e.setFontSize(10),e.setFont(void 0,"bold"),e.text("Summary:",t+5,i),i+=6,e.setFont(void 0,"normal"),a.status&&(e.text(`Status: ${a.status}`,t+5,i),i+=5),a.keyInsight&&e.splitTextToSize(a.keyInsight,n-10).forEach(c=>{e.text(c,t+5,i),i+=5}),s+o+5},Be=(e,a,t,s)=>{const n=t-15;e.setDrawColor(200,200,200),e.line(s,n-5,a-s,n-5),e.setFontSize(9),e.setTextColor(100,100,100),e.text("Sentia Manufacturing Dashboard Report",s,n);const i=e.internal.getCurrentPageInfo().pageNumber;e.text(`Page ${i}`,a-s-20,n),e.text(`Generated: ${g(new Date,"yyyy-MM-dd HH:mm")}`,a-s-70,n+5)},Ue=({open:e,onClose:a})=>{const t=Y(new Date),[s,n]=y.useState({from:U(t),to:B(t)}),[i,o]=y.useState(!1),[d,c]=y.useState(!1),[u,h]=y.useState({capitalKpis:!0,performanceKpis:!0,plAnalysis:!0,regionalContribution:!0,stockLevels:!1,productSales:!1}),v=[{id:"capitalKpis",label:"Capital Position",description:"Working capital, cash coverage, intercompany exposure",recommended:!0},{id:"performanceKpis",label:"Performance Metrics",description:"Revenue, units sold, gross margin",recommended:!0},{id:"plAnalysis",label:"P&L Analysis",description:"Monthly profit and loss trends chart",recommended:!0},{id:"regionalContribution",label:"Regional Performance",description:"Revenue and EBITDA by region",recommended:!0},{id:"stockLevels",label:"Stock Levels",description:"Current inventory status and levels",recommended:!1},{id:"productSales",label:"Product Sales",description:"Sales performance by product line",recommended:!1}],$=(l,x)=>{h(b=>({...b,[l]:x}))},M=(l=!1)=>{if(l){const x={};v.forEach(b=>{x[b.id]=b.recommended}),h(x)}else{const x={};v.forEach(b=>{x[b.id]=!0}),h(x)}},L=()=>{const l={};v.forEach(x=>{l[x.id]=!1}),h(l)},f=Object.values(u).filter(Boolean).length,T=async()=>{if(f===0){N.error("Please select at least one section for your report");return}c(!0);try{const l=await ze(u,s);await Ie(l,s),N.success("Report generated successfully!"),a()}catch(l){console.error("Error generating report:",l),N.error("Failed to generate report. Please try again.")}finally{c(!1)}};return r.jsx(pe,{open:e,onOpenChange:a,children:r.jsxs(ye,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[r.jsxs(fe,{children:[r.jsxs(je,{className:"flex items-center gap-2",children:[r.jsx(z,{className:"h-5 w-5"}),"Generate Manufacturing Report"]}),r.jsx(we,{children:"Create a customized report with your selected dashboard data and date range"})]}),r.jsxs("div",{className:"grid gap-6 py-4",children:[r.jsxs(j,{children:[r.jsxs(w,{children:[r.jsxs(S,{className:"flex items-center gap-2 text-lg",children:[r.jsx(q,{className:"h-4 w-4"}),"Report Period"]}),r.jsx(k,{children:"Select the date range for your report (defaults to last month)"})]}),r.jsx(F,{children:r.jsxs(Ne,{open:i,onOpenChange:o,children:[r.jsx(Pe,{asChild:!0,children:r.jsxs(p,{variant:"outline",className:m("w-full justify-start text-left font-normal",!s&&"text-muted-foreground"),children:[r.jsx(J,{className:"mr-2 h-4 w-4"}),s!=null&&s.from?s.to?r.jsxs(r.Fragment,{children:[g(s.from,"LLL dd, y")," -"," ",g(s.to,"LLL dd, y")]}):g(s.from,"LLL dd, y"):r.jsx("span",{children:"Pick a date range"})]})}),r.jsx(Me,{className:"w-auto p-0",align:"start",children:r.jsx(Ce,{initialFocus:!0,mode:"range",defaultMonth:s==null?void 0:s.from,selected:s,onSelect:n,numberOfMonths:2})})]})})]}),r.jsxs(j,{children:[r.jsxs(w,{children:[r.jsxs(S,{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Q,{className:"h-4 w-4"}),"Report Sections (",f," selected)"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(p,{variant:"outline",size:"sm",onClick:()=>M(!0),children:"Recommended"}),r.jsx(p,{variant:"outline",size:"sm",onClick:()=>M(!1),children:"Select All"}),r.jsx(p,{variant:"outline",size:"sm",onClick:L,children:"Clear All"})]})]}),r.jsx(k,{children:"Choose which sections to include in your report"})]}),r.jsx(F,{children:r.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:v.map(l=>r.jsx("div",{className:m("rounded-lg border p-4 transition-colors",u[l.id]?"border-blue-200 bg-blue-50":"border-gray-200 hover:border-gray-300",l.recommended&&"ring-1 ring-orange-200"),children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Se,{id:l.id,checked:u[l.id],onCheckedChange:x=>$(l.id,x),className:"mt-1"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs(ke,{htmlFor:l.id,className:"text-sm font-medium cursor-pointer flex items-center gap-2",children:[l.label,l.recommended&&r.jsx("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-0.5 rounded-full",children:"Recommended"})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:l.description})]})]})},l.id))})})]}),f>0&&r.jsxs(j,{children:[r.jsxs(w,{children:[r.jsx(S,{className:"text-lg",children:"Report Preview"}),r.jsx(k,{children:"Your report will include the following sections"})]}),r.jsx(F,{children:r.jsxs("div",{className:"text-sm space-y-2",children:[r.jsxs("p",{className:"font-medium",children:["Report Period: ",(s==null?void 0:s.from)&&g(s.from,"MMMM d, yyyy")," - ",(s==null?void 0:s.to)&&g(s.to,"MMMM d, yyyy")]}),r.jsx("p",{className:"font-medium",children:"Included Sections:"}),r.jsx("ul",{className:"list-disc list-inside space-y-1 ml-4",children:v.filter(l=>u[l.id]).map(l=>r.jsxs("li",{className:"text-muted-foreground",children:[l.label," - ",l.description]},l.id))})]})})]})]}),r.jsx(Fe,{}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx(p,{variant:"outline",onClick:a,children:"Cancel"}),r.jsx(p,{onClick:T,disabled:f===0||d,className:"bg-blue-600 hover:bg-blue-700",children:d?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(z,{className:"w-4 h-4 mr-2"}),"Generate PDF Report"]})})]})]})})},et=()=>{const[e,a]=y.useState(!1),t=()=>{a(!0)};return r.jsxs(r.Fragment,{children:[r.jsxs(j,{className:"mt-8",children:[r.jsxs(w,{children:[r.jsxs(S,{className:"flex items-center gap-2",children:[r.jsx(V,{className:"h-5 w-5"}),"Quick Actions"]}),r.jsx(k,{children:"Generate reports and perform common dashboard operations"})]}),r.jsxs(F,{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsxs(p,{onClick:t,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white min-w-[160px]",size:"lg",children:[r.jsx(X,{className:"h-4 w-4"}),"Generate Reports"]}),r.jsxs(p,{variant:"outline",className:"flex items-center gap-2 min-w-[160px]",size:"lg",disabled:!0,children:[r.jsx(Z,{className:"h-4 w-4"}),"Export Data"]})]}),r.jsx("p",{className:"text-sm text-muted-foreground mt-4 text-center",children:"Create customizable reports with your dashboard data and export as PDF"})]})]}),r.jsx(Ue,{open:e,onClose:()=>a(!1)})]})};export{et as default};
