# Nixpacks configuration for Express.js app
providers = ["node"]

[phases.setup]
nixPkgs = ["nodejs_20"]

[phases.install]
cmds = ["npm ci --legacy-peer-deps"]

[phases.build]
cmds = ["npm run build"]

[start]
# Use startup script to check environment before starting server
cmd = "node railway-start.js"

[staticAssets]
# IMPORTANT: This disables Caddy static file server
# We're running an Express.js server, not a static site
enabled = false