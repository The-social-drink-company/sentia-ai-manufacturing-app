# Nixpacks configuration for Express.js app - NO CADDY
providers = ["node"]

[phases.setup]
nixPkgs = ["nodejs_20"]

[phases.install]
# Skip caching to avoid EBUSY errors
cmds = ["npm ci --legacy-peer-deps --cache /tmp/.npm"]

[phases.build]
# Build React frontend
cmds = ["npm run build"]

[start]
# Start Express server directly
cmd = "node server.js"