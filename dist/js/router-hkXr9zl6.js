import{r as e,R as t}from"./react-core-DuWapW7w.js";import{i as r,r as a,g as n,A as o,p as l,c as i,e as u,f as s,k as c,l as p}from"./vendor-BWEY3JH6.js";function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},d.apply(this,arguments)}const h=e.createContext(null),m=e.createContext(null),v=e.createContext(null),f=e.createContext(null),g=e.createContext({outlet:null,matches:[],isDataRoute:!1}),y=e.createContext(null);function E(){return null!=e.useContext(f)}function C(){return E()||r(!1),e.useContext(f).location}function x(t){e.useContext(v).static||e.useLayoutEffect(t)}function b(){let{isDataRoute:t}=e.useContext(g);return t?function(){let{router:t}=function(){let t=e.useContext(h);return t||r(!1),t}(F.UseNavigateStable),a=D(P.UseNavigateStable),n=e.useRef(!1);return x(()=>{n.current=!0}),e.useCallback(function(e,r){void 0===r&&(r={}),n.current&&("number"==typeof e?t.navigate(e):t.navigate(e,d({fromRouteId:a},r)))},[t,a])}():function(){E()||r(!1);let t=e.useContext(h),{basename:o,future:l,navigator:i}=e.useContext(v),{matches:u}=e.useContext(g),{pathname:c}=C(),p=JSON.stringify(n(u,l.v7_relativeSplatPath)),d=e.useRef(!1);return x(()=>{d.current=!0}),e.useCallback(function(e,r){if(void 0===r&&(r={}),!d.current)return;if("number"==typeof e)return void i.go(e);let n=a(e,JSON.parse(p),c,"path"===r.relative);null==t&&"/"!==o&&(n.pathname="/"===n.pathname?o:s([o,n.pathname])),(r.replace?i.replace:i.push)(n,r.state,r)},[o,i,p,c,t])}()}function R(t,a){return function(t,a,n,i){E()||r(!1);let{navigator:c}=e.useContext(v),{matches:p}=e.useContext(g),h=p[p.length-1],m=h?h.params:{};!h||h.pathname;let y=h?h.pathnameBase:"/";h&&h.route;let x,b=C();if(a){var R;let e="string"==typeof a?l(a):a;"/"===y||(null==(R=e.pathname)?void 0:R.startsWith(y))||r(!1),x=e}else x=b;let S=x.pathname||"/",F=S;if("/"!==y){let e=y.replace(/^\//,"").split("/");F="/"+S.replace(/^\//,"").split("/").slice(e.length).join("/")}let P=u(t,{pathname:F}),D=function(t,a,n,o){var l;void 0===a&&(a=[]);void 0===n&&(n=null);void 0===o&&(o=null);if(null==t){var i;if(!n)return null;if(n.errors)t=n.matches;else{if(!(null!=(i=o)&&i.v7_partialHydration&&0===a.length&&!n.initialized&&n.matches.length>0))return null;t=n.matches}}let u=t,s=null==(l=n)?void 0:l.errors;if(null!=s){let e=u.findIndex(e=>e.route.id&&void 0!==(null==s?void 0:s[e.route.id]));e>=0||r(!1),u=u.slice(0,Math.min(u.length,e+1))}let c=!1,p=-1;if(n&&o&&o.v7_partialHydration)for(let e=0;e<u.length;e++){let t=u[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(p=e),t.route.id){let{loaderData:e,errors:r}=n,a=t.route.loader&&void 0===e[t.route.id]&&(!r||void 0===r[t.route.id]);if(t.route.lazy||a){c=!0,u=p>=0?u.slice(0,p+1):[u[0]];break}}}return u.reduceRight((t,r,o)=>{let l,i=!1,d=null,h=null;var m;n&&(l=s&&r.route.id?s[r.route.id]:void 0,d=r.route.errorElement||U,c&&(p<0&&0===o?(N[m="route-fallback"]||(N[m]=!0),i=!0,h=null):p===o&&(i=!0,h=r.route.hydrateFallbackElement||null)));let v=a.concat(u.slice(0,o+1)),f=()=>{let a;return a=l?d:i?h:r.route.Component?e.createElement(r.route.Component,null):r.route.element?r.route.element:t,e.createElement(B,{match:r,routeContext:{outlet:t,matches:v,isDataRoute:null!=n},children:a})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===o)?e.createElement(k,{location:n.location,revalidation:n.revalidation,component:d,error:l,children:f(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):f()},null)}(P&&P.map(e=>Object.assign({},e,{params:Object.assign({},m,e.params),pathname:s([y,c.encodeLocation?c.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?y:s([y,c.encodeLocation?c.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),p,n,i);if(a&&D)return e.createElement(f.Provider,{value:{location:d({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:o.Pop}},D);return D}(t,a)}function S(){let t=function(){var t;let a=e.useContext(y),n=function(){let t=e.useContext(m);return t||r(!1),t}(),o=D();if(void 0!==a)return a;return null==(t=n.errors)?void 0:t[o]}(),a=c(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},a),n?e.createElement("pre",{style:o},n):null,null)}const U=e.createElement(S,null);class k extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){}render(){return void 0!==this.state.error?e.createElement(g.Provider,{value:this.props.routeContext},e.createElement(y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function B(t){let{routeContext:r,match:a,children:n}=t,o=e.useContext(h);return o&&o.static&&o.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=a.route.id),e.createElement(g.Provider,{value:r},n)}var F=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(F||{}),P=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(P||{});function D(t){let a=function(){let t=e.useContext(g);return t||r(!1),t}(),n=a.matches[a.matches.length-1];return n.route.id||r(!1),n.route.id}const N={};function O(t){let{to:o,replace:l,state:i,relative:u}=t;E()||r(!1);let{future:s,static:c}=e.useContext(v),{matches:p}=e.useContext(g),{pathname:d}=C(),h=b(),m=a(o,n(p,s.v7_relativeSplatPath),d,"path"===u),f=JSON.stringify(m);return e.useEffect(()=>h(JSON.parse(f),{replace:l,state:i,relative:u}),[h,f,u,l,i]),null}function _(e){r(!1)}function w(t){let{basename:a="/",children:n=null,location:u,navigationType:s=o.Pop,navigator:c,static:p=!1,future:h}=t;E()&&r(!1);let m=a.replace(/^\/*/,"/"),g=e.useMemo(()=>({basename:m,navigator:c,static:p,future:d({v7_relativeSplatPath:!1},h)}),[m,h,c,p]);"string"==typeof u&&(u=l(u));let{pathname:y="/",search:C="",hash:x="",state:b=null,key:R="default"}=u,S=e.useMemo(()=>{let e=i(y,m);return null==e?null:{location:{pathname:e,search:C,hash:x,state:b,key:R},navigationType:s}},[m,y,C,x,b,R,s]);return null==S?null:e.createElement(v.Provider,{value:g},e.createElement(f.Provider,{children:n,value:S}))}function L(e){let{children:t,location:r}=e;return R(T(t),r)}function T(t,a){void 0===a&&(a=[]);let n=[];return e.Children.forEach(t,(t,o)=>{if(!e.isValidElement(t))return;let l=[...a,o];if(t.type===e.Fragment)return void n.push.apply(n,T(t.props.children,l));t.type!==_&&r(!1),t.props.index&&t.props.children&&r(!1);let i={id:t.props.id||l.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(i.children=T(t.props.children,l)),n.push(i)}),n}new Promise(()=>{});try{window.__reactRouterVersion="6"}catch(V){}const j=t.startTransition;function I(t){let{basename:r,children:a,future:n,window:o}=t,l=e.useRef();null==l.current&&(l.current=p({window:o,v5Compat:!0}));let i=l.current,[u,s]=e.useState({action:i.action,location:i.location}),{v7_startTransition:c}=n||{},d=e.useCallback(e=>{c&&j?j(()=>s(e)):s(e)},[s,c]);return e.useLayoutEffect(()=>i.listen(d),[i,d]),e.useEffect(()=>{return null==(e=n)||e.v7_startTransition,void(null==e||e.v7_relativeSplatPath);var e},[n]),e.createElement(w,{basename:r,children:a,location:u.location,navigationType:u.action,navigator:i,future:n})}var J,M,z,A;(M=J||(J={})).UseScrollRestoration="useScrollRestoration",M.UseSubmit="useSubmit",M.UseSubmitFetcher="useSubmitFetcher",M.UseFetcher="useFetcher",M.useViewTransitionState="useViewTransitionState",(A=z||(z={})).UseFetcher="useFetcher",A.UseFetchers="useFetchers",A.UseScrollRestoration="useScrollRestoration";export{I as B,O as N,L as R,_ as a};
