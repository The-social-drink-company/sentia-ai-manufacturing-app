import{al as e,r as s,j as t}from"./chunk-gD0WZlZe.js";import{C as a,b as n,c as r,a as i}from"./chunk-DWwNq9JF.js";import"./chunk-tZo8O77D.js";import"./chunk-BY8qDDXp.js";import"./chunk-CGOCBQ1v.js";import"./chunk-D_LFaUfL.js";import"./chunk-DuMuM8ZY.js";import"./chunk-B0LCvgW6.js";import"./chunk-BXzNuMxH.js";import"./chunk-Dozjk7Op.js";const c=({config:c={}})=>{const{data:d,isLoading:l,error:o}=e({queryKey:["ai-forecasting-data"],queryFn:async()=>{const e=await fetch("/api/ai/forecasting");if(!e.ok)throw new Error("Failed to fetch AI forecasting data");return e.json()},refetchInterval:6e4,staleTime:5e4}),[m,x]=s.useState("ensemble"),[u,h]=s.useState("30d"),[j,v]=s.useState({demand:{current:0,predicted:0,confidence:0,trend:"stable"},inventory:{current:0,predicted:0,confidence:0,trend:"stable"},production:{current:0,predicted:0,confidence:0,trend:"stable"},revenue:{current:0,predicted:0,confidence:0,trend:"stable"}});s.useEffect(()=>{d&&v({demand:d.demand?.[m]?.[u]||j.demand,inventory:d.inventory?.[m]?.[u]||j.inventory,production:d.production?.[m]?.[u]||j.production,revenue:d.revenue?.[m]?.[u]||j.revenue})},[d,m,u]);const p=[{id:"ensemble",name:"4-Model Ensemble",color:"bg-purple-500"},{id:"arima",name:"ARIMA",color:"bg-blue-500"},{id:"lstm",name:"LSTM Neural Net",color:"bg-green-500"},{id:"prophet",name:"Prophet",color:"bg-yellow-500"},{id:"random_forest",name:"Random Forest",color:"bg-red-500"}],N=e=>{switch(e){case"up":return"↗️";case"down":return"↘️";default:return"➡️"}},g=e=>e>=85?"text-green-600":e>=70?"text-yellow-600":"text-red-600";return l?t.jsxs(a,{className:"sentia-card h-full",children:[t.jsx(n,{className:"sentia-card-header",children:t.jsx(r,{className:"sentia-widget-title",children:"AI Forecasting"})}),t.jsx(i,{className:"sentia-card-content",children:t.jsxs("div",{className:"sentia-loading-state",children:[t.jsx("div",{className:"sentia-spinner"}),t.jsx("p",{children:"Running AI models..."})]})})]}):o?t.jsxs(a,{className:"sentia-card h-full border-red-200",children:[t.jsx(n,{className:"sentia-card-header",children:t.jsx(r,{className:"sentia-widget-title text-red-600",children:"AI Forecasting"})}),t.jsx(i,{className:"sentia-card-content",children:t.jsxs("div",{className:"sentia-error-state",children:[t.jsxs("p",{className:"text-red-500",children:["Error: ",o.message]}),t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Check AI service status"})]})})]}):t.jsxs(a,{className:"sentia-card h-full",children:[t.jsxs(n,{className:"sentia-card-header",children:[t.jsx(r,{className:"sentia-widget-title",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full animate-pulse"}),"AI Predictive Analytics"]})}),t.jsxs("div",{className:"flex gap-2 mt-2",children:[t.jsx("select",{value:m,onChange:e=>x(e.target.value),className:"text-xs px-2 py-1 border rounded",children:p.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))}),t.jsxs("select",{value:u,onChange:e=>h(e.target.value),className:"text-xs px-2 py-1 border rounded",children:[t.jsx("option",{value:"7d",children:"7 Days"}),t.jsx("option",{value:"30d",children:"30 Days"}),t.jsx("option",{value:"90d",children:"90 Days"})]})]})]}),t.jsxs(i,{className:"sentia-card-content",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"sentia-metric-card",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("div",{className:"text-sm font-medium",children:"Demand Forecast"}),t.jsx("div",{className:"text-lg",children:N(j.demand.trend)})]}),t.jsx("div",{className:"sentia-metric-value text-blue-600",children:j.demand.predicted.toLocaleString()}),t.jsxs("div",{className:"text-xs text-gray-500",children:["Current: ",j.demand.current.toLocaleString()]}),t.jsxs("div",{className:`text-xs ${g(j.demand.confidence)}`,children:[j.demand.confidence,"% confidence"]})]}),t.jsxs("div",{className:"sentia-metric-card",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("div",{className:"text-sm font-medium",children:"Inventory Needs"}),t.jsx("div",{className:"text-lg",children:N(j.inventory.trend)})]}),t.jsx("div",{className:"sentia-metric-value text-green-600",children:j.inventory.predicted.toLocaleString()}),t.jsxs("div",{className:"text-xs text-gray-500",children:["Current: ",j.inventory.current.toLocaleString()]}),t.jsxs("div",{className:`text-xs ${g(j.inventory.confidence)}`,children:[j.inventory.confidence,"% confidence"]})]}),t.jsxs("div",{className:"sentia-metric-card",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("div",{className:"text-sm font-medium",children:"Production Plan"}),t.jsx("div",{className:"text-lg",children:N(j.production.trend)})]}),t.jsx("div",{className:"sentia-metric-value text-purple-600",children:j.production.predicted.toLocaleString()}),t.jsxs("div",{className:"text-xs text-gray-500",children:["Current: ",j.production.current.toLocaleString()]}),t.jsxs("div",{className:`text-xs ${g(j.production.confidence)}`,children:[j.production.confidence,"% confidence"]})]}),t.jsxs("div",{className:"sentia-metric-card",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("div",{className:"text-sm font-medium",children:"Revenue Forecast"}),t.jsx("div",{className:"text-lg",children:N(j.revenue.trend)})]}),t.jsxs("div",{className:"sentia-metric-value text-emerald-600",children:["$",j.revenue.predicted.toLocaleString()]}),t.jsxs("div",{className:"text-xs text-gray-500",children:["Current: $",j.revenue.current.toLocaleString()]}),t.jsxs("div",{className:`text-xs ${g(j.revenue.confidence)}`,children:[j.revenue.confidence,"% confidence"]})]})]}),d?.insights&&d.insights.length>0&&t.jsxs("div",{className:"mt-4 p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[t.jsx("h4",{className:"font-semibold text-purple-800 mb-2",children:"🤖 AI Insights"}),t.jsx("div",{className:"space-y-1",children:d.insights.slice(0,3).map((e,s)=>t.jsx("div",{className:"text-sm text-purple-700",children:e.message},s))})]}),d?.modelPerformance&&t.jsx("div",{className:"mt-4 grid grid-cols-5 gap-1",children:p.map(e=>t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:`w-2 h-2 ${e.color} rounded-full mx-auto mb-1`}),t.jsxs("div",{className:"text-xs text-gray-600",children:[(d.modelPerformance[e.id]?.accuracy||0).toFixed(1),"%"]})]},e.id))}),t.jsxs("div",{className:"mt-4 text-xs text-gray-500 sentia-data-timestamp",children:["Last updated: ",d?.lastUpdated?new Date(d.lastUpdated).toLocaleTimeString():"Never"]})]})]})};export{c as default};
