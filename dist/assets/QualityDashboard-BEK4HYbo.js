import{ab as t}from"./vendor-mzgWL0UT.js";import{C as c,d as h}from"./index-Z39q6I6m.js";import{b as o}from"./data-layer--fUBiYY5.js";import"./radix-BwzJt-DY.js";import"./router-Ba5tPBuZ.js";const l="/api";class d{constructor(){this.apiBaseUrl=l}async fetchWithAuth(s,a={}){try{const r=await fetch(s,{...a,headers:{"Content-Type":"application/json",...a.headers}});if(!r.ok)throw new Error(`API Error: ${r.status} ${r.statusText}`);return await r.json()}catch(r){throw console.error("API Call Failed:",r),r}}async getAIInsights(s){return this.fetchWithAuth(`${this.apiBaseUrl}/ai/analyze`,{method:"POST",body:JSON.stringify({query:s})})}async getDemandForecast(s){return this.fetchWithAuth(`${this.apiBaseUrl}/forecasting/demand`,{method:"POST",body:JSON.stringify(s)})}async getInventoryOptimization(){return this.fetchWithAuth(`${this.apiBaseUrl}/inventory/optimization`)}async getWorkingCapital(){return this.fetchWithAuth(`${this.apiBaseUrl}/working-capital`)}async getCashFlow(){return this.fetchWithAuth(`${this.apiBaseUrl}/working-capital/xero/cashflow`)}async getFinancialMetrics(){return this.fetchWithAuth(`${this.apiBaseUrl}/working-capital/metrics`)}async getProductionMetrics(){return this.fetchWithAuth(`${this.apiBaseUrl}/production/metrics`)}async getInventoryData(){return this.fetchWithAuth(`${this.apiBaseUrl}/inventory/current`)}async getQualityMetrics(){return this.fetchWithAuth(`${this.apiBaseUrl}/quality/metrics`)}async getDashboardSummary(){return this.fetchWithAuth(`${this.apiBaseUrl}/dashboard/summary`)}async getXeroData(){return this.fetchWithAuth(`${this.apiBaseUrl}/integrations/xero/data`)}async getShopifyData(){return this.fetchWithAuth(`${this.apiBaseUrl}/integrations/shopify/data`)}async getAmazonData(){return this.fetchWithAuth(`${this.apiBaseUrl}/integrations/amazon/data`)}async runWhatIfScenario(s){return this.fetchWithAuth(`${this.apiBaseUrl}/what-if/scenario`,{method:"POST",body:JSON.stringify(s)})}connectToLiveData(s,a){const r=new EventSource(`${this.apiBaseUrl}/events`);return r.onmessage=i=>{try{const n=JSON.parse(i.data);s(n)}catch(n){console.error("SSE Parse Error:",n)}},r.onerror=i=>{console.error("SSE Connection Error:",i),a&&a(i)},r}}const u=new d,g=()=>{const{data:e,isLoading:s}=o({queryKey:["quality"],queryFn:()=>u.getQualityMetrics(),refetchInterval:3e4});return s?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Quality Control"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx(c,{children:t.jsxs(h,{className:"p-6",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Quality Score"}),t.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[(e==null?void 0:e.score)||"98.5","%"]})]})}),t.jsx(c,{children:t.jsxs(h,{className:"p-6",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Defect Rate"}),t.jsxs("p",{className:"text-3xl font-bold text-red-600",children:[(e==null?void 0:e.defectRate)||"0.8","%"]})]})}),t.jsx(c,{children:t.jsxs(h,{className:"p-6",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Tests Passed"}),t.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[(e==null?void 0:e.testsPassed)||"2,341","/",(e==null?void 0:e.totalTests)||"2,350"]})]})})]})]})};export{g as default};
