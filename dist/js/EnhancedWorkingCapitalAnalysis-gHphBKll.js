import{r as e,j as s,aR as a,aS as t,aT as r,aU as n,aD as i,aE as l,aV as o,ar as c,aW as m,ap as d,aC as x,aX as h,aG as u,aY as g,aH as b,aZ as y,a_ as j}from"./chunk-B9uBa7JB.js";import{R as p,u as v,l as f,X as w,Y as N,m as C,s as k,n as R,q as M,k as F,r as S,t as P}from"./chunk-zfoVI_BJ.js";import"./chunk-q-XdqQu1.js";import"./chunk-DiTG-A4l.js";import"./chunk-D1RFofiz.js";import"./chunk-Wtzm-LW2.js";import"./chunk-B0LCvgW6.js";import"./chunk-Doi-WXVS.js";import"./chunk-Dozjk7Op.js";const I=()=>{const[I,A]=e.useState({cashFlow:{baseAmount:5e5,variability:15,cycleTime:30,seasonality:10},accountsReceivable:{amount:85e4,dso:45,collectionRate:95,badDebtRate:2},accountsPayable:{amount:45e4,dpo:35,paymentTerms:30,earlyPayDiscount:2},inventory:{rawMaterials:32e4,workInProcess:18e4,finishedGoods:42e4,turnoverRate:8,holdingCost:25},production:{capacity:85,efficiency:92,overtime:10,wastage:3},ratios:{currentRatio:2.1,quickRatio:1.5,grossMargin:35,operatingMargin:18}}),[E,T]=e.useState([]),[D,K]=e.useState(0),[O,L]=e.useState(!1),[G,W]=e.useState(30),$=e.useMemo(()=>{const{cashFlow:e,accountsReceivable:s,accountsPayable:a,inventory:t,ratios:r}=I,n=e.baseAmount+s.amount+t.rawMaterials+t.workInProcess+t.finishedGoods,i=a.amount,l=n-i,o=s.dso,c=a.dpo,m=o+365/t.turnoverRate-c,d=l*r.operatingMargin/100-.05*l,x=l*t.turnoverRate;return{workingCapital:l,currentAssets:n,currentLiabilities:i,cashConversionCycle:m,freeCashFlow:d,workingCapitalVelocity:x/l,annualRevenue:x,assetTurnover:x/n,receivablesEfficiency:365/o,payablesEfficiency:365/c,inventoryEfficiency:t.turnoverRate,currentRatio:n/i,quickRatio:(n-t.rawMaterials-t.workInProcess-t.finishedGoods)/i}},[I]),H=e.useMemo(()=>{const e=[],s=$.workingCapital;for(let a=0;a<=12;a++){const t=1+I.cashFlow.seasonality/100*Math.sin(a*Math.PI/6),r=s*t*(1+.5*I.cashFlow.variability/100),n=$.freeCashFlow*t;e.push({month:a,monthName:new Date(2024,a).toLocaleDateString("en-US",{month:"short"}),workingCapital:Math.round(r),freeCashFlow:Math.round(n),receivables:Math.round(I.accountsReceivable.amount*t),payables:Math.round(I.accountsPayable.amount*t),inventory:Math.round((I.inventory.rawMaterials+I.inventory.workInProcess+I.inventory.finishedGoods)*t),efficiency:Math.round(I.production.efficiency*(.9+.2*Math.random()))})}return e},[I,$]),q=({label:e,value:a,min:t,max:r,step:n=1,unit:i="",onChange:l,color:o="blue",description:c})=>s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:e}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:`text-lg font-bold text-${o}-600`,children:["number"==typeof a?a.toLocaleString():a,i]}),s.jsx("button",{onClick:()=>l("number"==typeof a?t:0),className:"text-gray-400 hover:text-gray-600",children:s.jsx(j,{className:"w-4 h-4"})})]})]}),s.jsx("input",{type:"range",min:t,max:r,step:n,value:a,onChange:e=>l(Number(e.target.value)),className:`w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider-${o}`}),c&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:c}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[s.jsxs("span",{children:[t,i]}),s.jsxs("span",{children:[r,i]})]})]}),z=e.useCallback((e,s,a)=>{A(t=>({...t,[e]:{...t[e],[s]:a}}))},[]);return e.useEffect(()=>{if(O){const e=setInterval(()=>{A(e=>({...e,cashFlow:{...e.cashFlow,variability:Math.max(5,Math.min(25,e.cashFlow.variability+1))}}))},1e3*G);return()=>clearInterval(e)}},[O,G]),s.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[s.jsx(a,{className:"w-8 h-8 mr-3 text-blue-600"}),"Enhanced Working Capital Analysis"]}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Interactive scenario modeling with advanced sliders and controls"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("button",{onClick:()=>L(!O),className:"flex items-center px-4 py-2 rounded-lg "+(O?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"),children:[O?s.jsx(t,{className:"w-4 h-4 mr-2"}):s.jsx(r,{className:"w-4 h-4 mr-2"}),O?"Auto-Refresh ON":"Auto-Refresh OFF"]}),s.jsxs("button",{onClick:()=>{const e={name:`Scenario ${E.length+1}`,timestamp:(new Date).toISOString(),parameters:JSON.parse(JSON.stringify(I)),metrics:$};T([...E,e])},className:"flex items-center px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200",children:[s.jsx(n,{className:"w-4 h-4 mr-2"}),"Save Scenario"]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Working Capital"}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["£",$.workingCapital.toLocaleString()]})]}),s.jsx(i,{className:"w-8 h-8 text-green-500"})]}),s.jsxs("div",{className:"mt-2 flex items-center",children:[s.jsx(l,{className:"w-4 h-4 text-green-500 mr-1"}),s.jsx("span",{className:"text-sm text-green-600",children:"Optimized"})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Cash Conversion Cycle"}),s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[Math.round($.cashConversionCycle)," days"]})]}),s.jsx(o,{className:"w-8 h-8 text-blue-500"})]}),s.jsxs("div",{className:"mt-2 flex items-center",children:[s.jsx(c,{className:"w-4 h-4 text-blue-500 mr-1"}),s.jsx("span",{className:"text-sm text-blue-600",children:"Target: 35 days"})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Free Cash Flow"}),s.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["£",$.freeCashFlow.toLocaleString()]})]}),s.jsx(l,{className:"w-8 h-8 text-purple-500"})]}),s.jsxs("div",{className:"mt-2 flex items-center",children:[s.jsx(m,{className:"w-4 h-4 text-purple-500 mr-1"}),s.jsx("span",{className:"text-sm text-purple-600",children:"Monthly"})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Current Ratio"}),s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:$.currentRatio.toFixed(2)})]}),s.jsx(d,{className:"w-8 h-8 text-orange-500"})]}),s.jsxs("div",{className:"mt-2 flex items-center",children:[s.jsx(CheckCircle,{className:"w-4 h-4 text-green-500 mr-1"}),s.jsx("span",{className:"text-sm text-green-600",children:"Healthy"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-6 flex items-center",children:[s.jsx(x,{className:"w-5 h-5 mr-2 text-blue-600"}),"Interactive Controls"]}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("h4",{className:"font-medium text-gray-800 mb-4 flex items-center",children:[s.jsx(i,{className:"w-4 h-4 mr-2"}),"Cash Flow Management"]}),s.jsx(q,{label:"Base Cash Amount",value:I.cashFlow.baseAmount,min:1e5,max:2e6,step:1e4,unit:"£",onChange:e=>z("cashFlow","baseAmount",e),color:"green",description:"Core cash position for operations"}),s.jsx(q,{label:"Cash Flow Variability",value:I.cashFlow.variability,min:5,max:50,unit:"%",onChange:e=>z("cashFlow","variability",e),color:"yellow",description:"Expected variation in monthly cash flow"}),s.jsx(q,{label:"Cycle Time",value:I.cashFlow.cycleTime,min:15,max:90,unit:" days",onChange:e=>z("cashFlow","cycleTime",e),color:"blue",description:"Cash conversion cycle duration"})]}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("h4",{className:"font-medium text-gray-800 mb-4 flex items-center",children:[s.jsx(h,{className:"w-4 h-4 mr-2"}),"Accounts Receivable"]}),s.jsx(q,{label:"AR Amount",value:I.accountsReceivable.amount,min:2e5,max:2e6,step:1e4,unit:"£",onChange:e=>z("accountsReceivable","amount",e),color:"blue",description:"Total accounts receivable balance"}),s.jsx(q,{label:"Days Sales Outstanding",value:I.accountsReceivable.dso,min:15,max:120,unit:" days",onChange:e=>z("accountsReceivable","dso",e),color:"red",description:"Average time to collect receivables"}),s.jsx(q,{label:"Collection Rate",value:I.accountsReceivable.collectionRate,min:70,max:100,unit:"%",onChange:e=>z("accountsReceivable","collectionRate",e),color:"green",description:"Percentage of receivables collected"})]}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("h4",{className:"font-medium text-gray-800 mb-4 flex items-center",children:[s.jsx(u,{className:"w-4 h-4 mr-2"}),"Inventory Management"]}),s.jsx(q,{label:"Raw Materials",value:I.inventory.rawMaterials,min:5e4,max:8e5,step:1e4,unit:"£",onChange:e=>z("inventory","rawMaterials",e),color:"orange",description:"Raw materials inventory value"}),s.jsx(q,{label:"Finished Goods",value:I.inventory.finishedGoods,min:1e5,max:1e6,step:1e4,unit:"£",onChange:e=>z("inventory","finishedGoods",e),color:"purple",description:"Finished goods inventory value"}),s.jsx(q,{label:"Turnover Rate",value:I.inventory.turnoverRate,min:2,max:20,unit:"x/year",onChange:e=>z("inventory","turnoverRate",e),color:"green",description:"How many times inventory turns per year"})]}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("h4",{className:"font-medium text-gray-800 mb-4 flex items-center",children:[s.jsx(g,{className:"w-4 h-4 mr-2"}),"Production Parameters"]}),s.jsx(q,{label:"Capacity Utilization",value:I.production.capacity,min:50,max:100,unit:"%",onChange:e=>z("production","capacity",e),color:"blue",description:"Current production capacity utilization"}),s.jsx(q,{label:"Production Efficiency",value:I.production.efficiency,min:60,max:100,unit:"%",onChange:e=>z("production","efficiency",e),color:"green",description:"Overall production efficiency"}),s.jsx(q,{label:"Overtime Hours",value:I.production.overtime,min:0,max:40,unit:"%",onChange:e=>z("production","overtime",e),color:"yellow",description:"Percentage of overtime hours"})]})]}),s.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[s.jsx(l,{className:"w-5 h-5 mr-2 text-green-600"}),"12-Month Working Capital Projection"]}),s.jsx(p,{width:"100%",height:300,children:s.jsxs(v,{data:H,children:[s.jsx(f,{strokeDasharray:"3 3"}),s.jsx(w,{dataKey:"monthName"}),s.jsx(N,{}),s.jsx(C,{formatter:(e,s)=>[`£${e.toLocaleString()}`,s]}),s.jsx(k,{}),s.jsx(R,{type:"monotone",dataKey:"workingCapital",fill:"#3b82f6",fillOpacity:.3,stroke:"#3b82f6",name:"Working Capital"}),s.jsx(M,{type:"monotone",dataKey:"freeCashFlow",stroke:"#10b981",strokeWidth:2,name:"Free Cash Flow"})]})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[s.jsx(b,{className:"w-5 h-5 mr-2 text-purple-600"}),"Cash Components Analysis"]}),s.jsx(p,{width:"100%",height:300,children:s.jsxs(F,{data:H,children:[s.jsx(f,{strokeDasharray:"3 3"}),s.jsx(w,{dataKey:"monthName"}),s.jsx(N,{}),s.jsx(C,{formatter:(e,s)=>[`£${e.toLocaleString()}`,s]}),s.jsx(k,{}),s.jsx(R,{type:"monotone",dataKey:"receivables",stackId:"1",fill:"#3b82f6",name:"Receivables"}),s.jsx(R,{type:"monotone",dataKey:"inventory",stackId:"1",fill:"#f59e0b",name:"Inventory"}),s.jsx(R,{type:"monotone",dataKey:"payables",stackId:"2",fill:"#ef4444",name:"Payables"})]})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[s.jsx(c,{className:"w-5 h-5 mr-2 text-orange-600"}),"Efficiency Metrics"]}),s.jsx(p,{width:"100%",height:200,children:s.jsxs(S,{data:[{name:"Receivables Efficiency",value:$.receivablesEfficiency,target:12},{name:"Payables Efficiency",value:$.payablesEfficiency,target:10},{name:"Inventory Efficiency",value:$.inventoryEfficiency,target:8},{name:"Asset Turnover",value:$.assetTurnover,target:2}],children:[s.jsx(f,{strokeDasharray:"3 3"}),s.jsx(w,{dataKey:"name"}),s.jsx(N,{}),s.jsx(C,{}),s.jsx(k,{}),s.jsx(P,{dataKey:"value",fill:"#3b82f6",name:"Current"}),s.jsx(P,{dataKey:"target",fill:"#10b981",name:"Target"})]})})]})]})]}),E.length>0&&s.jsxs("div",{className:"mt-8 bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[s.jsx(y,{className:"w-5 h-5 mr-2 text-indigo-600"}),"Saved Scenarios (",E.length,")"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:E.map((e,a)=>s.jsxs("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-colors "+(a===D?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>{var e;E[e=a]&&(A(E[e].parameters),K(e))},children:[s.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Working Capital: £",e.metrics.workingCapital.toLocaleString()]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Cycle: ",Math.round(e.metrics.cashConversionCycle)," days"]}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(e.timestamp).toLocaleDateString()})]},a))})]})]})})};export{I as default};
