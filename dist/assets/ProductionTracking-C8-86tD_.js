import{c as e,b as s,j as t}from"./query-CJR12TOn.js";import{a}from"./vendor-BPOA5ME_.js";import{L as r}from"./index--VX2k3uy.js";import{R as i}from"./refresh-cw-D4wFr_0y.js";import{A as l}from"./activity-BedOH9pu.js";import{B as d}from"./bar-chart-3-Ac17UR5_.js";import{T as n}from"./trending-up-n8Gbo-Sb.js";import{C as c}from"./check-circle-DQk4t6Ff.js";import{l as o}from"./index-CVFVhlK-.js";import"./auth-zWw5cpzK.js";const x=o("PauseCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]),m=o("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]),u=o("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),h=o("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),g=o("StopCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]]),y=()=>{const[o,y]=a.useState("all"),[p,j]=a.useState("24h"),[b,f]=a.useState(3e4),{data:N,isLoading:v,refetch:w}=e({queryKey:["production-data",o,p],queryFn:async()=>{const e=await fetch(`/api/production/live?line=${o}&range=${p}`);return e.ok?e.json():{activeJobs:[{id:"JOB-2025-001",product:"Sentia Red",line:"Line A",status:"running",progress:65,startTime:"2025-09-08T06:00:00Z",estimatedEnd:"2025-09-08T14:30:00Z"},{id:"JOB-2025-002",product:"Sentia Gold",line:"Line B",status:"running",progress:42,startTime:"2025-09-08T08:15:00Z",estimatedEnd:"2025-09-08T16:45:00Z"},{id:"JOB-2025-003",product:"Sentia Blue",line:"Line C",status:"paused",progress:78,startTime:"2025-09-08T05:30:00Z",estimatedEnd:"2025-09-08T13:00:00Z"}],metrics:{totalJobs:15,activeJobs:12,completedToday:8,capacity:87.3,efficiency:94.2,outputToday:1247,outputTarget:1400,downtimeMinutes:23},lines:[{id:"line-a",name:"Line A",status:"running",efficiency:96.1,output:456},{id:"line-b",name:"Line B",status:"running",efficiency:91.8,output:423},{id:"line-c",name:"Line C",status:"maintenance",efficiency:0,output:0},{id:"line-d",name:"Line D",status:"running",efficiency:98.5,output:368}],hourlyProduction:[{hour:"06:00",target:58,actual:52},{hour:"07:00",target:58,actual:61},{hour:"08:00",target:58,actual:55},{hour:"09:00",target:58,actual:59},{hour:"10:00",target:58,actual:62},{hour:"11:00",target:58,actual:45},{hour:"12:00",target:58,actual:58}]}},refetchInterval:b}),k=s({mutationFn:async e=>(await fetch("/api/production/jobs/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json(),onSuccess:()=>w()}),T=s({mutationFn:async e=>(await fetch(`/api/production/jobs/${e}/pause`,{method:"POST"})).json(),onSuccess:()=>w()});a.useEffect(()=>{const e=setInterval(()=>{w()},b);return()=>clearInterval(e)},[b,w]);const C={labels:N?.hourlyProduction?.map(e=>e.hour)||[],datasets:[{label:"Target Production",data:N?.hourlyProduction?.map(e=>e.target)||[],borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4},{label:"Actual Production",data:N?.hourlyProduction?.map(e=>e.actual)||[],borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",tension:.4}]},L=e=>{switch(e){case"running":return t.jsx(m,{className:"w-5 h-5 text-green-500"});case"paused":return t.jsx(x,{className:"w-5 h-5 text-yellow-500"});case"maintenance":return t.jsx(h,{className:"w-5 h-5 text-red-500"});default:return t.jsx(g,{className:"w-5 h-5 text-gray-500"})}};return v?t.jsx("div",{className:"max-w-7xl mx-auto p-6 flex items-center justify-center min-h-[400px]",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(i,{className:"w-6 h-6 animate-spin text-blue-500"}),t.jsx("span",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Loading production data..."})]})}):t.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Production Tracking"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Real-time monitoring of production lines, schedules, and performance"})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsxs("select",{value:p,onChange:e=>j(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600",children:[t.jsx("option",{value:"1h",children:"Last Hour"}),t.jsx("option",{value:"24h",children:"Last 24 Hours"}),t.jsx("option",{value:"7d",children:"Last Week"})]}),t.jsxs("button",{onClick:()=>w(),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[t.jsx(i,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Active Jobs"}),t.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:N?.metrics?.activeJobs||0}),t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["of ",N?.metrics?.totalJobs||0," total"]})]}),t.jsx(l,{className:"w-8 h-8 text-blue-500"})]})}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Capacity"}),t.jsxs("p",{className:"text-3xl font-bold text-green-600 mt-2",children:[N?.metrics?.capacity||0,"%"]}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Utilization rate"})]}),t.jsx(d,{className:"w-8 h-8 text-green-500"})]})}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Efficiency"}),t.jsxs("p",{className:"text-3xl font-bold text-purple-600 mt-2",children:[N?.metrics?.efficiency||0,"%"]}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Overall equipment"})]}),t.jsx(n,{className:"w-8 h-8 text-purple-500"})]})}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Output Today"}),t.jsx("p",{className:"text-3xl font-bold text-orange-600 mt-2",children:N?.metrics?.outputToday||0}),t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["of ",N?.metrics?.outputTarget||0," target"]})]}),t.jsx(c,{className:"w-8 h-8 text-orange-500"})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:t.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Production Lines"})}),t.jsx("div",{className:"p-6",children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:N?.lines?.map(e=>t.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),L(e.status)]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Efficiency:"}),t.jsxs("span",{className:"font-medium",children:[e.efficiency,"%"]})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Output:"}),t.jsxs("span",{className:"font-medium",children:[e.output," units"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${e.efficiency}%`}})})]})]},e.id))})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Active Jobs"}),t.jsxs("button",{className:"flex items-center px-3 py-1 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700",children:[t.jsx(u,{className:"w-4 h-4 mr-1"}),"New Job"]})]}),t.jsx("div",{className:"p-6",children:t.jsx("div",{className:"space-y-4",children:N?.activeJobs?.map(e=>t.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex justify-between items-start mb-3",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:e.id}),t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.product," - ",e.line]})]}),t.jsx("div",{className:"flex space-x-2",children:"running"===e.status?t.jsx("button",{onClick:()=>T.mutate(e.id),className:"p-1 text-yellow-600 hover:bg-yellow-50 rounded",children:t.jsx(x,{className:"w-5 h-5"})}):t.jsx("button",{onClick:()=>k.mutate(e),className:"p-1 text-green-600 hover:bg-green-50 rounded",children:t.jsx(m,{className:"w-5 h-5"})})})]}),t.jsxs("div",{className:"mb-2",children:[t.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[t.jsx("span",{children:"Progress"}),t.jsxs("span",{children:[e.progress,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"h-2 rounded-full "+("running"===e.status?"bg-green-600":"paused"===e.status?"bg-yellow-600":"bg-gray-400"),style:{width:`${e.progress}%`}})})]}),t.jsxs("div",{className:"text-xs text-gray-500 flex justify-between",children:[t.jsxs("span",{children:["Started: ",new Date(e.startTime).toLocaleTimeString()]}),t.jsxs("span",{children:["ETA: ",new Date(e.estimatedEnd).toLocaleTimeString()]})]})]},e.id))})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:t.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Hourly Production"})}),t.jsx("div",{className:"p-6",children:t.jsx("div",{style:{height:"300px"},children:t.jsx(r,{data:C,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!1}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Units"}},x:{title:{display:!0,text:"Time"}}}}})})})]})]})]})};export{y as default};
