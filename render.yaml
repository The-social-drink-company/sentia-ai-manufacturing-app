services:
  # Web Service - Express.js Application
  - type: web
    name: sentia-manufacturing-dashboard
    runtime: node
    region: oregon # or singapore, frankfurt, ohio
    plan: free # or starter, standard, pro

    buildCommand: npm ci --legacy-peer-deps && npm run build
    startCommand: node server.js

    healthCheckPath: /health

    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 3000

      # Add your environment variables here
      - key: DATABASE_URL
        sync: false # Set to true if using Render PostgreSQL

      - key: VITE_CLERK_PUBLISHABLE_KEY
        sync: false

      - key: CLERK_SECRET_KEY
        sync: false

      - key: VITE_API_BASE_URL
        value: https://sentia-manufacturing-dashboard.onrender.com/api

      # Add other API keys as needed
      - key: XERO_CLIENT_ID
        sync: false

      - key: XERO_CLIENT_SECRET
        sync: false

      - key: OPENAI_API_KEY
        sync: false

      - key: ANTHROPIC_API_KEY
        sync: false

# Optional: Add a PostgreSQL database
# databases:
#   - name: sentia-db
#     plan: free # or starter, standard, pro
#     region: oregon # Must match service region