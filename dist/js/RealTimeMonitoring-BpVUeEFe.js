import{r as e,j as t,o as a,t as s,bh as r,af as i,aA as n,b5 as d,b2 as c,F as l,aa as x}from"./chunk-BS7D3drv.js";import"./chunk-CaCZzx1a.js";import"./chunk-B8HYxMBa.js";import"./chunk-BeXirc7D.js";import"./chunk-B4NPfpdB.js";import"./chunk-DCR74Uep.js";import"./chunk-CwR8AQSU.js";import"./chunk-DLyb-tas.js";import"./chunk-Dozjk7Op.js";const m=()=>{const[m,o]=e.useState(null),[g,h]=e.useState(!0),[u,y]=e.useState(new Date),[p,j]=e.useState([]),[w,f]=e.useState("connecting");e.useEffect(()=>{const e=new EventSource("/api/monitoring/stream");e.onopen=()=>{f("connected")},e.onerror=()=>{f("disconnected")},e.onmessage=e=>{try{const t=JSON.parse(e.data);o(t),y(new Date),t.alerts&&j(t.alerts)}catch(t){}};return(async()=>{try{const e=await fetch("/api/monitoring/status");if(e.ok){const t=await e.json();o(t)}else o(N)}catch(e){o(N)}finally{h(!1)}})(),()=>{e.close()}},[]);const N={productionLines:[{id:"line-a",name:"GABA Red Production Line A",status:"running",efficiency:94.2,currentBatch:"B2025001",temperature:22.5,pressure:1.85,speed:1250,targetSpeed:1300,lastMaintenance:"2025-09-06T10:00:00Z",nextMaintenance:"2025-09-15T08:00:00Z",operatorCount:3,alertLevel:"normal"},{id:"line-b",name:"GABA Clear Production Line B",status:"warning",efficiency:87.8,currentBatch:"B2025002",temperature:24.2,pressure:1.92,speed:1100,targetSpeed:1200,lastMaintenance:"2025-09-05T14:00:00Z",nextMaintenance:"2025-09-12T09:00:00Z",operatorCount:2,alertLevel:"warning"},{id:"line-c",name:"Packaging Line C",status:"maintenance",efficiency:0,currentBatch:null,temperature:20.1,pressure:0,speed:0,targetSpeed:800,lastMaintenance:"2025-09-08T06:00:00Z",nextMaintenance:"2025-09-08T16:00:00Z",operatorCount:1,alertLevel:"maintenance"}],equipment:[{id:"mixer-001",name:"Primary Mixer",type:"mixer",status:"operational",temperature:65.2,rpm:150,vibration:.5,efficiency:96.1,lastService:"2025-09-01T00:00:00Z",nextService:"2025-09-29T00:00:00Z"},{id:"bottler-001",name:"Bottling Unit #1",type:"bottler",status:"warning",temperature:18.5,rpm:300,vibration:1.2,efficiency:89.3,lastService:"2025-08-28T00:00:00Z",nextService:"2025-09-25T00:00:00Z"},{id:"conveyor-001",name:"Main Conveyor",type:"conveyor",status:"operational",temperature:22,rpm:45,vibration:.3,efficiency:98.7,lastService:"2025-09-03T00:00:00Z",nextService:"2025-10-03T00:00:00Z"}],systemMetrics:{overallEfficiency:91.4,activeAlerts:3,maintenanceItems:2,powerConsumption:2847.5,waterUsage:1250.8,totalOutput:15420,qualityScore:97.2,uptimePercentage:94.8},alerts:[{id:"alert-001",type:"warning",severity:"medium",title:"Temperature Variance - Line B",message:"Temperature reading 2.2°C above optimal range",timestamp:new Date(Date.now()-6e5).toISOString(),equipment:"line-b",acknowledged:!1},{id:"alert-002",type:"maintenance",severity:"high",title:"Scheduled Maintenance Due",message:"Packaging Line C maintenance window started",timestamp:new Date(Date.now()-36e5).toISOString(),equipment:"line-c",acknowledged:!0},{id:"alert-003",type:"quality",severity:"low",title:"Quality Check Required",message:"Batch B2025001 requires final quality verification",timestamp:new Date(Date.now()-9e5).toISOString(),equipment:"line-a",acknowledged:!1}]},b=e=>{switch(e){case"running":case"operational":return t.jsx(x,{className:"h-5 w-5 text-green-500"});case"warning":return t.jsx(l,{className:"h-5 w-5 text-yellow-500"});case"maintenance":return t.jsx(c,{className:"h-5 w-5 text-blue-500"});case"stopped":case"error":return t.jsx(d,{className:"h-5 w-5 text-red-500"});default:return t.jsx(n,{className:"h-5 w-5 text-gray-500"})}},v=e=>{switch(e){case"running":case"operational":return"bg-green-100 dark:bg-green-900/20 border-green-200 dark:border-green-800";case"warning":return"bg-yellow-100 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800";case"maintenance":return"bg-blue-100 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800";case"stopped":case"error":return"bg-red-100 dark:bg-red-900/20 border-red-200 dark:border-red-800";default:return"bg-gray-100 dark:bg-gray-900/20 border-gray-200 dark:border-gray-800"}},k=e=>{switch(e){case"warning":return t.jsx(l,{className:"h-4 w-4 text-yellow-500"});case"maintenance":return t.jsx(c,{className:"h-4 w-4 text-blue-500"});case"quality":return t.jsx(x,{className:"h-4 w-4 text-green-500"});default:return t.jsx(r,{className:"h-4 w-4 text-gray-500"})}},S=e=>{const t=new Date(e),a=new Date-t,s=Math.floor(a/6e4);if(s<1)return"Just now";if(s<60)return`${s}m ago`;const r=Math.floor(s/60);if(r<24)return`${r}h ago`;return`${Math.floor(r/24)}d ago`};if(g)return t.jsx("div",{className:"max-w-7xl mx-auto p-6",children:t.jsxs("div",{className:"animate-pulse",children:[t.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/3 mb-6"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[...Array(6)].map((e,a)=>t.jsx("div",{className:"h-48 bg-gray-300 rounded"},a))})]})});const M=m||N;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Real-Time Monitoring"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Live production line and equipment monitoring"})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(a,{className:"h-5 w-5 "+("connected"===w?"text-green-500":"text-red-500")}),t.jsx("span",{className:"text-sm font-medium "+("connected"===w?"text-green-600":"text-red-600"),children:"connected"===w?"Connected":"Disconnected"})]}),t.jsxs("div",{className:"text-sm text-gray-500",children:["Last update: ",u.toLocaleTimeString()]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Overall Efficiency"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[M.systemMetrics.overallEfficiency,"%"]})]}),t.jsx(s,{className:"h-8 w-8 text-blue-600"})]})}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Alerts"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:M.systemMetrics.activeAlerts})]}),t.jsx(r,{className:"h-8 w-8 text-yellow-600"})]})}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Output"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:M.systemMetrics.totalOutput.toLocaleString()})]}),t.jsx(i,{className:"h-8 w-8 text-green-600"})]})}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Uptime"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[M.systemMetrics.uptimePercentage,"%"]})]}),t.jsx(n,{className:"h-8 w-8 text-purple-600"})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:t.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Production Lines Status"})}),t.jsx("div",{className:"p-6",children:t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:M.productionLines.map(e=>t.jsxs("div",{className:`border rounded-lg p-4 ${v(e.status)}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e.name}),b(e.status)]}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Efficiency:"}),t.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[Math.round(e.efficiency),"%"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Speed:"}),t.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[e.speed,"/",e.targetSpeed," RPM"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Temperature:"}),t.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[e.temperature,"°C"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Operators:"}),t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:e.operatorCount})]}),e.currentBatch&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Batch:"}),t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:e.currentBatch})]})]})]},e.id))})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:t.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Equipment Status"})}),t.jsx("div",{className:"p-6",children:t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:M.equipment.map(e=>t.jsxs("div",{className:`border rounded-lg p-4 ${v(e.status)}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e.name}),b(e.status)]}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Efficiency:"}),t.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[Math.round(e.efficiency),"%"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Temperature:"}),t.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[e.temperature,"°C"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"RPM:"}),t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:e.rpm})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Vibration:"}),t.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[e.vibration,"mm/s"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Next Service:"}),t.jsx("span",{className:"font-medium text-gray-900 dark:text-white text-xs",children:S(e.nextService)})]})]})]},e.id))})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:t.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Active Alerts"})}),t.jsx("div",{className:"p-6",children:t.jsx("div",{className:"space-y-3",children:M.alerts.map(e=>t.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border "+(e.acknowledged?"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600":"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800"),children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[k(e.type),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e.title}),t.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.message})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-xs text-gray-500",children:S(e.timestamp)}),t.jsx("div",{className:"text-xs font-medium "+("high"===e.severity?"text-red-600":"medium"===e.severity?"text-yellow-600":"text-green-600"),children:e.severity.toUpperCase()})]})]},e.id))})})]})]})};export{m as default};
