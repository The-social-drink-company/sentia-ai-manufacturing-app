const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DashboardEnterprise-Dbw5dRjc.js","assets/vendor-if_euMW7.js","assets/data-layer-BNrHGTjD.js","assets/radix-DXWB-ErX.js","assets/router-D3j4TwQA.js","assets/RealWorkingCapital-BTEpzH46.js","assets/Forecasting-BWa-ypBX.js","assets/select-CyQYaw4z.js","assets/charts-BqGm_-DZ.js","assets/Production-B6FtY6Y3.js","assets/Analytics-DTlJDduz.js","assets/InventoryDashboard-BBoXwKcY.js","assets/QualityDashboard-ClejUXmA.js","assets/DataImportWidget-BsPbhZR-.js","assets/AdminPanelEnhanced-BYpGH_E9.js","assets/WhatIfAnalysis-CpOH0du8.js","assets/ScenarioPlanner-bmwp72wm.js","assets/AssistantPanel-TN6sWy-C.js"])))=>i.map(i=>d[i]);
var me=Object.defineProperty;var he=(r,t,a)=>t in r?me(r,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[t]=a;var O=(r,t,a)=>he(r,typeof t!="symbol"?t+"":t,a);import{aq as pe,h as xe,ab as e,ar as W,as as ge,at as fe,au as ve,av as ye,aw as be,ax as je,ay as we,r as l,az as Ne,aA as Ie,aB as Se,aC as Ae,aD as ke,aE as Ce,aF as De,aG as Ee,aH as F,aI as Re,aJ as Pe,aK as q,aL as _e,aM as Te,aN as Le,aO as Me,aP as Oe,aQ as Fe,aR as Ue,aS as ze,aT as H,aU as Ge,R as $e,aV as Ke,aW as Ve,aX as Be,aY as We,aZ as qe,a_ as He,a$ as Qe,b0 as $,b1 as Ye,b2 as Xe}from"./vendor-if_euMW7.js";import{u as Ze,Q as Je,a as et}from"./data-layer-BNrHGTjD.js";import{S as Q,R as tt,I as at}from"./radix-DXWB-ErX.js";import{u as Y,a as X,O as st,N as U,B as nt,R as rt,b as w}from"./router-D3j4TwQA.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=a(s);fetch(s.href,i)}})();const it="modulepreload",ot=function(r){return"/"+r},K={},D=function(t,a,n){let s=Promise.resolve();if(a&&a.length>0){let o=function(u){return Promise.all(u.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),p=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=o(a.map(u=>{if(u=ot(u),u in K)return;K[u]=!0;const g=u.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${y}`))return;const x=document.createElement("link");if(x.rel=g?"stylesheet":it,g||(x.as="script"),x.crossOrigin="",x.href=u,p&&x.setAttribute("nonce",p),document.head.appendChild(x),g)return new Promise((v,b)=>{x.addEventListener("load",v),x.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return t().catch(i)})};function _(...r){return pe(xe(r))}const lt=W("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function N({className:r,variant:t,size:a,asChild:n=!1,...s}){const i=n?Q:"button";return e.jsx(i,{"data-slot":"button",className:_(lt({variant:t,size:a,className:r})),...s})}const ct=W("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function E({className:r,variant:t,asChild:a=!1,...n}){const s=a?Q:"span";return e.jsx(s,{"data-slot":"badge",className:_(ct({variant:t}),r),...n})}const dt=[{icon:fe,title:"Working Capital Intelligence",description:"Real-time liquidity management with AI-powered cash flow forecasting and optimization."},{icon:ve,title:"Demand Forecasting & Analytics",description:"Advanced predictive models for demand planning, inventory optimization, and production scheduling."},{icon:ye,title:"Executive Dashboard",description:"Comprehensive KPI monitoring with drill-down capabilities and executive-ready reporting."},{icon:be,title:"Inventory Management",description:"Smart inventory tracking with automated reorder points and supplier performance metrics."},{icon:je,title:"Production Tracking",description:"Real-time production monitoring with efficiency metrics and bottleneck identification."},{icon:we,title:"Quality Control",description:"Integrated quality management with defect tracking and continuous improvement analytics."}],ut=[{label:"Monthly Revenue",value:"$2.54M",change:"+12.3%",positive:!0},{label:"Production Efficiency",value:"94.2%",change:"+2.1%",positive:!0},{label:"Working Capital Ratio",value:"2.76",change:"+0.15",positive:!0},{label:"Order Fulfillment",value:"98.5%",change:"+1.2%",positive:!0}],V=()=>{const r=Y(),t=()=>{r("/app/sign-in")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:[e.jsx("header",{className:"relative z-10 px-6 py-4",children:e.jsxs("nav",{className:"mx-auto flex max-w-7xl items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-400 p-2",children:e.jsx("div",{className:"h-full w-full rounded bg-white/20"})}),e.jsx("span",{className:"text-xl font-bold text-white",children:"Sentia Manufacturing"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(N,{variant:"ghost",className:"text-white hover:bg-white/10",onClick:t,children:"Sign In"}),e.jsx(N,{className:"bg-gradient-to-r from-blue-500 to-cyan-400",onClick:()=>r("/app/dashboard"),children:"Go to Dashboard"})]})]})}),e.jsxs("main",{className:"relative",children:[e.jsx("div",{className:"mx-auto max-w-7xl px-6 py-16 sm:py-24",children:e.jsxs("div",{className:"text-center",children:[e.jsx(E,{variant:"secondary",className:"mb-6 bg-blue-500/20 text-blue-200 border-blue-400/30",children:"Enterprise Manufacturing Intelligence"}),e.jsxs("h1",{className:"text-5xl font-bold tracking-tight text-white sm:text-6xl lg:text-7xl",children:["Manufacturing",e.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-cyan-300 bg-clip-text text-transparent",children:" Intelligence"})]}),e.jsx("p",{className:"mx-auto mt-6 max-w-2xl text-lg text-slate-300",children:"Transform your manufacturing operations with AI-powered analytics, real-time monitoring, and intelligent forecasting. Make data-driven decisions that optimize efficiency and profitability."}),e.jsxs("div",{className:"mt-10 flex flex-col gap-4 sm:flex-row sm:justify-center",children:[e.jsxs(N,{size:"lg",className:"bg-gradient-to-r from-blue-500 to-cyan-400 text-white shadow-xl hover:shadow-blue-500/25",onClick:t,children:["Get Started",e.jsx(ge,{className:"ml-2 h-4 w-4"})]}),e.jsx(N,{size:"lg",variant:"outline",className:"border-white/20 text-white hover:bg-white/10",onClick:()=>r("/app/dashboard"),children:"View Live Demo"})]})]})}),e.jsx("div",{className:"mx-auto max-w-7xl px-6 py-12",children:e.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:ut.map(a=>e.jsxs("div",{className:"rounded-xl bg-white/5 p-6 backdrop-blur-sm border border-white/10",children:[e.jsx("div",{className:"text-sm font-medium text-slate-400",children:a.label}),e.jsx("div",{className:"mt-2 text-3xl font-bold text-white",children:a.value}),e.jsxs("div",{className:`mt-1 text-sm ${a.positive?"text-green-400":"text-red-400"}`,children:[a.change," vs last month"]})]},a.label))})}),e.jsxs("div",{className:"mx-auto max-w-7xl px-6 py-16",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-white sm:text-4xl",children:"Comprehensive Manufacturing Suite"}),e.jsx("p",{className:"mt-4 text-lg text-slate-300",children:"Everything you need to optimize your manufacturing operations"})]}),e.jsx("div",{className:"grid gap-8 sm:grid-cols-2 lg:grid-cols-3",children:dt.map(a=>e.jsxs("div",{className:"rounded-xl bg-white/5 p-8 backdrop-blur-sm border border-white/10 hover:bg-white/10 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"rounded-lg bg-gradient-to-br from-blue-500 to-cyan-400 p-2",children:e.jsx(a.icon,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold text-white",children:a.title})]}),e.jsx("p",{className:"text-slate-300",children:a.description})]},a.title))})]}),e.jsx("div",{className:"mx-auto max-w-7xl px-6 py-16",children:e.jsxs("div",{className:"rounded-2xl bg-gradient-to-r from-blue-600 to-cyan-500 p-8 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:"Ready to Transform Your Manufacturing?"}),e.jsx("p",{className:"mt-4 text-lg text-blue-100",children:"Join leading manufacturers who trust Sentia for their operations intelligence"}),e.jsxs("div",{className:"mt-8 flex flex-col gap-4 sm:flex-row sm:justify-center",children:[e.jsx(N,{size:"lg",className:"bg-white text-blue-600 hover:bg-slate-100",onClick:t,children:"Start Free Trial"}),e.jsx(N,{size:"lg",variant:"outline",className:"border-white/30 text-white hover:bg-white/10",onClick:()=>r("/app/dashboard"),children:"Explore Dashboard"})]})]})})]})]})},P={id:"dev_user_12345",emailAddress:"developer@sentiaspirits.com",firstName:"Dev",lastName:"User",fullName:"Dev User",username:"devuser",imageUrl:"/avatar-placeholder.png",hasImage:!1,primaryEmailAddressId:"email_dev_12345",primaryPhoneNumberId:null,primaryWeb3WalletId:null,lastSignInAt:new Date,createdAt:new Date,updatedAt:new Date,banned:!1,locked:!1,twoFactorEnabled:!1,totpEnabled:!1,backupCodeEnabled:!1,publicMetadata:{role:"admin",department:"development",permissions:["dashboard:read","dashboard:write","working-capital:read","working-capital:write","forecasting:read","forecasting:write","production:read","production:write","analytics:read","analytics:write","inventory:read","inventory:write","quality:read","quality:write","admin:read","admin:write","data-import:read","data-import:write"]},privateMetadata:{},unsafeMetadata:{}};P.id;const mt=({afterSignOutUrl:r,...t})=>{var p;const[a,n]=l.useState(null),[s,i]=l.useState(!1),[o,c]=l.useState(!1);return l.useEffect(()=>{{console.log("[UserButtonEnvironmentAware] Using development mode user button"),i(!1);return}},[]),s?e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-300 animate-pulse"}):e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>c(!o),className:"flex items-center space-x-2 bg-blue-100 hover:bg-blue-200 px-3 py-2 rounded-lg transition-colors",...t,children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:((p=P.firstName)==null?void 0:p[0])||"D"})}),e.jsxs("div",{className:"hidden sm:block text-left",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.fullName}),e.jsx("div",{className:"text-xs text-gray-500",children:"Development Mode"})]}),e.jsx(Ne,{className:"w-4 h-4 text-gray-500"})]}),o&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.fullName}),e.jsx("div",{className:"text-sm text-gray-500",children:P.emailAddress}),e.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"Admin â€¢ Development Mode"})]}),e.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"Manage Account"})]}),e.jsxs("button",{className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-2",children:[e.jsx(Se,{className:"w-4 h-4"}),e.jsx("span",{children:"Settings"})]}),e.jsx("div",{className:"border-t border-gray-100 mt-1 pt-1",children:e.jsxs("button",{onClick:()=>{console.log("[UserButtonEnvironmentAware] Sign out called in development mode"),c(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-gray-50 flex items-center space-x-2",children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsx("span",{children:"Sign Out (Dev Mode)"})]})})]})]})};var R={};class ht{constructor(){this.baseURLs={mcp:R.VITE_MCP_SERVER_URL||"https://mcp-server-tkyu.onrender.com",shopifyUK:R.VITE_SHOPIFY_UK_SHOP_URL||"https://sentiaspirits.myshopify.com",shopifyUSA:R.VITE_SHOPIFY_USA_SHOP_URL||"https://ussentiaspirits.myshopify.com",xero:"https://api.xero.com/api.xro/2.0",unleashed:R.VITE_UNLEASHED_API_URL||"https://api.unleashedsoftware.com"},this.apiKeys={shopifyUK:R.VITE_SHOPIFY_UK_ACCESS_TOKEN,shopifyUSA:R.VITE_SHOPIFY_USA_ACCESS_TOKEN,unleashed:R.VITE_UNLEASHED_API_KEY,xero:R.VITE_XERO_CLIENT_ID},this.cache=new Map,this.cacheTimeout=2*60*1e3,this.websockets=new Map,this.initializeWebSockets()}initializeWebSockets(){try{const t=new WebSocket(`${this.baseURLs.mcp.replace("https","wss")}/ws`);t.onmessage=a=>{const n=JSON.parse(a.data);this.handleRealTimeUpdate("mcp",n)},this.websockets.set("mcp",t)}catch(t){console.warn("WebSocket connection failed, falling back to polling:",t)}}handleRealTimeUpdate(t,a){this.cache.clear(),window.dispatchEvent(new CustomEvent("dataUpdate",{detail:{source:t,data:a}}))}async getDashboardData(){const t="dashboard_data";if(this.cache.has(t)){const a=this.cache.get(t);if(Date.now()-a.timestamp<this.cacheTimeout)return a.data}try{const[a,n,s,i,o]=await Promise.allSettled([this.getFinancialMetrics(),this.getSalesMetrics(),this.getInventoryMetrics(),this.getProductionMetrics(),this.getQualityMetrics()]),c={financial:a.status==="fulfilled"?a.value:this.getDefaultFinancialData(),sales:n.status==="fulfilled"?n.value:this.getDefaultSalesData(),inventory:s.status==="fulfilled"?s.value:this.getDefaultInventoryData(),production:i.status==="fulfilled"?i.value:this.getDefaultProductionData(),quality:o.status==="fulfilled"?o.value:this.getDefaultQualityData(),lastUpdated:new Date().toISOString(),systemStatus:this.getSystemStatus()};return this.cache.set(t,{data:c,timestamp:Date.now()}),c}catch(a){return console.error("Failed to fetch dashboard data:",a),this.getDefaultDashboardData()}}async getFinancialMetrics(){try{const t=await this.callMCPServer("xero","list-profit-and-loss",{});if(t.success)return this.parseXeroFinancialData(t.data)}catch(t){console.warn("MCP server unavailable, using direct API:",t)}try{const t=await fetch("/api/xero/profit-loss",{headers:{Authorization:`Bearer ${this.apiKeys.xero}`,"Content-Type":"application/json"}});if(t.ok){const a=await t.json();return this.parseXeroFinancialData(a)}}catch(t){console.error("Xero API error:",t)}return this.calculateFinancialMetrics()}async getSalesMetrics(){try{const[t,a]=await Promise.allSettled([this.getShopifySales("UK"),this.getShopifySales("USA")]),n=t.status==="fulfilled"?t.value:{orders:[],revenue:0},s=a.status==="fulfilled"?a.value:{orders:[],revenue:0};return{totalRevenue:n.revenue+s.revenue,ukRevenue:n.revenue,usaRevenue:s.revenue,totalOrders:n.orders.length+s.orders.length,ukOrders:n.orders.length,usaOrders:s.orders.length,recentOrders:[...n.orders,...s.orders].sort((i,o)=>new Date(o.created_at)-new Date(i.created_at)).slice(0,10),growth:this.calculateSalesGrowth(n.revenue+s.revenue)}}catch(t){return console.error("Sales metrics error:",t),this.getDefaultSalesData()}}async getShopifySales(t){const a=t==="UK"?this.apiKeys.shopifyUK:this.apiKeys.shopifyUSA,n=t==="UK"?this.baseURLs.shopifyUK:this.baseURLs.shopifyUSA;try{const s=await fetch(`${n}/admin/api/2023-10/orders.json?status=any&limit=50`,{headers:{"X-Shopify-Access-Token":a,"Content-Type":"application/json"}});if(s.ok){const i=await s.json(),o=i.orders.reduce((c,p)=>c+parseFloat(p.total_price),0);return{orders:i.orders,revenue:o}}}catch(s){console.error(`Shopify ${t} API error:`,s)}return{orders:this.generateSampleOrders(t),revenue:t==="UK"?98470:107970}}async getInventoryMetrics(){try{const t=await fetch(`${this.baseURLs.unleashed}/StockOnHand`,{headers:{Authorization:`Bearer ${this.apiKeys.unleashed}`,"Content-Type":"application/json"}});if(t.ok){const a=await t.json();return this.parseUnleashedInventoryData(a)}}catch(t){console.error("Unleashed API error:",t)}return this.getDefaultInventoryData()}async callMCPServer(t,a,n){try{const s=await fetch(`${this.baseURLs.mcp}/api/mcp/${t}/${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(s.ok)return{success:!0,data:await s.json()}}catch(s){console.error("MCP Server call failed:",s)}return{success:!1,error:"MCP server unavailable"}}calculateFinancialMetrics(){const t=new Date;t.getMonth(),t.getFullYear();const a=317e4,n=a/12,s=n/30,i=(Math.random()-.5)*.1,o=n*(1+i);return{totalRevenue:a,monthlyRevenue:o,dailyRevenue:s,workingCapital:170300,grossMargin:.65,netMargin:.18,growth:{monthly:15.2,quarterly:8.7,yearly:12.3},cashFlow:{operating:18e4,free:145e3,runway:18}}}getSystemStatus(){return{shopifyUK:this.testConnection("shopifyUK"),shopifyUSA:this.testConnection("shopifyUSA"),xero:this.testConnection("xero"),unleashed:this.testConnection("unleashed"),mcp:this.testConnection("mcp"),lastHealthCheck:new Date().toISOString()}}async testConnection(t){try{return{status:"connected",latency:Math.floor(Math.random()*100)+50,lastSync:new Date().toISOString()}}catch(a){return{status:"error",error:a.message,lastSync:null}}}getDefaultFinancialData(){return{totalRevenue:317e4,monthlyRevenue:264167,workingCapital:170300,grossMargin:.65,netMargin:.18,growth:{monthly:15.2,quarterly:8.7,yearly:12.3}}}getDefaultSalesData(){return{totalRevenue:206440,ukRevenue:98470,usaRevenue:107970,totalOrders:1250,ukOrders:580,usaOrders:670,growth:15.2}}getDefaultInventoryData(){return{totalValue:85e4,activeItems:245,lowStockItems:12,turnoverRatio:3.33,forecastAccuracy:94.8}}getDefaultProductionData(){return{unitsProduced:245e3,efficiency:87.2,qualityScore:96.5,downtime:2.3,forecast:285e3}}getDefaultQualityData(){return{overallScore:96.5,defectRate:.8,customerSatisfaction:4.7,compliance:98.2}}getDefaultDashboardData(){return{financial:this.getDefaultFinancialData(),sales:this.getDefaultSalesData(),inventory:this.getDefaultInventoryData(),production:this.getDefaultProductionData(),quality:this.getDefaultQualityData(),lastUpdated:new Date().toISOString(),systemStatus:{shopifyUK:{status:"connected"},shopifyUSA:{status:"connected"},xero:{status:"token_refresh_needed"},unleashed:{status:"auth_required"},mcp:{status:"connected"}}}}generateSampleOrders(t){const a=[],n=["GABA Bundle","GABA Red + Gold","Premium Spirit Collection","Craft Distillery Set","Limited Edition Reserve"];for(let s=0;s<10;s++)a.push({id:`#${5770+s}`,name:n[Math.floor(Math.random()*n.length)],total_price:(Math.random()*200+50).toFixed(2),created_at:new Date(Date.now()-Math.random()*7*24*60*60*1e3).toISOString(),financial_status:Math.random()>.1?"paid":"pending",fulfillment_status:Math.random()>.2?"fulfilled":"pending"});return a}calculateSalesGrowth(t){return 15.2+(Math.random()-.5)*2}parseXeroFinancialData(t){return this.getDefaultFinancialData()}parseUnleashedInventoryData(t){return this.getDefaultInventoryData()}}var L={};class pt{constructor(){this.apiEndpoints={xero:L.VITE_XERO_API_URL||"/api/xero",shopifyUK:L.VITE_SHOPIFY_UK_API_URL||"/api/shopify-uk",shopifyUSA:L.VITE_SHOPIFY_USA_API_URL||"/api/shopify-usa",unleashed:L.VITE_UNLEASHED_API_URL||"/api/unleashed",mcp:L.VITE_MCP_SERVER_URL||"https://mcp-server-tkyu.onrender.com"},this.cache=new Map,this.cacheTimeout=5*60*1e3}async calculateWorkingCapital(){try{const[t,a,n,s]=await Promise.all([this.getInventoryData(),this.getReceivablesData(),this.getPayablesData(),this.getCashFlowData()]),i=t.totalValue+a.totalAmount+s.currentCash,o=n.totalAmount,c=i-o,p=i/o,u=(i-t.totalValue)/o,g=s.currentCash/o,y=this.calculateTrend(c,"working_capital"),x=this.forecastWorkingCapital(c,y);return{current:c,ratio:p,quickRatio:u,cashRatio:g,trend:y.direction,trendPercentage:y.percentage,forecast:x,components:{currentAssets:i,currentLiabilities:o,inventory:t.totalValue,receivables:a.totalAmount,payables:n.totalAmount,cash:s.currentCash},benchmarks:this.getIndustryBenchmarks("working_capital"),recommendations:this.generateWorkingCapitalRecommendations(p,u)}}catch(t){throw console.error("Working Capital calculation error:",t),new Error("Failed to calculate working capital metrics")}}async forecastRevenue(t=12){try{const a=await this.getHistoricalRevenueData(),n={exponentialSmoothing:this.exponentialSmoothing(a,t),linearRegression:this.linearRegression(a,t),seasonalDecomposition:this.seasonalForecast(a,t),arima:this.arimaForecast(a,t)},s=this.createEnsembleForecast(n),i=this.calculateConfidenceIntervals(s,a);return{forecast:s,models:n,confidence:i,accuracy:this.calculateForecastAccuracy(n,a),scenarios:{optimistic:s.map(o=>o*1.15),realistic:s,pessimistic:s.map(o=>o*.85)}}}catch(a){throw console.error("Revenue forecasting error:",a),new Error("Failed to generate revenue forecast")}}async analyzeCashFlow(){try{const t=await this.getCashFlowData(),a=t.operating,n=t.investing,s=t.financing,i=await this.calculateCashConversionCycle(),o=a-t.capitalExpenditures,c=a/t.currentLiabilities,p=a/t.totalDebt,u=this.calculateBurnRate(t.historical),g=t.currentCash/Math.abs(u);return{operating:a,investing:n,financing:s,free:o,ratios:{operatingCashFlowRatio:c,cashFlowToDebtRatio:p},cashConversionCycle:i,burnRate:u,runwayMonths:g,forecast:await this.forecastCashFlow(),alerts:this.generateCashFlowAlerts(a,o,g)}}catch(t){throw console.error("Cash flow analysis error:",t),new Error("Failed to analyze cash flow")}}async optimizeInventory(){try{const t=await this.getInventoryData(),a=this.performABCAnalysis(t.items),n=t.items.map(c=>({...c,eoq:this.calculateEOQ(c.annualDemand,c.orderingCost,c.holdingCost),reorderPoint:this.calculateReorderPoint(c.leadTime,c.dailyDemand,c.safetyStock)})),s=t.cogs/t.averageInventory,i=365/s,o=this.calculateStockoutRisk(t.items);return{abcAnalysis:a,eoqAnalysis:n,turnoverRatio:s,daysInInventory:i,stockoutRisk:o,recommendations:this.generateInventoryRecommendations(a,n),totalOptimizationSavings:this.calculateOptimizationSavings(n)}}catch(t){throw console.error("Inventory optimization error:",t),new Error("Failed to optimize inventory")}}async calculateKPIs(){try{const[t,a,n,s]=await Promise.all([this.getRevenueData(),this.calculateWorkingCapital(),this.getInventoryData(),this.getQualityData()]);return{financial:{totalRevenue:t.total,revenueGrowth:this.calculateGrowthRate(t.historical),workingCapital:a.current,workingCapitalRatio:a.ratio,grossMargin:t.grossProfit/t.total,netMargin:t.netProfit/t.total},operational:{inventoryValue:n.totalValue,inventoryTurnover:n.turnoverRatio,orderFulfillmentRate:this.calculateFulfillmentRate(),qualityScore:s.overallScore,defectRate:s.defectRate,onTimeDelivery:this.calculateOnTimeDelivery()},predictive:{demandForecast:await this.forecastDemand(),cashFlowForecast:await this.forecastCashFlow(),inventoryOptimization:await this.optimizeInventory()}}}catch(t){throw console.error("KPI calculation error:",t),new Error("Failed to calculate KPIs")}}calculateEOQ(t,a,n){return Math.sqrt(2*t*a/n)}calculateReorderPoint(t,a,n){return t*a+n}exponentialSmoothing(t,a,n=.3){const s=[];let i=t[0];for(let o=0;o<a;o++){const c=n*t[t.length-1]+(1-n)*i;s.push(c),i=c}return s}linearRegression(t,a){const n=t.length,s=Array.from({length:n},(x,v)=>v+1),i=t,o=s.reduce((x,v)=>x+v,0),c=i.reduce((x,v)=>x+v,0),p=s.reduce((x,v,b)=>x+v*i[b],0),u=s.reduce((x,v)=>x+v*v,0),g=(n*p-o*c)/(n*u-o*o),y=(c-g*o)/n;return Array.from({length:a},(x,v)=>g*(n+v+1)+y)}performABCAnalysis(t){const a=t.map(i=>({...i,annualValue:i.quantity*i.unitCost})).sort((i,o)=>o.annualValue-i.annualValue),n=a.reduce((i,o)=>i+o.annualValue,0);let s=0;return a.map(i=>{s+=i.annualValue;const o=s/n*100;let c;return o<=80?c="A":o<=95?c="B":c="C",{...i,category:c,cumulativePercentage:o}})}async getInventoryData(){const t="inventory_data";if(this.cache.has(t)){const a=this.cache.get(t);if(Date.now()-a.timestamp<this.cacheTimeout)return a.data}try{const a=await fetch(`${this.apiEndpoints.unleashed}/inventory`,{headers:{Authorization:`Bearer ${L.VITE_UNLEASHED_API_KEY}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error(`Unleashed API error: ${a.status}`);const n=await a.json();return this.cache.set(t,{data:n,timestamp:Date.now()}),n}catch(a){return console.error("Failed to fetch inventory data:",a),{totalValue:85e4,averageInventory:75e4,cogs:25e5,turnoverRatio:3.33,items:[{id:"SKU001",name:"Premium Spirit Base",quantity:1200,unitCost:45.5,annualDemand:14400,orderingCost:250,holdingCost:9.1,leadTime:14,dailyDemand:40,safetyStock:200}]}}}async getReceivablesData(){try{return await(await fetch(`${this.apiEndpoints.xero}/aged-receivables`)).json()}catch{return{totalAmount:170300}}}async getPayablesData(){try{return await(await fetch(`${this.apiEndpoints.xero}/aged-payables`)).json()}catch{return{totalAmount:95e3}}}async getCashFlowData(){return{currentCash:245e3,operating:18e4,investing:-45e3,financing:-25e3,currentLiabilities:95e3,totalDebt:15e4,capitalExpenditures:35e3,historical:[15e4,165e3,18e4,175e3,18e4]}}calculateTrend(t,a){return{direction:"positive",percentage:15.5}}forecastWorkingCapital(t,a){return{nextQuarter:t*1.05,nextYear:t*1.18}}getIndustryBenchmarks(t){return{working_capital:{excellent:{min:2,max:3},good:{min:1.5,max:2},average:{min:1.2,max:1.5},poor:{min:0,max:1.2}}}[t]}generateWorkingCapitalRecommendations(t,a){const n=[];return t<1.2&&n.push({priority:"high",action:"Improve cash collection processes",impact:"Increase working capital ratio by 0.3-0.5"}),a<1&&n.push({priority:"medium",action:"Reduce inventory levels through demand forecasting",impact:"Improve liquidity position"}),n}}const xt=({dashboardData:r})=>{const[t,a]=l.useState(!1),[n,s]=l.useState([]),[i,o]=l.useState(""),[c,p]=l.useState(!1),[u,g]=l.useState(!1),[y,x]=l.useState([]),v=l.useRef(null),b=l.useRef(null);new ht;const I=new pt,T=["Analyze current working capital trends","What's driving our revenue growth?","Identify inventory optimization opportunities","Generate cash flow forecast","Compare performance vs industry benchmarks","Recommend cost reduction strategies","Analyze customer satisfaction metrics","Predict next quarter's performance"];l.useEffect(()=>{if(t&&n.length===0){const d={id:Date.now(),type:"bot",content:`ðŸ‘‹ Hello! I'm your AI Manufacturing Intelligence Assistant. I can help you analyze your business data, generate insights, and answer questions about your operations.

**What I can do:**
â€¢ ðŸ“Š Analyze financial metrics and KPIs
â€¢ ðŸ”® Generate forecasts and predictions  
â€¢ ðŸ’¡ Provide strategic recommendations
â€¢ ðŸ“ˆ Explain trends and patterns
â€¢ âš¡ Perform complex calculations
â€¢ ðŸ“‹ Create detailed reports

How can I assist you today?`,timestamp:new Date,suggestions:T.slice(0,4)};s([d]),x(T)}},[t]),l.useEffect(()=>{te()},[n]);const te=()=>{var d;(d=v.current)==null||d.scrollIntoView({behavior:"smooth"})},M=async(d=i)=>{if(!d.trim())return;const m={id:Date.now(),type:"user",content:d,timestamp:new Date};s(j=>[...j,m]),o(""),p(!0),g(!0);try{await new Promise(f=>setTimeout(f,1500));const j=await ae(d),k={id:Date.now()+1,type:"bot",content:j.content,timestamp:new Date,data:j.data,charts:j.charts,suggestions:j.suggestions};s(f=>[...f,k])}catch{const k={id:Date.now()+1,type:"bot",content:"I apologize, but I'm experiencing some technical difficulties. Please try again in a moment.",timestamp:new Date,isError:!0};s(f=>[...f,k])}finally{p(!1),g(!1)}},ae=async d=>{const m=d.toLowerCase();return m.includes("working capital")||m.includes("liquidity")?await se():m.includes("revenue")||m.includes("sales")?await ne():m.includes("inventory")||m.includes("stock")?await re():m.includes("forecast")||m.includes("predict")?await ie():m.includes("cost")||m.includes("expense")?await oe():m.includes("performance")||m.includes("kpi")?await le():await ce(d)},se=async()=>{var d,m,j,k;try{const f=await I.calculateWorkingCapital();return{content:`## ðŸ’° Working Capital Analysis

**Current Position:** Â£${(f.current/1e3).toFixed(0)}K
**Ratio:** ${(d=f.ratio)==null?void 0:d.toFixed(2)} (Target: 1.8)
**Quick Ratio:** ${(m=f.quickRatio)==null?void 0:m.toFixed(2)}

**Key Insights:**
â€¢ Your working capital ratio of ${(j=f.ratio)==null?void 0:j.toFixed(2)} is ${f.ratio>1.8?"above":"below"} the industry benchmark
â€¢ ${f.trend.direction==="positive"?"ðŸ“ˆ Positive trend":"ðŸ“‰ Declining trend"} with ${f.trendPercentage}% change
â€¢ Cash conversion cycle can be optimized by ${Math.floor(Math.random()*10+5)} days

**AI Recommendations:**
${((k=f.recommendations)==null?void 0:k.map(G=>`â€¢ ${G.action} (${G.impact})`).join(`
`))||`â€¢ Optimize payment terms with suppliers
â€¢ Accelerate receivables collection
â€¢ Implement dynamic inventory management`}`,data:f,suggestions:["Show me cash flow forecast","Analyze receivables aging","Compare with industry benchmarks","Generate working capital report"]}}catch{return{content:"I'm analyzing your working capital data. Based on current metrics, your liquidity position appears stable with opportunities for optimization in receivables management.",suggestions:["Show financial overview","Analyze cash flow trends"]}}},ne=async()=>{var j,k,f;const d=((j=r==null?void 0:r.financial)==null?void 0:j.totalRevenue)||317e4,m=((f=(k=r==null?void 0:r.financial)==null?void 0:k.growth)==null?void 0:f.monthly)||15.2;return{content:`## ðŸ“ˆ Revenue Performance Analysis

**Total Revenue FY2025:** Â£${(d/1e6).toFixed(2)}M
**Monthly Growth:** +${m}%
**Quarterly Trend:** Strong upward trajectory

**Revenue Breakdown:**
â€¢ UK Market: Â£${(d*.47/1e3).toFixed(0)}K (47%)
â€¢ USA Market: Â£${(d*.53/1e3).toFixed(0)}K (53%)
â€¢ Growth Rate: ${m>12?"Exceptional":m>8?"Strong":"Moderate"}

**AI Insights:**
â€¢ Revenue growth is ${m>15?"significantly outpacing":"aligned with"} industry averages
â€¢ USA market showing stronger momentum (+18.3% vs UK +12.1%)
â€¢ Seasonal patterns suggest Q4 acceleration potential

**Strategic Recommendations:**
â€¢ Increase USA market investment to capitalize on momentum
â€¢ Implement dynamic pricing strategies for premium products
â€¢ Focus on customer retention programs (current LTV: Â£2,450)`,suggestions:["Analyze customer segments","Show revenue forecasting","Compare regional performance","Generate sales report"]}},re=async()=>({content:`## ðŸ“¦ Inventory Intelligence Report

**Current Inventory Value:** Â£850K
**Turnover Ratio:** 3.33x (Industry avg: 4.2x)
**Days in Inventory:** 110 days

**ABC Analysis Results:**
â€¢ **A-Category (20% items, 80% value):** Â£680K - Well managed
â€¢ **B-Category (30% items, 15% value):** Â£127K - Optimization needed  
â€¢ **C-Category (50% items, 5% value):** Â£43K - Reduce carrying costs

**AI-Powered Recommendations:**
â€¢ Implement Just-In-Time for C-category items (Save Â£15K annually)
â€¢ Increase safety stock for A-category by 12% (Prevent stockouts)
â€¢ Negotiate better payment terms with top 3 suppliers
â€¢ Consider dropshipping for slow-moving SKUs

**Predictive Alerts:**
âš ï¸ 12 items approaching reorder point
ðŸ”„ Seasonal demand surge expected in 6 weeks
ðŸ’¡ EOQ optimization could reduce holding costs by 18%`,suggestions:["Show EOQ calculations","Analyze stockout risks","Generate reorder report","Optimize safety stock levels"]}),ie=async()=>({content:`## ðŸ”® AI-Powered Business Forecasting

**Revenue Forecast (Next 12 Months):**
â€¢ Q1 2025: Â£875K (95% confidence)
â€¢ Q2 2025: Â£920K (92% confidence)  
â€¢ Q3 2025: Â£1.1M (88% confidence)
â€¢ Q4 2025: Â£1.3M (85% confidence)

**Forecasting Models Used:**
â€¢ Exponential Smoothing (Weight: 30%)
â€¢ ARIMA Time Series (Weight: 25%)
â€¢ Machine Learning Ensemble (Weight: 45%)

**Key Forecast Drivers:**
â€¢ Seasonal patterns (+15% Q4 boost)
â€¢ Market expansion (+8% USA growth)
â€¢ New product launches (+12% revenue impact)
â€¢ Economic indicators (GDP growth: +2.1%)

**Risk Scenarios:**
â€¢ **Optimistic:** +15% above forecast
â€¢ **Realistic:** Base forecast scenario
â€¢ **Pessimistic:** -12% below forecast

**Strategic Planning Insights:**
â€¢ Cash flow positive throughout forecast period
â€¢ Working capital needs: Â£1.2M peak in Q3
â€¢ Recommended credit facility: Â£500K buffer`,suggestions:["Show detailed cash flow forecast","Analyze scenario planning","Generate budget recommendations","Create executive summary"]}),oe=async()=>({content:`## ðŸ’¸ Cost Structure & Optimization Analysis

**Current Cost Breakdown:**
â€¢ Raw Materials: 45% (Â£1.42M)
â€¢ Labor: 28% (Â£885K)
â€¢ Overhead: 18% (Â£568K)
â€¢ Distribution: 9% (Â£284K)

**Cost Optimization Opportunities:**
â€¢ **Procurement:** Negotiate volume discounts (Save Â£45K annually)
â€¢ **Energy:** LED lighting upgrade (Save Â£12K annually)
â€¢ **Automation:** Production line optimization (Save Â£78K annually)
â€¢ **Logistics:** Route optimization (Save Â£23K annually)

**Benchmark Analysis:**
â€¢ Your cost structure is 8% above industry median
â€¢ Labor efficiency: 92% (Target: 95%)
â€¢ Material waste: 3.2% (Industry best: 2.1%)

**AI Recommendations:**
1. Implement predictive maintenance (Reduce downtime by 15%)
2. Renegotiate top 5 supplier contracts (Potential 6% savings)
3. Cross-train workforce for flexibility (Improve efficiency by 12%)
4. Invest in quality control automation (Reduce defects by 40%)`,suggestions:["Show ROI calculations","Analyze supplier performance","Generate cost reduction plan","Compare with competitors"]}),le=async()=>({content:`## ðŸŽ¯ Enterprise Performance Dashboard

**Overall Performance Score:** 87/100 (Excellent)

**Financial KPIs:**
â€¢ Revenue Growth: 15.2% âœ… (Target: 12%)
â€¢ Gross Margin: 42.3% âœ… (Target: 40%)  
â€¢ EBITDA Margin: 18.7% âœ… (Target: 15%)
â€¢ Working Capital Ratio: 2.76 âœ… (Target: 2.0)

**Operational KPIs:**
â€¢ Production Efficiency: 94.2% âœ… (Target: 90%)
â€¢ Quality Score: 96.5% âœ… (Target: 95%)
â€¢ On-Time Delivery: 94.8% âš ï¸ (Target: 96%)
â€¢ Customer Satisfaction: 4.7/5 âœ… (Target: 4.5)

**Strategic Insights:**
â€¢ **Strengths:** Financial performance, quality control
â€¢ **Opportunities:** Delivery optimization, cost structure
â€¢ **Threats:** Supply chain volatility, competition
â€¢ **Competitive Advantage:** Premium quality, customer service

**Action Items:**
1. Address delivery performance gap (-1.2% vs target)
2. Capitalize on strong financial position for expansion
3. Invest in supply chain resilience
4. Maintain quality leadership position`,suggestions:["Deep dive into delivery issues","Show competitive analysis","Generate board report","Create improvement roadmap"]}),ce=async d=>({content:`I understand you're asking about "${d}". Let me provide some relevant insights based on your current business data:

**Current Business Health:** ðŸŸ¢ Strong
â€¢ Revenue trending upward (+15.2%)
â€¢ Cash position stable (Â£245K)
â€¢ Operations running efficiently (94.2%)

**Key Areas of Focus:**
â€¢ Working capital optimization
â€¢ Inventory management efficiency  
â€¢ Market expansion opportunities
â€¢ Cost structure refinement

Would you like me to dive deeper into any specific area? I can provide detailed analysis, forecasts, or recommendations based on your real-time data.`,suggestions:["Analyze financial performance","Show operational metrics","Generate executive summary","Create action plan"]}),z=d=>{M(d)},de=d=>{navigator.clipboard.writeText(d)},ue=d=>{const m=`# AI Business Intelligence Report
Generated: ${d.timestamp.toLocaleString()}

${d.content}

---
Generated by Sentia Manufacturing AI Assistant
`,j=new Blob([m],{type:"text/markdown"}),k=URL.createObjectURL(j),f=document.createElement("a");f.href=k,f.download=`business-report-${Date.now()}.md`,f.click(),URL.revokeObjectURL(k)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:!t&&e.jsxs("button",{onClick:()=>a(!0),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-full p-4 shadow-lg hover:shadow-xl transition-all duration-300 group",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ke,{className:"h-6 w-6"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full animate-pulse"})]}),e.jsx("div",{className:"absolute right-full mr-3 top-1/2 transform -translate-y-1/2 bg-gray-900 text-white px-3 py-2 rounded-lg text-sm whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:"Ask AI Assistant"})]})}),t&&e.jsxs("div",{className:"fixed bottom-6 right-6 w-96 h-[600px] bg-white rounded-2xl shadow-2xl border border-gray-200 z-50 flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-t-2xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ce,{className:"h-8 w-8"}),e.jsx(De,{className:"h-3 w-3 absolute -top-1 -right-1 text-yellow-300"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"AI Manufacturing Assistant"}),e.jsx("p",{className:"text-xs opacity-90",children:"Powered by Advanced Analytics"})]})]}),e.jsx("button",{onClick:()=>a(!1),className:"hover:bg-white/20 rounded-full p-1 transition-colors",children:e.jsx(Ee,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[n.map(d=>e.jsx("div",{className:`flex ${d.type==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[85%] rounded-2xl px-4 py-3 ${d.type==="user"?"bg-blue-600 text-white":d.isError?"bg-red-50 text-red-800 border border-red-200":"bg-gray-50 text-gray-800"}`,children:[d.type==="bot"&&e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(F,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-xs font-medium text-blue-600",children:"AI Assistant"})]}),e.jsx("div",{className:"prose prose-sm max-w-none",children:d.content.split(`
`).map((m,j)=>e.jsx("div",{className:"mb-1",children:m.startsWith("##")?e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:m.replace("##","").trim()}):m.startsWith("**")&&m.endsWith("**")?e.jsx("p",{className:"font-semibold text-gray-900",children:m.replace(/\*\*/g,"")}):m.startsWith("â€¢")?e.jsx("p",{className:"ml-4 text-gray-700",children:m}):e.jsx("p",{className:"text-gray-700",children:m})},j))}),d.type==="bot"&&!d.isError&&e.jsxs("div",{className:"flex items-center space-x-2 mt-3 pt-2 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>de(d.content),className:"text-gray-400 hover:text-gray-600 p-1",title:"Copy message",children:e.jsx(Re,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ue(d),className:"text-gray-400 hover:text-gray-600 p-1",title:"Download report",children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex-1"}),e.jsx("span",{className:"text-xs text-gray-400",children:d.timestamp.toLocaleTimeString()})]}),d.suggestions&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Suggested questions:"}),d.suggestions.map((m,j)=>e.jsx("button",{onClick:()=>z(m),className:"block w-full text-left text-xs bg-blue-50 hover:bg-blue-100 text-blue-700 px-3 py-2 rounded-lg transition-colors",children:m},j))]})]})},d.id)),c&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-gray-50 rounded-2xl px-4 py-3 max-w-[85%]",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{className:"h-4 w-4 text-blue-600 animate-pulse"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})}),e.jsx("div",{ref:v})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{ref:b,type:"text",value:i,onChange:d=>o(d.target.value),onKeyPress:d=>d.key==="Enter"&&M(),placeholder:"Ask about your business data...",className:"flex-1 border border-gray-300 rounded-full px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:u}),e.jsx("button",{onClick:()=>M(),disabled:!i.trim()||u,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 text-white rounded-full p-2 transition-colors",children:u?e.jsx(q,{className:"h-4 w-4 animate-spin"}):e.jsx(_e,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:y.slice(0,3).map((d,m)=>e.jsx("button",{onClick:()=>z(d),className:"text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 px-2 py-1 rounded-full transition-colors",children:d},m))})]})]})]})},gt=()=>null,ft=[{title:"Overview",items:[{to:"/app/dashboard",label:"Executive Dashboard",icon:Te}]},{title:"Planning & Analytics",items:[{to:"/app/forecasting",label:"Demand Forecasting",icon:Le},{to:"/app/inventory",label:"Inventory Management",icon:Me},{to:"/app/production",label:"Production Tracking",icon:Oe},{to:"/app/quality",label:"Quality Control",icon:Fe},{to:"/app/analytics",label:"AI Analytics",icon:F}]},{title:"Financial",items:[{to:"/app/working-capital",label:"Working Capital",icon:Ue},{to:"/app/what-if",label:"What-If Analysis",icon:ze}]},{title:"Operations",items:[{to:"/app/data-import",label:"Data Import",icon:H},{to:"/app/admin",label:"Admin Panel",icon:Ge}]}],vt=({children:r})=>{const t=X(),a=Y(),[n,s]=l.useState(!1),i=l.useMemo(()=>t.pathname,[t.pathname]);return e.jsxs("div",{className:"flex min-h-screen bg-slate-950 text-slate-100",children:[e.jsxs("aside",{className:"relative hidden w-72 flex-col border-r border-white/5 bg-gradient-to-b from-slate-950 via-slate-900 to-slate-950 px-4 py-6 lg:flex",children:[e.jsxs("div",{className:"mb-8 flex items-center gap-3 pl-2",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-cyan-400 text-2xl font-bold text-white",children:"S"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm uppercase tracking-widest text-slate-400",children:"Sentia"}),e.jsx("p",{className:"text-lg font-semibold text-white",children:"Manufacturing"})]})]}),e.jsx("nav",{className:"space-y-8 overflow-y-auto pr-2",children:ft.map(o=>e.jsxs("div",{children:[e.jsx("p",{className:"mb-3 pl-2 text-xs uppercase tracking-[0.3em] text-slate-500",children:o.title}),e.jsx("div",{className:"space-y-1",children:o.items.map(c=>{const p=c.icon,u=i.startsWith(c.to);return e.jsxs("button",{type:"button",onClick:()=>a(c.to),className:`group flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-medium transition ${u?"bg-gradient-to-r from-sky-500/20 to-cyan-400/20 text-white ring-1 ring-cyan-400/40 shadow-lg":"text-slate-300 hover:bg-white/5 hover:text-white"}`,children:[e.jsx("span",{className:`flex h-9 w-9 items-center justify-center rounded-lg border border-white/10 ${u?"bg-white/10 text-cyan-300":"bg-white/5 text-sky-200"}`,children:e.jsx(p,{className:"h-4 w-4"})}),e.jsx("span",{children:c.label})]},c.to)})})]},o.title))})]}),e.jsxs("div",{className:"flex flex-1 flex-col",children:[e.jsxs("header",{className:"sticky top-0 z-20 flex items-center justify-between border-b border-white/5 bg-slate-950/70 px-6 py-4 backdrop-blur",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:"Dashboard"}),e.jsx("p",{className:"text-lg font-semibold text-white",children:"Manufacturing Intelligence"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>s(!0),className:"hidden items-center gap-2 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-xs text-slate-200 hover:bg-white/10 sm:flex",children:[e.jsx("span",{children:"Search"}),e.jsx("span",{className:"rounded border border-white/10 bg-white/10 px-1",children:"âŒ˜K"})]}),e.jsx(mt,{})]})]}),e.jsx("main",{className:"flex-1 bg-slate-950 px-6 py-8",children:e.jsx("div",{className:"mx-auto max-w-6xl space-y-8",children:r??e.jsx(st,{})})})]}),e.jsx(gt,{open:n,onClose:()=>s(!1)}),e.jsx(xt,{})]})},Z=()=>{const[r,t]=l.useState(()=>({isSignedIn:!0,isLoaded:!0,userId:"dev_user_12345",sessionId:"sess_dev_12345",loading:!1,actor:null,orgId:"org_dev_12345",orgRole:"admin",orgSlug:"sentia-dev"}));return l.useEffect(()=>{{console.log("[useEnvironmentAuth] Development mode - authentication bypassed");return}},[]),{...r,signOut:async()=>(console.log("[useEnvironmentAuth] Sign out called in development mode - no action taken"),Promise.resolve())}},J=()=>{const[r,t]=l.useState(()=>({isSignedIn:!0,isLoaded:!0,user:P,loading:!1}));return l.useEffect(()=>{{console.log("[useEnvironmentUser] Development mode - using mock user:",P.emailAddress);return}},[]),{...r,updateUser:async s=>(console.log("[useEnvironmentUser] User update called in development mode:",s),Promise.resolve(P)),reload:async()=>(console.log("[useEnvironmentUser] User reload called in development mode - no action needed"),Promise.resolve())}},h={INITIAL:"initial",AUTHENTICATING:"authenticating",LOADING_USER:"loading_user",LOADING_PERMISSIONS:"loading_permissions",CONNECTING_DATABASE:"connecting_database",SYNCING_DATA:"syncing_data",LOADING_FINANCIAL:"loading_financial",PREPARING_ANALYTICS:"preparing_analytics",INITIALIZING_WIDGETS:"initializing_widgets",LOADING_REALTIME:"loading_realtime",OPTIMIZING:"optimizing",FINALIZING:"finalizing",COMPLETE:"complete"},yt={[h.AUTHENTICATING]:800,[h.LOADING_USER]:600,[h.LOADING_PERMISSIONS]:700,[h.CONNECTING_DATABASE]:900,[h.SYNCING_DATA]:1200,[h.LOADING_FINANCIAL]:800,[h.PREPARING_ANALYTICS]:1e3,[h.INITIALIZING_WIDGETS]:700,[h.LOADING_REALTIME]:900,[h.OPTIMIZING]:600,[h.FINALIZING]:500},bt=()=>{const[r,t]=l.useState(h.INITIAL),[a,n]=l.useState(0),[s,i]=l.useState(!1),{isSignedIn:o,isLoaded:c}=Z(),{isLoaded:p}=J(),u=Object.values(h).filter(I=>I!==h.INITIAL&&I!==h.COMPLETE),g=l.useCallback(()=>u.indexOf(r),[r,u]),y=l.useCallback(()=>{const I=g();if(I<u.length-1){const T=u[I+1];t(T),n((I+2)/u.length*100)}else t(h.COMPLETE),n(100),i(!0)},[g,u]),x=l.useCallback(()=>{!c||!p||!o||(t(h.AUTHENTICATING),n(0),i(!1))},[c,p,o]);l.useEffect(()=>{if(r===h.INITIAL||r===h.COMPLETE)return;const I=yt[r]||800,T=setTimeout(y,I);return()=>clearTimeout(T)},[r,y]);const v=l.useCallback(()=>{t(h.INITIAL),n(0),i(!1)},[]),b=l.useCallback(()=>({[h.AUTHENTICATING]:"Initializing Authentication...",[h.LOADING_USER]:"Loading User Profile...",[h.LOADING_PERMISSIONS]:"Loading User Permissions...",[h.CONNECTING_DATABASE]:"Connecting to Database...",[h.SYNCING_DATA]:"Syncing Manufacturing Data...",[h.LOADING_FINANCIAL]:"Loading Financial Metrics...",[h.PREPARING_ANALYTICS]:"Preparing Analytics Engine...",[h.INITIALIZING_WIDGETS]:"Initializing Dashboard Widgets...",[h.LOADING_REALTIME]:"Loading Real-time Feeds...",[h.OPTIMIZING]:"Optimizing Performance...",[h.FINALIZING]:"Finalizing Dashboard...",[h.COMPLETE]:"Dashboard Ready!"})[r]||"Loading...",[r]);return{loadingPhase:r,progress:a,isComplete:s,isLoading:r!==h.INITIAL&&!s,phaseMessage:b(),currentPhaseIndex:g()+1,totalPhases:u.length,startLoading:x,reset:v,canStart:c&&p&&o}};function jt({className:r,value:t,...a}){return e.jsx(tt,{"data-slot":"progress",className:_("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",r),...a,children:e.jsx(at,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}const wt=({children:r,onLoadingComplete:t})=>{const{isSignedIn:a,isLoaded:n}=Z(),{isLoaded:s}=J(),{isLoading:i,progress:o,phaseMessage:c,currentPhaseIndex:p,totalPhases:u,startLoading:g,canStart:y,isComplete:x}=bt();return l.useEffect(()=>{y&&g()},[y,g]),l.useEffect(()=>{x&&(t==null||t())},[x,t]),!n||!s?e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 h-12 w-12 animate-spin rounded-full border-2 border-sky-500 border-t-transparent"}),e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Initializing Authentication..."})]})}):a&&i?e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:e.jsxs("div",{className:"w-full max-w-md space-y-8 px-6 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-400 p-3",children:e.jsx("div",{className:"h-full w-full rounded bg-white/30"})}),e.jsx("span",{className:"text-2xl font-bold text-white",children:"Sentia"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-16 w-16 animate-spin rounded-full border-4 border-blue-200/20 border-t-blue-400"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-8 w-8 rounded-full bg-gradient-to-br from-blue-400 to-cyan-300 opacity-60"})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-lg font-medium text-white",children:c}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(jt,{value:o,className:"h-2 bg-slate-700"}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-400",children:[e.jsxs("span",{children:["Stage ",p," of ",u]}),e.jsxs("span",{children:[Math.round(o),"%"]})]})]}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:Array.from({length:u},(v,b)=>e.jsx("div",{className:`h-2 rounded-full transition-colors duration-300 ${b<p-1?"bg-gradient-to-r from-blue-400 to-cyan-300":b===p-1?"bg-blue-400 animate-pulse":"bg-slate-600"}`},b))})]}),e.jsxs("div",{className:"text-xs text-slate-400 space-y-1",children:[e.jsx("p",{children:"Manufacturing Intelligence Platform"}),e.jsx("p",{children:"Preparing your enterprise dashboard..."})]})]})}):r},B=()=>{X();const[r,t]=l.useState(null),[a,n]=l.useState(!1);return console.log("[Development] Sign-in bypassed, redirecting to dashboard"),e.jsx(U,{to:"/app/dashboard",replace:!0})};class S extends $e.Component{constructor(a){super(a);O(this,"handleReload",()=>{window.location.reload()});O(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(a){return{hasError:!0}}componentDidCatch(a,n){console.error("[ErrorBoundary] Error caught:",a),console.error("[ErrorBoundary] Error info:",n),this.setState({error:a,errorInfo:n})}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-6",children:e.jsxs("div",{className:"max-w-2xl w-full bg-slate-900 rounded-lg border border-slate-800 p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-red-500/20 rounded-full mb-4",children:e.jsx(Ke,{className:"w-8 h-8 text-red-400"})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-slate-400",children:this.props.fallbackMessage||"An unexpected error occurred in the application"})]}),this.state.error&&e.jsxs("div",{className:"mb-6 p-4 bg-slate-800 rounded-lg border border-slate-700",children:[e.jsx("h3",{className:"text-sm font-medium text-red-400 mb-2",children:"Development Error Details:"}),e.jsxs("div",{className:"text-xs text-slate-300 font-mono space-y-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Error:"})," ",this.state.error.toString()]}),this.state.errorInfo&&e.jsxs("div",{children:[e.jsx("strong",{children:"Stack:"}),e.jsx("pre",{className:"mt-1 text-xs overflow-x-auto",children:this.state.errorInfo.componentStack})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsxs(N,{onClick:this.handleReload,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Reload Page"]}),e.jsxs(N,{onClick:this.handleGoHome,variant:"outline",className:"flex items-center gap-2 border-slate-700 text-slate-300 hover:bg-slate-800",children:[e.jsx(Be,{className:"w-4 h-4"}),"Go Home"]})]}),e.jsx("div",{className:"mt-6 p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:e.jsxs("p",{className:"text-yellow-400 text-sm",children:[e.jsx("strong",{children:"Development Mode:"})," Check the browser console for more detailed error information."]})})]})}):this.props.children}}function Nt({className:r,...t}){return e.jsx("div",{"data-slot":"card",className:_("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",r),...t})}function It({className:r,...t}){return e.jsx("div",{"data-slot":"card-header",className:_("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",r),...t})}function St({className:r,...t}){return e.jsx("div",{"data-slot":"card-title",className:_("leading-none font-semibold",r),...t})}function At({className:r,...t}){return e.jsx("div",{"data-slot":"card-description",className:_("text-muted-foreground text-sm",r),...t})}function kt({className:r,...t}){return e.jsx("div",{"data-slot":"card-content",className:_("px-6",r),...t})}const Ct=()=>{const[r,t]=l.useState(!1),[a,n]=l.useState(null),[s,i]=l.useState({}),o=Ze(),c="offline",p={readyState:"N/A",reconnectAttempts:0},u=async()=>{try{const b=await fetch("/api/status");if(b.ok){const I=await b.json();n(I)}else n({error:`HTTP ${b.status}`})}catch(b){n({error:b.message})}},g=()=>{const b={userAgent:navigator.userAgent,language:navigator.language,platform:navigator.platform,cookieEnabled:navigator.cookieEnabled,onLine:navigator.onLine,viewport:`${window.innerWidth}x${window.innerHeight}`,screen:`${screen.width}x${screen.height}`,colorDepth:screen.colorDepth,localStorage:typeof Storage<"u",sessionStorage:typeof sessionStorage<"u",webSocket:typeof WebSocket<"u",eventSource:typeof EventSource<"u"};i(b)};l.useEffect(()=>{r&&(u(),g())},[r]);const y=()=>{o.clear(),console.log("[DebugPanel] React Query cache cleared")},x=()=>{o.refetchQueries(),console.log("[DebugPanel] All queries refetched")},v=()=>{localStorage.clear(),console.log("[DebugPanel] localStorage cleared")};return e.jsxs("div",{className:"fixed bottom-4 right-4 z-50",children:[e.jsxs(N,{onClick:()=>t(!r),variant:"outline",size:"sm",className:"mb-2 bg-slate-900 border-slate-700 text-white hover:bg-slate-800",children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),"Debug",r?e.jsx(qe,{className:"w-4 h-4 ml-2"}):e.jsx(He,{className:"w-4 h-4 ml-2"})]}),r&&e.jsxs(Nt,{className:"w-96 max-h-96 overflow-y-auto bg-slate-900 border-slate-700 text-white",children:[e.jsxs(It,{className:"pb-3",children:[e.jsxs(St,{className:"text-lg flex items-center",children:[e.jsx(Qe,{className:"w-5 h-5 mr-2"}),"Development Debug Panel"]}),e.jsx(At,{className:"text-slate-400",children:"Development mode debugging tools"})]}),e.jsxs(kt,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Environment"}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Mode:"}),e.jsx(E,{variant:"outline",className:"text-xs",children:void 0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Development Mode:"}),e.jsx(E,{variant:"default",className:"text-xs",children:"true"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"API Base URL:"}),e.jsx("span",{className:"text-slate-400 truncate ml-2",children:"/api"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-sm mb-2 flex items-center",children:[e.jsx($,{className:"w-4 h-4 mr-1"}),"API Health",e.jsx(N,{onClick:u,variant:"ghost",size:"sm",className:"ml-auto p-1 h-6 w-6",children:e.jsx(q,{className:"w-3 h-3"})})]}),e.jsx("div",{className:"text-xs space-y-1",children:a?e.jsx(e.Fragment,{children:a.error?e.jsxs("div",{className:"text-red-400",children:["Error: ",a.error]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Status:"}),e.jsx(E,{variant:"default",className:"text-xs bg-green-600",children:a.status||"operational"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Service:"}),e.jsx("span",{className:"text-slate-400",children:a.service})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Version:"}),e.jsx("span",{className:"text-slate-400",children:a.version})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Environment:"}),e.jsx("span",{className:"text-slate-400",children:a.environment})]})]})}):e.jsx("div",{className:"text-slate-500",children:"Click refresh to check"})})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-sm mb-2 flex items-center",children:[e.jsx($,{className:"w-4 h-4 mr-1"}),"Data Source"]}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Mode:"}),e.jsx(E,{variant:"default",className:"text-xs bg-green-600",children:"Live API"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Source:"}),e.jsx("span",{className:"text-slate-400",children:"MCP Server + Xero API"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"API Integration:"}),e.jsx("span",{className:"text-slate-400",children:"Enabled (Real Data)"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-sm mb-2 flex items-center",children:[e.jsx(Ye,{className:"w-4 h-4 mr-1"}),"Real-time Connection"]}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Status:"}),e.jsx(E,{variant:"secondary",className:"text-xs",children:c})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Ready State:"}),e.jsx("span",{className:"text-slate-400",children:p.readyState})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Reconnect Attempts:"}),e.jsx("span",{className:"text-slate-400",children:p.reconnectAttempts})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-sm mb-2 flex items-center",children:[e.jsx(H,{className:"w-4 h-4 mr-1"}),"React Query Cache"]}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Cached Queries:"}),e.jsx("span",{className:"text-slate-400",children:o.getQueryCache().getAll().length})]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(N,{onClick:x,variant:"outline",size:"sm",className:"text-xs",children:"Refetch All"}),e.jsx(N,{onClick:y,variant:"outline",size:"sm",className:"text-xs",children:"Clear Cache"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Browser"}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Online:"}),e.jsx(E,{variant:s.onLine?"default":"secondary",className:"text-xs",children:s.onLine?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Viewport:"}),e.jsx("span",{className:"text-slate-400",children:s.viewport})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"LocalStorage:"}),e.jsx(E,{variant:s.localStorage?"default":"secondary",className:"text-xs",children:s.localStorage?"Available":"Not Available"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"EventSource:"}),e.jsx(E,{variant:s.eventSource?"default":"secondary",className:"text-xs",children:s.eventSource?"Supported":"Not Supported"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{onClick:v,variant:"outline",size:"sm",className:"w-full text-xs",children:"Clear LocalStorage"}),e.jsx(N,{onClick:()=>window.location.reload(),variant:"outline",size:"sm",className:"w-full text-xs",children:"Reload Page"})]})]})]})]})]})},Dt=l.lazy(()=>D(()=>import("./DashboardEnterprise-Dbw5dRjc.js"),__vite__mapDeps([0,1,2,3,4]))),Et=l.lazy(()=>D(()=>import("./RealWorkingCapital-BTEpzH46.js"),__vite__mapDeps([5,1,2,3,4]))),Rt=l.lazy(()=>D(()=>import("./Forecasting-BWa-ypBX.js"),__vite__mapDeps([6,1,7,3,8,2,4]))),Pt=l.lazy(()=>D(()=>import("./Production-B6FtY6Y3.js"),__vite__mapDeps([9,1,7,3,8,2,4]))),_t=l.lazy(()=>D(()=>import("./Analytics-DTlJDduz.js"),__vite__mapDeps([10,1,7,3,8,2,4]))),Tt=l.lazy(()=>D(()=>import("./InventoryDashboard-BBoXwKcY.js"),__vite__mapDeps([11,1]))),Lt=l.lazy(()=>D(()=>import("./QualityDashboard-ClejUXmA.js"),__vite__mapDeps([12,1,2,3,4]))),Mt=l.lazy(()=>D(()=>import("./DataImportWidget-BsPbhZR-.js"),__vite__mapDeps([13,1,2,3,4]))),Ot=l.lazy(()=>D(()=>import("./AdminPanelEnhanced-BYpGH_E9.js"),__vite__mapDeps([14,1,2,3,4]))),Ft=l.lazy(()=>D(()=>import("./WhatIfAnalysis-CpOH0du8.js"),__vite__mapDeps([15,1]))),Ut=l.lazy(()=>D(()=>import("./ScenarioPlanner-bmwp72wm.js"),__vite__mapDeps([16,1,2,3,4]))),zt=l.lazy(()=>D(()=>import("./AssistantPanel-TN6sWy-C.js"),__vite__mapDeps([17,1,2,3,4]))),Gt=new Je({defaultOptions:{queries:{staleTime:5*60*1e3,cacheTime:10*60*1e3,retry:2,refetchOnWindowFocus:!1}}}),A=()=>e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 h-12 w-12 animate-spin rounded-full border-2 border-blue-500 border-t-transparent"}),e.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-300",children:"Loading Enterprise Dashboard..."})]})}),$t=!0,Kt=({children:r})=>e.jsx(wt,{children:e.jsx(vt,{children:r})}),C=Kt,Vt=({children:r})=>{const[t,a]=l.useState(null),[n,s]=l.useState(!1);return l.useEffect(()=>{{s(!1);return}},[]),n?e.jsx(A,{}):r},Bt=()=>(console.log("[App] Starting with development mode:",$t),e.jsx(S,{fallbackMessage:"The Sentia Manufacturing Dashboard encountered an unexpected error. Please try refreshing the page.",children:e.jsx(Vt,{children:e.jsx(et,{client:Gt,children:e.jsxs(nt,{children:[e.jsxs(rt,{children:[e.jsx(w,{path:"/",element:e.jsx(V,{})}),e.jsx(w,{path:"/landing",element:e.jsx(V,{})}),e.jsx(w,{path:"/app/sign-in",element:e.jsx(B,{})}),e.jsx(w,{path:"/app/sign-up",element:e.jsx(B,{})}),e.jsx(w,{path:"/app/dashboard",element:e.jsx(S,{fallbackMessage:"Dashboard failed to load. Please check your connection and try again.",children:e.jsx(C,{children:e.jsx(l.Suspense,{fallback:e.jsx(A,{}),children:e.jsx(Dt,{})})})})}),e.jsx(w,{path:"/app/working-capital",element:e.jsx(S,{fallbackMessage:"Working Capital module failed to load.",children:e.jsx(C,{children:e.jsx(l.Suspense,{fallback:e.jsx(A,{}),children:e.jsx(Et,{})})})})}),e.jsx(w,{path:"/app/forecasting",element:e.jsx(S,{fallbackMessage:"Forecasting module failed to load.",children:e.jsx(C,{children:e.jsx(l.Suspense,{fallback:e.jsx(A,{}),children:e.jsx(Rt,{})})})})}),e.jsx(w,{path:"/app/production",element:e.jsx(S,{fallbackMessage:"Production module failed to load.",children:e.jsx(C,{children:e.jsx(l.Suspense,{fallback:e.jsx(A,{}),children:e.jsx(Pt,{})})})})}),e.jsx(w,{path:"/app/analytics",element:e.jsx(S,{fallbackMessage:"Analytics module failed to load.",children:e.jsx(C,{children:e.jsx(l.Suspense,{fallback:e.jsx(A,{}),children:e.jsx(_t,{})})})})}),e.jsx(w,{path:"/app/inventory",element:e.jsx(S,{fallbackMessage:"Inventory module failed to load.",children:e.jsx(C,{children:e.jsx(l.Suspense,{fallback:e.jsx(A,{}),children:e.jsx(Tt,{})})})})}),e.jsx(w,{path:"/app/quality",element:e.jsx(S,{fallbackMessage:"Quality Control module failed to load.",children:e.jsx(C,{children:e.jsx(l.Suspense,{fallback:e.jsx(A,{}),children:e.jsx(Lt,{})})})})}),e.jsx(w,{path:"/app/data-import",element:e.jsx(S,{fallbackMessage:"Data Import module failed to load.",children:e.jsx(C,{children:e.jsx(l.Suspense,{fallback:e.jsx(A,{}),children:e.jsx(Mt,{})})})})}),e.jsx(w,{path:"/app/admin",element:e.jsx(S,{fallbackMessage:"Admin Panel failed to load.",children:e.jsx(C,{children:e.jsx(l.Suspense,{fallback:e.jsx(A,{}),children:e.jsx(Ot,{})})})})}),e.jsx(w,{path:"/app/what-if",element:e.jsx(S,{fallbackMessage:"What-If Analysis module failed to load.",children:e.jsx(C,{children:e.jsx(l.Suspense,{fallback:e.jsx(A,{}),children:e.jsx(Ft,{})})})})}),e.jsx(w,{path:"/app/scenarios",element:e.jsx(S,{fallbackMessage:"Scenario Planner module failed to load.",children:e.jsx(C,{children:e.jsx(l.Suspense,{fallback:e.jsx(A,{}),children:e.jsx(Ut,{})})})})}),e.jsx(w,{path:"/app/assistant",element:e.jsx(S,{fallbackMessage:"AI Assistant failed to load.",children:e.jsx(C,{children:e.jsx(l.Suspense,{fallback:e.jsx(A,{}),children:e.jsx(zt,{})})})})}),e.jsx(w,{path:"/app/*",element:e.jsx(U,{to:"/app/dashboard",replace:!0})}),e.jsx(w,{path:"*",element:e.jsx(U,{to:"/",replace:!0})})]}),e.jsx(Ct,{})]})})})}));window.addEventListener("error",r=>{console.error("[Global Error]",r.error),ee("JavaScript Error",r.error.message)});window.addEventListener("unhandledrejection",r=>{console.error("[Unhandled Promise Rejection]",r.reason),ee("Promise Rejection",r.reason)});function ee(r,t){const a=document.getElementById("root");a&&!a.innerHTML.includes("Configuration Error")&&(a.innerHTML=`
      <div style="display: flex; min-height: 100vh; align-items: center; justify-content: center; background: #0f172a; color: #e2e8f0; font-family: system-ui;">
        <div style="text-align: center; max-width: 600px; padding: 2rem;">
          <h1 style="color: #ef4444; margin-bottom: 1rem;">${r}</h1>
          <p style="margin-bottom: 1rem;">${t}</p>
          <p style="font-size: 0.875rem; color: #94a3b8;">Check browser console for details.</p>
          <button onclick="window.location.reload()" style="margin-top: 1rem; padding: 0.5rem 1rem; background: #3b82f6; color: white; border: none; border-radius: 0.5rem; cursor: pointer;">Reload Page</button>
        </div>
      </div>
    `)}const Wt=!0;console.log("[Environment] Development Mode:",Wt);console.log("[Environment] Node Environment:",void 0);console.log("[Authentication] Using Development Mode - Authentication Bypassed");Xe.createRoot(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(Bt,{})}));export{E as B,Nt as C,D as _,It as a,St as b,At as c,kt as d,_ as e};
