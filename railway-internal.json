{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "NIXPACKS",
    "buildCommand": "npm ci && npm run build",
    "watchPatterns": [
      "src/pages/EnhancedDashboard.jsx",
      "src/components/widgets/AgentMonitoringWidget.jsx",
      "src/components/widgets/**/*.jsx",
      "dashboard-update-agent.cjs"
    ]
  },
  "deploy": {
    "startCommand": "npm start",
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 3
  },
  "environments": {
    "internal": {
      "variables": {
        "NODE_ENV": "production",
        "VITE_INTERNAL_DASHBOARD": "true",
        "VITE_DASHBOARD_REFRESH_RATE": "5000",
        "VITE_AGENT_MONITORING": "true",
        "VITE_LIVE_UPDATES": "true",
        "VITE_APP_TITLE": "Sentia Manufacturing Dashboard - Internal",
        "VITE_APP_VERSION": "2.0.0-internal",
        "PORT": "4501"
      }
    }
  },
  "services": [
    {
      "name": "sentia-dashboard-internal",
      "source": {
        "repo": "The-social-drink-company/sentia-manufacturing-dashboard",
        "branch": "internal"
      },
      "variables": {
        "NODE_ENV": "production",
        "VITE_INTERNAL_DASHBOARD": "true",
        "VITE_DASHBOARD_REFRESH_RATE": "5000",
        "VITE_AGENT_MONITORING": "true",
        "VITE_LIVE_UPDATES": "true",
        "VITE_APP_TITLE": "Sentia Manufacturing Dashboard - Internal",
        "VITE_APP_VERSION": "2.0.0-internal",
        "PORT": "4501"
      }
    }
  ]
}