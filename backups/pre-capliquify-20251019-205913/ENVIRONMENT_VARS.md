# Environment Variables Reference

**Backup Date**: October 19, 2025 20:59:13 UTC
**Purpose**: Environment variable inventory (VALUES NOT INCLUDED FOR SECURITY)

---

## ‚ö†Ô∏è Security Notice

**This file lists environment variable NAMES only**. Actual values are stored securely in:
- Render dashboard (per-service environment variables)
- Clerk dashboard (API keys)
- `.env.local` files (excluded from git)

**NEVER commit actual secret values to git!**

---

## üéØ Frontend Environment Variables

**Service**: sentia-frontend-prod
**Platform**: Render Web Service
**Location**: https://dashboard.render.com ‚Üí sentia-frontend-prod ‚Üí Environment

### Required Variables

| Variable | Purpose | Example Value | Source |
|----------|---------|---------------|--------|
| `VITE_CLERK_PUBLISHABLE_KEY` | Clerk frontend authentication | `pk_live_Y2xlcm...` | Clerk Dashboard |
| `VITE_API_BASE_URL` | Backend API endpoint | `https://sentia-backend-prod.onrender.com` | Render service URL |
| `VITE_DEVELOPMENT_MODE` | Development bypass mode | `false` | Manual config |
| `VITE_APP_TITLE` | Application title | `Sentia Manufacturing` | Manual config |
| `VITE_APP_VERSION` | Version display | `2.0.0-bulletproof` | package.json |

### Optional Variables

| Variable | Purpose | Default |
|----------|---------|---------|
| `VITE_LOG_LEVEL` | Logging verbosity | `info` |
| `VITE_ENABLE_ANALYTICS` | Analytics tracking | `false` |

---

## üîß Backend Environment Variables

**Service**: sentia-backend-prod
**Platform**: Render Web Service
**Location**: https://dashboard.render.com ‚Üí sentia-backend-prod ‚Üí Environment

### Required Variables

| Variable | Purpose | Example Value | Source |
|----------|---------|---------------|--------|
| `DATABASE_URL` | PostgreSQL connection string | `postgresql://user:pass@host/db` | Render PostgreSQL (auto-injected) |
| `CLERK_SECRET_KEY` | Clerk backend authentication | `sk_live_3a7xk...` (rotated Oct 19) | Clerk Dashboard |
| `NODE_ENV` | Node environment | `production` | Render (auto-set) |
| `PORT` | Server port | `10000` | Render (auto-set) |

### Optional Variables

| Variable | Purpose | Default |
|----------|---------|---------|
| `CORS_ORIGINS` | Allowed CORS origins | `https://capliquify.com` |
| `LOG_LEVEL` | Logging verbosity | `info` |
| `SESSION_SECRET` | Session encryption key | (auto-generated) |
| `REDIS_URL` | Redis cache connection | (not configured) |

### External API Integrations

| Variable | Purpose | Status |
|----------|---------|--------|
| `XERO_CLIENT_ID` | Xero API client ID | ‚úÖ Configured |
| `XERO_CLIENT_SECRET` | Xero API secret | ‚úÖ Configured |
| `SHOPIFY_API_KEY` | Shopify API key | ‚úÖ Configured |
| `SHOPIFY_API_SECRET` | Shopify API secret | ‚úÖ Configured |
| `AMAZON_SP_API_ACCESS_KEY` | Amazon SP-API access | ‚úÖ Configured |
| `AMAZON_SP_API_SECRET_KEY` | Amazon SP-API secret | ‚úÖ Configured |
| `UNLEASHED_API_ID` | Unleashed ERP API ID | ‚úÖ Configured |
| `UNLEASHED_API_KEY` | Unleashed ERP API key | ‚úÖ Configured |

---

## ü§ñ MCP Server Environment Variables

**Service**: sentia-mcp-prod
**Platform**: Render Web Service
**Location**: https://dashboard.render.com ‚Üí sentia-mcp-prod ‚Üí Environment

### Required Variables

| Variable | Purpose | Example Value | Source |
|----------|---------|---------------|--------|
| `PORT` | Server port | `10000` | Render (auto-set) |
| `NODE_ENV` | Node environment | `production` | Render (auto-set) |
| `DATABASE_URL` | PostgreSQL connection | (same as backend) | Render PostgreSQL |

### Optional Variables

| Variable | Purpose | Default |
|----------|---------|---------|
| `MCP_LOG_LEVEL` | MCP logging verbosity | `info` |
| `MCP_MAX_CONNECTIONS` | Max concurrent connections | `100` |

---

## üóÑÔ∏è Database Environment Variables

**Service**: PostgreSQL 17
**Platform**: Render PostgreSQL
**Location**: https://dashboard.render.com ‚Üí PostgreSQL ‚Üí Info

### Auto-Injected Variables

| Variable | Purpose | Notes |
|----------|---------|-------|
| `DATABASE_URL` | Full connection string | Auto-injected to all connected services |
| `PGHOST` | PostgreSQL host | Auto-generated by Render |
| `PGPORT` | PostgreSQL port | Default: 5432 |
| `PGDATABASE` | Database name | Auto-generated |
| `PGUSER` | Database user | Auto-generated |
| `PGPASSWORD` | Database password | Auto-generated |

### Extensions

- `pgvector` - Vector similarity search (version auto-detected)

---

## üîê Clerk Configuration

**Dashboard**: https://dashboard.clerk.com

### Frontend (Publishable Key)
- **Key Type**: Publishable Key (safe for frontend)
- **Prefix**: `pk_live_`
- **Current Value**: `pk_live_Y2xlcmsuY2FwbGlxdWlmeS5jb20k`
- **Variable Name**: `VITE_CLERK_PUBLISHABLE_KEY`
- **Where Used**: Frontend Render service

### Backend (Secret Key)
- **Key Type**: Secret Key (backend only)
- **Prefix**: `sk_live_`
- **Status**: ‚úÖ Rotated October 19, 2025
- **Variable Name**: `CLERK_SECRET_KEY`
- **Where Used**: Backend Render service

### Domains
- **Frontend URL**: https://clerk.capliquify.com
- **Backend API**: https://api.clerk.com

---

## üìä Configuration Summary

### Total Environment Variables
- **Frontend**: 5 required, 2 optional
- **Backend**: 4 required, 3 optional, 8 API integrations
- **MCP**: 3 required, 2 optional
- **Database**: 6 auto-injected
- **Total**: 33 environment variables

### Security Classification
- **Public** (safe to expose): 5 variables (VITE_APP_*, PORT, NODE_ENV)
- **Internal** (service URLs): 3 variables
- **Secret** (must protect): 25 variables

---

## üîÑ Restoration Procedure

### To Restore Environment Variables:

1. **Go to Render Dashboard**:
   ```
   https://dashboard.render.com
   ```

2. **For Each Service** (frontend, backend, MCP):
   - Select service
   - Click "Environment" tab
   - Add environment variables from this list
   - Click "Save Changes"

3. **Get Secret Values From**:
   - Clerk keys: https://dashboard.clerk.com ‚Üí API Keys
   - Database URL: Auto-injected by Render (don't manually set)
   - API credentials: Original integration dashboards

4. **Trigger Redeploy**:
   - Services auto-redeploy when environment variables change
   - Wait 5-10 minutes for deployment

---

## ‚ö†Ô∏è Critical Notes

### Clerk Secret Key Rotation
- **Date Rotated**: October 19, 2025
- **Reason**: Previous secret key exposed in screenshots
- **Old Key**: Deleted from Clerk dashboard
- **New Key**: Active in Render backend environment
- **Impact**: None (seamless rotation)

### Publishable Key Correction
- **Issue**: Frontend was using secret key (`sk_live_...`) instead of publishable key
- **Fix**: Changed to correct publishable key (`pk_live_Y2xl...`)
- **Status**: üîÑ Deploying to Render frontend (Oct 19, 2025)

### Database Expiration
- **Free Tier Expiration**: November 16, 2025
- **Action Required**: Upgrade to paid plan before expiration
- **Cost**: $7/month for Starter plan
- **Data Loss Risk**: HIGH if not upgraded

---

## üìù Variable Change Log

| Date | Variable | Change | Reason |
|------|----------|--------|--------|
| Oct 19, 2025 | `CLERK_SECRET_KEY` | Rotated | Security - key exposed |
| Oct 19, 2025 | `VITE_CLERK_PUBLISHABLE_KEY` | Changed | Wrong key type (was secret key) |
| Oct 19, 2025 | `VITE_DEVELOPMENT_MODE` | Set to `false` | Force production auth |

---

**Created by**: Claude Code BMAD-METHOD v6a Agent
**Last Updated**: October 19, 2025 20:59:13 UTC
**Purpose**: Pre-CapLiquify transformation backup reference
**Security Level**: PUBLIC (no secrets included)
