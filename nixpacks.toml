# Nixpacks configuration for Express.js app
providers = ["node"]

[phases.setup]
nixPkgs = ["nodejs_20"]

[phases.install]
cmds = ["npm ci --legacy-peer-deps"]

[phases.build]
cmds = ["npm run build"]

[start]
# Ensure PORT is available and start server
cmd = "PORT=${PORT:-3000} node server.js"

[staticAssets]
# IMPORTANT: This disables Caddy static file server
# We're running an Express.js server, not a static site
enabled = false