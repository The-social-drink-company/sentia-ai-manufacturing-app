var m=Object.defineProperty;var u=(s,t,r)=>t in s?m(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var l=(s,t,r)=>u(s,typeof t!="symbol"?t+"":t,r);import{R as o,j as e,o as f,q as j,J as c,x as p}from"./react-vendor-CbFVVgBZ.js";class k extends o.Component{constructor(r){super(r);l(this,"handleRetry",()=>{this.setState({isRetrying:!0,retryCount:this.state.retryCount+1}),setTimeout(()=>{this.setState({hasError:!1,error:null,errorInfo:null,isRetrying:!1})},1e3)});l(this,"handleDismiss",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null,isRetrying:!1,retryCount:0}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,i){this.setState({errorInfo:i})}render(){if(this.state.hasError){const{error:r,errorInfo:i,isRetrying:n,retryCount:d}=this.state,{fallback:a,showDetails:x=!1,title:h="Chart Error"}=this.props;return a&&typeof a=="function"?a(r,this.handleRetry,this.handleDismiss):a&&o.isValidElement(a)?a:e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(f,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:h}),e.jsx("button",{onClick:this.handleDismiss,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-200",children:e.jsx(j,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:r?.message||"An unexpected error occurred while rendering the chart."}),x&&i&&e.jsxs("details",{className:"mt-3",children:[e.jsx("summary",{className:"text-xs text-red-600 dark:text-red-400 cursor-pointer hover:text-red-800 dark:hover:text-red-200",children:"Technical Details"}),e.jsx("pre",{className:"mt-2 text-xs bg-red-100 dark:bg-red-900/40 p-2 rounded border text-red-800 dark:text-red-200 overflow-x-auto",children:r?.stack||i.componentStack})]})]}),e.jsxs("div",{className:"mt-4 flex items-center space-x-3",children:[e.jsx("button",{onClick:this.handleRetry,disabled:n||d>=3,className:`inline-flex items-center space-x-2 px-3 py-1.5 text-xs font-medium rounded-md transition-colors ${n||d>=3?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-600"}`,children:n?e.jsxs(e.Fragment,{children:[e.jsx(c,{className:"w-3 h-3 animate-spin"}),e.jsx("span",{children:"Retrying..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{className:"w-3 h-3"}),e.jsx("span",{children:d>=3?"Max retries reached":`Retry ${d>0?`(${d}/3)`:""}`})]})}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-red-600 dark:text-red-400",children:[e.jsx(p,{className:"w-3 h-3"}),e.jsx("span",{children:"Chart unavailable"})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-red-100 dark:bg-red-900/30 rounded border border-red-200 dark:border-red-700",children:[e.jsx("h4",{className:"text-xs font-medium text-red-800 dark:text-red-200 mb-1",children:"Alternative Actions:"}),e.jsxs("ul",{className:"text-xs text-red-700 dark:text-red-300 space-y-1",children:[e.jsx("li",{children:"• Check your data source connection"}),e.jsx("li",{children:"• Verify chart configuration"}),e.jsx("li",{children:"• Try refreshing the page"}),e.jsx("li",{children:"• Contact support if the issue persists"})]})]})]})]})})}return this.props.children}}export{k as C};
