var T=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"});function D({packageName:e,customMessages:r}){let t=e;function n(i,s){if(!s)return`${t}: ${i}`;let a=i;const c=i.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(const u of c){const l=(s[u[1]]||"").toString();a=a.replace(`{{${u[1]}}}`,l)}return`${t}: ${a}`}const o={...T,...r};return{setPackageName({packageName:i}){return typeof i=="string"&&(t=i),this},setMessages({customMessages:i}){return Object.assign(o,i||{}),this},throwInvalidPublishableKeyError(i){throw new Error(n(o.InvalidPublishableKeyErrorMessage,i))},throwInvalidProxyUrl(i){throw new Error(n(o.InvalidProxyUrlErrorMessage,i))},throwMissingPublishableKeyError(){throw new Error(n(o.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw new Error(n(o.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(i){throw new Error(n(o.MissingClerkProvider,i))},throw(i){throw new Error(n(i))}}}var _=Object.defineProperty,U=Object.getOwnPropertyDescriptor,V=Object.getOwnPropertyNames,K=Object.prototype.hasOwnProperty,Pe=(e,r)=>{for(var t in r)_(e,t,{get:r[t],enumerable:!0})},j=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of V(r))!K.call(e,o)&&o!==t&&_(e,o,{get:()=>r[o],enumerable:!(n=U(r,o))||n.enumerable});return e},Se=(e,r,t)=>(j(e,r,"default"),t),z={strict_mfa:{afterMinutes:10,level:"multi_factor"},strict:{afterMinutes:10,level:"second_factor"},moderate:{afterMinutes:60,level:"second_factor"},lax:{afterMinutes:1440,level:"second_factor"}},F=new Set(["first_factor","second_factor","multi_factor"]),$=new Set(["strict_mfa","strict","moderate","lax"]),B=e=>typeof e=="number"&&e>0,N=e=>F.has(e),W=e=>$.has(e),v=e=>e.replace(/^(org:)*/,"org:"),Y=(e,r)=>{const{orgId:t,orgRole:n,orgPermissions:o}=r;return!e.role&&!e.permission||!t||!n||!o?null:e.permission?o.includes(v(e.permission)):e.role?v(n)===v(e.role):null},p=(e,r)=>{const{org:t,user:n}=H(e),[o,i]=r.split(":"),s=i||o;return o==="org"?t.includes(s):o==="user"?n.includes(s):[...t,...n].includes(s)},J=(e,r)=>{const{features:t,plans:n}=r;return e.feature&&t?p(t,e.feature):e.plan&&n?p(n,e.plan):null},H=e=>{const r=e?e.split(",").map(t=>t.trim()):[];return{org:r.filter(t=>t.split(":")[0].includes("o")).map(t=>t.split(":")[1]),user:r.filter(t=>t.split(":")[0].includes("u")).map(t=>t.split(":")[1])}},G=e=>{if(!e)return!1;const r=o=>typeof o=="string"?z[o]:o,t=typeof e=="string"&&W(e),n=typeof e=="object"&&N(e.level)&&B(e.afterMinutes);return t||n?r.bind(null,e):!1},X=(e,{factorVerificationAge:r})=>{if(!e.reverification||!r)return null;const t=G(e.reverification);if(!t)return null;const{level:n,afterMinutes:o}=t(),[i,s]=r,a=i!==-1?o>i:null,c=s!==-1?o>s:null;switch(n){case"first_factor":return a;case"second_factor":return s!==-1?c:a;case"multi_factor":return s===-1?a:a&&c}},Me=e=>r=>{if(!e.userId)return!1;const t=J(r,e),n=Y(r,e),o=X(r,e);return[t||n,o].some(i=>i===null)?[t||n,o].some(i=>i===!0):[t||n,o].every(i=>i===!0)},Ae=({authObject:{sessionId:e,sessionStatus:r,userId:t,actor:n,orgId:o,orgRole:i,orgSlug:s,signOut:a,getToken:c,has:u,sessionClaims:l},options:{treatPendingAsSignedOut:d=!0}})=>{if(e===void 0&&t===void 0)return{isLoaded:!1,isSignedIn:void 0,sessionId:e,sessionClaims:void 0,userId:t,actor:void 0,orgId:void 0,orgRole:void 0,orgSlug:void 0,has:void 0,signOut:a,getToken:c};if(e===null&&t===null)return{isLoaded:!0,isSignedIn:!1,sessionId:e,userId:t,sessionClaims:null,actor:null,orgId:null,orgRole:null,orgSlug:null,has:()=>!1,signOut:a,getToken:c};if(d&&r==="pending")return{isLoaded:!0,isSignedIn:!1,sessionId:null,userId:null,sessionClaims:null,actor:null,orgId:null,orgRole:null,orgSlug:null,has:()=>!1,signOut:a,getToken:c};if(e&&l&&t&&o&&i)return{isLoaded:!0,isSignedIn:!0,sessionId:e,sessionClaims:l,userId:t,actor:n||null,orgId:o,orgRole:i,orgSlug:s||null,has:u,signOut:a,getToken:c};if(e&&l&&t&&!o)return{isLoaded:!0,isSignedIn:!0,sessionId:e,sessionClaims:l,userId:t,actor:n||null,orgId:null,orgRole:null,orgSlug:null,has:u,signOut:a,getToken:c}},P=e=>typeof atob<"u"&&typeof atob=="function"?atob(e):typeof global<"u"&&global.Buffer?new global.Buffer(e,"base64").toString():e,q=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],S="pk_live_",Z="pk_test_";function M(e){if(!e.endsWith("$"))return!1;const r=e.slice(0,-1);return r.includes("$")?!1:r.includes(".")}function y(e,r={}){if(e=e||"",!e||!b(e)){if(r.fatal&&!e)throw new Error("Publishable key is missing. Ensure that your publishable key is correctly configured. Double-check your environment configuration for your keys, or access them here: https://dashboard.clerk.com/last-active?path=api-keys");if(r.fatal&&!b(e))throw new Error("Publishable key not valid.");return null}const t=e.startsWith(S)?"production":"development";let n;try{n=P(e.split("_")[2])}catch{if(r.fatal)throw new Error("Publishable key not valid: Failed to decode key.");return null}if(!M(n)){if(r.fatal)throw new Error("Publishable key not valid: Decoded key has invalid format.");return null}let o=n.slice(0,-1);return r.proxyUrl?o=r.proxyUrl:t!=="development"&&r.domain&&r.isSatellite&&(o=`clerk.${r.domain}`),{instanceType:t,frontendApi:o}}function b(e=""){try{if(!(e.startsWith(S)||e.startsWith(Z)))return!1;const t=e.split("_");if(t.length!==3)return!1;const n=t[2];if(!n)return!1;const o=P(n);return M(o)}catch{return!1}}function Q(){const e=new Map;return{isDevOrStagingUrl:r=>{if(!r)return!1;const t=typeof r=="string"?r:r.hostname;let n=e.get(t);return n===void 0&&(n=q.some(o=>t.endsWith(o)),e.set(t,n)),n}}}var ee="METHOD_CALLED",re=.1;function Oe(e,r){return{event:ee,eventSamplingRate:re,payload:{method:e,...r}}}var te=()=>{try{return!0}catch{}return!1},Le=e=>{te()&&console.error(`Clerk: ${e}`)};function Re(e,r,t){if(typeof e=="function")return e(r);if(typeof e<"u")return e;if(typeof t<"u")return t}var Ce=(e,...r)=>{const t={...e};for(const n of r)delete t[n];return t},ne=(e,r="5.93.0")=>{if(e)return e;const t=oe(r);return t?t==="snapshot"?"5.93.0":t:ie(r)},oe=e=>e.trim().replace(/^v/,"").match(/-(.+?)(\.|$)/)?.[1],ie=e=>e.trim().replace(/^v/,"").split(".")[0];function se(e){return e?ae(e)||A(e):!0}function ae(e){return/^http(s)?:\/\//.test(e||"")}function A(e){return e.startsWith("/")}function le(e){return e?A(e)?new URL(e,window.location.origin).toString():e:""}function ce(e){if(!e)return"";let r;if(e.match(/^(clerk\.)+\w*$/))r=/(clerk\.)*(?=clerk\.)/;else{if(e.match(/\.clerk.accounts/))return e;r=/^(clerk\.)*/gi}return`clerk.${e.replace(r,"")}`}var ue={initialDelay:125,maxDelayBetweenRetries:0,factor:2,shouldRetry:(e,r)=>r<5,retryImmediately:!1,jitter:!0},fe=100,O=async e=>new Promise(r=>setTimeout(r,e)),L=(e,r)=>r?e*(1+Math.random()):e,de=e=>{let r=0;const t=()=>{const n=e.initialDelay,o=e.factor;let i=n*Math.pow(o,r);return i=L(i,e.jitter),Math.min(e.maxDelayBetweenRetries||i,i)};return async()=>{await O(t()),r++}},he=async(e,r={})=>{let t=0;const{shouldRetry:n,initialDelay:o,maxDelayBetweenRetries:i,factor:s,retryImmediately:a,jitter:c}={...ue,...r},u=de({initialDelay:o,maxDelayBetweenRetries:i,factor:s,jitter:c});for(;;)try{return await e()}catch(l){if(t++,!n(l,t))throw l;a&&t===1?await O(L(fe,c)):await u()}},ve="loadScript cannot be called when document does not exist",ge="loadScript cannot be called without a src";async function pe(e="",r){const{async:t,defer:n,beforeLoad:o,crossOrigin:i,nonce:s}=r||{};return he(()=>new Promise((c,u)=>{e||u(new Error(ge)),(!document||!document.body)&&u(ve);const l=document.createElement("script");i&&l.setAttribute("crossorigin",i),l.async=t||!1,l.defer=n||!1,l.addEventListener("load",()=>{l.remove(),c(l)}),l.addEventListener("error",()=>{l.remove(),u()}),l.src=e,l.nonce=s,o?.(l),document.body.appendChild(l)}),{shouldRetry:(c,u)=>u<=5})}var R="Clerk: Failed to load Clerk",{isDevOrStagingUrl:ye}=Q(),C=D({packageName:"@clerk/shared"});function xe(e){C.setPackageName({packageName:e})}function g(){if(typeof window>"u"||!window.Clerk)return!1;const e=window.Clerk;return typeof e=="object"&&typeof e.load=="function"}function m(e){return new Promise((r,t)=>{let n=!1;const o=(u,l)=>{clearTimeout(u),clearInterval(l)},i=()=>{n||g()&&(n=!0,o(a,c),r(null))},a=setTimeout(()=>{n||(n=!0,o(a,c),g()?r(null):t(new Error(R)))},e);i();const c=setInterval(()=>{if(n){clearInterval(c);return}i()},100)})}var Ie=async e=>{const r=e?.scriptLoadTimeout??15e3;if(g())return null;if(document.querySelector("script[data-clerk-js-script]"))return m(r);if(!e?.publishableKey)return C.throwMissingPublishableKeyError(),null;const n=m(r);return pe(be(e),{async:!0,crossOrigin:"anonymous",nonce:e.nonce,beforeLoad:we(e)}).catch(()=>{throw new Error(R)}),n},be=e=>{const{clerkJSUrl:r,clerkJSVariant:t,clerkJSVersion:n,proxyUrl:o,domain:i,publishableKey:s}=e;if(r)return r;let a="";o&&se(o)?a=le(o).replace(/http(s)?:\/\//,""):i&&!ye(y(s)?.frontendApi||"")?a=ce(i):a=y(s)?.frontendApi||"";const c=t?`${t.replace(/\.+$/,"")}.`:"",u=ne(n);return`https://${a}/npm/@clerk/clerk-js@${u}/dist/clerk.${c}browser.js`},me=e=>{const r={};return e.publishableKey&&(r["data-clerk-publishable-key"]=e.publishableKey),e.proxyUrl&&(r["data-clerk-proxy-url"]=e.proxyUrl),e.domain&&(r["data-clerk-domain"]=e.domain),e.nonce&&(r.nonce=e.nonce),r},we=e=>r=>{const t=me(e);for(const n in t)r.setAttribute(n,t[n])},Te=(e,r,t)=>!e&&t?Ee(t):ke(r),Ee=e=>{const r=e.userId,t=e.user,n=e.sessionId,o=e.sessionStatus,i=e.sessionClaims,s=e.session,a=e.organization,c=e.orgId,u=e.orgRole,l=e.orgPermissions,d=e.orgSlug,f=e.actor,h=e.factorVerificationAge;return{userId:r,user:t,sessionId:n,session:s,sessionStatus:o,sessionClaims:i,organization:a,orgId:c,orgRole:u,orgPermissions:l,orgSlug:d,actor:f,factorVerificationAge:h}},ke=e=>{const r=e.user?e.user.id:e.user,t=e.user,n=e.session?e.session.id:e.session,o=e.session,i=e.session?.status,s=e.session?e.session.lastActiveToken?.jwt?.claims:null,a=e.session?e.session.factorVerificationAge:null,c=o?.actor,u=e.organization,l=e.organization?e.organization.id:e.organization,d=u?.slug,f=u&&t?.organizationMemberships?.find(I=>I.organization.id===l),h=f&&f.permissions,x=f&&f.role;return{userId:r,user:t,sessionId:n,session:o,sessionStatus:i,sessionClaims:s,organization:u,orgId:l,orgRole:x,orgSlug:d,orgPermissions:h,actor:c,factorVerificationAge:a}};function De(){return typeof window<"u"}var w=(e,r,t,n,o)=>{const{notify:i}=o||{};let s=e.get(t);s||(s=[],e.set(t,s)),s.push(n),i&&r.has(t)&&n(r.get(t))},E=(e,r,t)=>(e.get(r)||[]).map(n=>n(t)),k=(e,r,t)=>{const n=e.get(r);n&&(t?n.splice(n.indexOf(t)>>>0,1):e.set(r,[]))},_e=()=>{const e=new Map,r=new Map,t=new Map;return{on:(...o)=>w(e,r,...o),prioritizedOn:(...o)=>w(t,r,...o),emit:(o,i)=>{r.set(o,i),E(t,o,i),E(e,o,i)},off:(...o)=>k(e,...o),prioritizedOff:(...o)=>k(t,...o),internal:{retrieveListeners:o=>e.get(o)||[]}}},Ue={Status:"status"},Ve=()=>_e();export{Pe as _,Se as a,D as b,Me as c,Ve as d,Oe as e,Ue as f,Ie as g,Re as h,De as i,b as j,Te as k,Le as l,Ae as r,xe as s,Ce as w};
