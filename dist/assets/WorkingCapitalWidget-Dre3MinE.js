import{a as e}from"./vendor-BFM1ZFC2.js";import{j as a,k as i}from"./index-DaWRsFju.js";import"./auth-Bm6EvpH2.js";import"./query-Bn59L2Hx.js";class n extends e.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,a){i.error(`Widget error in ${this.props.widgetName}:`,e,a)}render(){return this.state.hasError?a.jsxDEV("div",{style:{padding:"2rem",backgroundColor:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb",minHeight:"200px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[a.jsxDEV("div",{style:{fontSize:"1.125rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:[this.props.widgetName||"Widget"," Loading..."]},void 0,!0,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/UniversalWidgetWrapper.jsx",lineNumber:33,columnNumber:11},this),a.jsxDEV("div",{style:{fontSize:"0.875rem",color:"#6b7280",textAlign:"center"},children:"Connecting to real-time data sources"},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/UniversalWidgetWrapper.jsx",lineNumber:41,columnNumber:11},this),a.jsxDEV("div",{style:{marginTop:"1rem",width:"40px",height:"40px",border:"3px solid #e5e7eb",borderTopColor:"#3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/UniversalWidgetWrapper.jsx",lineNumber:48,columnNumber:11},this),a.jsxDEV("style",{children:"\n            @keyframes spin {\n              0% { transform: rotate(0deg); }\n              100% { transform: rotate(360deg); }\n            }\n          "},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/UniversalWidgetWrapper.jsx",lineNumber:57,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/UniversalWidgetWrapper.jsx",lineNumber:22,columnNumber:9},this):this.props.children}}const r=({name:e})=>a.jsxDEV("div",{style:{padding:"2rem",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",minHeight:"200px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[a.jsxDEV("div",{style:{width:"40px",height:"40px",border:"3px solid #e5e7eb",borderTopColor:"#3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"1rem"}},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/UniversalWidgetWrapper.jsx",lineNumber:84,columnNumber:5},void 0),a.jsxDEV("div",{style:{color:"#6b7280",fontSize:"0.875rem"},children:["Loading ",e,"..."]},void 0,!0,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/UniversalWidgetWrapper.jsx",lineNumber:93,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/UniversalWidgetWrapper.jsx",lineNumber:73,columnNumber:3},void 0),s=({name:e,message:i})=>a.jsxDEV("div",{style:{padding:"2rem",backgroundColor:"#fafafa",borderRadius:"8px",border:"1px dashed #d1d5db",minHeight:"200px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[a.jsxDEV("svg",{style:{width:"48px",height:"48px",marginBottom:"1rem",color:"#9ca3af"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/UniversalWidgetWrapper.jsx",lineNumber:118,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/UniversalWidgetWrapper.jsx",lineNumber:112,columnNumber:5},void 0),a.jsxDEV("div",{style:{fontSize:"1rem",fontWeight:"500",color:"#6b7280",marginBottom:"0.5rem"},children:[e," - No Data Available"]},void 0,!0,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/UniversalWidgetWrapper.jsx",lineNumber:125,columnNumber:5},void 0),a.jsxDEV("div",{style:{fontSize:"0.875rem",color:"#9ca3af",textAlign:"center",maxWidth:"300px"},children:i||"Waiting for real-time data from external sources"},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/UniversalWidgetWrapper.jsx",lineNumber:133,columnNumber:5},void 0)]},void 0,!0,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/UniversalWidgetWrapper.jsx",lineNumber:101,columnNumber:3},void 0),t=({children:e,widgetName:i,loading:t=!1,hasData:o=!0,error:d=null,noDataMessage:c=null})=>t?a.jsxDEV(r,{name:i},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/UniversalWidgetWrapper.jsx",lineNumber:155,columnNumber:12},void 0):o||d?d?a.jsxDEV(s,{name:i,message:"Unable to connect to data source"},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/UniversalWidgetWrapper.jsx",lineNumber:165,columnNumber:12},void 0):a.jsxDEV(n,{widgetName:i,children:e},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/UniversalWidgetWrapper.jsx",lineNumber:170,columnNumber:5},void 0):a.jsxDEV(s,{name:i,message:c},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/UniversalWidgetWrapper.jsx",lineNumber:160,columnNumber:12},void 0),o=()=>{const[n,r]=e.useState(null),[s,o]=e.useState(!0);e.useEffect(()=>{(async()=>{try{const e=await fetch("/api/working-capital/current");if(e.ok){const a=await e.json();r(a)}}catch(e){i.log("Working capital data unavailable")}finally{o(!1)}})()},[]);const d=n||{arDays:0,apDays:0,cashCycle:0,workingCapital:0};return a.jsxDEV(t,{widgetName:"Working Capital",loading:s,hasData:!s,children:a.jsxDEV("div",{style:{padding:"1.5rem",backgroundColor:"white",borderRadius:"8px"},children:[a.jsxDEV("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"1rem"},children:"Working Capital Metrics"},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/AllWidgetsFixed.jsx",lineNumber:259,columnNumber:9},void 0),a.jsxDEV("div",{style:{display:"grid",gap:"0.75rem"},children:[a.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsxDEV("span",{style:{color:"#6b7280"},children:"AR Days:"},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/AllWidgetsFixed.jsx",lineNumber:264,columnNumber:13},void 0),a.jsxDEV("span",{style:{fontWeight:"600"},children:d.arDays||0},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/AllWidgetsFixed.jsx",lineNumber:265,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/AllWidgetsFixed.jsx",lineNumber:263,columnNumber:11},void 0),a.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsxDEV("span",{style:{color:"#6b7280"},children:"AP Days:"},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/AllWidgetsFixed.jsx",lineNumber:268,columnNumber:13},void 0),a.jsxDEV("span",{style:{fontWeight:"600"},children:d.apDays||0},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/AllWidgetsFixed.jsx",lineNumber:269,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/AllWidgetsFixed.jsx",lineNumber:267,columnNumber:11},void 0),a.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsxDEV("span",{style:{color:"#6b7280"},children:"Cash Cycle:"},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/AllWidgetsFixed.jsx",lineNumber:272,columnNumber:13},void 0),a.jsxDEV("span",{style:{fontWeight:"600"},children:[d.cashCycle||0," days"]},void 0,!0,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/AllWidgetsFixed.jsx",lineNumber:273,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/AllWidgetsFixed.jsx",lineNumber:271,columnNumber:11},void 0),a.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"0.75rem",borderTop:"1px solid #e5e7eb"},children:[a.jsxDEV("span",{style:{color:"#6b7280"},children:"Working Capital:"},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/AllWidgetsFixed.jsx",lineNumber:281,columnNumber:13},void 0),a.jsxDEV("span",{style:{fontWeight:"bold",fontSize:"1.125rem"},children:["$",d.workingCapital||0]},void 0,!0,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/AllWidgetsFixed.jsx",lineNumber:282,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/AllWidgetsFixed.jsx",lineNumber:275,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/AllWidgetsFixed.jsx",lineNumber:262,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/AllWidgetsFixed.jsx",lineNumber:258,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/widgets/AllWidgetsFixed.jsx",lineNumber:257,columnNumber:5},void 0)};export{o as default};
