# Railway Nixpacks Configuration - DO NOT OVERRIDE NODE_ENV
[phases.setup]
nixPkgs = ['nodejs_23']

[phases.install]
cmds = ['npm ci --omit=dev']

[phases.build]
cmds = ['npm run build']

[phases.start]
cmd = 'node server.js'

# CRITICAL: Do not set NODE_ENV here - let Railway environment variables control it
# Development: NODE_ENV=development (set in Railway dashboard)
# Testing: NODE_ENV=testing (set in Railway dashboard)  
# Production: NODE_ENV=production (set in Railway dashboard)

[variables]
PORT = '$PORT'

[providers]
static = false