{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "NIXPACKS",
    "buildCommand": "npm ci && npm run build",
    "watchPatterns": [
      "src/pages/EnhancedDashboard.jsx",
      "src/components/widgets/AgentMonitoringWidget.jsx",
      "src/components/widgets/**/*.jsx",
      "dashboard-update-agent.cjs"
    ]
  },
  "deploy": {
    "startCommand": "npm start",
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 3
  },
  "environments": {
    "internal": {
      "variables": {
        "NODE_ENV": "production",
        "VITE_INTERNAL_DASHBOARD": "true",
        "VITE_DASHBOARD_REFRESH_RATE": "5000",
        "VITE_AGENT_MONITORING": "true",
        "VITE_LIVE_UPDATES": "true",
        "VITE_APP_TITLE": "Sentia Manufacturing Dashboard - Internal",
        "VITE_APP_VERSION": "2.0.0-internal",
        "VITE_CLERK_PUBLISHABLE_KEY": "pk_test_Z3VpZGluZy1zbG90aC04Ni5jbGVyay5hY2NvdW50cy5kZXYk",
        "VITE_API_BASE_URL": "https://vivacious-prosperity-internal.up.railway.app/api",
        "PORT": "3000",
        "DATABASE_URL": "postgresql://neondb_owner:npg_2wXVD9gdintm@ep-aged-dust-abpyip0r-pooler.eu-west-2.aws.neon.tech/neondb?sslmode=require&channel_binding=require",
        "CLERK_SECRET_KEY": "sk_test_VAYZffZP043cqbgUJQgAPmCTziMcZVbfTPfXUIKlrx"
      }
    }
  },
  "services": [
    {
      "name": "sentia-dashboard-internal",
      "source": {
        "repo": "The-social-drink-company/sentia-manufacturing-dashboard",
        "branch": "internal"
      },
      "variables": {
        "NODE_ENV": "production",
        "VITE_INTERNAL_DASHBOARD": "true",
        "VITE_DASHBOARD_REFRESH_RATE": "5000",
        "VITE_AGENT_MONITORING": "true",
        "VITE_LIVE_UPDATES": "true",
        "VITE_APP_TITLE": "Sentia Manufacturing Dashboard - Internal",
        "VITE_APP_VERSION": "2.0.0-internal",
        "VITE_CLERK_PUBLISHABLE_KEY": "pk_test_Z3VpZGluZy1zbG90aC04Ni5jbGVyay5hY2NvdW50cy5kZXYk",
        "VITE_API_BASE_URL": "https://vivacious-prosperity-internal.up.railway.app/api",
        "PORT": "3000",
        "DATABASE_URL": "postgresql://neondb_owner:npg_2wXVD9gdintm@ep-aged-dust-abpyip0r-pooler.eu-west-2.aws.neon.tech/neondb?sslmode=require&channel_binding=require",
        "CLERK_SECRET_KEY": "sk_test_VAYZffZP043cqbgUJQgAPmCTziMcZVbfTPfXUIKlrx"
      }
    }
  ]
}