import{a as e,ao as s,j as t,F as r,aT as l,aD as a,b7 as i,b5 as n,b9 as d}from"./chunk-BiELE_zb.js";import"./chunk-BHVxGnrP.js";import"./chunk-BxMJBLkA.js";import"./chunk-BPLDaNyX.js";import"./chunk-BkMGNTmt.js";import"./chunk-Co7KGWd_.js";import"./chunk-CsBkHOXX.js";import"./chunk-Dozjk7Op.js";const c=()=>{const[c,x]=e.useState(null),[m,o]=e.useState(!1),{data:h,isLoading:g,refetch:u}=s({queryKey:["mobile-production"],queryFn:async()=>(await fetch("/api/production/overview")).json(),refetchInterval:5e3,staleTime:0}),j=h?.overview?{lines:h.overview.lines||[],shift:h.overview.currentShift||{name:"No shift data",progress:0,efficiency:0,output:{current:0,target:0}},alerts:h.overview.alerts||[]}:{lines:[],shift:{name:"Loading...",progress:0,efficiency:0,output:{current:0,target:0}},alerts:[]},p=e=>{const s="h-8 w-8";switch(e){case"running":return t.jsx(d,{className:`${s} text-green-500`});case"maintenance":return t.jsx(n,{className:`${s} text-yellow-500`});case"idle":return t.jsx(i,{className:`${s} text-gray-400`});case"error":return t.jsx(r,{className:`${s} text-red-500`});default:return t.jsx(a,{className:`${s} text-gray-400`})}},f=e=>{switch(e){case"running":return"border-l-4 border-green-500 bg-green-50";case"maintenance":return"border-l-4 border-yellow-500 bg-yellow-50";case"idle":return"border-l-4 border-gray-400 bg-gray-50";case"error":return"border-l-4 border-red-500 bg-red-50";default:return"border-l-4 border-gray-300 bg-white"}};return g&&!j?t.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Loading floor data..."})]})}):t.jsxs("div",{className:"min-h-screen bg-gray-100 p-2 sm:p-4",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Manufacturing Floor"}),t.jsxs("p",{className:"text-sm text-gray-500",children:[j.shift.name," - ",j.shift.progress,"% Complete"]})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("button",{onClick:()=>o(!m),className:"relative p-3 rounded-full "+(j.alerts.length>0?"bg-red-100 text-red-600":"bg-gray-100 text-gray-400"),children:[t.jsx(r,{className:"h-6 w-6"}),j.alerts.length>0&&t.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:j.alerts.length})]}),t.jsx("button",{onClick:()=>u(),className:"p-3 bg-blue-100 text-blue-600 rounded-full",children:t.jsx(l,{className:"h-6 w-6"})})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[t.jsx("span",{children:"Shift Progress"}),t.jsxs("span",{children:[j.shift.output.current," / ",j.shift.output.target]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:t.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(j.shift.progress,100)}%`}})})]})]}),m&&j.alerts.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-4 border-l-4 border-red-500",children:[t.jsx("h2",{className:"font-semibold text-gray-900 mb-3",children:"Active Alerts"}),t.jsx("div",{className:"space-y-2",children:j.alerts.map(e=>t.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-red-50 rounded-lg",children:[t.jsx(r,{className:"h-5 w-5 text-red-500 mt-0.5 flex-shrink-0"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-medium text-gray-900",children:e.line}),t.jsx("p",{className:"text-sm text-gray-600",children:e.message}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:e.time})]})]},e.id))})]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:j.lines.map(e=>t.jsxs("div",{className:`${f(e.status)} rounded-lg shadow-sm p-4 cursor-pointer transition-all duration-200 ${c===e.id?"ring-2 ring-blue-500":""}`,onClick:()=>x(c===e.id?null:e.id),children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[p(e.status),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-lg text-gray-900",children:e.name}),t.jsx("p",{className:"text-sm text-gray-500 capitalize",children:e.status})]})]}),e.alerts&&e.alerts.length>0&&t.jsxs("div",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium",children:[e.alerts.length," Alert",e.alerts.length>1?"s":""]})]}),e.product&&t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Current Product"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.product})]}),t.jsxs("div",{className:"mb-4",children:[t.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[t.jsx("span",{children:"Output"}),t.jsxs("span",{className:"font-medium",children:[e.output.current.toLocaleString()," / ",e.output.target.toLocaleString()]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"h-2 rounded-full transition-all duration-300 "+("running"===e.status?"bg-green-500":"maintenance"===e.status?"bg-yellow-500":"bg-gray-400"),style:{width:`${Math.min(e.output.current/e.output.target*100,100)}%`}})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Efficiency"}),t.jsxs("p",{className:"text-xl font-bold "+(e.efficiency>=90?"text-green-600":e.efficiency>=80?"text-yellow-600":"text-red-600"),children:[e.efficiency,"%"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Operator"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.operator})]})]}),c===e.id&&t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-500",children:"Status"}),t.jsx("p",{className:"font-medium text-gray-900 capitalize",children:e.status})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-500",children:"Last Update"}),t.jsx("p",{className:"font-medium text-gray-900",children:"Just now"})]})]}),t.jsxs("div",{className:"flex space-x-2 mt-4",children:[t.jsx("button",{className:"flex-1 bg-blue-600 text-white py-2 px-3 rounded-lg text-sm font-medium",children:"View Details"}),t.jsx("button",{className:"flex-1 bg-gray-200 text-gray-700 py-2 px-3 rounded-lg text-sm font-medium",children:"Log Issue"})]}),e.alerts&&e.alerts.length>0&&t.jsxs("div",{className:"mt-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Active Alerts:"}),e.alerts.map((e,s)=>t.jsxs("div",{className:"p-2 bg-yellow-50 rounded text-sm",children:[t.jsx("span",{className:"inline-block w-2 h-2 rounded-full mr-2 "+("warning"===e.type?"bg-yellow-500":"error"===e.type?"bg-red-500":"bg-blue-500")}),e.message]},s))]})]})]},e.id))}),t.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-3 sm:hidden",children:t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Lines Active"}),t.jsx("p",{className:"text-lg font-bold text-green-600",children:j.lines.filter(e=>"running"===e.status).length})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Efficiency"}),t.jsxs("p",{className:"text-lg font-bold text-blue-600",children:[j.shift.efficiency,"%"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Alerts"}),t.jsx("p",{className:"text-lg font-bold "+(j.alerts.length>0?"text-red-600":"text-green-600"),children:j.alerts.length})]})]})}),t.jsx("div",{className:"h-20 sm:h-0"})]})},x=()=>t.jsx(c,{});export{x as default};
