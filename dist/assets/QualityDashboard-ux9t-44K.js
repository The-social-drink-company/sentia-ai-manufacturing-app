import{av as t}from"./vendor-FIyM7QWF.js";import{C as c,d as o}from"./card-Cy_bZzQY.js";import{u as l}from"./data-layer-DiNOIJFb.js";import"./index-SxwFcXqP.js";import"./clerk-DnTVDv8Y.js";import"./radix-Do1MQBy8.js";import"./router-BRFkKguk.js";const u="https://mcp-server-tkyu.onrender.com",m="https://sentia-manufacturing-development.onrender.com/api";class h{constructor(){this.mcpServerUrl=u,this.apiBaseUrl=m}async fetchWithAuth(e,r={}){try{const s=await fetch(e,{...r,headers:{"Content-Type":"application/json",...r.headers}});if(!s.ok)throw new Error(`API Error: ${s.status} ${s.statusText}`);return await s.json()}catch(s){throw console.error("API Call Failed:",s),s}}async getMCPStatus(){return this.fetchWithAuth(`${this.mcpServerUrl}/health`)}async getAIInsights(e){return this.fetchWithAuth(`${this.mcpServerUrl}/api/ai/insights`,{method:"POST",body:JSON.stringify({query:e})})}async getDemandForecast(e){return this.fetchWithAuth(`${this.mcpServerUrl}/api/ai/forecast`,{method:"POST",body:JSON.stringify(e)})}async getInventoryOptimization(){return this.fetchWithAuth(`${this.mcpServerUrl}/api/ai/inventory-optimization`)}async getWorkingCapital(){try{return await this.fetchWithAuth(`${this.mcpServerUrl}/api/financial/working-capital`)}catch(e){return console.warn("[APIService] MCP working capital request failed, falling back to local API",e),this.fetchWithAuth(`${this.apiBaseUrl}/financial/working-capital`)}}async getCashFlow(){try{return await this.fetchWithAuth(`${this.mcpServerUrl}/api/financial/cash-flow`)}catch(e){return console.warn("[APIService] MCP cash flow request failed, falling back to local API",e),this.fetchWithAuth(`${this.apiBaseUrl}/financial/cash-flow`)}}async getFinancialMetrics(){try{return await this.fetchWithAuth(`${this.mcpServerUrl}/api/financial/metrics`)}catch(e){return console.warn("[APIService] MCP financial metrics request failed, falling back to local API",e),this.fetchWithAuth(`${this.apiBaseUrl}/financial/metrics`)}}async getProductionMetrics(){try{return await this.fetchWithAuth(`${this.mcpServerUrl}/api/production/metrics`)}catch(e){return console.warn("[APIService] MCP production metrics request failed, falling back to local API",e),this.fetchWithAuth(`${this.apiBaseUrl}/production/metrics`)}}async getInventoryData(){try{return await this.fetchWithAuth(`${this.mcpServerUrl}/api/inventory/current`)}catch(e){return console.warn("[APIService] MCP inventory request failed, falling back to local API",e),this.fetchWithAuth(`${this.apiBaseUrl}/inventory/current`)}}async getQualityMetrics(){try{return await this.fetchWithAuth(`${this.mcpServerUrl}/api/quality/metrics`)}catch(e){return console.warn("[APIService] MCP quality metrics request failed, falling back to local API",e),this.fetchWithAuth(`${this.apiBaseUrl}/quality/metrics`)}}async getDashboardSummary(){try{return await this.fetchWithAuth(`${this.mcpServerUrl}/api/dashboard/summary`)}catch(e){return console.warn("[APIService] MCP dashboard summary request failed, falling back to local API",e),this.fetchWithAuth(`${this.apiBaseUrl}/dashboard/summary`)}}async getXeroData(){return this.fetchWithAuth(`${this.apiBaseUrl}/integrations/xero/data`)}async getShopifyData(){return this.fetchWithAuth(`${this.apiBaseUrl}/integrations/shopify/data`)}async getAmazonData(){return this.fetchWithAuth(`${this.apiBaseUrl}/integrations/amazon/data`)}async runWhatIfScenario(e){return this.fetchWithAuth(`${this.mcpServerUrl}/api/ai/what-if`,{method:"POST",body:JSON.stringify(e)})}connectToLiveData(e,r){const s=new EventSource(`${this.mcpServerUrl}/api/sse/stream`);return s.onmessage=i=>{try{const n=JSON.parse(i.data);e(n)}catch(n){console.error("SSE Parse Error:",n)}},s.onerror=i=>{console.error("SSE Connection Error:",i),r&&r(i)},s}}const d=new h,v=()=>{const{data:a,isLoading:e}=l({queryKey:["quality"],queryFn:()=>d.getQualityMetrics(),refetchInterval:3e4});return e?t.jsxDEV("div",{className:"min-h-screen flex items-center justify-center",children:t.jsxDEV("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:16,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:15,columnNumber:7},void 0):t.jsxDEV("div",{className:"space-y-6",children:[t.jsxDEV("h1",{className:"text-3xl font-bold text-gray-900",children:"Quality Control"},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:23,columnNumber:7},void 0),t.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxDEV(c,{children:t.jsxDEV(o,{className:"p-6",children:[t.jsxDEV("p",{className:"text-sm text-gray-600",children:"Quality Score"},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:28,columnNumber:13},void 0),t.jsxDEV("p",{className:"text-3xl font-bold text-green-600",children:[(a==null?void 0:a.score)||"98.5","%"]},void 0,!0,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:29,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:27,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:26,columnNumber:9},void 0),t.jsxDEV(c,{children:t.jsxDEV(o,{className:"p-6",children:[t.jsxDEV("p",{className:"text-sm text-gray-600",children:"Defect Rate"},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:35,columnNumber:13},void 0),t.jsxDEV("p",{className:"text-3xl font-bold text-red-600",children:[(a==null?void 0:a.defectRate)||"0.8","%"]},void 0,!0,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:36,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:34,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:33,columnNumber:9},void 0),t.jsxDEV(c,{children:t.jsxDEV(o,{className:"p-6",children:[t.jsxDEV("p",{className:"text-sm text-gray-600",children:"Tests Passed"},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:42,columnNumber:13},void 0),t.jsxDEV("p",{className:"text-3xl font-bold text-blue-600",children:[(a==null?void 0:a.testsPassed)||"2,341","/",(a==null?void 0:a.totalTests)||"2,350"]},void 0,!0,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:43,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:41,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:40,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:25,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:22,columnNumber:5},void 0)};export{v as default};
