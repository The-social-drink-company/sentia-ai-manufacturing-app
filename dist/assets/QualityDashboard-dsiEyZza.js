import{av as e}from"./vendor-PnOV8GxZ.js";import{C as c,d as o}from"./card-BJxaLDyW.js";import{u}from"./data-layer-DRnRZGcF.js";import"./index-BGvhkzAd.js";import"./clerk-sv7wCX58.js";import"./radix-1NkJjHPz.js";import"./router-Ct0VRbNC.js";const l="https://mcp-server-tkyu.onrender.com",h="https://sentia-manufacturing-production.onrender.com/api";class d{constructor(){this.mcpServerUrl=l,this.apiBaseUrl=h}async fetchWithAuth(a,i={}){try{const r=await fetch(a,{...i,headers:{"Content-Type":"application/json",...i.headers}});if(!r.ok)throw new Error(`API Error: ${r.status} ${r.statusText}`);return await r.json()}catch(r){throw console.error("API Call Failed:",r),r}}async getMCPStatus(){return this.fetchWithAuth(`${this.mcpServerUrl}/health`)}async getAIInsights(a){return this.fetchWithAuth(`${this.mcpServerUrl}/api/ai/insights`,{method:"POST",body:JSON.stringify({query:a})})}async getDemandForecast(a){return this.fetchWithAuth(`${this.mcpServerUrl}/api/ai/forecast`,{method:"POST",body:JSON.stringify(a)})}async getInventoryOptimization(){return this.fetchWithAuth(`${this.mcpServerUrl}/api/ai/inventory-optimization`)}async getWorkingCapital(){try{return await this.fetchWithAuth(`${this.mcpServerUrl}/api/financial/working-capital`)}catch(a){return console.warn("[APIService] MCP working capital request failed, falling back to local API",a),this.fetchWithAuth(`${this.apiBaseUrl}/financial/working-capital`)}}async getCashFlow(){try{return await this.fetchWithAuth(`${this.mcpServerUrl}/api/financial/cash-flow`)}catch(a){return console.warn("[APIService] MCP cash flow request failed, falling back to local API",a),this.fetchWithAuth(`${this.apiBaseUrl}/financial/cash-flow`)}}async getFinancialMetrics(){try{return await this.fetchWithAuth(`${this.mcpServerUrl}/api/financial/metrics`)}catch(a){return console.warn("[APIService] MCP financial metrics request failed, falling back to local API",a),this.fetchWithAuth(`${this.apiBaseUrl}/financial/metrics`)}}async getProductionMetrics(){try{return await this.fetchWithAuth(`${this.mcpServerUrl}/api/production/metrics`)}catch(a){return console.warn("[APIService] MCP production metrics request failed, falling back to local API",a),this.fetchWithAuth(`${this.apiBaseUrl}/production/metrics`)}}async getInventoryData(){try{return await this.fetchWithAuth(`${this.mcpServerUrl}/api/inventory/current`)}catch(a){return console.warn("[APIService] MCP inventory request failed, falling back to local API",a),this.fetchWithAuth(`${this.apiBaseUrl}/inventory/current`)}}async getQualityMetrics(){try{return await this.fetchWithAuth(`${this.mcpServerUrl}/api/quality/metrics`)}catch(a){return console.warn("[APIService] MCP quality metrics request failed, falling back to local API",a),this.fetchWithAuth(`${this.apiBaseUrl}/quality/metrics`)}}async getDashboardSummary(){try{return await this.fetchWithAuth(`${this.mcpServerUrl}/api/dashboard/summary`)}catch(a){return console.warn("[APIService] MCP dashboard summary request failed, falling back to local API",a),this.fetchWithAuth(`${this.apiBaseUrl}/dashboard/summary`)}}async getXeroData(){return this.fetchWithAuth(`${this.apiBaseUrl}/integrations/xero/data`)}async getShopifyData(){return this.fetchWithAuth(`${this.apiBaseUrl}/integrations/shopify/data`)}async getAmazonData(){return this.fetchWithAuth(`${this.apiBaseUrl}/integrations/amazon/data`)}async runWhatIfScenario(a){return this.fetchWithAuth(`${this.mcpServerUrl}/api/ai/what-if`,{method:"POST",body:JSON.stringify(a)})}connectToLiveData(a,i){const r=new EventSource(`${this.mcpServerUrl}/api/sse/stream`);return r.onmessage=n=>{try{const s=JSON.parse(n.data);a(s)}catch(s){console.error("SSE Parse Error:",s)}},r.onerror=n=>{console.error("SSE Connection Error:",n),i&&i(n)},r}}const m=new d,x=()=>{const{data:t,isLoading:a}=u({queryKey:["quality"],queryFn:()=>m.getQualityMetrics(),refetchInterval:3e4});return a?e.jsxDEV("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxDEV("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:16,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:15,columnNumber:7},void 0):e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("h1",{className:"text-3xl font-bold text-gray-900",children:"Quality Control"},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:23,columnNumber:7},void 0),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxDEV(c,{children:e.jsxDEV(o,{className:"p-6",children:[e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Quality Score"},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:28,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-3xl font-bold text-green-600",children:[(t==null?void 0:t.score)||"98.5","%"]},void 0,!0,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:29,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:27,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:26,columnNumber:9},void 0),e.jsxDEV(c,{children:e.jsxDEV(o,{className:"p-6",children:[e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Defect Rate"},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:35,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-3xl font-bold text-red-600",children:[(t==null?void 0:t.defectRate)||"0.8","%"]},void 0,!0,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:36,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:34,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:33,columnNumber:9},void 0),e.jsxDEV(c,{children:e.jsxDEV(o,{className:"p-6",children:[e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Tests Passed"},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:42,columnNumber:13},void 0),e.jsxDEV("p",{className:"text-3xl font-bold text-blue-600",children:[(t==null?void 0:t.testsPassed)||"2,341","/",(t==null?void 0:t.totalTests)||"2,350"]},void 0,!0,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:43,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:41,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:40,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:25,columnNumber:7},void 0)]},void 0,!0,{fileName:"C:/Projects/Sentia Manufacturing Dashboard/sentia-manufacturing-dashboard/src/components/quality/QualityDashboard.jsx",lineNumber:22,columnNumber:5},void 0)};export{x as default};
