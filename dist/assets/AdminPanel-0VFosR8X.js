import{r as a,bp as h,j as e,a5 as g,be as S,v as f,aW as U,cs as R}from"./vendor-BkaHguXf.js";import{useAuth as P,useUser as I}from"./clerk-CXwldpqk.js";import{U as D}from"./UserAdminPanel-BuCTK-MR.js";import{A as C,S as E}from"./SystemAdminPanel-236oBI9g.js";import{c as K,g as G}from"./rolePermissions-BRVdwoPg.js";import"./structuredLogger-D1DJYsDB.js";function Y(){const{getToken:u,isLoaded:t}=P(),{user:i,isLoaded:m}=I(),[O,N]=a.useState([]),[V,b]=a.useState([]),[p,x]=a.useState(!0),[w,r]=a.useState(null);a.useState(""),a.useState("user"),a.useState(!1);const l=i?.publicMetadata?.role,n=G(l),v=()=>n==="users"?"user-admin":n==="system"?"system-admin":"user-admin",[A,y]=a.useState(v()),c=(()=>{const s=[];return(n==="users"||n==="full")&&s.push({id:"user-admin",name:"User Administration",icon:f,description:"Manage users, roles, and permissions"}),(n==="system"||n==="full")&&s.push({id:"system-admin",name:"System Administration",icon:U,description:"System settings, APIs, and security"}),(n==="system"||n==="full")&&s.push({id:"api-keys",name:"API Management",icon:R,description:"Manage external API keys and integrations"}),s})();a.useEffect(()=>{t&&m&&i&&(L(),j())},[t,m,i]);const L=async()=>{try{const s=await u();if(!s){r("Authentication token not available");return}const d=await h.get("https://api.sentia-manufacturing.com/admin/users",{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});N(d.data.users||[]),r(null)}catch(s){r(s.response?.data?.message||"Failed to fetch users")}},j=async()=>{try{const s=await u();if(!s)return;const d=await h.get("https://api.sentia-manufacturing.com/admin/invitations",{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});b(d.data.invitations||[])}catch(s){s.response?.status!==404&&r(s.response?.data?.message||"Failed to fetch invitations")}finally{x(!1)}};if(!t||!m)return e.jsxDEV("div",{className:"admin-loading",children:e.jsxDEV("div",{className:"spinner",children:"Loading authentication..."},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:250,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:249,columnNumber:7},this);if(!i)return e.jsxDEV("div",{className:"admin-error",children:[e.jsxDEV("h2",{children:"Authentication Required"},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:259,columnNumber:9},this),e.jsxDEV("p",{children:"Please sign in to access the admin panel."},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:260,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:258,columnNumber:7},this);if(!K(l))return e.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxDEV("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:[e.jsxDEV("div",{className:"flex items-center mb-4",children:[e.jsxDEV(g,{className:"h-8 w-8 text-red-500"},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:271,columnNumber:13},this),e.jsxDEV("h2",{className:"ml-3 text-lg font-semibold text-gray-900",children:"Access Denied"},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:272,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:270,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-600 mb-4",children:"You do not have administrator privileges to access this panel."},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:274,columnNumber:11},this),e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:e.jsxDEV("p",{className:"text-sm text-blue-800",children:[e.jsxDEV("strong",{children:"Current Role:"},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:279,columnNumber:15},this)," ",l||"Not assigned",e.jsxDEV("br",{},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:279,columnNumber:74},this),e.jsxDEV("strong",{children:"Required:"},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:280,columnNumber:15},this)," User Admin, System Admin, or Super Admin"]},void 0,!0,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:278,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:277,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:269,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:268,columnNumber:7},this);if(c.length===0)return e.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxDEV("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:[e.jsxDEV("div",{className:"flex items-center mb-4",children:[e.jsxDEV(g,{className:"h-8 w-8 text-yellow-500"},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:294,columnNumber:13},this),e.jsxDEV("h2",{className:"ml-3 text-lg font-semibold text-gray-900",children:"No Admin Access"},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:295,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:293,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-600",children:"Your administrator role does not have access to any admin sections. Please contact a Super Admin for assistance."},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:297,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:292,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:291,columnNumber:7},this);if(p)return e.jsxDEV("div",{className:"admin-loading",children:e.jsxDEV("div",{className:"spinner",children:"Loading admin panel..."},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:309,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:308,columnNumber:7},this);const B=()=>{switch(A){case"user-admin":return e.jsxDEV(D,{},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:317,columnNumber:16},this);case"system-admin":return e.jsxDEV(E,{},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:319,columnNumber:16},this);case"api-keys":return e.jsxDEV(C,{},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:321,columnNumber:16},this);default:return e.jsxDEV(D,{},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:323,columnNumber:16},this)}};return e.jsxDEV("div",{className:"min-h-screen bg-gray-50",children:[e.jsxDEV("div",{className:"bg-white shadow",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxDEV("div",{className:"py-6",children:e.jsxDEV("div",{className:"md:flex md:items-center md:justify-between",children:e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("h1",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:"Enterprise Admin Portal"},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:505,columnNumber:17},this),e.jsxDEV("div",{className:"mt-1 flex flex-col sm:flex-row sm:flex-wrap sm:mt-0 sm:space-x-6",children:[e.jsxDEV("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[e.jsxDEV(S,{className:"flex-shrink-0 mr-1.5 h-4 w-4"},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:510,columnNumber:21},this),n==="full"&&"Super Administrator",n==="system"&&"System Administrator",n==="users"&&"User Administrator"]},void 0,!0,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:509,columnNumber:19},this),e.jsxDEV("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[e.jsxDEV(f,{className:"flex-shrink-0 mr-1.5 h-4 w-4"},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:516,columnNumber:21},this),i?.firstName," ",i?.lastName]},void 0,!0,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:515,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:508,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:504,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:503,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:502,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:501,columnNumber:9},this)},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:500,columnNumber:7},this),c.length>1&&e.jsxDEV("div",{className:"bg-white border-b border-gray-200",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxDEV("nav",{className:"flex space-x-8",children:c.map(s=>{const o=s.icon;return e.jsxDEV("button",{onClick:()=>y(s.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${A===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsxDEV(o,{className:"h-5 w-5"},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:543,columnNumber:21},this),e.jsxDEV("div",{className:"text-left",children:[e.jsxDEV("div",{children:s.name},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:545,columnNumber:23},this),e.jsxDEV("div",{className:"text-xs text-gray-400",children:s.description},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:546,columnNumber:23},this)]},void 0,!0,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:544,columnNumber:21},this)]},s.id,!0,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:534,columnNumber:19},this)})},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:530,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:529,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:528,columnNumber:9},this),e.jsxDEV("div",{className:"max-w-7xl mx-auto",children:B()},void 0,!1,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:557,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/DanielKenny/OneDrive - GABA LABS Research Ltd/Documents/AI logistics system/main-repo/sentia-manufacturing-dashboard/src/pages/AdminPanel.jsx",lineNumber:499,columnNumber:5},this)}export{Y as default};
