import{r as e,j as a,aP as s,aQ as t,aR as r,aS as n,aB as i,aC as l,aT as o,ap as c,aU as m,an as d,aA as x,aV as h,aE as u,aW as g,aF as b,aX as y,aY as j}from"./react-core-DlJGLw67.js";import{R as v,f as p,C as f,X as w,Y as N,T as C,d as R,b as k,c as F,A as M,B as S,e as P}from"./charts-C-BUlHpY.js";import"./auth-BIfipbc6.js";import"./vendor-TZ9aDXZU.js";import"./vendor-utils-W0IPh-on.js";const A=()=>{const[A,I]=e.useState({cashFlow:{baseAmount:5e5,variability:15,cycleTime:30,seasonality:10},accountsReceivable:{amount:85e4,dso:45,collectionRate:95,badDebtRate:2},accountsPayable:{amount:45e4,dpo:35,paymentTerms:30,earlyPayDiscount:2},inventory:{rawMaterials:32e4,workInProcess:18e4,finishedGoods:42e4,turnoverRate:8,holdingCost:25},production:{capacity:85,efficiency:92,overtime:10,wastage:3},ratios:{currentRatio:2.1,quickRatio:1.5,grossMargin:35,operatingMargin:18}}),[E,T]=e.useState([]),[D,K]=e.useState(0),[O,L]=e.useState(!1),[G,W]=e.useState(30),$=e.useMemo(()=>{const{cashFlow:e,accountsReceivable:a,accountsPayable:s,inventory:t,production:r,ratios:n}=A,i=e.baseAmount+a.amount+t.rawMaterials+t.workInProcess+t.finishedGoods,l=s.amount,o=i-l,c=a.dso,m=s.dpo,d=c+365/t.turnoverRate-m,x=o*n.operatingMargin/100-.05*o,h=o*t.turnoverRate;return{workingCapital:o,currentAssets:i,currentLiabilities:l,cashConversionCycle:d,freeCashFlow:x,workingCapitalVelocity:h/o,annualRevenue:h,assetTurnover:h/i,receivablesEfficiency:365/c,payablesEfficiency:365/m,inventoryEfficiency:t.turnoverRate,currentRatio:i/l,quickRatio:(i-t.rawMaterials-t.workInProcess-t.finishedGoods)/l}},[A]),z=e.useMemo(()=>{const e=[],a=$.workingCapital;for(let s=0;s<=12;s++){const t=1+A.cashFlow.seasonality/100*Math.sin(s*Math.PI/6),r=a*t*(1+.5*A.cashFlow.variability/100),n=$.freeCashFlow*t;e.push({month:s,monthName:new Date(2024,s).toLocaleDateString("en-US",{month:"short"}),workingCapital:Math.round(r),freeCashFlow:Math.round(n),receivables:Math.round(A.accountsReceivable.amount*t),payables:Math.round(A.accountsPayable.amount*t),inventory:Math.round((A.inventory.rawMaterials+A.inventory.workInProcess+A.inventory.finishedGoods)*t),efficiency:Math.round(A.production.efficiency*(.9+.2*Math.random()))})}return e},[A,$]),B=({label:e,value:s,min:t,max:r,step:n=1,unit:i="",onChange:l,color:o="blue",description:c})=>a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:e}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:`text-lg font-bold text-${o}-600`,children:["number"==typeof s?s.toLocaleString():s,i]}),a.jsx("button",{onClick:()=>l("number"==typeof s?t:0),className:"text-gray-400 hover:text-gray-600",children:a.jsx(j,{className:"w-4 h-4"})})]})]}),a.jsx("input",{type:"range",min:t,max:r,step:n,value:s,onChange:e=>l(Number(e.target.value)),className:`w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider-${o}`}),c&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:c}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[a.jsxs("span",{children:[t,i]}),a.jsxs("span",{children:[r,i]})]})]}),H=e.useCallback((e,a,s)=>{I(t=>({...t,[e]:{...t[e],[a]:s}}))},[]);return e.useEffect(()=>{if(O){const e=setInterval(()=>{I(e=>({...e,cashFlow:{...e.cashFlow,variability:Math.max(5,Math.min(25,e.cashFlow.variability+1))}}))},1e3*G);return()=>clearInterval(e)}},[O,G]),a.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[a.jsx(s,{className:"w-8 h-8 mr-3 text-blue-600"}),"Enhanced Working Capital Analysis"]}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Interactive scenario modeling with advanced sliders and controls"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{onClick:()=>L(!O),className:"flex items-center px-4 py-2 rounded-lg "+(O?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"),children:[O?a.jsx(t,{className:"w-4 h-4 mr-2"}):a.jsx(r,{className:"w-4 h-4 mr-2"}),O?"Auto-Refresh ON":"Auto-Refresh OFF"]}),a.jsxs("button",{onClick:()=>{const e={name:`Scenario ${E.length+1}`,timestamp:(new Date).toISOString(),parameters:JSON.parse(JSON.stringify(A)),metrics:$};T([...E,e])},className:"flex items-center px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200",children:[a.jsx(n,{className:"w-4 h-4 mr-2"}),"Save Scenario"]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Working Capital"}),a.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["£",$.workingCapital.toLocaleString()]})]}),a.jsx(i,{className:"w-8 h-8 text-green-500"})]}),a.jsxs("div",{className:"mt-2 flex items-center",children:[a.jsx(l,{className:"w-4 h-4 text-green-500 mr-1"}),a.jsx("span",{className:"text-sm text-green-600",children:"Optimized"})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Cash Conversion Cycle"}),a.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[Math.round($.cashConversionCycle)," days"]})]}),a.jsx(o,{className:"w-8 h-8 text-blue-500"})]}),a.jsxs("div",{className:"mt-2 flex items-center",children:[a.jsx(c,{className:"w-4 h-4 text-blue-500 mr-1"}),a.jsx("span",{className:"text-sm text-blue-600",children:"Target: 35 days"})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Free Cash Flow"}),a.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["£",$.freeCashFlow.toLocaleString()]})]}),a.jsx(l,{className:"w-8 h-8 text-purple-500"})]}),a.jsxs("div",{className:"mt-2 flex items-center",children:[a.jsx(m,{className:"w-4 h-4 text-purple-500 mr-1"}),a.jsx("span",{className:"text-sm text-purple-600",children:"Monthly"})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Current Ratio"}),a.jsx("p",{className:"text-2xl font-bold text-orange-600",children:$.currentRatio.toFixed(2)})]}),a.jsx(d,{className:"w-8 h-8 text-orange-500"})]}),a.jsxs("div",{className:"mt-2 flex items-center",children:[a.jsx(CheckCircle,{className:"w-4 h-4 text-green-500 mr-1"}),a.jsx("span",{className:"text-sm text-green-600",children:"Healthy"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-6 flex items-center",children:[a.jsx(x,{className:"w-5 h-5 mr-2 text-blue-600"}),"Interactive Controls"]}),a.jsxs("div",{className:"mb-8",children:[a.jsxs("h4",{className:"font-medium text-gray-800 mb-4 flex items-center",children:[a.jsx(i,{className:"w-4 h-4 mr-2"}),"Cash Flow Management"]}),a.jsx(B,{label:"Base Cash Amount",value:A.cashFlow.baseAmount,min:1e5,max:2e6,step:1e4,unit:"£",onChange:e=>H("cashFlow","baseAmount",e),color:"green",description:"Core cash position for operations"}),a.jsx(B,{label:"Cash Flow Variability",value:A.cashFlow.variability,min:5,max:50,unit:"%",onChange:e=>H("cashFlow","variability",e),color:"yellow",description:"Expected variation in monthly cash flow"}),a.jsx(B,{label:"Cycle Time",value:A.cashFlow.cycleTime,min:15,max:90,unit:" days",onChange:e=>H("cashFlow","cycleTime",e),color:"blue",description:"Cash conversion cycle duration"})]}),a.jsxs("div",{className:"mb-8",children:[a.jsxs("h4",{className:"font-medium text-gray-800 mb-4 flex items-center",children:[a.jsx(h,{className:"w-4 h-4 mr-2"}),"Accounts Receivable"]}),a.jsx(B,{label:"AR Amount",value:A.accountsReceivable.amount,min:2e5,max:2e6,step:1e4,unit:"£",onChange:e=>H("accountsReceivable","amount",e),color:"blue",description:"Total accounts receivable balance"}),a.jsx(B,{label:"Days Sales Outstanding",value:A.accountsReceivable.dso,min:15,max:120,unit:" days",onChange:e=>H("accountsReceivable","dso",e),color:"red",description:"Average time to collect receivables"}),a.jsx(B,{label:"Collection Rate",value:A.accountsReceivable.collectionRate,min:70,max:100,unit:"%",onChange:e=>H("accountsReceivable","collectionRate",e),color:"green",description:"Percentage of receivables collected"})]}),a.jsxs("div",{className:"mb-8",children:[a.jsxs("h4",{className:"font-medium text-gray-800 mb-4 flex items-center",children:[a.jsx(u,{className:"w-4 h-4 mr-2"}),"Inventory Management"]}),a.jsx(B,{label:"Raw Materials",value:A.inventory.rawMaterials,min:5e4,max:8e5,step:1e4,unit:"£",onChange:e=>H("inventory","rawMaterials",e),color:"orange",description:"Raw materials inventory value"}),a.jsx(B,{label:"Finished Goods",value:A.inventory.finishedGoods,min:1e5,max:1e6,step:1e4,unit:"£",onChange:e=>H("inventory","finishedGoods",e),color:"purple",description:"Finished goods inventory value"}),a.jsx(B,{label:"Turnover Rate",value:A.inventory.turnoverRate,min:2,max:20,unit:"x/year",onChange:e=>H("inventory","turnoverRate",e),color:"green",description:"How many times inventory turns per year"})]}),a.jsxs("div",{className:"mb-8",children:[a.jsxs("h4",{className:"font-medium text-gray-800 mb-4 flex items-center",children:[a.jsx(g,{className:"w-4 h-4 mr-2"}),"Production Parameters"]}),a.jsx(B,{label:"Capacity Utilization",value:A.production.capacity,min:50,max:100,unit:"%",onChange:e=>H("production","capacity",e),color:"blue",description:"Current production capacity utilization"}),a.jsx(B,{label:"Production Efficiency",value:A.production.efficiency,min:60,max:100,unit:"%",onChange:e=>H("production","efficiency",e),color:"green",description:"Overall production efficiency"}),a.jsx(B,{label:"Overtime Hours",value:A.production.overtime,min:0,max:40,unit:"%",onChange:e=>H("production","overtime",e),color:"yellow",description:"Percentage of overtime hours"})]})]}),a.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[a.jsx(l,{className:"w-5 h-5 mr-2 text-green-600"}),"12-Month Working Capital Projection"]}),a.jsx(v,{width:"100%",height:300,children:a.jsxs(p,{data:z,children:[a.jsx(f,{strokeDasharray:"3 3"}),a.jsx(w,{dataKey:"monthName"}),a.jsx(N,{}),a.jsx(C,{formatter:(e,a)=>[`£${e.toLocaleString()}`,a]}),a.jsx(R,{}),a.jsx(k,{type:"monotone",dataKey:"workingCapital",fill:"#3b82f6",fillOpacity:.3,stroke:"#3b82f6",name:"Working Capital"}),a.jsx(F,{type:"monotone",dataKey:"freeCashFlow",stroke:"#10b981",strokeWidth:2,name:"Free Cash Flow"})]})})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[a.jsx(b,{className:"w-5 h-5 mr-2 text-purple-600"}),"Cash Components Analysis"]}),a.jsx(v,{width:"100%",height:300,children:a.jsxs(M,{data:z,children:[a.jsx(f,{strokeDasharray:"3 3"}),a.jsx(w,{dataKey:"monthName"}),a.jsx(N,{}),a.jsx(C,{formatter:(e,a)=>[`£${e.toLocaleString()}`,a]}),a.jsx(R,{}),a.jsx(k,{type:"monotone",dataKey:"receivables",stackId:"1",fill:"#3b82f6",name:"Receivables"}),a.jsx(k,{type:"monotone",dataKey:"inventory",stackId:"1",fill:"#f59e0b",name:"Inventory"}),a.jsx(k,{type:"monotone",dataKey:"payables",stackId:"2",fill:"#ef4444",name:"Payables"})]})})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[a.jsx(c,{className:"w-5 h-5 mr-2 text-orange-600"}),"Efficiency Metrics"]}),a.jsx(v,{width:"100%",height:200,children:a.jsxs(S,{data:[{name:"Receivables Efficiency",value:$.receivablesEfficiency,target:12},{name:"Payables Efficiency",value:$.payablesEfficiency,target:10},{name:"Inventory Efficiency",value:$.inventoryEfficiency,target:8},{name:"Asset Turnover",value:$.assetTurnover,target:2}],children:[a.jsx(f,{strokeDasharray:"3 3"}),a.jsx(w,{dataKey:"name"}),a.jsx(N,{}),a.jsx(C,{}),a.jsx(R,{}),a.jsx(P,{dataKey:"value",fill:"#3b82f6",name:"Current"}),a.jsx(P,{dataKey:"target",fill:"#10b981",name:"Target"})]})})]})]})]}),E.length>0&&a.jsxs("div",{className:"mt-8 bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[a.jsx(y,{className:"w-5 h-5 mr-2 text-indigo-600"}),"Saved Scenarios (",E.length,")"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:E.map((e,s)=>a.jsxs("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-colors "+(s===D?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>{var e;E[e=s]&&(I(E[e].parameters),K(e))},children:[a.jsx("h4",{className:"font-medium text-gray-900",children:e.name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Working Capital: £",e.metrics.workingCapital.toLocaleString()]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Cycle: ",Math.round(e.metrics.cashConversionCycle)," days"]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(e.timestamp).toLocaleDateString()})]},s))})]})]})})};export{A as default};
