const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/RegionalContributionChart-Cns9MYEb.js","assets/vendor-C1LNgw1J.js","assets/charts-1s3mMhcR.js","assets/PLAnalysisChart-DBCIGQA7.js","assets/ProductSalesChart-Cso4rRVU.js","assets/StockLevelsWidget-BWne7RV-.js","assets/index-D0toF5Q6.js","assets/data-layer-rESbPKUZ.js","assets/radix-CSh4aNe1.js","assets/router-BEPb3H3e.js","assets/index--WJAecVH.css","assets/stockLevelsApi-ppxzy1K2.js","assets/QuickActions-BhdpwPIz.js"])))=>i.map(i=>d[i]);
import{r as s,ab as e,b1 as g}from"./vendor-C1LNgw1J.js";import{B as A,C as u,a as h,b as p,c as m,d as x}from"./index-D0toF5Q6.js";class C{constructor(){this.baseURL="/api",this.defaultHeaders={"Content-Type":"application/json",Accept:"application/json"}}async request(a,n={}){const o=`${this.baseURL}${a}`,d={headers:{...this.defaultHeaders,...n.headers},...n};try{const l=await fetch(o,d);if(!l.ok)throw new Error(`API Error: ${l.status} ${l.statusText}`);const j=l.headers.get("content-type");return j&&j.includes("application/json")?await l.json():await l.text()}catch(l){throw console.error(`[APIClient] Request failed for ${a}:`,l),l}}async get(a,n={}){const o=new URL(`${this.baseURL}${a}`,window.location.origin);return Object.keys(n).forEach(d=>{n[d]!==void 0&&n[d]!==null&&o.searchParams.append(d,n[d])}),this.request(o.pathname+o.search,{method:"GET"})}async post(a,n={}){return this.request(a,{method:"POST",body:JSON.stringify(n)})}async put(a,n={}){return this.request(a,{method:"PUT",body:JSON.stringify(n)})}async delete(a){return this.request(a,{method:"DELETE"})}async health(){return this.get("/health")}async status(){return this.get("/status")}}const f=new C,y={async getPLAnalysis(t={}){return(await f.get("/api/financial/pl-analysis",{params:t})).data},async getPLSummary(t="year"){return(await f.get("/api/financial/pl-summary",{params:{period:t}})).data},async getKPISummary(){return(await f.get("/api/financial/kpi-summary")).data}},w={async getProductSalesData(t="year"){return(await f.get("/api/sales/product-performance",{params:{period:t}})).data},async getProductSalesSummary(t="year"){return(await f.get("/api/sales/product-summary",{params:{period:t}})).data},async getTopProducts(t=5){return(await f.get("/api/sales/top-products",{params:{limit:t}})).data}},R=[{region:"UK",revenue:42e5,ebitda:98e4},{region:"US",revenue:385e4,ebitda:82e4},{region:"EU",revenue:615e4,ebitda:114e4}],I=[{label:"Global working capital",value:"$9.2M",helper:"Across all subsidiaries"},{label:"Cash coverage",value:"214 days",helper:"Including credit facilities"},{label:"Intercompany exposure",value:"$1.1M",helper:"Pending settlements"},{label:"FX sensitivity",value:"$380K",helper:"Â±1% USD/EUR/JPY"}],L=[{label:"Annual revenue",value:"$14.2M",helper:"Year to date"},{label:"Units sold",value:"568K",helper:"Current quarter"},{label:"Gross margin",value:"62.3%",helper:"Average margin"}],K=s.lazy(()=>g(()=>import("./RegionalContributionChart-Cns9MYEb.js"),__vite__mapDeps([0,1,2]))),T=s.lazy(()=>g(()=>import("./PLAnalysisChart-DBCIGQA7.js"),__vite__mapDeps([3,1,2]))),U=s.lazy(()=>g(()=>import("./ProductSalesChart-Cso4rRVU.js"),__vite__mapDeps([4,1,2]))),$=s.lazy(()=>g(()=>import("./StockLevelsWidget-BWne7RV-.js"),__vite__mapDeps([5,1,6,7,8,9,10,11]))),O=s.lazy(()=>g(()=>import("./QuickActions-BhdpwPIz.js"),__vite__mapDeps([12,1,6,7,8,9,10,11]))),q=()=>{const[t,a]=s.useState([]),[n,o]=s.useState(!0),[d,l]=s.useState(null),[j,b]=s.useState(L),[M,v]=s.useState(!0),[z,P]=s.useState(null),[_,N]=s.useState([]),[D,E]=s.useState(!0),[k,S]=s.useState(null);return s.useEffect(()=>{(async()=>{try{o(!0),l(null);const r=await y.getPLAnalysis();if(r.success)a(r.data);else throw new Error("Failed to fetch P&L data")}catch(r){console.error("Error fetching P&L data:",r),l(r.message);const c=y.getMockData();a(c.data)}finally{o(!1)}})()},[]),s.useEffect(()=>{(async()=>{try{v(!0),P(null);const r=await y.getKPISummary();if(r.success&&r.data){const c=r.data;b([{label:"Annual revenue",value:c.annualRevenue.value,helper:c.annualRevenue.helper},{label:"Units sold",value:c.unitsSold.value,helper:c.unitsSold.helper},{label:"Gross margin",value:c.grossMargin.value,helper:c.grossMargin.helper}])}else throw new Error("Failed to fetch KPI data")}catch(r){console.error("Error fetching KPI data:",r),P(r.message),b(L)}finally{v(!1)}})()},[]),s.useEffect(()=>{(async()=>{try{E(!0),S(null);const r=await w.getProductSalesData();if(r.success)N(r.data);else throw new Error("Failed to fetch product sales data")}catch(r){console.error("Error fetching product sales data:",r),S(r.message);const c=w.getMockData();N(c.data)}finally{E(!1)}})()},[]),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold tracking-tight",children:"Enterprise dashboard"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Consolidated liquidity and performance outlook across all regions."})]}),e.jsx(A,{variant:"outline",children:"Global view"})]}),e.jsxs(u,{children:[e.jsxs(h,{children:[e.jsx(p,{children:"Capital position"}),e.jsx(m,{children:"Key metrics reviewed in the weekly treasury meeting."})]}),e.jsx(x,{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:I.map(i=>e.jsxs("div",{className:"rounded-lg border border-border bg-muted/30 p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:i.label}),e.jsx("p",{className:"text-lg font-semibold text-foreground",children:i.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:i.helper})]},i.label))})]}),e.jsxs(u,{children:[e.jsxs(h,{children:[e.jsx(p,{children:"Performance metrics"}),e.jsx(m,{children:"Key business performance indicators tracked for operational excellence."})]}),e.jsx(x,{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:j.map(i=>e.jsxs("div",{className:"rounded-lg border border-border bg-muted/30 p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:i.label}),e.jsx("p",{className:"text-lg font-semibold text-foreground",children:i.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:i.helper})]},i.label))})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs(u,{children:[e.jsxs(h,{children:[e.jsx(p,{children:"Product Sales Performance"}),e.jsx(m,{children:"Revenue by product line"})]}),e.jsx(x,{className:"h-64",children:D?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]})}):k?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-destructive mb-2",children:"Error loading data"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Using sample data"})]})}):e.jsx(s.Suspense,{fallback:e.jsx("div",{className:"flex h-full items-center justify-center",children:"Loading chart..."}),children:e.jsx(U,{data:_})})})]}),e.jsxs(u,{children:[e.jsxs(h,{children:[e.jsx(p,{children:"P&L Analysis"}),e.jsx(m,{children:"Monthly profit and loss trends"})]}),e.jsx(x,{className:"h-64",children:n?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]})}):d?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-destructive mb-2",children:"Error loading data"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Using sample data"})]})}):e.jsx(s.Suspense,{fallback:e.jsx("div",{className:"flex h-full items-center justify-center",children:"Loading chart..."}),children:e.jsx(T,{data:t})})})]}),e.jsxs(u,{children:[e.jsxs(h,{children:[e.jsx(p,{children:"Regional Contribution"}),e.jsx(m,{children:"Revenue and EBITDA by region"})]}),e.jsx(x,{className:"h-64",children:e.jsx(s.Suspense,{fallback:e.jsx("div",{className:"flex h-full items-center justify-center",children:"Loading chart..."}),children:e.jsx(K,{data:R})})})]})]}),e.jsx(s.Suspense,{fallback:e.jsxs(u,{children:[e.jsxs(h,{children:[e.jsx(p,{children:"Current Stock Levels"}),e.jsx(m,{children:"Loading inventory data..."})]}),e.jsx(x,{className:"h-64",children:e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent"})})})]}),children:e.jsx($,{})}),e.jsx(s.Suspense,{fallback:e.jsxs(u,{className:"mt-8",children:[e.jsxs(h,{children:[e.jsx(p,{children:"Quick Actions"}),e.jsx(m,{children:"Loading quick actions..."})]}),e.jsx(x,{className:"h-32",children:e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent"})})})]}),children:e.jsx(O,{})})]})},F=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"}));export{F as D,w as a,f as b,y as p};
