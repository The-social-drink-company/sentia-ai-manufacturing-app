import{a6 as e,u as a,a4 as t,j as n,r as s}from"./react-core-DkFbty9o.js";import{a as i,c as r,f as o}from"./index-D4EDaX83.js";import{S as l,a as c,y as d,ak as m,k as p,e as x,F as u,al as b,u as v,ad as y,ae as g,ag as h}from"./ui-components-J4-_vVnI.js";import"./vendor-CHbOot_X.js";import"./charts-DxLx1lqX.js";import"./vendor-utils-BvmCeSbq.js";import"./router-C0m1gglZ.js";import"./auth-M1VfQxmO.js";import"./forms-CtqjxpzJ.js";import"./animation-CTJwy-Vh.js";const j=({category:e,title:a,description:t,children:s,icon:i,warning:o=!1})=>n.jsx("div",{className:r("bg-white dark:bg-gray-800 rounded-lg border p-6",o?"border-yellow-300 dark:border-yellow-700":"border-gray-200 dark:border-gray-700"),children:n.jsxs("div",{className:"flex items-start space-x-4",children:[n.jsx("div",{className:r("p-2 rounded-lg",o?"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400":"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-400"),children:n.jsx(i,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:a})}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:t}),s]})]})}),_=({label:e,value:a,type:t="text",options:o=[],sensitive:l=!1,editable:c=!0,onChange:d,onSave:m,environment:p="development",description:x})=>{const[u,j]=s.useState(!1),[_,f]=s.useState(a),[k,N]=s.useState(!1),{hasPermission:S}=i(),w=c&&S("admin.settings.edit")&&("production"!==p||S("admin.production.edit")),P=l&&!k&&a?"••••••••••••••••":a||"(not set)";return n.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-200 dark:border-gray-700 last:border-b-0",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e}),"production"===p&&n.jsx("span",{className:"px-2 py-0.5 text-xs bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200 rounded",children:"PROD"})]}),x&&n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:x})]}),n.jsx("div",{className:"flex items-center space-x-2",children:u?n.jsxs("div",{className:"flex items-center space-x-2",children:["select"===t?n.jsx("select",{value:_,onChange:e=>f(e.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:o.map(e=>n.jsx("option",{value:e.value,children:e.label},e.value))}):"boolean"===t?n.jsx("label",{className:"flex items-center",children:n.jsx("input",{type:"checkbox",checked:_,onChange:e=>f(e.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600"})}):n.jsx("input",{type:l&&!k?"password":t,value:_,onChange:e=>f(e.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",style:{minWidth:"200px"}}),n.jsx("button",{onClick:()=>{m?.(_),j(!1)},className:"p-1 text-green-600 hover:text-green-800",title:"Save",children:n.jsx(b,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>{f(a),j(!1)},className:"p-1 text-gray-500 hover:text-gray-700",title:"Cancel",children:n.jsx(v,{className:"w-4 h-4"})})]}):n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:r("text-sm px-3 py-1 rounded",l?"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 font-mono":"text-gray-700 dark:text-gray-300"),children:"boolean"===t?a?"Enabled":"Disabled":P}),l&&a&&n.jsx("button",{onClick:()=>N(!k),className:"p-1 text-gray-500 hover:text-gray-700",title:k?"Hide":"Show",children:k?n.jsx(y,{className:"w-4 h-4"}):n.jsx(g,{className:"w-4 h-4"})}),w&&n.jsx("button",{onClick:()=>j(!0),className:"p-1 text-blue-500 hover:text-blue-700",title:"Edit",children:n.jsx(h,{className:"w-4 h-4"})})]})})]})},f=()=>{const{hasPermission:s}=i(),r=e(),b="production",{data:v,isLoading:y}=a({queryKey:["admin","settings"],queryFn:async()=>(await new Promise(e=>setTimeout(e,1e3)),{application:{app_name:"Sentia Manufacturing Dashboard",app_version:"1.0.0",maintenance_mode:!1,max_file_size:"10MB",session_timeout:3600,timezone:"UTC"},security:{require_mfa:!0,password_policy:"strong",login_attempts:5,lockout_duration:900,session_security:"high",api_rate_limit:1e3},email:{smtp_host:"smtp.gmail.com",smtp_port:587,smtp_username:"noreply@company.com",smtp_password:"app-password-here",smtp_encryption:"tls",from_address:"noreply@company.com",from_name:"Sentia Manufacturing"},notifications:{error_notifications:!0,maintenance_alerts:!0,security_alerts:!0,performance_alerts:!1,slack_webhook:"",teams_webhook:""},performance:{cache_enabled:!0,cache_ttl:3600,database_pool_size:20,api_timeout:30,log_level:"info",enable_metrics:!0},integrations:{shopify_enabled:!0,amazon_enabled:!1,xero_enabled:!0,analytics_enabled:!0,sentry_dsn:"https://sentry.io/projects/123"}}),refetchInterval:6e4}),g=t({mutationFn:async({category:e,key:a,value:t})=>(await new Promise(e=>setTimeout(e,500)),o("Settings updated",{component:"AdminSettings",category:e,key:a,value:t}),{success:!0}),onSuccess:()=>{r.invalidateQueries(["admin","settings"])}}),h=(e,a,t)=>{g.mutate({category:e,key:a,value:t})};return s("admin.settings.view")?y?n.jsx("div",{className:"p-6 space-y-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-6"}),[...Array(4)].map((e,a)=>n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 mb-4",children:[n.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mb-4"}),n.jsx("div",{className:"space-y-3",children:[...Array(3)].map((e,a)=>n.jsxs("div",{className:"flex justify-between",children:[n.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4"}),n.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/5"})]},a))})]},a))]})}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"System Settings"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Configure application behavior and system preferences"})]}),n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg px-4 py-2 dark:bg-red-900/20 dark:border-red-800",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(c,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),n.jsx("span",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Production Environment - Changes require approval"})]})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsx(j,{category:"application",title:"Application Settings",description:"Core application configuration and behavior",icon:d,children:n.jsxs("div",{className:"space-y-1",children:[n.jsx(_,{label:"Application Name",value:v?.application.app_name,onSave:e=>h("application","app_name",e),environment:b}),n.jsx(_,{label:"Version",value:v?.application.app_version,editable:!1,environment:b}),n.jsx(_,{label:"Maintenance Mode",value:v?.application.maintenance_mode,type:"boolean",onSave:e=>h("application","maintenance_mode",e),environment:b,description:"Enable to put the application in maintenance mode"}),n.jsx(_,{label:"Max File Size",value:v?.application.max_file_size,onSave:e=>h("application","max_file_size",e),environment:b}),n.jsx(_,{label:"Session Timeout (seconds)",value:v?.application.session_timeout,type:"number",onSave:e=>h("application","session_timeout",parseInt(e)),environment:b})]})}),n.jsx(j,{category:"security",title:"Security Settings",description:"Authentication, authorization, and security policies",icon:l,warning:!0,children:n.jsxs("div",{className:"space-y-1",children:[n.jsx(_,{label:"Require MFA",value:v?.security.require_mfa,type:"boolean",onSave:e=>h("security","require_mfa",e),environment:b,description:"Require multi-factor authentication for all users"}),n.jsx(_,{label:"Password Policy",value:v?.security.password_policy,type:"select",options:[{value:"weak",label:"Weak"},{value:"medium",label:"Medium"},{value:"strong",label:"Strong"}],onSave:e=>h("security","password_policy",e),environment:b}),n.jsx(_,{label:"Max Login Attempts",value:v?.security.login_attempts,type:"number",onSave:e=>h("security","login_attempts",parseInt(e)),environment:b}),n.jsx(_,{label:"Lockout Duration (seconds)",value:v?.security.lockout_duration,type:"number",onSave:e=>h("security","lockout_duration",parseInt(e)),environment:b}),n.jsx(_,{label:"API Rate Limit (per hour)",value:v?.security.api_rate_limit,type:"number",onSave:e=>h("security","api_rate_limit",parseInt(e)),environment:b})]})}),n.jsx(j,{category:"email",title:"Email Configuration",description:"SMTP settings for system notifications and user communications",icon:m,children:n.jsxs("div",{className:"space-y-1",children:[n.jsx(_,{label:"SMTP Host",value:v?.email.smtp_host,onSave:e=>h("email","smtp_host",e),environment:b}),n.jsx(_,{label:"SMTP Port",value:v?.email.smtp_port,type:"number",onSave:e=>h("email","smtp_port",parseInt(e)),environment:b}),n.jsx(_,{label:"SMTP Username",value:v?.email.smtp_username,onSave:e=>h("email","smtp_username",e),environment:b}),n.jsx(_,{label:"SMTP Password",value:v?.email.smtp_password,sensitive:!0,onSave:e=>h("email","smtp_password",e),environment:b}),n.jsx(_,{label:"From Address",value:v?.email.from_address,type:"email",onSave:e=>h("email","from_address",e),environment:b})]})}),n.jsx(j,{category:"notifications",title:"Notification Settings",description:"Configure system alerts and notification channels",icon:p,children:n.jsxs("div",{className:"space-y-1",children:[n.jsx(_,{label:"Error Notifications",value:v?.notifications.error_notifications,type:"boolean",onSave:e=>h("notifications","error_notifications",e),environment:b}),n.jsx(_,{label:"Maintenance Alerts",value:v?.notifications.maintenance_alerts,type:"boolean",onSave:e=>h("notifications","maintenance_alerts",e),environment:b}),n.jsx(_,{label:"Security Alerts",value:v?.notifications.security_alerts,type:"boolean",onSave:e=>h("notifications","security_alerts",e),environment:b}),n.jsx(_,{label:"Slack Webhook",value:v?.notifications.slack_webhook,sensitive:!0,onSave:e=>h("notifications","slack_webhook",e),environment:b,description:"Webhook URL for Slack notifications"})]})}),n.jsx(j,{category:"performance",title:"Performance & Monitoring",description:"System performance settings and monitoring configuration",icon:x,children:n.jsxs("div",{className:"space-y-1",children:[n.jsx(_,{label:"Cache Enabled",value:v?.performance.cache_enabled,type:"boolean",onSave:e=>h("performance","cache_enabled",e),environment:b}),n.jsx(_,{label:"Cache TTL (seconds)",value:v?.performance.cache_ttl,type:"number",onSave:e=>h("performance","cache_ttl",parseInt(e)),environment:b}),n.jsx(_,{label:"Database Pool Size",value:v?.performance.database_pool_size,type:"number",onSave:e=>h("performance","database_pool_size",parseInt(e)),environment:b}),n.jsx(_,{label:"Log Level",value:v?.performance.log_level,type:"select",options:[{value:"error",label:"Error"},{value:"warn",label:"Warning"},{value:"info",label:"Info"},{value:"debug",label:"Debug"}],onSave:e=>h("performance","log_level",e),environment:b}),n.jsx(_,{label:"Enable Metrics Collection",value:v?.performance.enable_metrics,type:"boolean",onSave:e=>h("performance","enable_metrics",e),environment:b})]})}),n.jsx(j,{category:"integrations",title:"External Integrations",description:"Enable/disable external service integrations",icon:u,children:n.jsxs("div",{className:"space-y-1",children:[n.jsx(_,{label:"Shopify Integration",value:v?.integrations.shopify_enabled,type:"boolean",onSave:e=>h("integrations","shopify_enabled",e),environment:b}),n.jsx(_,{label:"Amazon SP-API",value:v?.integrations.amazon_enabled,type:"boolean",onSave:e=>h("integrations","amazon_enabled",e),environment:b}),n.jsx(_,{label:"Xero Accounting",value:v?.integrations.xero_enabled,type:"boolean",onSave:e=>h("integrations","xero_enabled",e),environment:b}),n.jsx(_,{label:"Analytics Tracking",value:v?.integrations.analytics_enabled,type:"boolean",onSave:e=>h("integrations","analytics_enabled",e),environment:b}),n.jsx(_,{label:"Sentry DSN",value:v?.integrations.sentry_dsn,sensitive:!0,onSave:e=>h("integrations","sentry_dsn",e),environment:b,description:"Error tracking and monitoring"})]})})]})]}):n.jsxs("div",{className:"p-6 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(l,{className:"w-8 h-8 text-red-600"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Access Denied"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"You don't have permission to view system settings."})]})};export{f as default};
