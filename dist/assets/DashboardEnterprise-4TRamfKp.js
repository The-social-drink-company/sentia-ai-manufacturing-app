const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/RegionalContributionChart-Cns9MYEb.js","assets/vendor-C1LNgw1J.js","assets/charts-1s3mMhcR.js","assets/PLAnalysisChart-DBCIGQA7.js","assets/ProductSalesChart-Cso4rRVU.js","assets/StockLevelsWidget-B-UNogBL.js","assets/index-N-0KO8U4.js","assets/data-layer-rESbPKUZ.js","assets/radix-CSh4aNe1.js","assets/router-BEPb3H3e.js","assets/index--WJAecVH.css","assets/stockLevelsApi-y4gfd6ZA.js","assets/QuickActions-CozKipvW.js"])))=>i.map(i=>d[i]);
import{r as s,ab as e,b1 as g}from"./vendor-C1LNgw1J.js";import{B as A,C as o,a as d,b as u,c as h,d as p}from"./index-N-0KO8U4.js";class C{constructor(){this.baseURL="/api",this.defaultHeaders={"Content-Type":"application/json",Accept:"application/json"}}async request(a,l={}){const x=`${this.baseURL}${a}`,c={headers:{...this.defaultHeaders,...l.headers},...l};try{const t=await fetch(x,c);if(!t.ok)throw new Error(`API Error: ${t.status} ${t.statusText}`);const j=t.headers.get("content-type");return j&&j.includes("application/json")?await t.json():await t.text()}catch(t){throw console.error(`[APIClient] Request failed for ${a}:`,t),t}}async get(a,l={}){const x=a.startsWith("/api")?a:`${this.baseURL}${a}`,c=new URL(x,window.location.origin);return Object.keys(l).forEach(t=>{l[t]!==void 0&&l[t]!==null&&c.searchParams.append(t,l[t])}),this.request(c.pathname+c.search,{method:"GET"})}async post(a,l={}){return this.request(a,{method:"POST",body:JSON.stringify(l)})}async put(a,l={}){return this.request(a,{method:"PUT",body:JSON.stringify(l)})}async delete(a){return this.request(a,{method:"DELETE"})}async health(){return this.get("/health")}async status(){return this.get("/status")}}const f=new C,S={async getPLAnalysis(n={}){return(await f.get("/api/financial/pl-analysis",{params:n})).data},async getPLSummary(n="year"){return(await f.get("/api/financial/pl-summary",{params:{period:n}})).data},async getKPISummary(){return(await f.get("/api/financial/kpi-summary")).data}},k={async getProductSalesData(n="year"){return(await f.get("/api/sales/product-performance",{params:{period:n}})).data},async getProductSalesSummary(n="year"){return(await f.get("/api/sales/product-summary",{params:{period:n}})).data},async getTopProducts(n=5){return(await f.get("/api/sales/top-products",{params:{limit:n}})).data}},R=[{region:"UK",revenue:42e5,ebitda:98e4},{region:"US",revenue:385e4,ebitda:82e4},{region:"EU",revenue:615e4,ebitda:114e4}],I=[{label:"Global working capital",value:"$9.2M",helper:"Across all subsidiaries"},{label:"Cash coverage",value:"214 days",helper:"Including credit facilities"},{label:"Intercompany exposure",value:"$1.1M",helper:"Pending settlements"},{label:"FX sensitivity",value:"$380K",helper:"Â±1% USD/EUR/JPY"}],w=[{label:"Annual revenue",value:"$14.2M",helper:"Year to date"},{label:"Units sold",value:"568K",helper:"Current quarter"},{label:"Gross margin",value:"62.3%",helper:"Average margin"}],K=s.lazy(()=>g(()=>import("./RegionalContributionChart-Cns9MYEb.js"),__vite__mapDeps([0,1,2]))),T=s.lazy(()=>g(()=>import("./PLAnalysisChart-DBCIGQA7.js"),__vite__mapDeps([3,1,2]))),U=s.lazy(()=>g(()=>import("./ProductSalesChart-Cso4rRVU.js"),__vite__mapDeps([4,1,2]))),$=s.lazy(()=>g(()=>import("./StockLevelsWidget-B-UNogBL.js"),__vite__mapDeps([5,1,6,7,8,9,10,11]))),O=s.lazy(()=>g(()=>import("./QuickActions-CozKipvW.js"),__vite__mapDeps([12,1,6,7,8,9,10,11]))),q=()=>{const[n,a]=s.useState([]),[l,x]=s.useState(!0),[c,t]=s.useState(null),[j,y]=s.useState(w),[M,b]=s.useState(!0),[z,v]=s.useState(null),[L,P]=s.useState([]),[_,N]=s.useState(!0),[D,E]=s.useState(null);return s.useEffect(()=>{(async()=>{try{x(!0),t(null);const r=await S.getPLAnalysis();if(r.success)a(r.data);else throw new Error("Failed to fetch P&L data")}catch(r){console.error("Error fetching P&L data:",r),t(r.message),a([])}finally{x(!1)}})()},[]),s.useEffect(()=>{(async()=>{try{b(!0),v(null);const r=await S.getKPISummary();if(r.success&&r.data){const m=r.data;y([{label:"Annual revenue",value:m.annualRevenue.value,helper:m.annualRevenue.helper},{label:"Units sold",value:m.unitsSold.value,helper:m.unitsSold.helper},{label:"Gross margin",value:m.grossMargin.value,helper:m.grossMargin.helper}])}else throw new Error("Failed to fetch KPI data")}catch(r){console.error("Error fetching KPI data:",r),v(r.message),y(w)}finally{b(!1)}})()},[]),s.useEffect(()=>{(async()=>{try{N(!0),E(null);const r=await k.getProductSalesData();if(r.success)P(r.data);else throw new Error("Failed to fetch product sales data")}catch(r){console.error("Error fetching product sales data:",r),E(r.message),P([])}finally{N(!1)}})()},[]),e.jsxs("section",{className:"space-y-6",children:[e.jsxs("header",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold tracking-tight",children:"Enterprise dashboard"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Consolidated liquidity and performance outlook across all regions."})]}),e.jsx(A,{variant:"outline",children:"Global view"})]}),e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsx(u,{children:"Capital position"}),e.jsx(h,{children:"Key metrics reviewed in the weekly treasury meeting."})]}),e.jsx(p,{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:I.map(i=>e.jsxs("div",{className:"rounded-lg border border-border bg-muted/30 p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:i.label}),e.jsx("p",{className:"text-lg font-semibold text-foreground",children:i.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:i.helper})]},i.label))})]}),e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsx(u,{children:"Performance metrics"}),e.jsx(h,{children:"Key business performance indicators tracked for operational excellence."})]}),e.jsx(p,{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:j.map(i=>e.jsxs("div",{className:"rounded-lg border border-border bg-muted/30 p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:i.label}),e.jsx("p",{className:"text-lg font-semibold text-foreground",children:i.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:i.helper})]},i.label))})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsx(u,{children:"Product Sales Performance"}),e.jsx(h,{children:"Revenue by product line"})]}),e.jsx(p,{className:"h-64",children:_?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]})}):D?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-destructive mb-2",children:"Error loading data"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Using sample data"})]})}):e.jsx(s.Suspense,{fallback:e.jsx("div",{className:"flex h-full items-center justify-center",children:"Loading chart..."}),children:e.jsx(U,{data:L})})})]}),e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsx(u,{children:"P&L Analysis"}),e.jsx(h,{children:"Monthly profit and loss trends"})]}),e.jsx(p,{className:"h-64",children:l?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]})}):c?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-destructive mb-2",children:"Error loading data"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Using sample data"})]})}):e.jsx(s.Suspense,{fallback:e.jsx("div",{className:"flex h-full items-center justify-center",children:"Loading chart..."}),children:e.jsx(T,{data:n})})})]}),e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsx(u,{children:"Regional Contribution"}),e.jsx(h,{children:"Revenue and EBITDA by region"})]}),e.jsx(p,{className:"h-64",children:e.jsx(s.Suspense,{fallback:e.jsx("div",{className:"flex h-full items-center justify-center",children:"Loading chart..."}),children:e.jsx(K,{data:R})})})]})]}),e.jsx(s.Suspense,{fallback:e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsx(u,{children:"Current Stock Levels"}),e.jsx(h,{children:"Loading inventory data..."})]}),e.jsx(p,{className:"h-64",children:e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent"})})})]}),children:e.jsx($,{})}),e.jsx(s.Suspense,{fallback:e.jsxs(o,{className:"mt-8",children:[e.jsxs(d,{children:[e.jsx(u,{children:"Quick Actions"}),e.jsx(h,{children:"Loading quick actions..."})]}),e.jsx(p,{className:"h-32",children:e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent"})})})]}),children:e.jsx(O,{})})]})},F=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"}));export{F as D,k as a,f as b,S as p};
