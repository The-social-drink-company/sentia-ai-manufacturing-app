import{j as e}from"./query-CJR12TOn.js";import{a}from"./vendor-BPOA5ME_.js";import{l as s}from"./index-e-Rauy7p.js";import{T as i}from"./trending-up-BLb8gqz0.js";import{T as t}from"./target-ZIjrDFVB.js";import{B as r}from"./bar-chart-3-Dm0Ncbbr.js";import{A as n}from"./alert-circle-B33TiXp6.js";import{C as l}from"./check-circle-CpvN4-nZ.js";import{R as o,A as c,C as d,X as m,Y as x,T as h,a as u,L as p,b as y}from"./charts-D8EF9NMr.js";import"./auth-zWw5cpzK.js";import"./utils-BeLtu-UY.js";const g=s("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),f=s("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),v=s("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),j=s("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),b=s("Sliders",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]),w=s("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),k=()=>{const[s,w]=a.useState({rawMaterials:{availability:85,deliveryTime:14,costVariation:0,bufferStock:20},manufacturing:{capacity:80,efficiency:92,overtime:0,downtime:5},inventory:{finishedGoods:30,rawMaterials:21,workInProcess:7,safetyStock:15},sales:{ukGrowth:8,usGrowth:12,euGrowth:5,seasonality:15,newProducts:0},finance:{interestRate:4.5,paymentTerms:30,collectionPeriod:45,payablesPeriod:60,cashReserve:10}}),[k]=a.useState({uk:{revenue:125e5,growth:8,margin:22,risk:"Low"},us:{revenue:182e5,growth:12,margin:25,risk:"Medium"},eu:{revenue:98e5,growth:5,margin:18,risk:"Low"}}),$=a.useMemo(()=>{const{rawMaterials:e,manufacturing:a,inventory:i,sales:t,finance:r}=s,n=k.uk.revenue*(1+t.ukGrowth/100)+k.us.revenue*(1+t.usGrowth/100)+k.eu.revenue*(1+t.euGrowth/100),l=a.capacity/100,o=a.efficiency/100,c=Math.min(1,l*o),d=n*c,m=.6*d*((i.finishedGoods+i.rawMaterials+i.workInProcess)/3/365),x=d*(r.collectionPeriod/365),h=.4*d*(r.payablesPeriod/365),u=m+x-h,p=(100-e.availability)/100,y=Math.max(0,(e.deliveryTime-10)/20),g=u*(r.interestRate/100),f=u*(1+t.seasonality/100),v=u*(1-t.seasonality/200),j=P(p,y,c);return{projectedRevenue:Math.round(d),workingCapital:Math.round(u),seasonalPeak:Math.round(f),seasonalTrough:Math.round(v),interestCost:Math.round(g),inventoryValue:Math.round(m),receivablesValue:Math.round(x),payablesValue:Math.round(h),actualCapacity:Math.round(100*c),rawMaterialRisk:Math.round(100*p),overallRisk:j,recommendations:S(s,{workingCapital:u,actualCapacity:c,rawMaterialRisk:p})}},[s,k]),F=a.useMemo(()=>{const e=[],a=$.workingCapital;for(let i=0;i<12;i++){const t=1+s.sales.seasonality/100*Math.sin(i*Math.PI*2/12+Math.PI/2);e.push({month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][i],workingCapital:Math.round(a*t),cashFlow:Math.round($.projectedRevenue/12*t-$.interestCost/12*t),inventory:Math.round($.inventoryValue*t),receivables:Math.round($.receivablesValue*t)})}return e},[$,s]),G=a.useCallback((e,a,s)=>{w(i=>({...i,[e]:{...i[e],[a]:s}}))},[]);return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(b,{className:"w-8 h-8 mr-3 text-blue-600"}),"What-If Analysis"]}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Interactive working capital optimization for UK, US, and EU markets"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Total Working Capital"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["$",($.workingCapital/1e6).toFixed(1),"M"]})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(N,{title:"Projected Revenue",value:`$${($.projectedRevenue/1e6).toFixed(1)}M`,change:"vs current year",trend:"up",icon:e.jsx(g,{className:"w-6 h-6"}),color:"green"}),e.jsx(N,{title:"Seasonal Peak WC",value:`$${($.seasonalPeak/1e6).toFixed(1)}M`,change:`+${s.sales.seasonality}% seasonal`,trend:"up",icon:e.jsx(i,{className:"w-6 h-6"}),color:"orange"}),e.jsx(N,{title:"Interest Cost",value:`$${($.interestCost/1e3).toFixed(0)}K`,change:`@ ${s.finance.interestRate}% rate`,trend:"neutral",icon:e.jsx(v,{className:"w-6 h-6"}),color:"blue"}),e.jsx(N,{title:"Capacity Utilization",value:`${$.actualCapacity}%`,change:"effective capacity",trend:$.actualCapacity>95?"up":"neutral",icon:e.jsx(t,{className:"w-6 h-6"}),color:$.actualCapacity>95?"red":"blue"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(M,{title:"Raw Materials & Supply Chain",icon:e.jsx(f,{className:"w-5 h-5"}),children:[e.jsx(C,{label:"Material Availability",value:s.rawMaterials.availability,onChange:e=>G("rawMaterials","availability",e),min:50,max:100,suffix:"%",description:"Supplier reliability and material availability"}),e.jsx(C,{label:"Delivery Lead Time",value:s.rawMaterials.deliveryTime,onChange:e=>G("rawMaterials","deliveryTime",e),min:7,max:60,suffix:" days",description:"Average delivery time from suppliers"}),e.jsx(C,{label:"Cost Variation",value:s.rawMaterials.costVariation,onChange:e=>G("rawMaterials","costVariation",e),min:-20,max:30,suffix:"%",description:"Expected change in raw material costs"}),e.jsx(C,{label:"Buffer Stock Level",value:s.rawMaterials.bufferStock,onChange:e=>G("rawMaterials","bufferStock",e),min:0,max:50,suffix:"%",description:"Safety stock as % of normal inventory"})]}),e.jsxs(M,{title:"Manufacturing Operations",icon:e.jsx(r,{className:"w-5 h-5"}),children:[e.jsx(C,{label:"Capacity Utilization",value:s.manufacturing.capacity,onChange:e=>G("manufacturing","capacity",e),min:50,max:100,suffix:"%",description:"Percentage of maximum production capacity"}),e.jsx(C,{label:"Manufacturing Efficiency",value:s.manufacturing.efficiency,onChange:e=>G("manufacturing","efficiency",e),min:70,max:100,suffix:"%",description:"Overall equipment effectiveness (OEE)"}),e.jsx(C,{label:"Overtime Hours",value:s.manufacturing.overtime,onChange:e=>G("manufacturing","overtime",e),min:0,max:40,suffix:"%",description:"Overtime as % of regular hours"})]}),e.jsxs(M,{title:"Inventory Management",icon:e.jsx(f,{className:"w-5 h-5"}),children:[e.jsx(C,{label:"Finished Goods Inventory",value:s.inventory.finishedGoods,onChange:e=>G("inventory","finishedGoods",e),min:7,max:90,suffix:" days",description:"Days of finished goods inventory"}),e.jsx(C,{label:"Raw Materials Inventory",value:s.inventory.rawMaterials,onChange:e=>G("inventory","rawMaterials",e),min:7,max:60,suffix:" days",description:"Days of raw materials inventory"}),e.jsx(C,{label:"Safety Stock Level",value:s.inventory.safetyStock,onChange:e=>G("inventory","safetyStock",e),min:5,max:40,suffix:"%",description:"Safety stock as % of normal inventory"})]}),e.jsxs(M,{title:"Sales Projections by Market",icon:e.jsx(i,{className:"w-5 h-5"}),children:[e.jsx(C,{label:"UK Market Growth",value:s.sales.ukGrowth,onChange:e=>G("sales","ukGrowth",e),min:-10,max:25,suffix:"%",description:"Expected growth in UK market"}),e.jsx(C,{label:"US Market Growth",value:s.sales.usGrowth,onChange:e=>G("sales","usGrowth",e),min:-10,max:30,suffix:"%",description:"Expected growth in US market"}),e.jsx(C,{label:"EU Market Growth",value:s.sales.euGrowth,onChange:e=>G("sales","euGrowth",e),min:-15,max:20,suffix:"%",description:"Expected growth in EU market"}),e.jsx(C,{label:"Seasonal Variation",value:s.sales.seasonality,onChange:e=>G("sales","seasonality",e),min:0,max:50,suffix:"%",description:"Peak season vs. normal sales"})]}),e.jsxs(M,{title:"Financial Parameters",icon:e.jsx(g,{className:"w-5 h-5"}),children:[e.jsx(C,{label:"Borrowing Interest Rate",value:s.finance.interestRate,onChange:e=>G("finance","interestRate",e),min:1,max:12,suffix:"%",step:.1,description:"Cost of borrowing working capital"}),e.jsx(C,{label:"Customer Payment Terms",value:s.finance.collectionPeriod,onChange:e=>G("finance","collectionPeriod",e),min:15,max:90,suffix:" days",description:"Average customer payment period"}),e.jsx(C,{label:"Supplier Payment Terms",value:s.finance.payablesPeriod,onChange:e=>G("finance","payablesPeriod",e),min:15,max:120,suffix:" days",description:"Payment terms with suppliers"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(j,{className:"w-5 h-5 mr-2 text-blue-600"}),"Working Capital Components"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-green-900",children:"Inventory"}),e.jsxs("span",{className:"text-lg font-bold text-green-900",children:["$",($.inventoryValue/1e6).toFixed(1),"M"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Receivables"}),e.jsxs("span",{className:"text-lg font-bold text-blue-900",children:["$",($.receivablesValue/1e6).toFixed(1),"M"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-red-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-red-900",children:"Payables"}),e.jsxs("span",{className:"text-lg font-bold text-red-900",children:["-$",($.payablesValue/1e6).toFixed(1),"M"]})]}),e.jsx("div",{className:"border-t pt-3",children:e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900",children:"Net Working Capital"}),e.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["$",($.workingCapital/1e6).toFixed(1),"M"]})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(n,{className:"w-5 h-5 mr-2 text-orange-600"}),"Risk Assessment"]}),e.jsx(R,{label:"Overall Risk",level:$.overallRisk}),e.jsx(R,{label:"Supply Chain Risk",level:$.rawMaterialRisk}),e.jsx(R,{label:"Capacity Risk",level:$.actualCapacity>95?85:25})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(l,{className:"w-5 h-5 mr-2 text-green-600"}),"Recommendations"]}),e.jsx("div",{className:"space-y-3",children:$.recommendations.map((a,s)=>e.jsxs("div",{className:"p-3 rounded-lg text-sm "+("high"===a.priority?"bg-red-50 border border-red-200":"medium"===a.priority?"bg-yellow-50 border border-yellow-200":"bg-blue-50 border border-blue-200"),children:[e.jsx("div",{className:"font-medium mb-1",children:a.title}),e.jsx("div",{className:"text-gray-600",children:a.description})]},s))})]})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Seasonal Working Capital Requirements"}),e.jsx(o,{width:"100%",height:300,children:e.jsxs(c,{data:F,children:[e.jsx(d,{strokeDasharray:"3 3"}),e.jsx(m,{dataKey:"month"}),e.jsx(x,{tickFormatter:e=>`$${(e/1e6).toFixed(1)}M`}),e.jsx(h,{formatter:e=>[`$${(e/1e6).toFixed(1)}M`,"Working Capital"]}),e.jsx(u,{type:"monotone",dataKey:"workingCapital",stroke:"#3B82F6",fill:"#93C5FD",strokeWidth:2})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Monthly Cash Flow Projection"}),e.jsx(o,{width:"100%",height:300,children:e.jsxs(p,{data:F,children:[e.jsx(d,{strokeDasharray:"3 3"}),e.jsx(m,{dataKey:"month"}),e.jsx(x,{tickFormatter:e=>`$${(e/1e6).toFixed(1)}M`}),e.jsx(h,{formatter:e=>[`$${(e/1e6).toFixed(1)}M`]}),e.jsx(y,{type:"monotone",dataKey:"cashFlow",stroke:"#10B981",strokeWidth:2,dot:{fill:"#10B981",strokeWidth:2,r:4}})]})})]})]})]})})},N=({title:a,value:s,change:t,trend:r,icon:n,color:l})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:a}),e.jsx("div",{className:`p-2 rounded-lg ${{green:"bg-green-50 text-green-600",red:"bg-red-50 text-red-600",blue:"bg-blue-50 text-blue-600",orange:"bg-orange-50 text-orange-600"}[l]}`,children:n})]}),e.jsx("div",{className:"flex items-end justify-between",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s}),e.jsxs("div",{className:"flex items-center mt-1",children:["up"===r&&e.jsx(i,{className:"w-4 h-4 text-green-500"}),"down"===r&&e.jsx(w,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:t})]})]})})]}),M=({title:a,icon:s,children:i})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center text-gray-900",children:[e.jsx("span",{className:"text-blue-600 mr-2",children:s}),a]}),e.jsx("div",{className:"space-y-4",children:i})]}),C=({label:a,value:s,onChange:i,min:t,max:r,suffix:n="",step:l=1,description:o})=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:a}),e.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[s,n]})]}),e.jsx("input",{type:"range",min:t,max:r,step:l,value:s,onChange:e=>i(parseFloat(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),e.jsx("p",{className:"text-xs text-gray-500",children:o})]}),R=({label:a,level:s})=>{return e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium text-gray-700 mb-1",children:[e.jsx("span",{children:a}),e.jsx("span",{children:(i=s,i<=30?"Low":i<=60?"Medium":"High")})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${(e=>e<=30?"bg-green-500":e<=60?"bg-yellow-500":"bg-red-500")(s)}`,style:{width:`${s}%`}})})]});var i},P=(e,a,s)=>{const i=100*(.4*e+.3*a+.3*(s<.8?.2:s>.95?.8:.1));return Math.min(100,Math.max(0,i))},S=(e,a)=>{const s=[];return a.workingCapital>2e7&&s.push({title:"High Working Capital Alert",description:"Consider reducing inventory levels or improving collection terms to lower working capital requirements.",priority:"high"}),a.actualCapacity>95&&s.push({title:"Capacity Constraint Risk",description:"Operating near maximum capacity. Consider increasing manufacturing capacity or overtime planning.",priority:"high"}),a.rawMaterialRisk>50&&s.push({title:"Supply Chain Risk",description:"High raw material supply risk detected. Consider diversifying suppliers or increasing buffer stock.",priority:"medium"}),e.finance.interestRate>6&&s.push({title:"High Borrowing Costs",description:"Interest rates above 6%. Focus on minimizing working capital through improved cash management.",priority:"medium"}),e.sales.seasonality>25&&s.push({title:"High Seasonality Impact",description:"Consider seasonal credit facilities or inventory management strategies to handle peak periods.",priority:"low"}),s.length>0?s:[{title:"Optimal Configuration",description:"Current settings appear well-balanced for your working capital requirements.",priority:"low"}]};export{k as default};
