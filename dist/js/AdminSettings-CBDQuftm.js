import{bM as e,an as a,bl as t,j as n,ad as s,F as i,z as r,ax as o,K as l,n as c,aD as d,a as m,b_ as p,bN as x,ay as u,af as b,bj as y}from"./chunk-dQ8ZuPJ5.js";import{a as v,c as g,e as h}from"./index-D9poZ9V0.js";import"./chunk-CVC8ZTrn.js";import"./chunk-CZm8CRZW.js";import"./chunk-BYhzkSrP.js";import"./chunk-BmDXyJMe.js";import"./chunk-CULnPDSP.js";import"./chunk-BqFGoBxF.js";import"./chunk-Dozjk7Op.js";const j=({category:e,title:a,description:t,children:s,icon:i,warning:r=!1})=>n.jsx("div",{className:g("bg-white dark:bg-gray-800 rounded-lg border p-6",r?"border-yellow-300 dark:border-yellow-700":"border-gray-200 dark:border-gray-700"),children:n.jsxs("div",{className:"flex items-start space-x-4",children:[n.jsx("div",{className:g("p-2 rounded-lg",r?"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400":"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-400"),children:n.jsx(i,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:a})}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:t}),s]})]})}),_=({label:e,value:a,type:t="text",options:s=[],sensitive:i=!1,editable:r=!0,onChange:o,onSave:l,environment:c="development",description:d})=>{const[h,j]=m.useState(!1),[_,f]=m.useState(a),[k,N]=m.useState(!1),{hasPermission:S}=v(),w=r&&S("admin.settings.edit")&&("production"!==c||S("admin.production.edit")),P=i&&!k&&a?"••••••••••••••••":a||"(not set)";return n.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-200 dark:border-gray-700 last:border-b-0",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e}),"production"===c&&n.jsx("span",{className:"px-2 py-0.5 text-xs bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200 rounded",children:"PROD"})]}),d&&n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:d})]}),n.jsx("div",{className:"flex items-center space-x-2",children:h?n.jsxs("div",{className:"flex items-center space-x-2",children:["select"===t?n.jsx("select",{value:_,onChange:e=>f(e.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:s.map(e=>n.jsx("option",{value:e.value,children:e.label},e.value))}):"boolean"===t?n.jsx("label",{className:"flex items-center",children:n.jsx("input",{type:"checkbox",checked:_,onChange:e=>f(e.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600"})}):n.jsx("input",{type:i&&!k?"password":t,value:_,onChange:e=>f(e.target.value),className:"px-2 py-1 text-sm border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",style:{minWidth:"200px"}}),n.jsx("button",{onClick:()=>{l?.(_),j(!1)},className:"p-1 text-green-600 hover:text-green-800",title:"Save",children:n.jsx(p,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>{f(a),j(!1)},className:"p-1 text-gray-500 hover:text-gray-700",title:"Cancel",children:n.jsx(x,{className:"w-4 h-4"})})]}):n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:g("text-sm px-3 py-1 rounded",i?"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 font-mono":"text-gray-700 dark:text-gray-300"),children:"boolean"===t?a?"Enabled":"Disabled":P}),i&&a&&n.jsx("button",{onClick:()=>N(!k),className:"p-1 text-gray-500 hover:text-gray-700",title:k?"Hide":"Show",children:k?n.jsx(u,{className:"w-4 h-4"}):n.jsx(b,{className:"w-4 h-4"})}),w&&n.jsx("button",{onClick:()=>j(!0),className:"p-1 text-blue-500 hover:text-blue-700",title:"Edit",children:n.jsx(y,{className:"w-4 h-4"})})]})})]})},f=()=>{const{hasPermission:m}=v(),p=e(),x="production",{data:u,isLoading:b}=a({queryKey:["admin","settings"],queryFn:async()=>(await new Promise(e=>setTimeout(e,1e3)),{application:{app_name:"Sentia Manufacturing Dashboard",app_version:"1.0.0",maintenance_mode:!1,max_file_size:"10MB",session_timeout:3600,timezone:"UTC"},security:{require_mfa:!0,password_policy:"strong",login_attempts:5,lockout_duration:900,session_security:"high",api_rate_limit:1e3},email:{smtp_host:"smtp.gmail.com",smtp_port:587,smtp_username:"noreply@company.com",smtp_password:"app-password-here",smtp_encryption:"tls",from_address:"noreply@company.com",from_name:"Sentia Manufacturing"},notifications:{error_notifications:!0,maintenance_alerts:!0,security_alerts:!0,performance_alerts:!1,slack_webhook:"",teams_webhook:""},performance:{cache_enabled:!0,cache_ttl:3600,database_pool_size:20,api_timeout:30,log_level:"info",enable_metrics:!0},integrations:{shopify_enabled:!0,amazon_enabled:!1,xero_enabled:!0,analytics_enabled:!0,sentry_dsn:"https://sentry.io/projects/123"}}),refetchInterval:6e4}),y=t({mutationFn:async({category:e,key:a,value:t})=>(await new Promise(e=>setTimeout(e,500)),h("Settings updated",{component:"AdminSettings",category:e,key:a,value:t}),{success:!0}),onSuccess:()=>{p.invalidateQueries(["admin","settings"])}}),g=(e,a,t)=>{y.mutate({category:e,key:a,value:t})};return m("admin.settings.view")?b?n.jsx("div",{className:"p-6 space-y-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-6"}),[...Array(4)].map((e,a)=>n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 mb-4",children:[n.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mb-4"}),n.jsx("div",{className:"space-y-3",children:[...Array(3)].map((e,a)=>n.jsxs("div",{className:"flex justify-between",children:[n.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4"}),n.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/5"})]},a))})]},a))]})}):n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"System Settings"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Configure application behavior and system preferences"})]}),n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg px-4 py-2 dark:bg-red-900/20 dark:border-red-800",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(i,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),n.jsx("span",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Production Environment - Changes require approval"})]})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsx(j,{category:"application",title:"Application Settings",description:"Core application configuration and behavior",icon:r,children:n.jsxs("div",{className:"space-y-1",children:[n.jsx(_,{label:"Application Name",value:u?.application.app_name,onSave:e=>g("application","app_name",e),environment:x}),n.jsx(_,{label:"Version",value:u?.application.app_version,editable:!1,environment:x}),n.jsx(_,{label:"Maintenance Mode",value:u?.application.maintenance_mode,type:"boolean",onSave:e=>g("application","maintenance_mode",e),environment:x,description:"Enable to put the application in maintenance mode"}),n.jsx(_,{label:"Max File Size",value:u?.application.max_file_size,onSave:e=>g("application","max_file_size",e),environment:x}),n.jsx(_,{label:"Session Timeout (seconds)",value:u?.application.session_timeout,type:"number",onSave:e=>g("application","session_timeout",parseInt(e)),environment:x})]})}),n.jsx(j,{category:"security",title:"Security Settings",description:"Authentication, authorization, and security policies",icon:s,warning:!0,children:n.jsxs("div",{className:"space-y-1",children:[n.jsx(_,{label:"Require MFA",value:u?.security.require_mfa,type:"boolean",onSave:e=>g("security","require_mfa",e),environment:x,description:"Require multi-factor authentication for all users"}),n.jsx(_,{label:"Password Policy",value:u?.security.password_policy,type:"select",options:[{value:"weak",label:"Weak"},{value:"medium",label:"Medium"},{value:"strong",label:"Strong"}],onSave:e=>g("security","password_policy",e),environment:x}),n.jsx(_,{label:"Max Login Attempts",value:u?.security.login_attempts,type:"number",onSave:e=>g("security","login_attempts",parseInt(e)),environment:x}),n.jsx(_,{label:"Lockout Duration (seconds)",value:u?.security.lockout_duration,type:"number",onSave:e=>g("security","lockout_duration",parseInt(e)),environment:x}),n.jsx(_,{label:"API Rate Limit (per hour)",value:u?.security.api_rate_limit,type:"number",onSave:e=>g("security","api_rate_limit",parseInt(e)),environment:x})]})}),n.jsx(j,{category:"email",title:"Email Configuration",description:"SMTP settings for system notifications and user communications",icon:o,children:n.jsxs("div",{className:"space-y-1",children:[n.jsx(_,{label:"SMTP Host",value:u?.email.smtp_host,onSave:e=>g("email","smtp_host",e),environment:x}),n.jsx(_,{label:"SMTP Port",value:u?.email.smtp_port,type:"number",onSave:e=>g("email","smtp_port",parseInt(e)),environment:x}),n.jsx(_,{label:"SMTP Username",value:u?.email.smtp_username,onSave:e=>g("email","smtp_username",e),environment:x}),n.jsx(_,{label:"SMTP Password",value:u?.email.smtp_password,sensitive:!0,onSave:e=>g("email","smtp_password",e),environment:x}),n.jsx(_,{label:"From Address",value:u?.email.from_address,type:"email",onSave:e=>g("email","from_address",e),environment:x})]})}),n.jsx(j,{category:"notifications",title:"Notification Settings",description:"Configure system alerts and notification channels",icon:l,children:n.jsxs("div",{className:"space-y-1",children:[n.jsx(_,{label:"Error Notifications",value:u?.notifications.error_notifications,type:"boolean",onSave:e=>g("notifications","error_notifications",e),environment:x}),n.jsx(_,{label:"Maintenance Alerts",value:u?.notifications.maintenance_alerts,type:"boolean",onSave:e=>g("notifications","maintenance_alerts",e),environment:x}),n.jsx(_,{label:"Security Alerts",value:u?.notifications.security_alerts,type:"boolean",onSave:e=>g("notifications","security_alerts",e),environment:x}),n.jsx(_,{label:"Slack Webhook",value:u?.notifications.slack_webhook,sensitive:!0,onSave:e=>g("notifications","slack_webhook",e),environment:x,description:"Webhook URL for Slack notifications"})]})}),n.jsx(j,{category:"performance",title:"Performance & Monitoring",description:"System performance settings and monitoring configuration",icon:c,children:n.jsxs("div",{className:"space-y-1",children:[n.jsx(_,{label:"Cache Enabled",value:u?.performance.cache_enabled,type:"boolean",onSave:e=>g("performance","cache_enabled",e),environment:x}),n.jsx(_,{label:"Cache TTL (seconds)",value:u?.performance.cache_ttl,type:"number",onSave:e=>g("performance","cache_ttl",parseInt(e)),environment:x}),n.jsx(_,{label:"Database Pool Size",value:u?.performance.database_pool_size,type:"number",onSave:e=>g("performance","database_pool_size",parseInt(e)),environment:x}),n.jsx(_,{label:"Log Level",value:u?.performance.log_level,type:"select",options:[{value:"error",label:"Error"},{value:"warn",label:"Warning"},{value:"info",label:"Info"},{value:"debug",label:"Debug"}],onSave:e=>g("performance","log_level",e),environment:x}),n.jsx(_,{label:"Enable Metrics Collection",value:u?.performance.enable_metrics,type:"boolean",onSave:e=>g("performance","enable_metrics",e),environment:x})]})}),n.jsx(j,{category:"integrations",title:"External Integrations",description:"Enable/disable external service integrations",icon:d,children:n.jsxs("div",{className:"space-y-1",children:[n.jsx(_,{label:"Shopify Integration",value:u?.integrations.shopify_enabled,type:"boolean",onSave:e=>g("integrations","shopify_enabled",e),environment:x}),n.jsx(_,{label:"Amazon SP-API",value:u?.integrations.amazon_enabled,type:"boolean",onSave:e=>g("integrations","amazon_enabled",e),environment:x}),n.jsx(_,{label:"Xero Accounting",value:u?.integrations.xero_enabled,type:"boolean",onSave:e=>g("integrations","xero_enabled",e),environment:x}),n.jsx(_,{label:"Analytics Tracking",value:u?.integrations.analytics_enabled,type:"boolean",onSave:e=>g("integrations","analytics_enabled",e),environment:x}),n.jsx(_,{label:"Sentry DSN",value:u?.integrations.sentry_dsn,sensitive:!0,onSave:e=>g("integrations","sentry_dsn",e),environment:x,description:"Error tracking and monitoring"})]})})]})]}):n.jsxs("div",{className:"p-6 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(s,{className:"w-8 h-8 text-red-600"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Access Denied"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"You don't have permission to view system settings."})]})};export{f as default};
