import{r as e,j as t,v as a,$ as s,i as r,t as l,bl as i,E as d,ak as o,bm as n,bn as c,ah as x,am as u,aG as m,F as g,W as h}from"./chunk-CXAPUP0Z.js";import{C as y}from"./chunk-hVsyDmxA.js";import{R as p,k as j,l as v,X as k,Y as w,m as N,n as b,v as f,w as S,x as T,u as C,t as L,q as P}from"./chunk-DELSdgG9.js";import"./chunk-CwR8AQSU.js";import"./chunk--CRELh3m.js";import"./chunk-VeJKilaK.js";import"./chunk-l5C0fGLm.js";import"./chunk-Kk1dlRB6.js";import"./chunk-DJCy_cXY.js";import"./chunk-Dozjk7Op.js";const A=()=>{const[A,V]=e.useState(null),[R,B]=e.useState(!0),[F,I]=e.useState(""),[M,G]=e.useState("all"),[D,O]=e.useState("all"),[E,U]=e.useState("name"),[_,K]=e.useState("asc"),[$,W]=e.useState([]);e.useState(!1),e.useState(!1),e.useEffect(()=>{const e=async()=>{try{const e=await fetch("/api/inventory/advanced");if(e.ok){const t=await e.json();V(t)}else V(q)}catch(e){V(q)}finally{B(!1)}};e();const t=setInterval(e,3e4);return()=>clearInterval(t)},[]);const q={overview:{totalItems:245,totalValue:2847500,lowStockItems:12,outOfStockItems:3,reorderAlerts:8,turnoverRate:4.2,warehouseUtilization:78.5,averageAge:32.4},categories:[{name:"Raw Materials",items:89,value:125e4,status:"good",turnover:5.2,lowStock:4},{name:"Work in Progress",items:45,value:68e4,status:"warning",turnover:3.8,lowStock:2},{name:"Finished Goods",items:78,value:75e4,status:"critical",turnover:3.2,lowStock:5},{name:"Packaging Materials",items:33,value:167500,status:"good",turnover:6.1,lowStock:1}],items:[{id:"INV001",name:"GABA Extract Premium",category:"Raw Materials",sku:"RM-GABA-001",currentStock:450,reorderPoint:200,maxStock:1e3,unitCost:125.5,totalValue:56475,supplier:"BioExtract Ltd",location:"A1-B3",status:"good",lastOrder:"2025-09-01",leadTime:14,avgUsage:25,turnoverRate:5.8,daysToStockout:18},{id:"INV002",name:"Natural Flavoring - Berry",category:"Raw Materials",sku:"RM-FLAV-002",currentStock:85,reorderPoint:100,maxStock:500,unitCost:45.25,totalValue:3846.25,supplier:"Flavor Corp",location:"B2-C1",status:"low",lastOrder:"2025-08-28",leadTime:7,avgUsage:12,turnoverRate:4.2,daysToStockout:7},{id:"INV003",name:"Glass Bottles 500ml",category:"Packaging Materials",sku:"PKG-BTL-500",currentStock:2400,reorderPoint:1e3,maxStock:5e3,unitCost:1.25,totalValue:3e3,supplier:"Glass Solutions",location:"C1-D2",status:"good",lastOrder:"2025-09-05",leadTime:10,avgUsage:180,turnoverRate:7.2,daysToStockout:13},{id:"INV004",name:"Sentia Red - Finished Product",category:"Finished Goods",sku:"FG-SENT-RED",currentStock:0,reorderPoint:50,maxStock:500,unitCost:25,totalValue:0,supplier:"Internal Production",location:"D1-E1",status:"out_of_stock",lastOrder:"2025-09-03",leadTime:3,avgUsage:45,turnoverRate:12.5,daysToStockout:0},{id:"INV005",name:"Quality Control Labels",category:"Packaging Materials",sku:"PKG-LBL-QC",currentStock:15e3,reorderPoint:5e3,maxStock:2e4,unitCost:.08,totalValue:1200,supplier:"Label Pro",location:"E2-F1",status:"good",lastOrder:"2025-08-30",leadTime:5,avgUsage:850,turnoverRate:8.9,daysToStockout:18}],recentMovements:[{id:"MOV001",item:"GABA Extract Premium",type:"out",quantity:125,timestamp:"2025-09-08T10:30:00Z",reference:"Production Order #2025-001",user:"Production Team"},{id:"MOV002",item:"Glass Bottles 500ml",type:"in",quantity:2e3,timestamp:"2025-09-08T08:15:00Z",reference:"Purchase Order #PO-2025-089",user:"Warehouse Staff"},{id:"MOV003",item:"Natural Flavoring - Berry",type:"out",quantity:35,timestamp:"2025-09-08T07:45:00Z",reference:"Production Order #2025-002",user:"Production Team"}],valueTrend:[{date:"2025-09-01",value:265e4},{date:"2025-09-02",value:272e4},{date:"2025-09-03",value:278e4},{date:"2025-09-04",value:2825e3},{date:"2025-09-05",value:281e4},{date:"2025-09-06",value:2835e3},{date:"2025-09-07",value:2847500}],turnoverAnalysis:[{category:"Raw Materials",turnover:5.2,target:6},{category:"Work in Progress",turnover:3.8,target:4},{category:"Finished Goods",turnover:3.2,target:8},{category:"Packaging Materials",turnover:6.1,target:7}],stockLevelDistribution:[{status:"Good",count:185,color:"#10B981"},{status:"Low Stock",count:43,color:"#F59E0B"},{status:"Critical",count:12,color:"#EF4444"},{status:"Out of Stock",count:5,color:"#DC2626"}]},Z=e=>{switch(e){case"good":return t.jsx(h,{className:"h-5 w-5 text-green-500"});case"low":case"warning":return t.jsx(g,{className:"h-5 w-5 text-yellow-500"});case"critical":case"out_of_stock":return t.jsx(g,{className:"h-5 w-5 text-red-500"});default:return t.jsx(m,{className:"h-5 w-5 text-gray-500"})}},H=e=>{switch(e){case"good":return"bg-green-100 text-green-800 border-green-200";case"low":case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"critical":case"out_of_stock":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},Q=e=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),z=[...A?.items?.filter(e=>{const t=e.name.toLowerCase().includes(F.toLowerCase())||e.sku.toLowerCase().includes(F.toLowerCase()),a="all"===M||e.category===M,s="all"===D||e.status===D;return t&&a&&s})||[]].sort((e,t)=>{let a=e[E],s=t[E];return"string"==typeof a&&(a=a.toLowerCase(),s=s.toLowerCase()),"asc"===_?a<s?-1:a>s?1:0:a>s?-1:a<s?1:0});if(R)return t.jsx("div",{className:"max-w-7xl mx-auto p-6",children:t.jsxs("div",{className:"animate-pulse",children:[t.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/3 mb-6"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[...Array(8)].map((e,a)=>t.jsx("div",{className:"h-32 bg-gray-300 rounded"},a))})]})});const X=A||q;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Advanced Inventory Management"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Comprehensive inventory control with real-time tracking and analytics"})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[t.jsx(a,{className:"h-4 w-4"}),t.jsx("span",{children:"Import Data"})]}),t.jsxs("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[t.jsx(s,{className:"h-4 w-4"}),t.jsx("span",{children:"Sync System"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Items"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:X.overview.totalItems.toLocaleString()}),t.jsx("p",{className:"text-sm text-green-600",children:"Active inventory items"})]}),t.jsx(r,{className:"h-8 w-8 text-blue-600"})]})}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Value"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Q(X.overview.totalValue)}),t.jsx("p",{className:"text-sm text-blue-600",children:"Current stock value"})]}),t.jsx(l,{className:"h-8 w-8 text-green-600"})]})}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Reorder Alerts"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:X.overview.reorderAlerts}),t.jsx("p",{className:"text-sm text-red-600",children:"Items need reordering"})]}),t.jsx(i,{className:"h-8 w-8 text-red-600"})]})}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Turnover Rate"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[X.overview.turnoverRate,"x"]}),t.jsx("p",{className:"text-sm text-purple-600",children:"Annual inventory turns"})]}),t.jsx(s,{className:"h-8 w-8 text-purple-600"})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Inventory Value Trend"}),t.jsx("div",{className:"h-64",children:t.jsx(y,{children:t.jsx(p,{width:"100%",height:"100%",children:t.jsxs(j,{data:X.valueTrend,children:[t.jsx(v,{strokeDasharray:"3 3"}),t.jsx(k,{dataKey:"date"}),t.jsx(w,{}),t.jsx(N,{formatter:e=>Q(e)}),t.jsx(b,{type:"monotone",dataKey:"value",stroke:"#3B82F6",fill:"#3B82F6",fillOpacity:.3,strokeWidth:2})]})})})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Stock Level Distribution"}),t.jsx("div",{className:"h-64",children:t.jsx(y,{children:t.jsx(p,{width:"100%",height:"100%",children:t.jsxs(f,{children:[t.jsx(S,{data:X.stockLevelDistribution,cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",dataKey:"count",label:({status:e,percent:t})=>`${e} ${(100*t).toFixed(0)}%`,children:X.stockLevelDistribution.map((e,a)=>t.jsx(T,{fill:e.color},`cell-${a}`))}),t.jsx(N,{})]})})})})]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Inventory Turnover Analysis"}),t.jsx("div",{className:"h-64",children:t.jsx(y,{children:t.jsx(p,{width:"100%",height:"100%",children:t.jsxs(C,{data:X.turnoverAnalysis,children:[t.jsx(v,{strokeDasharray:"3 3"}),t.jsx(k,{dataKey:"category"}),t.jsx(w,{}),t.jsx(N,{}),t.jsx(L,{dataKey:"turnover",fill:"#3B82F6",name:"Actual Turnover"}),t.jsx(P,{type:"monotone",dataKey:"target",stroke:"#EF4444",strokeWidth:2,name:"Target"})]})})})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"relative",children:[t.jsx(d,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Search items by name or SKU...",value:F,onChange:e=>I(e.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("select",{value:M,onChange:e=>G(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[t.jsx("option",{value:"all",children:"All Categories"}),X.categories.map(e=>t.jsx("option",{value:e.name,children:e.name},e.name))]}),t.jsxs("select",{value:D,onChange:e=>O(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[t.jsx("option",{value:"all",children:"All Status"}),t.jsx("option",{value:"good",children:"Good"}),t.jsx("option",{value:"low",children:"Low Stock"}),t.jsx("option",{value:"critical",children:"Critical"}),t.jsx("option",{value:"out_of_stock",children:"Out of Stock"})]}),t.jsxs("select",{value:`${E}-${_}`,onChange:e=>{const[t,a]=e.target.value.split("-");U(t),K(a)},className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[t.jsx("option",{value:"name-asc",children:"Name A-Z"}),t.jsx("option",{value:"name-desc",children:"Name Z-A"}),t.jsx("option",{value:"currentStock-desc",children:"Stock High-Low"}),t.jsx("option",{value:"currentStock-asc",children:"Stock Low-High"}),t.jsx("option",{value:"totalValue-desc",children:"Value High-Low"}),t.jsx("option",{value:"daysToStockout-asc",children:"Days to Stockout"})]})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t.jsx("input",{type:"checkbox",className:"rounded"})}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Item Details"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Stock Level"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Value"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Days to Stockout"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:z.map(e=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("input",{type:"checkbox",className:"rounded",checked:$.includes(e.id),onChange:t=>{t.target.checked?W([...$,e.id]):W($.filter(t=>t!==e.id))}})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.sku," • ",e.category]}),t.jsxs("div",{className:"text-xs text-gray-400",children:["Location: ",e.location," • Supplier: ",e.supplier]})]})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[e.currentStock.toLocaleString()," units"]}),t.jsxs("div",{className:"text-xs text-gray-500",children:["Reorder: ",e.reorderPoint," • Max: ",e.maxStock]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:t.jsx("div",{className:"h-2 rounded-full "+(e.currentStock<=e.reorderPoint?"bg-red-600":e.currentStock<=1.5*e.reorderPoint?"bg-yellow-600":"bg-green-600"),style:{width:`${Math.min(e.currentStock/e.maxStock*100,100)}%`}})})]}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:Q(e.totalValue)}),t.jsxs("div",{className:"text-xs text-gray-500",children:["Unit: ",Q(e.unitCost)]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${H(e.status)}`,children:[Z(e.status),t.jsx("span",{className:"ml-1",children:"out_of_stock"===e.status?"Out of Stock":"low"===e.status?"Low Stock":"critical"===e.status?"Critical":"Good"})]})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm font-medium "+(e.daysToStockout<=7?"text-red-600":e.daysToStockout<=14?"text-yellow-600":"text-green-600"),children:0===e.daysToStockout?"Out of Stock":`${e.daysToStockout} days`}),t.jsxs("div",{className:"text-xs text-gray-500",children:["Avg usage: ",e.avgUsage,"/day"]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:t.jsx(o,{className:"h-4 w-4"})}),t.jsx("button",{className:"text-green-600 hover:text-green-900",children:t.jsx(n,{className:"h-4 w-4"})}),t.jsx("button",{className:"text-red-600 hover:text-red-900",children:t.jsx(c,{className:"h-4 w-4"})})]})})]},e.id))})]})}),$.length>0&&t.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-sm text-blue-800 dark:text-blue-200",children:[$.length," items selected"]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Bulk Reorder"}),t.jsx("button",{className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:"Update Stock"}),t.jsx("button",{className:"px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:"Export Selected"})]})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Recent Stock Movements"}),t.jsx("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View All Movements"})]}),t.jsx("div",{className:"space-y-3",children:X.recentMovements.map(e=>{return t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-2 rounded-full "+("in"===e.type?"bg-green-100 dark:bg-green-900/20":"bg-red-100 dark:bg-red-900/20"),children:"in"===e.type?t.jsx(x,{className:"h-4 w-4 "+("in"===e.type?"text-green-600":"text-red-600")}):t.jsx(u,{className:"h-4 w-4 "+("in"===e.type?"text-green-600":"text-red-600")})}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e.item}),t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.reference," • ",e.user]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"font-medium text-sm "+("in"===e.type?"text-green-600":"text-red-600"),children:["in"===e.type?"+":"-",e.quantity.toLocaleString()]}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:(a=e.timestamp,new Date(a).toLocaleDateString("en-GB"))})]})]},e.id);var a})})]})]})};export{A as default};
