import{r as e,j as t,ac as i,b9 as a,m as s,n as r,t as n,G as c,bl as d,a5 as l,ax as o,F as m,a7 as x}from"./chunk-6UcRpCBY.js";import{C as g}from"./chunk-B0Ufageu.js";import{R as h,u as p,l as u,X as y,Y as f,m as j,n as b,q as v,t as w}from"./chunk-C3SnPVx2.js";import"./chunk-BSax3_JK.js";import"./chunk-CH-SdtzI.js";import"./chunk-BnxSvIiU.js";import"./chunk-TAvxFron.js";import"./chunk-B0LCvgW6.js";import"./chunk-CxHw_PPj.js";import"./chunk-Dozjk7Op.js";const N=()=>{const[N,k]=e.useState(null),[z,A]=e.useState(!0),[C,S]=e.useState("all"),[T,I]=e.useState("efficiency"),[E,O]=e.useState("daily"),[R,P]=e.useState(!1),[G,F]=e.useState([]);e.useEffect(()=>{const e=async()=>{try{const e=await fetch(`/api/production/optimization?line=${C}&mode=${T}&range=${E}`);if(e.ok){const t=await e.json();k(t),F(t.aiRecommendations)}else k(L),F(L.aiRecommendations)}catch(e){k(L),F(L.aiRecommendations)}finally{A(!1)}};e();const t=setInterval(e,3e4);return()=>clearInterval(t)},[C,T,E]);const L={overview:{overallEfficiency:89.2,potentialEfficiency:94.8,improvementOpportunity:5.6,costSavingsPotential:145e3,energyOptimization:12.3,wasteReduction:18.7,throughputIncrease:8.4,qualityImprovement:3.2},productionLines:[{id:"line-a",name:"GABA Red Production Line A",currentEfficiency:92.1,targetEfficiency:96.5,status:"optimizing",bottleneck:"mixing_station",optimizationPotential:4.4,costSavings:48e3,recommendations:3,lastOptimized:"2025-09-08T10:30:00Z"},{id:"line-b",name:"GABA Clear Production Line B",currentEfficiency:87.8,targetEfficiency:93.2,status:"needs_attention",bottleneck:"quality_check",optimizationPotential:5.4,costSavings:62e3,recommendations:5,lastOptimized:"2025-09-07T14:20:00Z"},{id:"line-c",name:"Packaging Line C",currentEfficiency:88.5,targetEfficiency:94.1,status:"optimized",bottleneck:"labeling_unit",optimizationPotential:5.6,costSavings:35e3,recommendations:2,lastOptimized:"2025-09-08T08:15:00Z"}],bottleneckAnalysis:[{station:"Mixing Station",impact:"high",utilizationRate:94.2,cycleTime:18.5,targetCycleTime:16.2,improvement:12.4,priority:1,estimatedCost:25e3,estimatedSavings:78e3,recommendations:["Upgrade mixer capacity","Optimize recipe parameters","Add parallel mixing unit"]},{station:"Quality Check",impact:"high",utilizationRate:91.8,cycleTime:4.2,targetCycleTime:3.1,improvement:26.2,priority:2,estimatedCost:18e3,estimatedSavings:52e3,recommendations:["Implement automated testing","Reduce sampling frequency","Add quality sensors"]},{station:"Labeling Unit",impact:"medium",utilizationRate:88.5,cycleTime:2.8,targetCycleTime:2.3,improvement:17.9,priority:3,estimatedCost:12e3,estimatedSavings:31e3,recommendations:["Calibrate label applicator","Optimize label feed speed","Preventive maintenance"]}],efficiencyTrend:[{date:"2025-09-01",efficiency:87.2,target:92,throughput:2380,downtime:42},{date:"2025-09-02",efficiency:88.1,target:92,throughput:2420,downtime:38},{date:"2025-09-03",efficiency:86.8,target:92,throughput:2350,downtime:45},{date:"2025-09-04",efficiency:89.5,target:92,throughput:2480,downtime:32},{date:"2025-09-05",efficiency:90.2,target:92,throughput:2520,downtime:28},{date:"2025-09-06",efficiency:88.9,target:92,throughput:2390,downtime:35},{date:"2025-09-07",efficiency:89.8,target:92,throughput:2450,downtime:30},{date:"2025-09-08",efficiency:89.2,target:92,throughput:2410,downtime:33}],optimizationScenarios:[{name:"Conservative Optimization",efficiencyGain:3.2,costSavings:85e3,implementationCost:45e3,paybackMonths:6.4,risk:"low",impact:"medium"},{name:"Aggressive Optimization",efficiencyGain:6.8,costSavings:178e3,implementationCost:95e3,paybackMonths:6.4,risk:"medium",impact:"high"},{name:"AI-Driven Optimization",efficiencyGain:8.4,costSavings:234e3,implementationCost:125e3,paybackMonths:6.4,risk:"medium",impact:"very_high"}],performanceMetrics:[{metric:"Efficiency",current:89.2,target:94.8,unit:"%"},{metric:"Throughput",current:2410,target:2600,unit:"units/day"},{metric:"Quality Rate",current:97.8,target:98.5,unit:"%"},{metric:"Energy Usage",current:1250,target:1100,unit:"kWh/day"},{metric:"Waste Rate",current:2.1,target:1.7,unit:"%"},{metric:"Setup Time",current:18,target:12,unit:"min"}],aiRecommendations:[{id:"opt-001",title:"Optimize Mixing Station Throughput",description:"AI analysis suggests increasing mixer speed by 8% and adjusting recipe timing to reduce cycle time from 18.5 to 16.2 minutes",priority:"high",impact:"efficiency_gain",estimatedGain:12.4,confidence:.94,implementationTime:2,cost:15e3,savings:78e3,status:"ready",category:"process_optimization"},{id:"opt-002",title:"Implement Predictive Quality Control",description:"Deploy ML-based quality prediction to reduce inspection time by 26% while maintaining quality standards",priority:"high",impact:"cycle_time_reduction",estimatedGain:26.2,confidence:.89,implementationTime:4,cost:35e3,savings:92e3,status:"planning",category:"automation"},{id:"opt-003",title:"Energy Consumption Optimization",description:"Smart scheduling algorithm to optimize equipment operation during low-cost energy periods",priority:"medium",impact:"cost_reduction",estimatedGain:18.7,confidence:.91,implementationTime:3,cost:22e3,savings:45e3,status:"testing",category:"energy_management"},{id:"opt-004",title:"Automated Changeover Process",description:"Implement automated product changeover to reduce setup time from 18 to 12 minutes",priority:"medium",impact:"downtime_reduction",estimatedGain:33.3,confidence:.87,implementationTime:6,cost:58e3,savings:85e3,status:"approved",category:"automation"}]},B=e=>{switch(e){case"optimizing":return t.jsx(i,{className:"h-5 w-5 text-blue-500 animate-spin"});case"optimized":return t.jsx(x,{className:"h-5 w-5 text-green-500"});case"needs_attention":return t.jsx(m,{className:"h-5 w-5 text-yellow-500"});default:return t.jsx(o,{className:"h-5 w-5 text-gray-500"})}},_=e=>{switch(e){case"high":return"text-red-600 bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800";case"medium":return"text-yellow-600 bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800";case"low":return"text-green-600 bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800";default:return"text-gray-600 bg-gray-50 dark:bg-gray-900/20 border-gray-200 dark:border-gray-800"}},D=e=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);if(z)return t.jsx("div",{className:"max-w-7xl mx-auto p-6",children:t.jsxs("div",{className:"animate-pulse",children:[t.jsx("div",{className:"h-8 bg-gray-300 rounded w-1/3 mb-6"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[...Array(8)].map((e,i)=>t.jsx("div",{className:"h-32 bg-gray-300 rounded"},i))})]})});const M=N||L;return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Production Optimization"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"AI-powered production optimization with real-time bottleneck analysis and performance improvement"})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("button",{onClick:()=>(async()=>{P(!0),await new Promise(e=>setTimeout(e,3e3)),P(!1)})(),disabled:R,className:"px-4 py-2 rounded-lg transition-colors flex items-center space-x-2 "+(R?"bg-gray-400 text-white cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:R?t.jsxs(t.Fragment,{children:[t.jsx(i,{className:"h-4 w-4 animate-spin"}),t.jsx("span",{children:"Optimizing..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(a,{className:"h-4 w-4"}),t.jsx("span",{children:"Run Optimization"})]})}),t.jsxs("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[t.jsx(s,{className:"h-4 w-4"}),t.jsx("span",{children:"AI Insights"})]})]})]}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Production Line"}),t.jsxs("select",{value:C,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[t.jsx("option",{value:"all",children:"All Lines"}),t.jsx("option",{value:"line-a",children:"Line A - GABA Red"}),t.jsx("option",{value:"line-b",children:"Line B - GABA Clear"}),t.jsx("option",{value:"line-c",children:"Line C - Packaging"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Optimization Focus"}),t.jsxs("select",{value:T,onChange:e=>I(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[t.jsx("option",{value:"efficiency",children:"Overall Efficiency"}),t.jsx("option",{value:"throughput",children:"Throughput Maximization"}),t.jsx("option",{value:"quality",children:"Quality Optimization"}),t.jsx("option",{value:"energy",children:"Energy Efficiency"}),t.jsx("option",{value:"cost",children:"Cost Reduction"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Time Range"}),t.jsxs("select",{value:E,onChange:e=>O(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[t.jsx("option",{value:"hourly",children:"Hourly"}),t.jsx("option",{value:"daily",children:"Daily"}),t.jsx("option",{value:"weekly",children:"Weekly"}),t.jsx("option",{value:"monthly",children:"Monthly"})]})]}),t.jsx("div",{className:"flex items-end",children:t.jsxs("button",{className:"w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center space-x-2",children:[t.jsx(r,{className:"h-4 w-4"}),t.jsx("span",{children:"AI Analysis"})]})})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Current Efficiency"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[M.overview.overallEfficiency,"%"]}),t.jsxs("p",{className:"text-sm text-blue-600",children:["Target: ",M.overview.potentialEfficiency,"%"]})]}),t.jsx(n,{className:"h-8 w-8 text-blue-600"})]})}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Cost Savings Potential"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:D(M.overview.costSavingsPotential)}),t.jsx("p",{className:"text-sm text-green-600",children:"Annual opportunity"})]}),t.jsx(c,{className:"h-8 w-8 text-green-600"})]})}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Energy Optimization"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[M.overview.energyOptimization,"%"]}),t.jsx("p",{className:"text-sm text-yellow-600",children:"Reduction potential"})]}),t.jsx(d,{className:"h-8 w-8 text-yellow-600"})]})}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Throughput Increase"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[M.overview.throughputIncrease,"%"]}),t.jsx("p",{className:"text-sm text-purple-600",children:"Achievable gain"})]}),t.jsx(l,{className:"h-8 w-8 text-purple-600"})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Production Efficiency Trend"}),t.jsx("div",{className:"h-80",children:t.jsx(g,{children:t.jsx(h,{width:"100%",height:"100%",children:t.jsxs(p,{data:M.efficiencyTrend,children:[t.jsx(u,{strokeDasharray:"3 3"}),t.jsx(y,{dataKey:"date",tickFormatter:e=>new Date(e).toLocaleDateString("en-GB",{month:"short",day:"numeric"})}),t.jsx(f,{yAxisId:"left"}),t.jsx(f,{yAxisId:"right",orientation:"right"}),t.jsx(j,{formatter:(e,t)=>["efficiency"===t||"target"===t?`${e}%`:"throughput"===t?`${e} units`:`${e} min`,"efficiency"===t?"Efficiency":"target"===t?"Target":"throughput"===t?"Throughput":"Downtime"],labelFormatter:e=>new Date(e).toLocaleDateString("en-GB")}),t.jsx(b,{yAxisId:"left",type:"monotone",dataKey:"target",fill:"#EF4444",fillOpacity:.1,stroke:"none"}),t.jsx(v,{yAxisId:"left",type:"monotone",dataKey:"efficiency",stroke:"#3B82F6",strokeWidth:3,dot:{r:4}}),t.jsx(v,{yAxisId:"left",type:"monotone",dataKey:"target",stroke:"#EF4444",strokeWidth:2,strokeDasharray:"5 5",dot:!1}),t.jsx(w,{yAxisId:"right",dataKey:"downtime",fill:"#F59E0B",fillOpacity:.6})]})})})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Production Line Optimization Status"}),t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:M.productionLines.map(e=>t.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e.name}),B(e.status)]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Efficiency"}),t.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[Math.round(e.currentEfficiency),"% / ",Math.round(e.targetEfficiency),"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:e.currentEfficiency/e.targetEfficiency*100+"%"}})})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bottleneck:"}),t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:e.bottleneck.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Potential Savings:"}),t.jsx("span",{className:"font-medium text-green-600",children:D(e.costSavings)})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"AI Recommendations:"}),t.jsxs("span",{className:"font-medium text-blue-600",children:[e.recommendations," pending"]})]})]})]},e.id))})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Bottleneck Analysis & Solutions"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Station"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Impact"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Current / Target"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Improvement"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Investment"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"ROI"})]})}),t.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:M.bottleneckAnalysis.map((e,i)=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.station}),t.jsxs("div",{className:"text-xs text-gray-500",children:["Priority #",e.priority]})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("high"===e.impact?"bg-red-100 text-red-800":"medium"===e.impact?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.impact.charAt(0).toUpperCase()+e.impact.slice(1)})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[t.jsxs("div",{className:"text-gray-900 dark:text-white",children:[e.cycleTime,"min / ",e.targetCycleTime,"min"]}),t.jsxs("div",{className:"text-gray-500",children:[e.utilizationRate,"% utilization"]})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"text-sm font-medium text-green-600",children:["+",e.improvement,"%"]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:D(e.estimatedCost)}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm font-medium text-green-600",children:D(e.estimatedSavings)}),t.jsxs("div",{className:"text-xs text-gray-500",children:[(100*(e.estimatedSavings/e.estimatedCost-1)).toFixed(0),"% ROI"]})]})]},i))})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"AI Optimization Recommendations"}),t.jsx(s,{className:"h-5 w-5 text-yellow-500"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:G.map(e=>t.jsxs("div",{className:`p-4 rounded-lg border ${_(e.priority)}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsx("h4",{className:"font-medium text-sm",children:e.title}),t.jsxs("span",{className:"text-xs font-medium px-2 py-1 rounded-full bg-white bg-opacity-50",children:[(100*e.confidence).toFixed(0),"% confident"]})]}),t.jsx("p",{className:"text-sm mb-3 opacity-90",children:e.description}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Gain:"})," +",e.estimatedGain,"%"]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Time:"})," ",e.implementationTime," weeks"]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Cost:"})," ",D(e.cost)]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Savings:"})," ",D(e.savings)]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-xs px-2 py-1 rounded-full "+("ready"===e.status?"bg-green-100 text-green-800":"testing"===e.status?"bg-blue-100 text-blue-800":"planning"===e.status?"bg-yellow-100 text-yellow-800":"bg-purple-100 text-purple-800"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),t.jsx("button",{className:"text-xs bg-white bg-opacity-50 hover:bg-opacity-75 px-2 py-1 rounded transition-colors",children:"Implement"})]})]},e.id))})]})]})};export{N as default};
