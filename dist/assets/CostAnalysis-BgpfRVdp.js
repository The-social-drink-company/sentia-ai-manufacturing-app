import{j as e}from"./query-CJR12TOn.js";import{a as s}from"./vendor-BPOA5ME_.js";import{m as a,b as t,w as r}from"./index-lhuSU9ie.js";import{F as i}from"./CurrencyPoundIcon-D4FY613Y.js";import{F as l}from"./CheckCircleIcon-C50ZP4Vo.js";import{F as n}from"./ExclamationTriangleIcon-ztEnirSg.js";import{R as c,P as d,c as o,d as m,T as x,L as h,C as g,X as j,Y as y,b as u}from"./charts-D8EF9NMr.js";import"./auth-zWw5cpzK.js";import"./utils-BeLtu-UY.js";const p=()=>{const[p,b]=s.useState("current-month");s.useState("all");const[f,N]=s.useState(null),v={totalCosts:192e4,previousTotal:1785e3,breakdown:[{name:"Raw Materials",value:72e4,color:"#3B82F6",percentage:37.5,trend:"+5.2%"},{name:"Labor",value:48e4,color:"#10B981",percentage:25,trend:"+2.1%"},{name:"Manufacturing",value:36e4,color:"#F59E0B",percentage:18.8,trend:"-1.5%"},{name:"Utilities",value:192e3,color:"#EF4444",percentage:10,trend:"+8.3%"},{name:"Overhead",value:168e3,color:"#8B5CF6",percentage:8.7,trend:"+1.2%"}],monthlyTrends:[{month:"Jan",total:165e4,materials:62e4,labor:44e4,manufacturing:34e4},{month:"Feb",total:172e4,materials:645e3,labor:45e4,manufacturing:345e3},{month:"Mar",total:178e4,materials:67e4,labor:46e4,manufacturing:35e4},{month:"Apr",total:182e4,materials:685e3,labor:465e3,manufacturing:355e3},{month:"May",total:185e4,materials:695e3,labor:47e4,manufacturing:358e3},{month:"Jun",total:192e4,materials:72e4,labor:48e4,manufacturing:36e4}],costPerUnit:24.5,previousCostPerUnit:23.1,efficiencyMetrics:{materialWaste:3.2,laborEfficiency:94.5,energyEfficiency:87.3,overallScore:91.7},alerts:[{type:"warning",message:"Raw material costs increased 5.2% this month",category:"materials"},{type:"critical",message:"Utility costs up 8.3% - investigate energy usage",category:"utilities"},{type:"success",message:"Manufacturing costs reduced by 1.5%",category:"manufacturing"}]};s.useEffect(()=>{setTimeout(()=>{N(v)},500)},[p]);const w=e=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),C=(e,s)=>((e-s)/s*100).toFixed(1);return f?e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Cost Analysis"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Comprehensive cost breakdown and optimization insights"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("select",{value:p,onChange:e=>b(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"current-month",children:"Current Month"}),e.jsx("option",{value:"last-month",children:"Last Month"}),e.jsx("option",{value:"current-quarter",children:"Current Quarter"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg p-6 border border-gray-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Costs"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w(f.totalCosts)}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(t,{className:"w-4 h-4 text-red-500 mr-1"}),e.jsxs("span",{className:"text-sm text-red-600",children:["+",C(f.totalCosts,f.previousTotal),"%"]})]})]}),e.jsx(i,{className:"w-8 h-8 text-blue-500"})]})}),e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg p-6 border border-gray-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Cost Per Unit"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["£",f.costPerUnit]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(t,{className:"w-4 h-4 text-red-500 mr-1"}),e.jsxs("span",{className:"text-sm text-red-600",children:["+",C(f.costPerUnit,f.previousCostPerUnit),"%"]})]})]}),e.jsx(r,{className:"w-8 h-8 text-green-500"})]})}),e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-lg p-6 border border-gray-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Efficiency Score"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[f.efficiencyMetrics.overallScore,"%"]}),e.jsx("p",{className:"text-sm text-green-600 mt-2",children:"Above target"})]}),e.jsx(l,{className:"w-8 h-8 text-purple-500"})]})}),e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-lg p-6 border border-gray-200 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Material Waste"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[f.efficiencyMetrics.materialWaste,"%"]}),e.jsx("p",{className:"text-sm text-orange-600 mt-2",children:"Monitor closely"})]}),e.jsx(n,{className:"w-8 h-8 text-orange-500"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(a.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-white rounded-lg p-6 border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Cost Breakdown"}),e.jsxs("div",{className:"flex flex-col lg:flex-row items-center",children:[e.jsx("div",{className:"w-full lg:w-1/2",children:e.jsx(c,{width:"100%",height:250,children:e.jsxs(d,{children:[e.jsx(o,{data:f.breakdown,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:2,dataKey:"value",children:f.breakdown.map((s,a)=>e.jsx(m,{fill:s.color},`cell-${a}`))}),e.jsx(x,{formatter:e=>w(e)})]})})}),e.jsx("div",{className:"w-full lg:w-1/2 space-y-3",children:f.breakdown.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-3",style:{backgroundColor:s.color}}),e.jsx("span",{className:"text-sm font-medium",children:s.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-bold",children:w(s.value)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.percentage,"%"]})]})]},a))})]})]}),e.jsxs(a.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-lg p-6 border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Monthly Cost Trends"}),e.jsx(c,{width:"100%",height:250,children:e.jsxs(h,{data:f.monthlyTrends,children:[e.jsx(g,{strokeDasharray:"3 3"}),e.jsx(j,{dataKey:"month"}),e.jsx(y,{tickFormatter:e=>`£${(e/1e3).toFixed(0)}K`}),e.jsx(x,{formatter:e=>w(e)}),e.jsx(u,{type:"monotone",dataKey:"total",stroke:"#3B82F6",strokeWidth:3,dot:{fill:"#3B82F6",strokeWidth:2,r:4}}),e.jsx(u,{type:"monotone",dataKey:"materials",stroke:"#10B981",strokeWidth:2,strokeDasharray:"5 5"}),e.jsx(u,{type:"monotone",dataKey:"labor",stroke:"#F59E0B",strokeWidth:2,strokeDasharray:"5 5"})]})})]})]}),e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold",children:"Cost Category Analysis"})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.breakdown.map((s,a)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.name}),e.jsx("span",{className:"px-2 py-1 text-xs rounded-full "+(s.trend.startsWith("+")?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:s.trend})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Amount"}),e.jsx("span",{className:"text-sm font-medium",children:w(s.value)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Percentage"}),e.jsxs("span",{className:"text-sm font-medium",children:[s.percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full",style:{width:`${s.percentage}%`,backgroundColor:s.color}})})]})]},a))})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(a.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-white rounded-lg p-6 border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Cost Alerts"}),e.jsx("div",{className:"space-y-3",children:f.alerts.map((s,a)=>e.jsx("div",{className:"p-4 rounded-lg border-l-4 "+("critical"===s.type?"bg-red-50 border-red-400":"warning"===s.type?"bg-yellow-50 border-yellow-400":"bg-green-50 border-green-400"),children:e.jsxs("div",{className:"flex items-center",children:["critical"===s.type?e.jsx(n,{className:"w-5 h-5 text-red-500 mr-3"}):"warning"===s.type?e.jsx(n,{className:"w-5 h-5 text-yellow-500 mr-3"}):e.jsx(l,{className:"w-5 h-5 text-green-500 mr-3"}),e.jsx("p",{className:"text-sm font-medium",children:s.message})]})},a))})]}),e.jsxs(a.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white rounded-lg p-6 border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Efficiency Metrics"}),e.jsx("div",{className:"space-y-4",children:Object.entries(f.efficiencyMetrics).map(([s,a],t)=>"overallScore"===s?null:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:s.replace(/([A-Z])/g," $1").trim()}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[a,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full "+(a>=90?"bg-green-500":a>=80?"bg-yellow-500":"bg-red-500"),style:{width:`${a}%`}})})]},t))})]})]})]}):e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:[1,2,3,4].map(s=>e.jsx("div",{className:"h-32 bg-gray-200 rounded"},s))})]})})};export{p as default};
