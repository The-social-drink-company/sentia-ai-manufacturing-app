import{r as e,j as s}from"./react-core-DkFbty9o.js";import{e as t,d as a}from"./index-C8migC5L.js";import{useAuth as r,useUser as i}from"./auth-M1VfQxmO.js";import{a as n}from"./data-utils-CA9YKmyx.js";import{a as l,aG as d,ak as c,S as o,r as m,ad as x,ae as u,q as p,B as h,l as g,at as y,C as b,p as f,c as N,F as j}from"./ui-components-J4-_vVnI.js";import"./vendor-CHbOot_X.js";import"./charts-DxLx1lqX.js";import"./vendor-utils-BvmCeSbq.js";import"./router-C0m1gglZ.js";import"./forms-CtqjxpzJ.js";import"./animation-CTJwy-Vh.js";const v={SUPER_ADMIN:"super_admin",SYSTEM_ADMIN:"system_admin",USER_ADMIN:"user_admin",MANAGER:"manager",OPERATOR:"operator",VIEWER:"viewer",USER:"user"},S={SYSTEM_CONFIG:"system:config",API_KEYS_MANAGE:"system:api_keys",SYSTEM_LOGS:"system:logs",SYSTEM_MONITORING:"system:monitoring",SYSTEM_BACKUP:"system:backup",SYSTEM_SECURITY:"system:security",SYSTEM_INTEGRATIONS:"system:integrations",USERS_VIEW:"users:view",USERS_CREATE:"users:create",USERS_EDIT:"users:edit",USERS_DELETE:"users:delete",USERS_INVITE:"users:invite",USERS_APPROVE:"users:approve",USERS_ROLES:"users:roles",DATA_IMPORT:"data:import",DATA_EXPORT:"data:export",REPORTS_VIEW:"reports:view",REPORTS_CREATE:"reports:create",ANALYTICS_VIEW:"analytics:view",ANALYTICS_ADVANCED:"analytics:advanced",DASHBOARD_VIEW:"dashboard:view",DASHBOARD_EDIT:"dashboard:edit",DASHBOARD_ADMIN:"dashboard:admin",PRODUCTION_VIEW:"production:view",PRODUCTION_MANAGE:"production:manage",INVENTORY_VIEW:"inventory:view",INVENTORY_MANAGE:"inventory:manage",QUALITY_VIEW:"quality:view",QUALITY_MANAGE:"quality:manage"},E={[v.SUPER_ADMIN]:[...Object.values(S)],[v.SYSTEM_ADMIN]:[S.SYSTEM_CONFIG,S.API_KEYS_MANAGE,S.SYSTEM_LOGS,S.SYSTEM_MONITORING,S.SYSTEM_BACKUP,S.SYSTEM_SECURITY,S.SYSTEM_INTEGRATIONS,S.DASHBOARD_VIEW,S.REPORTS_VIEW,S.ANALYTICS_VIEW],[v.USER_ADMIN]:[S.USERS_VIEW,S.USERS_CREATE,S.USERS_EDIT,S.USERS_DELETE,S.USERS_INVITE,S.USERS_APPROVE,S.USERS_ROLES,S.DASHBOARD_VIEW,S.REPORTS_VIEW,S.ANALYTICS_VIEW],[v.MANAGER]:[S.DATA_IMPORT,S.DATA_EXPORT,S.REPORTS_VIEW,S.REPORTS_CREATE,S.ANALYTICS_VIEW,S.ANALYTICS_ADVANCED,S.DASHBOARD_VIEW,S.DASHBOARD_EDIT,S.PRODUCTION_VIEW,S.PRODUCTION_MANAGE,S.INVENTORY_VIEW,S.INVENTORY_MANAGE,S.QUALITY_VIEW,S.QUALITY_MANAGE,S.USERS_VIEW],[v.OPERATOR]:[S.PRODUCTION_VIEW,S.INVENTORY_VIEW,S.QUALITY_VIEW,S.DASHBOARD_VIEW,S.REPORTS_VIEW,S.ANALYTICS_VIEW],[v.VIEWER]:[S.DASHBOARD_VIEW,S.REPORTS_VIEW,S.ANALYTICS_VIEW,S.PRODUCTION_VIEW,S.INVENTORY_VIEW,S.QUALITY_VIEW],[v.USER]:[S.DASHBOARD_VIEW]};function A(e,s){return!(!e||!s)&&(E[e]||[]).includes(s)}const w=()=>{const{getToken:t,isLoaded:a}=r(),{user:n,isLoaded:x}=i(),[u,p]=e.useState("users"),[h,g]=e.useState([]),[y,b]=e.useState([]),[f,N]=e.useState(!0),[j,E]=e.useState(null),[w,I]=e.useState(""),[_,R]=e.useState("user"),[T,O]=e.useState(!1),k=n?.publicMetadata?.role,M=[{id:"users",name:"Users",icon:d,permission:S.USERS_VIEW},{id:"invitations",name:"Invitations",icon:c,permission:S.USERS_INVITE},{id:"roles",name:"Roles & Permissions",icon:o,permission:S.USERS_ROLES}];e.useEffect(()=>{a&&x&&n&&(P(),D())},[a,x,n]);const P=async()=>{try{N(!0);const e=await t(),s=await fetch("/api/admin/users",{headers:{Authorization:`Bearer ${e}`}});if(s.ok){const e=await s.json();g(e.users||[])}}catch(e){E("Failed to fetch users")}finally{N(!1)}},D=async()=>{try{const e=await t(),s=await fetch("/api/admin/invitations",{headers:{Authorization:`Bearer ${e}`}});if(s.ok){const e=await s.json();b(e.invitations||[])}}catch(e){}},C=async e=>{if(e.preventDefault(),A(k,S.USERS_INVITE))try{O(!0);const e=await t(),s=await fetch("/api/admin/invite",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({email:w,role:_})});if(s.ok)I(""),R("user"),D(),E(null);else{const e=await s.json();E(e.message||"Failed to send invitation")}}catch(s){E("Failed to send invitation")}finally{O(!1)}else E("You do not have permission to send invitations")};return f?s.jsx("div",{className:"flex items-center justify-center p-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"User Administration"}),s.jsx("p",{className:"text-gray-600",children:"Manage users, invitations, and role permissions"})]}),j&&s.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx(l,{className:"h-5 w-5 text-red-400"}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-red-700",children:j})})]})}),s.jsx("div",{className:"mb-6",children:s.jsx("nav",{className:"flex space-x-8 border-b border-gray-200",children:M.filter(e=>A(k,e.permission)).map(e=>{const t=e.icon;return s.jsxs("button",{onClick:()=>p(e.id),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm "+(u===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[s.jsx(t,{className:"h-5 w-5"}),s.jsx("span",{children:e.name})]},e.id)})})}),(()=>{switch(u){case"users":default:return s.jsxs("div",{className:"space-y-6",children:[A(k,S.USERS_INVITE)&&s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Send User Invitation"}),s.jsxs("form",{onSubmit:C,className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),s.jsx("input",{type:"email",value:w,onChange:e=>I(e.target.value),placeholder:"user@company.com",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),s.jsxs("select",{value:_,onChange:e=>R(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"user",children:"User"}),s.jsx("option",{value:"operator",children:"Operator"}),s.jsx("option",{value:"manager",children:"Manager"}),k===v.SUPER_ADMIN&&s.jsxs(s.Fragment,{children:[s.jsx("option",{value:"user_admin",children:"User Admin"}),s.jsx("option",{value:"system_admin",children:"System Admin"})]})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{type:"submit",disabled:T,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:T?"Sending...":"Send Invitation"})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["All Users (",h.length,")"]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"User"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Last Login"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:h.map(e=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[e.firstName?.[0],e.lastName?.[0]]})}),s.jsxs("div",{className:"ml-4",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[e.firstName," ",e.lastName]}),s.jsx("div",{className:"text-sm text-gray-500",children:e.emailAddresses?.[0]?.emailAddress})]})]})}),s.jsx("td",{className:"px-6 py-4",children:A(k,S.USERS_ROLES)?s.jsxs("select",{value:e.publicMetadata?.role||"user",onChange:s=>(async(e,s)=>{if(A(k,S.USERS_ROLES))try{const a=await t(),r=await fetch(`/api/admin/users/${e}/role`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({role:s})});if(r.ok)P(),E(null);else{const e=await r.json();E(e.message||"Failed to update user role")}}catch(a){E("Failed to update user role")}else E("You do not have permission to modify user roles")})(e.id,s.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[s.jsx("option",{value:"user",children:"User"}),s.jsx("option",{value:"operator",children:"Operator"}),s.jsx("option",{value:"manager",children:"Manager"}),k===v.SUPER_ADMIN&&s.jsxs(s.Fragment,{children:[s.jsx("option",{value:"user_admin",children:"User Admin"}),s.jsx("option",{value:"system_admin",children:"System Admin"})]})]}):s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.publicMetadata?.role||"user"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(e.publicMetadata?.approved?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.publicMetadata?.approved?"Active":"Pending"})}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.lastSignInAt?new Date(e.lastSignInAt).toLocaleDateString():"Never"}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"flex space-x-2",children:!e.publicMetadata?.approved&&A(k,S.USERS_APPROVE)&&s.jsx("button",{onClick:()=>(async e=>{if(A(k,S.USERS_APPROVE))try{const s=await t();(await fetch(`/api/admin/users/${e}/approve`,{method:"POST",headers:{Authorization:`Bearer ${s}`}})).ok&&(P(),E(null))}catch(s){E("Failed to approve user")}else E("You do not have permission to approve users")})(e.id),className:"text-green-600 hover:text-green-800",title:"Approve User",children:s.jsx(m,{className:"h-5 w-5"})})})})]},e.id))})]})})]})]});case"invitations":return s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Pending Invitations (",y.length,")"]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sent"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:y.map(e=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:e.email}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.role})}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Pending"})})]},e.id))})]})})]});case"roles":return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Role Definitions"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries(v).map(([e,t])=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:t.replace("_"," ").toUpperCase()}),s.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["super_admin"===t&&"Full system access and control","system_admin"===t&&"System configuration and API management","user_admin"===t&&"User management and permissions","manager"===t&&"Business operations and reporting","operator"===t&&"Manufacturing operations access","viewer"===t&&"Read-only dashboard access","user"===t&&"Basic dashboard access"]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Users with this role: ",h.filter(e=>e.publicMetadata?.role===t).length]})]},t))})]})})}})()]})},I=()=>{const[a,r]=e.useState({}),[i,n]=e.useState({}),[d,c]=e.useState({}),[o,h]=e.useState(!0),[g,y]=e.useState({});e.useEffect(()=>{b(),f()},[]);const b=async()=>{try{h(!0);const e=await fetch("/api/admin/api-keys");if(e.ok){const s=await e.json();r(s)}}catch(e){t("Failed to load API keys",{component:"ApiKeyManagement"},e)}finally{h(!1)}},f=async()=>{try{const e=await fetch("/api/admin/api-keys/status");if(e.ok){const s=await e.json();c(s)}}catch(e){t("Failed to check connection status",{component:"ApiKeyManagement"},e)}},N=async(e,s,a)=>{try{y({...g,[`${e}_${s}`]:!0}),(await fetch("/api/admin/api-keys",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:e,key:s,value:a})})).ok&&(r(t=>({...t,[e]:{...t[e],[s]:a}})),setTimeout(f,1e3))}catch(i){t("Failed to save API key",{component:"ApiKeyManagement",serviceId:e,fieldKey:s},i)}finally{y(t=>({...t,[`${e}_${s}`]:!1}))}},j=e=>{switch(d[e]){case"connected":return s.jsx(m,{className:"h-5 w-5 text-green-500"});case"error":return s.jsx(p,{className:"h-5 w-5 text-red-500"});case"warning":return s.jsx(l,{className:"h-5 w-5 text-yellow-500"});default:return s.jsx("div",{className:"h-5 w-5 rounded-full bg-gray-300"})}},v=Object.entries({xero:{name:"Xero Accounting",category:"Financial",description:"Complete accounting and financial management",fields:[{key:"XERO_CLIENT_ID",label:"Client ID",type:"text",required:!0},{key:"XERO_CLIENT_SECRET",label:"Client Secret",type:"password",required:!0},{key:"XERO_REDIRECT_URI",label:"Redirect URI",type:"url",required:!0},{key:"XERO_TENANT_ID",label:"Tenant ID",type:"text",required:!1}],capabilities:["invoicing","payments","reporting","tax-calculations","bank-reconciliation"],icon:"ðŸ’°",documentation:"https://developer.xero.com/documentation/"},shopify:{name:"Shopify Multi-Store",category:"E-commerce",description:"Multi-store Shopify integration for order and inventory management",fields:[{key:"SHOPIFY_API_KEY",label:"API Key",type:"password",required:!0},{key:"SHOPIFY_SECRET_KEY",label:"Secret Key",type:"password",required:!0},{key:"SHOPIFY_SHOP_DOMAIN",label:"Shop Domain",type:"text",required:!0},{key:"SHOPIFY_ACCESS_TOKEN",label:"Access Token",type:"password",required:!0}],capabilities:["product-management","order-processing","inventory-sync","customer-data"],icon:"ðŸ›’",documentation:"https://shopify.dev/docs/api"},amazon:{name:"Amazon Selling Partner API",category:"E-commerce",description:"Amazon marketplace integration for all regions",fields:[{key:"AMAZON_SP_API_ACCESS_KEY",label:"Access Key",type:"password",required:!0},{key:"AMAZON_SP_API_SECRET_KEY",label:"Secret Key",type:"password",required:!0},{key:"AMAZON_SP_API_ROLE_ARN",label:"Role ARN",type:"text",required:!0},{key:"AMAZON_SP_API_CLIENT_ID",label:"Client ID",type:"text",required:!0},{key:"AMAZON_SP_API_CLIENT_SECRET",label:"Client Secret",type:"password",required:!0},{key:"AMAZON_SP_API_REFRESH_TOKEN",label:"Refresh Token",type:"password",required:!0},{key:"AMAZON_MARKETPLACE_IDS",label:"Marketplace IDs (comma-separated)",type:"text",required:!0}],capabilities:["inventory-management","order-processing","fba-operations","advertising","analytics"],icon:"ðŸ“¦",documentation:"https://developer-docs.amazon.com/sp-api/"},unleashed:{name:"Unleashed Inventory",category:"Inventory",description:"Advanced inventory and warehouse management",fields:[{key:"UNLEASHED_API_ID",label:"API ID",type:"text",required:!0},{key:"UNLEASHED_API_KEY",label:"API Key",type:"password",required:!0},{key:"UNLEASHED_BASE_URL",label:"Base URL",type:"url",required:!0}],capabilities:["inventory-tracking","warehouse-management","purchase-orders","stock-levels"],icon:"ðŸ“Š",documentation:"https://apidocs.unleashedsoftware.com/"},microsoft:{name:"Microsoft Graph API",category:"Productivity",description:"Excel, SharePoint, and Office 365 integration",fields:[{key:"MICROSOFT_CLIENT_ID",label:"Client ID",type:"text",required:!0},{key:"MICROSOFT_CLIENT_SECRET",label:"Client Secret",type:"password",required:!0},{key:"MICROSOFT_TENANT_ID",label:"Tenant ID",type:"text",required:!0},{key:"MICROSOFT_SCOPE",label:"Scope",type:"text",required:!1,default:"Files.ReadWrite.All Sites.ReadWrite.All"}],capabilities:["excel-integration","sharepoint-sync","teams-notifications","file-management"],icon:"ðŸ“‹",documentation:"https://docs.microsoft.com/en-us/graph/"},openai:{name:"OpenAI GPT-4",category:"AI & ML",description:"Advanced AI capabilities for analysis and automation",fields:[{key:"OPENAI_API_KEY",label:"API Key",type:"password",required:!0},{key:"OPENAI_ORGANIZATION",label:"Organization ID",type:"text",required:!1},{key:"OPENAI_MODEL",label:"Default Model",type:"select",options:["gpt-4","gpt-4-turbo","gpt-3.5-turbo"],default:"gpt-4"}],capabilities:["text-generation","code-generation","analysis","function-calling"],icon:"ðŸ¤–",documentation:"https://platform.openai.com/docs"},anthropic:{name:"Anthropic Claude",category:"AI & ML",description:"Advanced reasoning and manufacturing intelligence",fields:[{key:"ANTHROPIC_API_KEY",label:"API Key",type:"password",required:!0},{key:"ANTHROPIC_MODEL",label:"Default Model",type:"select",options:["claude-3-opus","claude-3-sonnet","claude-3-haiku"],default:"claude-3-sonnet"}],capabilities:["reasoning","analysis","coding","manufacturing-intelligence"],icon:"ðŸ§ ",documentation:"https://docs.anthropic.com/"}}).reduce((e,[s,t])=>(e[t.category]||(e[t.category]=[]),e[t.category].push([s,t]),e),{});return o?s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),s.jsx("div",{className:"space-y-4",children:[1,2,3].map(e=>s.jsx("div",{className:"h-32 bg-gray-200 rounded"},e))})]})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"API Integration Management"}),s.jsx("p",{className:"text-gray-600",children:"Configure and manage all external service integrations. All keys are securely stored and automatically synchronized with the MCP server."})]}),Object.entries(v).map(([e,t])=>s.jsxs("div",{className:"mb-8",children:[s.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:[e," Services"]}),s.jsx("div",{className:"grid gap-6 lg:grid-cols-2",children:t.map(([e,t])=>((e,t)=>{const r=a[e]||{};return s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-2xl",children:t.icon}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t.name}),s.jsx("p",{className:"text-sm text-gray-500",children:t.description})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[j(e),s.jsx("span",{className:"text-sm text-gray-600 capitalize",children:d[e]||"Not configured"})]})]}),s.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:t.capabilities.map(e=>s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e},e))})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"space-y-4",children:t.fields.map(t=>{const a=r[t.key]||"",l=i[`${e}_${t.key}`],d=g[`${e}_${t.key}`];return s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t.label,t.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("div",{className:"relative",children:["select"===t.type?s.jsxs("select",{value:a,onChange:s=>N(e,t.key,s.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",disabled:d,children:[s.jsxs("option",{value:"",children:["Select ",t.label]}),t.options?.map(e=>s.jsx("option",{value:e,children:e},e))]}):s.jsx("input",{type:"password"!==t.type||l?"text":"password",value:a,onChange:s=>N(e,t.key,s.target.value),placeholder:t.default||`Enter ${t.label}`,className:"block w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",disabled:d}),"password"===t.type&&s.jsx("button",{type:"button",onClick:()=>((e,s)=>{const t=`${e}_${s}`;n(e=>({...e,[t]:!e[t]}))})(e,t.key),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:l?s.jsx(x,{className:"h-4 w-4 text-gray-400"}):s.jsx(u,{className:"h-4 w-4 text-gray-400"})}),d&&s.jsx("div",{className:"absolute inset-y-0 right-8 flex items-center",children:s.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-500 border-t-transparent rounded-full"})})]})]},t.key)})}),s.jsxs("div",{className:"mt-6 flex justify-between",children:[s.jsxs("a",{href:t.documentation,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:["View Documentation",s.jsx("svg",{className:"ml-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-2M7 7l10 10M17 7v10"})})]}),s.jsx("button",{onClick:()=>(async e=>{try{y({...g,[`${e}_test`]:!0});const s=await fetch(`/api/admin/api-keys/test/${e}`,{method:"POST"}),t=await s.json();c(s=>({...s,[e]:"success"===t.status?"connected":"error"}))}catch(s){c(s=>({...s,[e]:"error"}))}finally{y(s=>({...s,[`${e}_test`]:!1}))}})(e),disabled:g[`${e}_test`],className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:g[`${e}_test`]?"Testing...":"Test Connection"})]})]})]},e)})(e,t))})]},e))]})},_=()=>{const{getToken:t}=r(),{user:a}=i(),[n,d]=e.useState("api-keys"),[c,o]=e.useState(null),[x,u]=e.useState([]),[v,E]=e.useState(!1),[w,_]=e.useState(null),R=a?.publicMetadata?.role,T=[{id:"api-keys",name:"API Integrations",icon:h,permission:S.API_KEYS_MANAGE},{id:"system-config",name:"System Settings",icon:g,permission:S.SYSTEM_CONFIG},{id:"security",name:"Security",icon:y,permission:S.SYSTEM_SECURITY},{id:"logs",name:"System Logs",icon:b,permission:S.SYSTEM_LOGS},{id:"monitoring",name:"Monitoring",icon:f,permission:S.SYSTEM_MONITORING}];e.useEffect(()=>{a&&(O(),A(R,S.SYSTEM_LOGS)&&k())},[a,R]);const O=async()=>{try{const e=await fetch("/health");if(e.ok){const s=await e.json();o(s)}}catch(e){}},k=async()=>{try{const e=await t(),s=await fetch("/api/admin/logs",{headers:{Authorization:`Bearer ${e}`}});if(s.ok){const e=await s.json();u(e.slice(0,100))}}catch(e){}};return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"System Administration"}),s.jsx("p",{className:"text-gray-600",children:"System configuration, security, and monitoring"})]}),w&&s.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx(l,{className:"h-5 w-5 text-red-400"}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-red-700",children:w})})]})}),s.jsx("div",{className:"mb-6",children:s.jsx("nav",{className:"flex space-x-8 border-b border-gray-200",children:T.filter(e=>A(R,e.permission)).map(e=>{const t=e.icon;return s.jsxs("button",{onClick:()=>d(e.id),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm "+(n===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[s.jsx(t,{className:"h-5 w-5"}),s.jsx("span",{children:e.name})]},e.id)})})}),(()=>{switch(n){case"api-keys":default:return s.jsx(I,{});case"system-config":return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Health Overview"}),c?s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(m,{className:"h-8 w-8 text-green-500"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-green-800",children:"Status"}),s.jsx("p",{className:"text-lg font-semibold text-green-900",children:c.status})]})]})}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(N,{className:"h-8 w-8 text-blue-500"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Uptime"}),s.jsxs("p",{className:"text-lg font-semibold text-blue-900",children:[Math.floor(c.uptime/3600),"h ",Math.floor(c.uptime%3600/60),"m"]})]})]})}),s.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(j,{className:"h-8 w-8 text-purple-500"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-purple-800",children:"Environment"}),s.jsx("p",{className:"text-lg font-semibold text-purple-900",children:c.environment})]})]})}),s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(f,{className:"h-8 w-8 text-gray-500"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Version"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900",children:c.version})]})]})})]}):s.jsxs("div",{className:"flex items-center justify-center p-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-2 text-gray-600",children:"Loading system health..."})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Configuration"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default User Role"}),s.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"user",children:"User"}),s.jsx("option",{value:"viewer",children:"Viewer"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout (minutes)"}),s.jsx("input",{type:"number",defaultValue:480,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Upload Size (MB)"}),s.jsx("input",{type:"number",defaultValue:10,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Rate Limit (requests/minute)"}),s.jsx("input",{type:"number",defaultValue:100,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Save Configuration"})})]})]});case"security":return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Security Settings"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Two-Factor Authentication"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Require 2FA for all admin accounts"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"IP Whitelist"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Restrict admin access by IP address"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Audit Logging"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Log all administrative actions"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",defaultChecked:!0,className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Security Events"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsx(m,{className:"h-5 w-5 text-green-500"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-green-800",children:"System scan completed"}),s.jsx("p",{className:"text-xs text-green-600",children:"No vulnerabilities detected - 2 hours ago"})]})]}),s.jsxs("div",{className:"flex items-center p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[s.jsx(l,{className:"h-5 w-5 text-yellow-500"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Failed login attempt"}),s.jsx("p",{className:"text-xs text-yellow-600",children:"IP: 192.168.1.100 - 4 hours ago"})]})]})]})]})]});case"logs":return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"System Logs"}),s.jsx("button",{onClick:k,className:"bg-blue-600 text-white px-3 py-1.5 rounded text-sm hover:bg-blue-700",children:"Refresh"})]}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Time"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Level"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Message"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Service"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:x.map((e,t)=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-3 text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()}),s.jsx("td",{className:"px-6 py-3",children:s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium "+("error"===e.level?"bg-red-100 text-red-800":"warn"===e.level?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:e.level})}),s.jsx("td",{className:"px-6 py-3 text-sm text-gray-900",children:e.message}),s.jsx("td",{className:"px-6 py-3 text-sm text-gray-500",children:e.service})]},t))})]})})]})});case"monitoring":return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"CPU Usage"}),s.jsx("div",{className:"mt-2 flex items-baseline",children:s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"32%"})}),s.jsx("div",{className:"mt-4 w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"32%"}})})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Memory Usage"}),s.jsx("div",{className:"mt-2 flex items-baseline",children:s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"256MB"})}),s.jsx("div",{className:"mt-4 w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"45%"}})})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Active Users"}),s.jsx("div",{className:"mt-2 flex items-baseline",children:s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"12"})})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"API Requests/min"}),s.jsx("div",{className:"mt-2 flex items-baseline",children:s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"847"})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Service Status"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(m,{className:"h-5 w-5 text-green-500"}),s.jsx("span",{className:"ml-2 font-medium text-green-800",children:"Database"})]}),s.jsx("span",{className:"text-green-600 text-sm",children:"Connected"})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(m,{className:"h-5 w-5 text-green-500"}),s.jsx("span",{className:"ml-2 font-medium text-green-800",children:"API Server"})]}),s.jsx("span",{className:"text-green-600 text-sm",children:"Running"})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(l,{className:"h-5 w-5 text-yellow-500"}),s.jsx("span",{className:"ml-2 font-medium text-yellow-800",children:"MCP Server"})]}),s.jsx("span",{className:"text-yellow-600 text-sm",children:"Connecting"})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 border border-red-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(p,{className:"h-5 w-5 text-red-500"}),s.jsx("span",{className:"ml-2 font-medium text-red-800",children:"Email Service"})]}),s.jsx("span",{className:"text-red-600 text-sm",children:"Disconnected"})]})]})]})]})}})()]})};function R(){const{getToken:t,isLoaded:c}=r(),{user:m,isLoaded:x}=i(),[u,p]=e.useState([]),[y,b]=e.useState([]),[f,N]=e.useState(!0),[j,S]=e.useState(null),[E,A]=e.useState(""),[R,T]=e.useState("user"),[O,k]=e.useState(!1),M=m?.publicMetadata?.role,P=function(e){switch(e){case v.SUPER_ADMIN:return"full";case v.SYSTEM_ADMIN:return"system";case v.USER_ADMIN:return"users";default:return"none"}}(M),[D,C]=e.useState("users"===P?"user-admin":"system"===P?"system-admin":"user-admin"),U=(()=>{const e=[];return"users"!==P&&"full"!==P||e.push({id:"user-admin",name:"User Administration",icon:d,description:"Manage users, roles, and permissions"}),"system"!==P&&"full"!==P||e.push({id:"system-admin",name:"System Administration",icon:g,description:"System settings, APIs, and security"}),"system"!==P&&"full"!==P||e.push({id:"api-keys",name:"API Management",icon:h,description:"Manage external API keys and integrations"}),e})();e.useEffect(()=>{c&&x&&m&&(Y(),L())},[c,x,m]);const Y=async()=>{try{const e=await t();if(!e)return void S("Authentication token not available");const s="https://sentia-manufacturing-production.onrender.com/api",a=await n.get(`${s}/admin/users`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});p(a.data.users||[]),S(null)}catch(e){a.error("Error fetching users:",e),S(e.response?.data?.message||"Failed to fetch users")}},L=async()=>{try{const e=await t();if(!e)return void a.warn("No token available for fetching invitations");const s="https://sentia-manufacturing-production.onrender.com/api",r=await n.get(`${s}/admin/invitations`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});b(r.data.invitations||[])}catch(e){a.error("Error fetching invitations:",e),404!==e.response?.status&&S(e.response?.data?.message||"Failed to fetch invitations")}finally{N(!1)}};return c&&x?m?function(e){return[v.SUPER_ADMIN,v.SYSTEM_ADMIN,v.USER_ADMIN].includes(e)}(M)?0===U.length?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(l,{className:"h-8 w-8 text-yellow-500"}),s.jsx("h2",{className:"ml-3 text-lg font-semibold text-gray-900",children:"No Admin Access"})]}),s.jsx("p",{className:"text-gray-600",children:"Your administrator role does not have access to any admin sections. Please contact a Super Admin for assistance."})]})}):f?s.jsx("div",{className:"admin-loading",children:s.jsx("div",{className:"spinner",children:"Loading admin panel..."})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white shadow",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"py-6",children:s.jsx("div",{className:"md:flex md:items-center md:justify-between",children:s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h1",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:"Enterprise Admin Portal"}),s.jsxs("div",{className:"mt-1 flex flex-col sm:flex-row sm:flex-wrap sm:mt-0 sm:space-x-6",children:[s.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[s.jsx(o,{className:"flex-shrink-0 mr-1.5 h-4 w-4"}),"full"===P&&"Super Administrator","system"===P&&"System Administrator","users"===P&&"User Administrator"]}),s.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[s.jsx(d,{className:"flex-shrink-0 mr-1.5 h-4 w-4"}),m?.firstName," ",m?.lastName]})]})]})})})})}),U.length>1&&s.jsx("div",{className:"bg-white border-b border-gray-200",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("nav",{className:"flex space-x-8",children:U.map(e=>{const t=e.icon;return s.jsxs("button",{onClick:()=>C(e.id),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap "+(D===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[s.jsx(t,{className:"h-5 w-5"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{children:e.name}),s.jsx("div",{className:"text-xs text-gray-400",children:e.description})]})]},e.id)})})})}),s.jsx("div",{className:"max-w-7xl mx-auto",children:(()=>{switch(D){case"user-admin":default:return s.jsx(w,{});case"system-admin":return s.jsx(_,{});case"api-keys":return s.jsx(I,{})}})()})]}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(l,{className:"h-8 w-8 text-red-500"}),s.jsx("h2",{className:"ml-3 text-lg font-semibold text-gray-900",children:"Access Denied"})]}),s.jsx("p",{className:"text-gray-600 mb-4",children:"You do not have administrator privileges to access this panel."}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Current Role:"})," ",M||"Not assigned",s.jsx("br",{}),s.jsx("strong",{children:"Required:"})," User Admin, System Admin, or Super Admin"]})})]})}):s.jsxs("div",{className:"admin-error",children:[s.jsx("h2",{children:"Authentication Required"}),s.jsx("p",{children:"Please sign in to access the admin panel."})]}):s.jsx("div",{className:"admin-loading",children:s.jsx("div",{className:"spinner",children:"Loading authentication..."})})}export{R as default};
