const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/StockLevelsChart-BVkmBfzv.js","assets/vendor-C1LNgw1J.js","assets/charts-1s3mMhcR.js"])))=>i.map(i=>d[i]);
import{r as t,ab as e,b1 as S}from"./vendor-C1LNgw1J.js";import{C as l,a as c,b as d,c as n,d as i,B as h}from"./index-CvYnGs3W.js";import{s as j}from"./stockLevelsApi-BXsaKH3j.js";import"./data-layer-rESbPKUZ.js";import"./radix-CSh4aNe1.js";import"./router-BEPb3H3e.js";import"./DashboardEnterprise-Crr943-E.js";const N=t.lazy(()=>S(()=>import("./StockLevelsChart-BVkmBfzv.js"),__vite__mapDeps([0,1,2]))),_=()=>{const[a,f]=t.useState([]),[o,k]=t.useState(null),[v,x]=t.useState(!0),[u,m]=t.useState(null);t.useEffect(()=>{(async()=>{try{x(!0),m(null);const[r,p]=await Promise.all([j.getGABAStockLevels(),j.getStockSummary()]);f(r),k(p)}catch(r){console.error("Failed to fetch stock data:",r),m("Failed to load stock levels")}finally{x(!1)}})()},[]);const b=()=>{if(!o)return null;const s=a.filter(r=>r.currentStock<=r.reorderLevel);return e.jsxs("div",{className:"flex items-center space-x-2",children:[s.length>0&&e.jsxs(h,{className:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:[s.length," Need Reorder"]}),e.jsxs(h,{className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:[o.totalProducts," Products"]})]})};return v?e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(d,{children:"Current Stock Levels"}),e.jsx(n,{children:"Loading GABA product inventory..."})]}),e.jsx(i,{className:"h-64",children:e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})]}):u?e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(d,{children:"Current Stock Levels"}),e.jsx(n,{children:"Unable to load stock data"})]}),e.jsx(i,{className:"h-64",children:e.jsx("div",{className:"flex items-center justify-center h-full text-red-500",children:e.jsx("p",{children:u})})})]}):e.jsxs(l,{children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Current Stock Levels"}),e.jsx(n,{children:"GABA product inventory with reorder indicators"})]}),b()]})}),e.jsxs(i,{className:"h-64",children:[e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}),children:e.jsx(N,{data:a})}),e.jsxs("div",{className:"mt-4 flex justify-between items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("div",{className:"flex space-x-4",children:a.map(s=>e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.currentStock<=s.reorderLevel?"#f59e0b":"#10b981"}}),e.jsx("span",{className:"text-xs",children:s.product})]},s.sku))}),e.jsxs("div",{className:"text-xs",children:["Last updated: ",new Date().toLocaleTimeString()]})]})]})]})};export{_ as default};
