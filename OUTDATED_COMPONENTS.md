# Outdated Components Requiring Update

These files still ship stub implementations or mismatched module patterns. They should be updated (rather than removed) to align with the current BMAD architecture.

| Path                                                                              | Current Issue                                                                                                                                         | Evidence                                                                                                                                   | Recommended Action                                                                                                                 |
| --------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------- |
| `server/routes/index.js` & `server/routes/api.js`                                 | `/api` namespace only returns HTTP 410 “Legacy API endpoints disabled”, so any consumer that still calls these routes gets dead responses.            | `server/routes/api.js` lines 12-22 show every handler invoking `res.status(410).json(deprecatedMessage)`.                                  | Replace the placeholder router with the active service routes (financial, inventory, SSE) or retire the `/api` namespace entirely. |
| `server/api/dashboard.js`                                                         | Entire endpoint returns synthetic KPI data generated in-process with `TODO` comments about “replace with real data”.                                  | `Select-String -Path server/api/dashboard.js -Pattern "TODO"` highlights the inline mock generation.                                       | Hook the handler up to Prisma/forecast services so production data drives the dashboard.                                           |
| `server/api/business-intelligence.js`                                             | Ships hard-coded “AI insights” instead of calling the live ML pipeline.                                                                               | `Select-String -Path server/api/business-intelligence.js -Pattern "In production"` shows the comment and the static array.                 | Refactor to call the model registry (or the new SSE-driven insight service) and drop the stub payload.                             |
| `server/services/finance/ApprovalEngine.js` (and peer modules in the same folder) | Still written as CommonJS (`const logger = require(...)`) while the server runs in ESM mode. Requires a non-existent `../../utils/logger` CJS export. | `Get-Content server/services/finance/ApprovalEngine.js -Head 5` shows the `require` call; only `server/utils/logger.js` (ESM) exists.      | Convert these services to ESM imports or add a real CJS shim so they load at runtime.                                              |
| `test-server.js`                                                                  | Only exposes a `/health` endpoint; legacy tests expect `/api/inventory/levels` and `/api/inventory/optimize`.                                         | `Get-Content test-server.js` shows the minimal express app.                                                                                | Either delete this harness or expand it to mount the production routers so integration tests can use real data.                    |
| `docs/` (selected ops playbooks referencing `scripts/health-monitor.ps1`)         | Multiple operational guides still point to scripts that no longer exist in the repo.                                                                  | `rg "health-monitor.ps1"` returns references in `INCIDENT_RESPONSE_PLAYBOOK.md`, `MCP_TROUBLESHOOTING.md`, etc., but the script is absent. | Update the documentation to reflect the current monitoring stack (or restore the referenced scripts).                              |
