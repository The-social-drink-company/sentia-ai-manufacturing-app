{
  "build": {
    "builder": "nixpacks",
    "buildCommand": "npm ci --only=production && npm run build"
  },
  "deploy": {
    "startCommand": "node server.js",
    "healthcheckPath": "/api/health",
    "healthcheckTimeout": 300,
    "restartPolicyType": "on_failure",
    "restartPolicyMaxRetries": 3
  },
  "environments": {
    "development": {
      "variables": {
        "NODE_ENV": "development",
        "RAILWAY_ENVIRONMENT": "development",
        "VITE_ENVIRONMENT": "development",
        "VITE_APP_TITLE": "Sentia Manufacturing Dashboard",
        "VITE_APP_VERSION": "2.0.0",
        "VITE_API_BASE_URL": "https://sentia-manufacturing-dashboard-development.up.railway.app/api",
        "VITE_CLERK_PUBLISHABLE_KEY": "pk_test_Y2hhbXBpb24tYnVsbGRvZy05Mi5jbGVyay5hY2NvdW50cy5kZXYk",
        "CLERK_SECRET_KEY": "sk_test_EP6iF7prGbq73CscUPCOW8PAKol4pPaBG5iYdsDodq",
        "VITE_USE_AUTH_BYPASS": "false",
        "DATABASE_URL": "postgresql://neondb_owner:npg_2wXVD9gdintm@ep-aged-dust-abpyip0r-pooler.eu-west-2.aws.neon.tech/neondb?sslmode=require&channel_binding=require",
        "PORT": 5002,
        "CORS_ORIGINS": "https://sentia-manufacturing-dashboard-development.up.railway.app,http://localhost:3000,http://localhost:3001,http://localhost:3002",
        "OPENAI_API_KEY": "sk-proj-wFWxY-r7gKdvIl-vQ2bAjQ8wd8jOqYHPNxKZ2KgRYJh5LXsMpS5V-H7LfVY3BlbkFJKx8K8L7v4DlGfJN3yKz9M",
        "MCP_SERVER_PORT": 6003,
        "MCP_SERVER_HOST": "localhost",
        "REDIS_URL": "redis://localhost:6379",
        "VITE_ENABLE_DEBUG": "true",
        "VITE_ENABLE_HOT_RELOAD": "true",
        "VITE_ENABLE_SOURCE_MAPS": "true",
        "VITE_ERROR_REPORTING_LEVEL": "verbose",
        "VITE_ENABLE_CSP": "false",
        "VITE_ENABLE_HTTPS_ONLY": "false",
        "VITE_ENABLE_COMPRESSION": "true",
        "VITE_ENABLE_CACHING": "false"
      },
      "domains": [
        "sentia-manufacturing-dashboard-development.up.railway.app"
      ],
      "serviceSettings": {
        "autoscaling": false,
        "instanceCount": 1,
        "memoryLimit": "512MB",
        "cpuLimit": "500m"
      }
    },
    "testing": {
      "variables": {
        "NODE_ENV": "test",
        "RAILWAY_ENVIRONMENT": "testing",
        "VITE_ENVIRONMENT": "testing",
        "VITE_APP_TITLE": "Sentia Manufacturing Dashboard",
        "VITE_APP_VERSION": "2.0.0",
        "VITE_API_BASE_URL": "https://sentia-manufacturing-dashboard-testing.up.railway.app/api",
        "VITE_CLERK_PUBLISHABLE_KEY": "pk_test_Y2hhbXBpb24tYnVsbGRvZy05Mi5jbGVyay5hY2NvdW50cy5kZXYk",
        "CLERK_SECRET_KEY": "sk_test_EP6iF7prGbq73CscUPCOW8PAKol4pPaBG5iYdsDodq",
        "VITE_USE_AUTH_BYPASS": "false",
        "DATABASE_URL": "postgresql://neondb_owner:npg_2wXVD9gdintm@ep-broad-resonance-ablmx6yo-pooler.eu-west-2.aws.neon.tech/neondb?sslmode=require&channel_binding=require",
        "PORT": 5002,
        "CORS_ORIGINS": "https://sentia-manufacturing-dashboard-testing.up.railway.app,http://localhost:3000,http://localhost:3001,http://localhost:3002",
        "OPENAI_API_KEY": "sk-proj-wFWxY-r7gKdvIl-vQ2bAjQ8wd8jOqYHPNxKZ2KgRYJh5LXsMpS5V-H7LfVY3BlbkFJKx8K8L7v4DlGfJN3yKz9M",
        "MCP_SERVER_PORT": 6003,
        "MCP_SERVER_HOST": "localhost",
        "REDIS_URL": "redis://localhost:6379",
        "VITE_ENABLE_DEBUG": "false",
        "VITE_ENABLE_HOT_RELOAD": "false",
        "VITE_ENABLE_SOURCE_MAPS": "true",
        "VITE_ERROR_REPORTING_LEVEL": "normal",
        "VITE_ENABLE_CSP": "false",
        "VITE_ENABLE_HTTPS_ONLY": "false",
        "VITE_ENABLE_COMPRESSION": "true",
        "VITE_ENABLE_CACHING": "true"
      },
      "domains": [
        "sentia-manufacturing-dashboard-testing.up.railway.app"
      ],
      "serviceSettings": {
        "autoscaling": false,
        "instanceCount": 1,
        "memoryLimit": "512MB",
        "cpuLimit": "500m"
      }
    },
    "production": {
      "variables": {
        "NODE_ENV": "production",
        "RAILWAY_ENVIRONMENT": "production",
        "VITE_ENVIRONMENT": "production",
        "VITE_APP_TITLE": "Sentia Manufacturing Dashboard",
        "VITE_APP_VERSION": "2.0.0",
        "VITE_API_BASE_URL": "https://sentia-manufacturing-dashboard-production.up.railway.app/api",
        "VITE_CLERK_PUBLISHABLE_KEY": "pk_test_Y2hhbXBpb24tYnVsbGRvZy05Mi5jbGVyay5hY2NvdW50cy5kZXYk",
        "CLERK_SECRET_KEY": "sk_test_EP6iF7prGbq73CscUPCOW8PAKol4pPaBG5iYdsDodq",
        "VITE_USE_AUTH_BYPASS": "false",
        "DATABASE_URL": "postgresql://neondb_owner:npg_2wXVD9gdintm@ep-broad-resonance-ablmx6yo-pooler.eu-west-2.aws.neon.tech/neondb?sslmode=require&channel_binding=require",
        "PORT": 5002,
        "CORS_ORIGINS": "https://sentia-manufacturing-dashboard-production.up.railway.app,https://sentiaprod.financeflo.ai,http://localhost:3000,http://localhost:3001,http://localhost:3002",
        "OPENAI_API_KEY": "sk-proj-wFWxY-r7gKdvIl-vQ2bAjQ8wd8jOqYHPNxKZ2KgRYJh5LXsMpS5V-H7LfVY3BlbkFJKx8K8L7v4DlGfJN3yKz9M",
        "MCP_SERVER_PORT": 6003,
        "MCP_SERVER_HOST": "localhost",
        "REDIS_URL": "redis://localhost:6379",
        "VITE_ENABLE_DEBUG": "false",
        "VITE_ENABLE_HOT_RELOAD": "false",
        "VITE_ENABLE_SOURCE_MAPS": "false",
        "VITE_ERROR_REPORTING_LEVEL": "minimal",
        "VITE_ENABLE_CSP": "true",
        "VITE_ENABLE_HTTPS_ONLY": "true",
        "VITE_ENABLE_COMPRESSION": "true",
        "VITE_ENABLE_CACHING": "true"
      },
      "domains": [
        "sentia-manufacturing-dashboard-production.up.railway.app",
        "sentiaprod.financeflo.ai"
      ],
      "serviceSettings": {
        "autoscaling": true,
        "instanceCount": {
          "min": 2,
          "max": 5
        },
        "memoryLimit": "1GB",
        "cpuLimit": "1000m"
      }
    }
  }
}